import{c as ne,u as pe,i as fe,r as i,j as e,N as te,J as o,T as xe,b as Q,O as ee,p as vt,q as Y,k as be,Q as oe,n as Nt,h as we,U as ze,X as nt,Z as Me,t as Ve,C as re,f as Ye,V as Yt,W as Se,Y as qt,o as le,m as it,z as kt,D as Ce,L as St,d as Gt,B as Jt,$ as dt,a0 as at,a1 as Qt,a2 as ie}from"./index-fc28AEb_.js";import{C as ve}from"./circle-x-lw643Gl1.js";import{C as qe}from"./chevron-right-DPFvOPWB.js";import{S as He}from"./shield-D-9XxL1Y.js";import{S as Ae}from"./star-Dm557P0u.js";import{C as lt}from"./chevron-down-DxTIAk-5.js";import{S as ot}from"./send-B_Vd5b5F.js";import{P as Ct}from"./play-BHu29otI.js";import{E as Kt}from"./eye-DDn_K82r.js";import{C as mt}from"./circle-alert-CZgYvhCl.js";import{U as Xt}from"./upload-D0J8wRhc.js";import{T as Zt}from"./trash-2-CfKVPVbE.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],ta=ne("arrow-down-right",ea);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],sa=ne("arrow-up-right",aa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ge=ne("crown",ra);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ia=ne("database",na);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]],oa=ne("door-open",la);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],da=ne("eye-off",ca);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ae=ne("loader-circle",ma);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Ie=ne("medal",xa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ga=ne("rotate-ccw",ua);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],At=ne("trending-down",ha);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Et=ne("triangle-alert",pa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ba=ne("wallet",fa),ya=()=>{const t=pe(),{user:a}=fe(),[s,r]=i.useState([]),[n,x]=i.useState(!0),[h,g]=i.useState("all"),[b,w]=i.useState({totalBattles:0,wins:0,losses:0,winRate:0,totalEarnings:0});i.useEffect(()=>{(async()=>{if(!a){x(!1);return}try{const c=(await Y(`/battles/user/${a.id}`)).battles||[];console.log("User battles:",c.length),console.log("Current user ID:",a.id),console.log("User participated in:",c.length,"battles");const C=c.filter(L=>L.status==="completed"||L.status==="forfeited");C.sort((L,d)=>{const T=f=>f?typeof f=="object"&&"toDate"in f&&f.toDate?f.toDate().getTime():f instanceof Date?f.getTime():typeof f=="number"?f:0:0;return T(d.createdAt)-T(L.createdAt)}),console.log("Completed battles:",C.length),C.length>0&&console.log("Sample battle:",C[0]),r(C);let S=0,O=0,R=0;c.forEach(L=>{L.winnerId===a.id?(S++,R+=L.prize||0):L.winnerId&&L.winnerId!==a.id&&(O++,R-=L.entryFee||0)}),w({totalBattles:c.length,wins:S,losses:O,winRate:c.length>0?Math.round(S/c.length*100):0,totalEarnings:R})}catch(j){console.error("Error fetching battle history:",j)}finally{x(!1)}})()},[a]);const k=()=>h==="all"?s:h==="won"?s.filter(u=>u.winnerId===a?.id):h==="lost"?s.filter(u=>u.winnerId&&u.winnerId!==a?.id):s,A=u=>{if(!u)return"N/A";let j;return typeof u=="object"&&"toDate"in u&&u.toDate?j=u.toDate():u instanceof Date?j=u:j=new Date(u),new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(j)},y=u=>u.participants?.find(c=>{const C=c;return C.odId!==a?.id&&C.userId!==a?.id}),B=u=>u.participants?.find(c=>{const C=c;return C.odId===a?.id||C.userId===a?.id});return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ae,{className:"w-12 h-12 text-[#00ADB5] animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading battle history..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-cyan-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:[e.jsxs("header",{className:"relative overflow-hidden py-8 md:py-12",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent"}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-white/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 relative z-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:e.jsx(te,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:"Battle History"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Your past matches and performance"})]})]})}),e.jsxs("button",{onClick:()=>t("/dashboard/codearena/battle"),className:"px-5 py-2.5 bg-white text-[#00ADB5] font-semibold rounded-xl hover:bg-white/90 transition-all shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),"New Battle"]})]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 p-4 hover:shadow-xl transition-all",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:e.jsx(xe,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Battles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.totalBattles})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 rounded-2xl shadow-lg border border-green-100 dark:border-green-800 p-4 hover:shadow-xl transition-all",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-100 dark:bg-green-800/50 flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-green-600 dark:text-green-400"})})}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mb-1",children:"Victories"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:b.wins})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/30 dark:to-orange-900/30 rounded-2xl shadow-lg border border-red-100 dark:border-red-800 p-4 hover:shadow-xl transition-all",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-100 dark:bg-red-800/50 flex items-center justify-center",children:e.jsx(ve,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mb-1",children:"Defeats"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:b.losses})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-teal-50 dark:from-cyan-900/30 dark:to-teal-900/30 rounded-2xl shadow-lg border border-cyan-100 dark:border-cyan-800 p-4 hover:shadow-xl transition-all",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#00ADB5]/20 flex items-center justify-center",children:e.jsx(ge,{className:"w-5 h-5 text-[#00ADB5]"})})}),e.jsx("p",{className:"text-xs text-[#00ADB5] mb-1",children:"Win Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-[#00ADB5]",children:[b.winRate,"%"]})]}),e.jsxs("div",{className:`rounded-2xl shadow-lg border p-4 hover:shadow-xl transition-all ${b.totalEarnings>=0?"bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-900/30 dark:to-yellow-900/30 border-amber-100 dark:border-amber-800":"bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700"}`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${b.totalEarnings>=0?"bg-amber-100 dark:bg-amber-800/50":"bg-gray-100 dark:bg-gray-700"}`,children:e.jsx(ee,{className:`w-5 h-5 ${b.totalEarnings>=0?"text-amber-600 dark:text-amber-400":"text-gray-600"}`})})}),e.jsx("p",{className:`text-xs mb-1 ${b.totalEarnings>=0?"text-amber-600 dark:text-amber-400":"text-gray-500"}`,children:"Total Earnings"}),e.jsxs("p",{className:`text-2xl font-bold ${b.totalEarnings>=0?"text-amber-600 dark:text-amber-400":"text-red-600"}`,children:[b.totalEarnings>=0?"+":"",b.totalEarnings]})]})]}),e.jsx(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex items-center gap-2 bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 p-1.5 w-fit",children:[{id:"all",label:"All Battles",count:s.length},{id:"won",label:"Victories",count:s.filter(u=>u.winnerId===a?.id).length},{id:"lost",label:"Defeats",count:s.filter(u=>u.winnerId&&u.winnerId!==a?.id).length}].map(u=>e.jsxs("button",{onClick:()=>g(u.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${h===u.id?"bg-gradient-to-r from-[#00ADB5] to-[#00d4ff] text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[u.label,e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${h===u.id?"bg-white/20":"bg-gray-200 dark:bg-gray-600"}`,children:u.count})]},u.id))}),e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"space-y-3",children:k().length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 dark:bg-gray-700 mx-auto mb-4 flex items-center justify-center",children:e.jsx(te,{className:"w-10 h-10 text-gray-400 dark:text-gray-500"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-200 mb-2",children:"No battles found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:h==="all"?"You haven't participated in any battles yet. Start your first battle and prove your coding skills!":h==="won"?"No victories yet. Keep practicing and you'll get there!":"No defeats recorded. You're doing great!"}),e.jsxs("button",{onClick:()=>t("/dashboard/codearena/battle"),className:"px-6 py-3 bg-gradient-to-r from-[#00ADB5] to-[#00d4ff] text-white font-semibold rounded-xl hover:shadow-lg transition-all transform hover:scale-105 inline-flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),"Start Your First Battle"]})]}):k().map((u,j)=>{const c=u.winnerId===a?.id,C=y(u),S=B(u),O=u.status==="forfeited"&&u.forfeitedBy!==a?.id,R=u.status==="forfeited"&&u.forfeitedBy===a?.id;return e.jsxs(o.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:j*.05},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>t(`/dashboard/codearena/battle/results/${u.id}`),className:`bg-white dark:bg-gray-800 rounded-2xl shadow-md border-2 p-4 cursor-pointer hover:shadow-xl transition-all group ${c?"border-green-200 dark:border-green-700/50 hover:border-green-400 dark:hover:border-green-600":"border-red-200 dark:border-red-700/50 hover:border-red-400 dark:hover:border-red-600"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center shadow-lg ${c?"bg-gradient-to-br from-green-400 to-emerald-500":"bg-gradient-to-br from-red-400 to-orange-500"}`,children:c?e.jsx(Q,{className:"w-7 h-7 text-white"}):e.jsx(ve,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-lg font-bold ${c?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:c?"ðŸ† Victory":"ðŸ’” Defeat"}),O&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-400 rounded-full font-medium",children:"Opponent Left"}),R&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full font-medium",children:"Forfeited"})]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:["vs ",e.jsx("span",{className:"text-gray-900 dark:text-white",children:C?.odName||"Unknown Player"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[e.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(vt,{className:"w-3.5 h-3.5"}),A(u.endTime||u.createdAt)]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium capitalize ${u.difficulty==="easy"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-400":u.difficulty==="medium"?"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-400"}`,children:u.difficulty})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[S?.submissionResult&&e.jsxs("div",{className:"text-center hidden md:block bg-gray-50 dark:bg-gray-700/50 px-4 py-2 rounded-xl",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:"Tests Passed"}),e.jsxs("p",{className:`text-lg font-bold ${S.submissionResult.passed?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400"}`,children:[S.submissionResult.passedCount,"/",S.submissionResult.totalCount]})]}),e.jsxs("div",{className:`text-center px-4 py-2 rounded-xl ${c?"bg-green-50 dark:bg-green-900/30":"bg-red-50 dark:bg-red-900/30"}`,children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:"Coins"}),e.jsxs("p",{className:`text-lg font-bold flex items-center justify-center gap-1 ${c?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[e.jsx(ee,{className:"w-4 h-4"}),c?"+":"-",c?u.prize:u.entryFee]})]}),e.jsx("div",{className:"hidden md:flex w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 items-center justify-center group-hover:bg-[#00ADB5] group-hover:text-white transition-all",children:e.jsx(qe,{className:"w-5 h-5 text-gray-400 group-hover:text-white group-hover:translate-x-0.5 transition-all"})})]})]}),u.winReason&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Result: "}),u.winReason]})})]},u.id)})})]})]})},Tt=async t=>{try{const a=await Y("/battles/create",{method:"POST",body:JSON.stringify(t)});return console.log(`Created battle ${a.battleId}`),a.battleId}catch(a){throw console.error("Error creating random battle:",a),a}},ja=async(t,a)=>{try{return(await Y(`/battles/find?difficulty=${t}&entryFee=${a}`)).battle?._id||null}catch(s){return console.error("Error finding available battle:",s),null}},wa=async t=>{try{const{difficulty:a,entryFee:s}=t,r=await ja(a,s);if(r)return r;const n=await Tt(t);if(!n)throw new Error("Failed to create battle");return n}catch(a){throw console.error("Error joining or creating battle:",a),a}},va=async(t,a)=>Tt(t),Na=[{id:"easy",label:"Easy",color:"bg-green-500",rating:"800-1200",time:15},{id:"medium",label:"Medium",color:"bg-yellow-500",rating:"1200-1600",time:20},{id:"hard",label:"Hard",color:"bg-red-500",rating:"1600-2000",time:30}],xt=[{fee:5,prize:9},{fee:10,prize:18},{fee:20,prize:36},{fee:50,prize:90}],ka=({wallet:t})=>{const a=pe(),{user:s}=fe(),{userprofile:r,deductCoins:n}=be(),[x,h]=i.useState("medium"),[g,b]=i.useState(xt[1]),[w,k]=i.useState(!1),[A,y]=i.useState(!1),[B,u]=i.useState([]),[j,c]=i.useState(null),[C,S]=i.useState(0);i.useEffect(()=>{if(!s)return;const m=async()=>{try{const M=((await Y(`/battles?status=waiting&difficulty=${x}`)).battles||[]).filter(P=>P.creatorId!==s.id);u(M)}catch(_){console.error("Error fetching waiting battles:",_)}};m();const E=setInterval(m,5e3);return()=>clearInterval(E)},[s,x]),i.useEffect(()=>{if(!j||!w)return;const m=async()=>{try{const _=await Y(`/battles/${j}`);_&&(_.status==="countdown"||_.status==="active"||_.participants&&_.participants.length>=2)&&(console.log("Opponent found! Navigating to battle..."),a(`/dashboard/codearena/battle/${j}`))}catch(_){console.error("Error polling battle status:",_)}};m();const E=setInterval(m,2e3);return()=>clearInterval(E)},[j,w,a]),i.useEffect(()=>{if(!j||!w)return;const m=async()=>{try{const E=localStorage.getItem("token");navigator.sendBeacon(`https://nextstepbackend-qhxw.onrender.com/api/battles/${j}/cancel`,JSON.stringify({token:E}))}catch(E){console.error("Error cancelling battle:",E)}};return window.addEventListener("beforeunload",m),()=>{window.removeEventListener("beforeunload",m),j&&w&&Y(`/battles/${j}`,{method:"DELETE"}).catch(()=>{})}},[j,w]),i.useEffect(()=>{let m;return w&&(m=setInterval(()=>{S(E=>E+1)},1e3)),()=>clearInterval(m)},[w]);const O=async()=>{if(console.log("handleFindMatch called",{user:s,wallet:t,selectedEntry:g}),!s){alert("Please log in to find a match");return}if(!t){alert("Wallet not loaded. Please wait or refresh the page.");return}if((t.coins||0)<g.fee){alert(`Insufficient coins! You have ${t.coins||0} coins but need ${g.fee} coins.`);return}k(!0),S(0);try{const m=B.find(E=>E.difficulty===x&&E.entryFee===g.fee&&E.creatorId!==s.id);await n(s.id,g.fee,"Battle entry fee"),m?await L(m):await R()}catch(m){console.error("Error finding match:",m),alert("Failed to find match. Please try again."),k(!1)}},R=async()=>{try{if(y(!0),!t){alert("Wallet not initialized. Please refresh the page."),k(!1);return}if((t.coins||0)<g.fee){alert(`Insufficient coins! You have ${t.coins||0} coins but need ${g.fee} coins.`),k(!1);return}const m={difficulty:x,entryFee:g.fee,userId:s.id,userName:r?.name||s.email?.split("@")[0]||"User",userAvatar:r?.profilePic||"",rating:t?.rating||1e3};console.log("Creating battle with request:",m);const E=await wa(m);console.log("Battle created with ID:",E),c(E)}catch(m){console.error("Error creating battle:",m),alert(m instanceof Error?m.message:"Failed to create battle"),k(!1)}finally{y(!1)}},L=async m=>{try{if(!t){alert("Wallet not initialized. Please refresh the page."),k(!1);return}if((t.coins||0)<m.entryFee){alert(`Insufficient coins! You have ${t.coins||0} coins but need ${m.entryFee} coins.`),k(!1);return}console.log("Joining battle:",m.id),await Y(`/battles/${m.id}/join`,{method:"POST",body:JSON.stringify({userId:s.id,userName:r?.name||s.email?.split("@")[0]||"User",userAvatar:r?.profilePic||"",rating:t?.rating||1e3})}),a(`/dashboard/codearena/battle/${m.id}`)}catch(E){console.error("Error joining battle:",E),alert(E instanceof Error?E.message:"Failed to join battle"),k(!1)}},d=async()=>{if(j)try{await n(s.id,-g.fee,"Battle cancelled - refund"),await Y(`/battles/${j}`,{method:"DELETE"})}catch(m){console.error("Error cancelling battle:",m)}k(!1),c(null),S(0)},T=m=>{const E=Math.floor(m/60),_=m%60;return`${E}:${_.toString().padStart(2,"0")}`},f=t?.coins??0,I=f>=g.fee,v=!t||!I||w||A;return console.log("BattleLobby render:",{wallet:t,walletCoins:f,selectedEntry:g,hasEnoughCoins:I,isButtonDisabled:v}),e.jsxs("div",{className:"space-y-6 pb-20 md:pb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(te,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Battle Arena"}),e.jsx("p",{className:"text-gray-500 dark:text-white text-xs",children:"Compete against other coders in real-time"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-amber-50 dark:bg-amber-900/30 rounded-lg",children:[e.jsx(ee,{className:"w-4 h-4 text-amber-600"}),e.jsxs("span",{className:"text-amber-700 dark:text-amber-400 font-semibold text-sm",children:["Balance: ",t?.coins?.toLocaleString()||0," coins"]})]})]}),e.jsx(oe,{children:w&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(o.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-md w-full mx-4 text-center",children:[e.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-6",children:[e.jsx(o.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border-4 border-[#00ADB5]/30 dark:border-[#00ADB5]/40 border-t-blue-600"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Nt,{className:"w-8 h-8 text-[#00ADB5]"})})]}),e.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-[#00ADB5] to-purple-600 bg-clip-text text-transparent mb-2",children:"ðŸ” Finding Opponent..."}),e.jsxs("p",{className:"text-gray-600 dark:text-white mb-6 text-lg",children:["Searching for a ",e.jsx("span",{className:"font-bold text-[#00ADB5]",children:x})," battle ðŸŽ¯"]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 text-3xl font-mono bg-gradient-to-r from-[#00ADB5] to-purple-600 bg-clip-text text-transparent mb-6 font-bold",children:[e.jsx(we,{className:"w-6 h-6 text-[#00ADB5]"}),T(C)]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-gray-600 mb-8",children:[e.jsxs(o.span,{animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full",children:[e.jsx(ze,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"font-semibold text-green-700",children:[B.length," players waiting"]})]}),e.jsxs("span",{className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-100 to-yellow-100 rounded-full",children:[e.jsx(ee,{className:"w-4 h-4 text-amber-600"}),e.jsxs("span",{className:"font-semibold text-amber-700",children:["Entry: ",g.fee]})]})]}),e.jsxs(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:d,className:"flex items-center justify-center gap-2 w-full py-4 bg-gradient-to-r from-red-500 to-pink-500 text-white font-bold rounded-2xl hover:from-red-600 hover:to-pink-600 transition-all shadow-lg",children:[e.jsx(nt,{className:"w-5 h-5"}),"Cancel Battle ðŸš«"]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm mb-3",children:"Select Difficulty"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:Na.map(m=>e.jsxs(o.button,{whileHover:{scale:1.03,y:-2},whileTap:{scale:.97},onClick:()=>h(m.id),className:`p-3 rounded-xl border-2 transition-all relative overflow-hidden ${x===m.id?"border-[#00ADB5] bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 shadow-md":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:shadow-md bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-700"}`,children:[x===m.id&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/10 to-purple-400/10 rounded-xl"}),e.jsx("div",{className:`w-3 h-3 rounded-full ${m.color} mb-2 mx-auto shadow-sm`}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:m.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:m.rating}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-white mt-0.5",children:[e.jsx(we,{className:"w-3 h-3 inline mr-0.5"}),m.time,"m"]})]},m.id))}),e.jsxs("h3",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’°"})," Entry Fee & Prize"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:xt.map(m=>e.jsxs(o.button,{whileHover:{scale:t?.coins>=m.fee?1.03:1},whileTap:{scale:t?.coins>=m.fee?.97:1},onClick:()=>b(m),disabled:t?.coins<m.fee,className:`p-3 rounded-xl border-2 transition-all relative overflow-hidden ${g.fee===m.fee?"border-amber-400 bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-900/30 dark:to-yellow-900/30 shadow-md":t?.coins<m.fee?"border-gray-200 dark:border-gray-600 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 opacity-50 cursor-not-allowed":"border-gray-200 dark:border-gray-600 hover:border-amber-300 dark:hover:border-amber-600 hover:shadow-md bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-700"}`,children:[g.fee===m.fee&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-400/10 to-yellow-400/10 rounded-xl"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 text-amber-600 font-medium text-sm",children:[e.jsx(ee,{className:"w-3.5 h-3.5"}),m.fee]}),e.jsxs("div",{className:"flex items-center justify-center gap-1 text-green-600 text-xs mt-0.5",children:[e.jsx(Q,{className:"w-3 h-3"}),"Win ",m.prize]})]},m.fee))}),e.jsx(o.button,{whileHover:{scale:v?1:1.02},whileTap:{scale:v?1:.98},onClick:O,disabled:v,className:`w-full py-3 rounded-xl font-semibold text-base flex items-center justify-center gap-2 transition-all shadow-md ${v?"bg-gradient-to-r from-gray-300 to-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-[#00ADB5] via-purple-600 to-indigo-600 text-white hover:from-blue-700 hover:via-purple-700 hover:to-indigo-700 cursor-pointer"}`,children:A?e.jsxs(e.Fragment,{children:[e.jsx(o.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-4 h-4"}),"Find Match",e.jsx(qe,{className:"w-4 h-4"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2 text-xs text-green-600 dark:text-green-400",children:[e.jsx(He,{className:"w-3 h-3"}),e.jsx("span",{children:"Secure Battle System"})]}),!t&&e.jsx("p",{className:"text-center text-amber-500 text-xs mt-2",children:"Loading wallet... Please wait"}),t&&!I&&e.jsxs("p",{className:"text-center text-red-500 text-xs mt-2",children:["Need ",g.fee-f," more coins (You have ",f,")"]}),t&&I&&e.jsxs("p",{className:"text-center text-green-500 text-xs mt-2",children:["Ready to battle! (",f," coins available)"]})]}),B.length>0&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-700 shadow p-4 relative overflow-hidden",children:[e.jsxs("h3",{className:"font-bold text-sm text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg",children:e.jsx(ze,{className:"w-4 h-4 text-white"})}),"Open Battles",e.jsxs(o.span,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"text-xs bg-gradient-to-r from-green-500 to-emerald-500 text-white px-2 py-0.5 rounded-full font-semibold",children:[B.length," live"]})]}),e.jsx("div",{className:"space-y-2",children:B.map(m=>e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:m.creatorProfilePic||`https://api.dicebear.com/7.x/avataaars/svg?seed=${m.creatorId}`,alt:m.creatorName,className:"w-8 h-8 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:m.creatorName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:[m.creatorRating," â€¢ ",m.difficulty]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 text-amber-600 font-medium text-sm",children:[e.jsx(ee,{className:"w-3 h-3"}),m.entryFee]}),e.jsxs("div",{className:"text-xs text-green-600",children:["Win ",m.prize]})]}),e.jsx("button",{onClick:async()=>{t?.coins>=m.entryFee&&(await n(s.id,m.entryFee,"Battle entry fee"),await L(m))},disabled:t?.coins<m.entryFee,className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${t?.coins>=m.entryFee?"bg-[#00ADB5] text-white hover:bg-[#00ADB5]/80":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:"Join"})]})]},m.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm mb-3",children:"How Battles Work"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:[{icon:ee,title:"Pay Entry Fee",description:"Contribute coins to prize pool"},{icon:te,title:"Solve Problem",description:"Race to solve faster"},{icon:Q,title:"Winner Takes All",description:"Win the prize pool"}].map((m,E)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:"p-1.5 bg-[#00ADB5]/20 dark:bg-[#00ADB5]/20 rounded-lg",children:e.jsx(m.icon,{className:"w-4 h-4 text-[#00ADB5]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:m.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:m.description})]})]},E))})]})]})},Sa=()=>{const t=["#00ADB5","#FFD700","#FF6B6B","#4ECDC4","#45B7D1"];for(let s=0;s<100;s++){const r=document.createElement("div");r.style.cssText=`
      position: fixed;
      width: 10px;
      height: 10px;
      background: ${t[Math.floor(Math.random()*t.length)]};
      left: ${Math.random()*100}vw;
      top: -10px;
      border-radius: ${Math.random()>.5?"50%":"0"};
      pointer-events: none;
      z-index: 9999;
      animation: confetti-fall ${2+Math.random()*2}s ease-out forwards;
    `,document.body.appendChild(r),setTimeout(()=>r.remove(),4e3)}};if(typeof document<"u"&&!document.getElementById("confetti-styles")){const t=document.createElement("style");t.id="confetti-styles",t.textContent=`
    @keyframes confetti-fall {
      to {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
  `,document.head.appendChild(t)}const Ca=()=>{const{battleId:t}=Ve(),a=pe(),{user:s}=fe(),{userprofile:r}=be(),[n,x]=i.useState(null),[h,g]=i.useState(!0),[b,w]=i.useState(!1),[k,A]=i.useState(null),[y,B]=i.useState(null),[u,j]=i.useState(0),[c,C]=i.useState(!1),[S,O]=i.useState(""),[R,L]=i.useState(!1),[d,T]=i.useState(!1);i.useEffect(()=>{(async()=>{if(t)try{const m=await Y(`/battles/${t}`),E=m.battle||m;if(console.log("Battle results data:",E),!E||!E.participants){a("/dashboard/codearena");return}x(E);const _=E.participants?.find(H=>H.odId===s?.id),W=E.participants?.find(H=>H.odId!==s?.id);A(_||null),B(W||null);const M=E.winnerId===s?.id;w(M),E.status==="forfeited"&&E.forfeitedBy!==s?.id&&C(!0);let P="";if(E.winReason)P=E.winReason;else if(E.status==="forfeited")E.forfeitedBy===s?.id?P="You left the battle":P="Opponent left the battle";else if(_&&W){const H=_.submissionResult?.passedCount||0,q=W.submissionResult?.passedCount||0,U=_.submissionResult?.totalTime||1/0,X=W.submissionResult?.totalTime||1/0;M?H>q?P=`You passed more test cases (${H} vs ${q})`:H===q&&U<X?P="Same test cases passed, but you were faster!":W.hasSubmitted?P="You solved it better!":P="Opponent did not submit":q>H?P=`Opponent passed more test cases (${q} vs ${H})`:H===q&&X<U?P="Same test cases passed, but opponent was faster":_.hasSubmitted?P="Opponent solved it better":P="You did not submit in time"}O(P),j(M?Math.floor(25+Math.random()*10):-Math.floor(15+Math.random()*10)),g(!1),M&&setTimeout(()=>{Sa()},500)}catch(m){console.error("Error fetching battle results:",m),g(!1)}})()},[t,s,a]);const f=v=>{const m=Math.floor(v/60),E=v%60;return`${m}m ${E}s`},I=async()=>{if(!(!s||!y||!n||R||d)){L(!0);try{const v=n.entryFee||50,m=n.difficulty||"easy",E=await va({difficulty:m,entryFee:v,userId:s.id,userName:r?.name||"Player",userAvatar:r?.avatarUrl,rating:k?.rating||1e3},y.odId);if(E){T(!0);const W=setInterval(async()=>{try{const P=(await Y(`/battles/${E}`)).battle;P?.status==="countdown"&&P?.participants?.length===2?(clearInterval(W),a(`/dashboard/codearena/battle/${E}`)):P?.status==="rejected"&&(clearInterval(W),T(!1),alert(`${y?.odName||"Opponent"} declined the rematch request.`))}catch(M){console.error("Error polling rematch status:",M),clearInterval(W),T(!1)}},15e3);setTimeout(()=>{clearInterval(W),T(!1)},3e5)}}catch(v){console.error("Error creating rematch:",v),alert("Failed to send rematch request. Please try again."),T(!1)}finally{L(!1)}}};return h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center",children:e.jsx(o.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 py-8 px-4 relative overflow-hidden",children:[e.jsx(o.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a("/dashboard/codearena/battle"),className:"absolute top-4 right-4 z-50 w-12 h-12 bg-gray-800/80 hover:bg-gray-700 border border-gray-600 rounded-full flex items-center justify-center text-gray-400 hover:text-white transition-all shadow-lg",children:e.jsx(nt,{className:"w-6 h-6"})}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-10 left-10 w-40 h-40 bg-gradient-to-br from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-40 right-20 w-60 h-60 bg-gradient-to-br from-purple-500/15 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-20 left-20 w-32 h-32 bg-gradient-to-br from-yellow-500/20 to-transparent rounded-full blur-2xl"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[e.jsxs(o.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center mb-10 relative",children:[b?e.jsxs(e.Fragment,{children:[e.jsxs(o.div,{animate:{rotate:[0,-10,10,-10,10,0],scale:[1,1.1,1]},transition:{duration:.8,delay:.3,repeat:1/0,repeatDelay:3},className:"w-40 h-40 mx-auto mb-6 bg-gradient-to-br from-yellow-400 via-orange-400 to-amber-500 rounded-full flex items-center justify-center shadow-2xl shadow-yellow-500/50 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-300/30 to-orange-300/30 rounded-full animate-pulse"}),e.jsx(Q,{className:"w-20 h-20 text-white relative z-10"})]}),e.jsx(o.h1,{initial:{y:20},animate:{y:0},transition:{delay:.5},className:"text-6xl font-bold bg-gradient-to-r from-yellow-400 via-orange-400 to-yellow-500 bg-clip-text text-transparent mb-4",children:"ðŸ† Victory!"}),e.jsx(o.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"text-2xl text-gray-300 mb-4",children:c?"ðŸšª Your opponent left the battle!":"âœ¨ Congratulations! You won the battle! âœ¨"}),c&&e.jsx(o.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"text-lg text-yellow-400",children:"Prize coins have been awarded to you!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(o.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-36 h-36 mx-auto mb-6 bg-gradient-to-br from-gray-600 via-gray-700 to-gray-800 rounded-full flex items-center justify-center shadow-2xl shadow-gray-500/30 relative overflow-hidden",children:[e.jsx(o.div,{className:"absolute inset-0 bg-gradient-to-r from-gray-500/20 to-gray-400/20 rounded-full",animate:{opacity:[.3,.5,.3]},transition:{duration:2,repeat:1/0}}),e.jsx(Ie,{className:"w-18 h-18 text-gray-400 relative z-10"})]}),e.jsx(o.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-5xl font-bold bg-gradient-to-r from-gray-400 via-gray-500 to-gray-400 bg-clip-text text-transparent mb-4",children:"ðŸ’” Defeat"}),e.jsx(o.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-xl text-gray-300 mb-2",children:"Good effort! Keep practicing!"}),e.jsx(o.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"text-md text-cyan-400",children:"ðŸ’ª Every defeat is a step towards victory!"})]}),S&&e.jsx(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:1},className:`mt-6 px-6 py-3 rounded-xl border ${b?"bg-green-500/10 border-green-500/30 text-green-400":"bg-red-500/10 border-red-500/30 text-red-400"}`,children:e.jsxs("p",{className:"text-lg font-medium",children:["ðŸ“‹ ",S]})})]}),e.jsxs(o.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-gradient-to-br from-gray-800/60 via-gray-900/60 to-black/60 backdrop-blur-sm border border-gray-700/50 rounded-2xl p-8 mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-bl from-cyan-500/10 to-transparent rounded-full -translate-y-10 translate-x-10"}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 items-center",children:[e.jsxs(o.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4},className:"text-center",children:[e.jsx(o.div,{whileHover:{scale:1.1,rotate:5},className:`w-24 h-24 mx-auto mb-4 rounded-full flex items-center justify-center text-2xl font-bold text-white shadow-lg ${b?"bg-gradient-to-br from-yellow-400 to-amber-500 ring-4 ring-yellow-500/50 shadow-yellow-500/30":"bg-gradient-to-br from-cyan-400 to-blue-500 ring-2 ring-cyan-500/30 shadow-cyan-500/20"}`,children:r?.name?.[0]||"Y"}),e.jsx("p",{className:"text-white font-bold text-lg",children:r?.name||"You"}),e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Level ",k?.level||1]}),b&&e.jsxs(o.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,type:"spring"},className:"flex items-center justify-center gap-2 mt-2 text-yellow-400",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"ðŸ† Winner"})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(o.div,{animate:{rotateY:[0,180,360]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"text-4xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"VS"})}),e.jsxs(o.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4},className:"text-center",children:[e.jsx(o.div,{whileHover:{scale:1.1,rotate:-5},className:`w-24 h-24 mx-auto mb-4 rounded-full flex items-center justify-center text-2xl font-bold text-white shadow-lg ${b?"bg-gradient-to-br from-red-400 to-orange-500 ring-2 ring-red-500/30 shadow-red-500/20":"bg-gradient-to-br from-yellow-400 to-amber-500 ring-4 ring-yellow-500/50 shadow-yellow-500/30"}`,children:y?.odName?.[0]||"O"}),e.jsx("p",{className:"text-white font-bold text-lg",children:y?.odName||"Opponent"}),e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Level ",y?.level||1]}),!b&&e.jsxs(o.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,type:"spring"},className:"flex items-center justify-center gap-2 mt-2 text-yellow-400",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"ðŸ† Winner"})]})]})]})]}),e.jsxs(o.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"bg-gray-800/50 border border-gray-700/50 rounded-2xl p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-cyan-400"}),"Battle Stats"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-2xl font-bold text-white",children:[k?.submissionResult?.passedCount||0,"/",k?.submissionResult?.totalCount||0]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Tests Passed"})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-2xl font-bold text-white",children:[y?.submissionResult?.passedCount||0,"/",y?.submissionResult?.totalCount||0]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-2xl font-bold text-white",children:f(Math.round((k?.submissionResult?.totalTime||0)/1e3))})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Time Taken"})]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-2xl font-bold text-white",children:f(Math.round((y?.submissionResult?.totalTime||0)/1e3))})})]})]})]}),e.jsxs(o.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{className:`p-6 rounded-2xl border ${b?"bg-gradient-to-br from-yellow-500/20 to-amber-500/20 border-yellow-500/30":"bg-gray-800/50 border-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Coins Earned"}),e.jsx("p",{className:`text-3xl font-bold ${b?"text-yellow-400":"text-gray-400"}`,children:b?`+${n?.prizePool||0}`:"+0"})]}),e.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${b?"bg-yellow-500/20":"bg-gray-700/50"}`,children:e.jsx(ee,{className:`w-7 h-7 ${b?"text-yellow-400":"text-gray-500"}`})})]})}),e.jsx("div",{className:`p-6 rounded-2xl border ${u>0?"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-500/30":"bg-gradient-to-br from-red-500/20 to-orange-500/20 border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Rating Change"}),e.jsxs("p",{className:`text-3xl font-bold ${u>0?"text-green-400":"text-red-400"}`,children:[u>0?"+":"",u]})]}),e.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${u>0?"bg-green-500/20":"bg-red-500/20"}`,children:u>0?e.jsx(Ye,{className:"w-7 h-7 text-green-400"}):e.jsx(At,{className:"w-7 h-7 text-red-400"})})]})})]}),e.jsxs(o.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"bg-gray-800/50 border border-gray-700/50 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{className:"text-white font-medium",children:"Experience Gained"})]}),e.jsxs("span",{className:"text-purple-400 font-bold",children:["+",b?50:20," XP"]})]}),e.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(o.div,{initial:{width:0},animate:{width:`${b?70:45}%`},transition:{delay:.7,duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full"})}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"350/500 XP to Level Up"})]}),e.jsxs(o.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(o.button,{whileHover:d?{}:{scale:1.05,y:-2,boxShadow:"0 20px 40px rgba(239, 68, 68, 0.4)"},whileTap:d?{}:{scale:.98},onClick:I,disabled:R||d,className:`flex-1 flex items-center justify-center gap-3 py-4 px-6 text-white font-bold text-lg rounded-xl shadow-lg transition-all relative overflow-hidden group disabled:cursor-not-allowed ${d?"bg-gradient-to-r from-yellow-600 via-amber-600 to-orange-600 shadow-yellow-500/30":"bg-gradient-to-r from-red-500 via-orange-500 to-amber-500 shadow-red-500/30 hover:shadow-red-500/50"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-400/20 to-orange-400/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),R?e.jsx(ae,{className:"w-6 h-6 relative animate-spin"}):d?e.jsx(ae,{className:"w-6 h-6 relative animate-spin"}):e.jsx(te,{className:"w-6 h-6 relative"}),e.jsx("span",{className:"relative",children:R?"Sending...":d?`â³ Waiting for ${y?.odName?.split(" ")[0]||"Opponent"}...`:`ðŸ”¥ Rematch ${y?.odName?.split(" ")[0]||"Opponent"}`})]}),e.jsxs(o.button,{whileHover:{scale:1.05,y:-2,boxShadow:"0 20px 40px rgba(59, 130, 246, 0.4)"},whileTap:{scale:.98},onClick:()=>a("/dashboard/codearena/battle"),className:"flex-1 flex items-center justify-center gap-3 py-4 px-6 bg-gradient-to-r from-cyan-500 via-blue-500 to-indigo-600 text-white font-bold text-lg rounded-xl shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50 transition-all relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400/20 to-blue-400/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),e.jsx(ga,{className:"w-6 h-6 relative"}),e.jsx("span",{className:"relative",children:"âš”ï¸ New Battle"})]}),e.jsxs(o.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.98},onClick:()=>a("/dashboard/codearena"),className:"flex-1 flex items-center justify-center gap-3 py-4 px-6 bg-gradient-to-r from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500 text-white font-bold text-lg rounded-xl border border-gray-600 hover:border-gray-500 shadow-lg transition-all relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-500/20 to-gray-400/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),e.jsx(Yt,{className:"w-6 h-6 relative"}),e.jsx("span",{className:"relative",children:"ðŸ  Back to Arena"})]})]})]})]})};function ut(t,a){(a==null||a>t.length)&&(a=t.length);for(var s=0,r=Array(a);s<a;s++)r[s]=t[s];return r}function Aa(t){if(Array.isArray(t))return t}function Ea(t,a,s){return(a=$a(a))in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function Ta(t,a){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var r,n,x,h,g=[],b=!0,w=!1;try{if(x=(s=s.call(t)).next,a!==0)for(;!(b=(r=x.call(s)).done)&&(g.push(r.value),g.length!==a);b=!0);}catch(k){w=!0,n=k}finally{try{if(!b&&s.return!=null&&(h=s.return(),Object(h)!==h))return}finally{if(w)throw n}}return g}}function Ba(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function ht(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?gt(Object(s),!0).forEach(function(r){Ea(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):gt(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function Ia(t,a){if(t==null)return{};var s,r,n=Da(t,a);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(t);for(r=0;r<x.length;r++)s=x[r],a.indexOf(s)===-1&&{}.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function Da(t,a){if(t==null)return{};var s={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(a.indexOf(r)!==-1)continue;s[r]=t[r]}return s}function Ra(t,a){return Aa(t)||Ta(t,a)||Ma(t,a)||Ba()}function La(t,a){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,a);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function $a(t){var a=La(t,"string");return typeof a=="symbol"?a:a+""}function Ma(t,a){if(t){if(typeof t=="string")return ut(t,a);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?ut(t,a):void 0}}function Oa(t,a,s){return a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function pt(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function ft(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?pt(Object(s),!0).forEach(function(r){Oa(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):pt(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function Pa(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return function(r){return a.reduceRight(function(n,x){return x(n)},r)}}function De(t){return function a(){for(var s=this,r=arguments.length,n=new Array(r),x=0;x<r;x++)n[x]=arguments[x];return n.length>=t.length?t.apply(this,n):function(){for(var h=arguments.length,g=new Array(h),b=0;b<h;b++)g[b]=arguments[b];return a.apply(s,[].concat(n,g))}}}function Ue(t){return{}.toString.call(t).includes("Object")}function _a(t){return!Object.keys(t).length}function Le(t){return typeof t=="function"}function Fa(t,a){return Object.prototype.hasOwnProperty.call(t,a)}function Wa(t,a){return Ue(a)||he("changeType"),Object.keys(a).some(function(s){return!Fa(t,s)})&&he("changeField"),a}function za(t){Le(t)||he("selectorType")}function Ha(t){Le(t)||Ue(t)||he("handlerType"),Ue(t)&&Object.values(t).some(function(a){return!Le(a)})&&he("handlersType")}function Ua(t){t||he("initialIsRequired"),Ue(t)||he("initialType"),_a(t)&&he("initialContent")}function Va(t,a){throw new Error(t[a]||t.default)}var Ya={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},he=De(Va)(Ya),Fe={changes:Wa,selector:za,handler:Ha,initial:Ua};function qa(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Fe.initial(t),Fe.handler(a);var s={current:t},r=De(Qa)(s,a),n=De(Ja)(s),x=De(Fe.changes)(t),h=De(Ga)(s);function g(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(k){return k};return Fe.selector(w),w(s.current)}function b(w){Pa(r,n,x,h)(w)}return[g,b]}function Ga(t,a){return Le(a)?a(t.current):a}function Ja(t,a){return t.current=ft(ft({},t.current),a),a}function Qa(t,a,s){return Le(a)?a(t.current):Object.keys(s).forEach(function(r){var n;return(n=a[r])===null||n===void 0?void 0:n.call(a,t.current[r])}),s}var Ka={create:qa},Xa={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Za(t){return function a(){for(var s=this,r=arguments.length,n=new Array(r),x=0;x<r;x++)n[x]=arguments[x];return n.length>=t.length?t.apply(this,n):function(){for(var h=arguments.length,g=new Array(h),b=0;b<h;b++)g[b]=arguments[b];return a.apply(s,[].concat(n,g))}}}function es(t){return{}.toString.call(t).includes("Object")}function ts(t){return t||bt("configIsRequired"),es(t)||bt("configType"),t.urls?(as(),{paths:{vs:t.urls.monacoBase}}):t}function as(){console.warn(Bt.deprecation)}function ss(t,a){throw new Error(t[a]||t.default)}var Bt={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},bt=Za(ss)(Bt),rs={config:ts},ns=function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return function(n){return s.reduceRight(function(x,h){return h(x)},n)}};function It(t,a){return Object.keys(a).forEach(function(s){a[s]instanceof Object&&t[s]&&Object.assign(a[s],It(t[s],a[s]))}),ht(ht({},t),a)}var is={type:"cancelation",msg:"operation is manually canceled"};function Qe(t){var a=!1,s=new Promise(function(r,n){t.then(function(x){return a?n(is):r(x)}),t.catch(n)});return s.cancel=function(){return a=!0},s}var ls=["monaco"],os=Ka.create({config:Xa,isInitialized:!1,resolve:null,reject:null,monaco:null}),Dt=Ra(os,2),Oe=Dt[0],Ge=Dt[1];function cs(t){var a=rs.config(t),s=a.monaco,r=Ia(a,ls);Ge(function(n){return{config:It(n.config,r),monaco:s}})}function ds(){var t=Oe(function(a){var s=a.monaco,r=a.isInitialized,n=a.resolve;return{monaco:s,isInitialized:r,resolve:n}});if(!t.isInitialized){if(Ge({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Qe(Ke);if(window.monaco&&window.monaco.editor)return Rt(window.monaco),t.resolve(window.monaco),Qe(Ke);ns(ms,us)(gs)}return Qe(Ke)}function ms(t){return document.body.appendChild(t)}function xs(t){var a=document.createElement("script");return t&&(a.src=t),a}function us(t){var a=Oe(function(r){var n=r.config,x=r.reject;return{config:n,reject:x}}),s=xs("".concat(a.config.paths.vs,"/loader.js"));return s.onload=function(){return t()},s.onerror=a.reject,s}function gs(){var t=Oe(function(s){var r=s.config,n=s.resolve,x=s.reject;return{config:r,resolve:n,reject:x}}),a=window.require;a.config(t.config),a(["vs/editor/editor.main"],function(s){var r=s.m||s;Rt(r),t.resolve(r)},function(s){t.reject(s)})}function Rt(t){Oe().monaco||Ge({monaco:t})}function hs(){return Oe(function(t){var a=t.monaco;return a})}var Ke=new Promise(function(t,a){return Ge({resolve:t,reject:a})}),Lt={config:cs,init:ds,__getMonacoInstance:hs},ps={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Xe=ps,fs={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},bs=fs;function ys({children:t}){return Se.createElement("div",{style:bs.container},t)}var js=ys,ws=js;function vs({width:t,height:a,isEditorReady:s,loading:r,_ref:n,className:x,wrapperProps:h}){return Se.createElement("section",{style:{...Xe.wrapper,width:t,height:a},...h},!s&&Se.createElement(ws,null,r),Se.createElement("div",{ref:n,style:{...Xe.fullWidth,...!s&&Xe.hide},className:x}))}var Ns=vs,$t=i.memo(Ns);function ks(t){i.useEffect(t,[])}var Mt=ks;function Ss(t,a,s=!0){let r=i.useRef(!0);i.useEffect(r.current||!s?()=>{r.current=!1}:t,a)}var se=Ss;function Re(){}function ke(t,a,s,r){return Cs(t,r)||As(t,a,s,r)}function Cs(t,a){return t.editor.getModel(Ot(t,a))}function As(t,a,s,r){return t.editor.createModel(a,s,r?Ot(t,r):void 0)}function Ot(t,a){return t.Uri.parse(a)}function Es({original:t,modified:a,language:s,originalLanguage:r,modifiedLanguage:n,originalModelPath:x,modifiedModelPath:h,keepCurrentOriginalModel:g=!1,keepCurrentModifiedModel:b=!1,theme:w="light",loading:k="Loading...",options:A={},height:y="100%",width:B="100%",className:u,wrapperProps:j={},beforeMount:c=Re,onMount:C=Re}){let[S,O]=i.useState(!1),[R,L]=i.useState(!0),d=i.useRef(null),T=i.useRef(null),f=i.useRef(null),I=i.useRef(C),v=i.useRef(c),m=i.useRef(!1);Mt(()=>{let M=Lt.init();return M.then(P=>(T.current=P)&&L(!1)).catch(P=>P?.type!=="cancelation"&&console.error("Monaco initialization: error:",P)),()=>d.current?W():M.cancel()}),se(()=>{if(d.current&&T.current){let M=d.current.getOriginalEditor(),P=ke(T.current,t||"",r||s||"text",x||"");P!==M.getModel()&&M.setModel(P)}},[x],S),se(()=>{if(d.current&&T.current){let M=d.current.getModifiedEditor(),P=ke(T.current,a||"",n||s||"text",h||"");P!==M.getModel()&&M.setModel(P)}},[h],S),se(()=>{let M=d.current.getModifiedEditor();M.getOption(T.current.editor.EditorOption.readOnly)?M.setValue(a||""):a!==M.getValue()&&(M.executeEdits("",[{range:M.getModel().getFullModelRange(),text:a||"",forceMoveMarkers:!0}]),M.pushUndoStop())},[a],S),se(()=>{d.current?.getModel()?.original.setValue(t||"")},[t],S),se(()=>{let{original:M,modified:P}=d.current.getModel();T.current.editor.setModelLanguage(M,r||s||"text"),T.current.editor.setModelLanguage(P,n||s||"text")},[s,r,n],S),se(()=>{T.current?.editor.setTheme(w)},[w],S),se(()=>{d.current?.updateOptions(A)},[A],S);let E=i.useCallback(()=>{if(!T.current)return;v.current(T.current);let M=ke(T.current,t||"",r||s||"text",x||""),P=ke(T.current,a||"",n||s||"text",h||"");d.current?.setModel({original:M,modified:P})},[s,a,n,t,r,x,h]),_=i.useCallback(()=>{!m.current&&f.current&&(d.current=T.current.editor.createDiffEditor(f.current,{automaticLayout:!0,...A}),E(),T.current?.editor.setTheme(w),O(!0),m.current=!0)},[A,w,E]);i.useEffect(()=>{S&&I.current(d.current,T.current)},[S]),i.useEffect(()=>{!R&&!S&&_()},[R,S,_]);function W(){let M=d.current?.getModel();g||M?.original?.dispose(),b||M?.modified?.dispose(),d.current?.dispose()}return Se.createElement($t,{width:B,height:y,isEditorReady:S,loading:k,_ref:f,className:u,wrapperProps:j})}var Ts=Es;i.memo(Ts);function Bs(t){let a=i.useRef();return i.useEffect(()=>{a.current=t},[t]),a.current}var Is=Bs,We=new Map;function Ds({defaultValue:t,defaultLanguage:a,defaultPath:s,value:r,language:n,path:x,theme:h="light",line:g,loading:b="Loading...",options:w={},overrideServices:k={},saveViewState:A=!0,keepCurrentModel:y=!1,width:B="100%",height:u="100%",className:j,wrapperProps:c={},beforeMount:C=Re,onMount:S=Re,onChange:O,onValidate:R=Re}){let[L,d]=i.useState(!1),[T,f]=i.useState(!0),I=i.useRef(null),v=i.useRef(null),m=i.useRef(null),E=i.useRef(S),_=i.useRef(C),W=i.useRef(),M=i.useRef(r),P=Is(x),H=i.useRef(!1),q=i.useRef(!1);Mt(()=>{let z=Lt.init();return z.then(V=>(I.current=V)&&f(!1)).catch(V=>V?.type!=="cancelation"&&console.error("Monaco initialization: error:",V)),()=>v.current?X():z.cancel()}),se(()=>{let z=ke(I.current,t||r||"",a||n||"",x||s||"");z!==v.current?.getModel()&&(A&&We.set(P,v.current?.saveViewState()),v.current?.setModel(z),A&&v.current?.restoreViewState(We.get(x)))},[x],L),se(()=>{v.current?.updateOptions(w)},[w],L),se(()=>{!v.current||r===void 0||(v.current.getOption(I.current.editor.EditorOption.readOnly)?v.current.setValue(r):r!==v.current.getValue()&&(q.current=!0,v.current.executeEdits("",[{range:v.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),v.current.pushUndoStop(),q.current=!1))},[r],L),se(()=>{let z=v.current?.getModel();z&&n&&I.current?.editor.setModelLanguage(z,n)},[n],L),se(()=>{g!==void 0&&v.current?.revealLine(g)},[g],L),se(()=>{I.current?.editor.setTheme(h)},[h],L);let U=i.useCallback(()=>{if(!(!m.current||!I.current)&&!H.current){_.current(I.current);let z=x||s,V=ke(I.current,r||t||"",a||n||"",z||"");v.current=I.current?.editor.create(m.current,{model:V,automaticLayout:!0,...w},k),A&&v.current.restoreViewState(We.get(z)),I.current.editor.setTheme(h),g!==void 0&&v.current.revealLine(g),d(!0),H.current=!0}},[t,a,s,r,n,x,w,k,A,h,g]);i.useEffect(()=>{L&&E.current(v.current,I.current)},[L]),i.useEffect(()=>{!T&&!L&&U()},[T,L,U]),M.current=r,i.useEffect(()=>{L&&O&&(W.current?.dispose(),W.current=v.current?.onDidChangeModelContent(z=>{q.current||O(v.current.getValue(),z)}))},[L,O]),i.useEffect(()=>{if(L){let z=I.current.editor.onDidChangeMarkers(V=>{let l=v.current.getModel()?.uri;if(l&&V.find(p=>p.path===l.path)){let p=I.current.editor.getModelMarkers({resource:l});R?.(p)}});return()=>{z?.dispose()}}return()=>{}},[L,R]);function X(){W.current?.dispose(),y?A&&We.set(x,v.current.saveViewState()):v.current.getModel()?.dispose(),v.current.dispose()}return Se.createElement($t,{width:B,height:u,isEditorReady:L,loading:b,_ref:m,className:j,wrapperProps:c})}var Rs=Ds,Ls=i.memo(Rs),ct=Ls;const Te={MAX_CODE_LENGTH:5e4,MIN_CODE_LENGTH:10,ALLOWED_LANGUAGES:["python","javascript","cpp","java","c","go","rust"],BLOCKED_PATTERNS:[/import\s+os/gi,/import\s+subprocess/gi,/import\s+sys/gi,/exec\s*\(/gi,/eval\s*\(/gi,/system\s*\(/gi,/__import__/gi,/open\s*\(/gi,/file\s*\(/gi,/socket/gi,/urllib/gi,/requests/gi,/http/gi,/net/gi,/process/gi,/runtime/gi],SUSPICIOUS_KEYWORDS:["rm -rf","del /s","format c:","sudo","chmod 777","while(true)","for(;;)","while True:","infinite","fork()","thread","async","await"]};class $e extends Error{code;constructor(a,s){super(a),this.name="SecurityError",this.code=s}}class ue extends Error{field;constructor(a,s){super(a),this.name="ValidationError",this.field=s}}const $s=t=>t.replace(/<[^>]*>/g,"").replace(/&[^;]+;/g,"").replace(/javascript:/gi,"").replace(/data:/gi,"").trim(),Ze=t=>{const{code:a,language:s,challengeId:r,battleId:n}=t;if(!Te.ALLOWED_LANGUAGES.includes(s))throw new ue(`Unsupported programming language: ${s}`,"language");if(!a||a.length<Te.MIN_CODE_LENGTH)throw new ue("Code is too short","code");if(a.length>Te.MAX_CODE_LENGTH)throw new ue("Code exceeds maximum length (50KB)","code");for(const g of Te.BLOCKED_PATTERNS)if(g.test(a))throw new $e("Code contains prohibited functions or imports","BLOCKED_CODE");const x=a.toLowerCase();for(const g of Te.SUSPICIOUS_KEYWORDS)if(x.includes(g.toLowerCase()))throw new $e(`Code contains suspicious keyword: ${g}`,"SUSPICIOUS_CODE");const h=$s(a);if(r&&!/^[a-zA-Z0-9_-]+$/.test(r))throw new ue("Invalid challenge ID format","challengeId");if(n&&!/^[a-zA-Z0-9_-]+$/.test(n))throw new ue("Invalid battle ID format","battleId");return{code:h,language:s,challengeId:r,battleId:n}},Ms=async t=>{try{return(await Y(`/challenges/${t}`)).challenge||null}catch(a){return console.error("Error fetching challenge:",a),null}},Pt=Ms,yt=async t=>{try{return(await Y(`/challenges/${t}/testcases`)).testCases||[]}catch(a){return console.error("Error fetching test cases:",a),[]}},Os=async t=>{try{return(await Y(`/challenges/${t}/validation-testcases`)).testCases||[]}catch(a){return console.error("Error fetching validation test cases:",a),[]}},et=[],Ps="https://emkc.org/api/v2/piston",_t={javascript:{language:"javascript",version:"18.15.0"},python:{language:"python",version:"3.10.0"},python3:{language:"python",version:"3.10.0"},java:{language:"java",version:"15.0.2"},cpp:{language:"c++",version:"10.2.0"},c:{language:"c",version:"10.2.0"},typescript:{language:"typescript",version:"5.0.3"},go:{language:"go",version:"1.16.2"},rust:{language:"rust",version:"1.68.2"},ruby:{language:"ruby",version:"3.0.1"},kotlin:{language:"kotlin",version:"1.8.20"},csharp:{language:"csharp",version:"6.12.0"},swift:{language:"swift",version:"5.3.3"}};async function _s(t,a,s=""){const r=Date.now();try{const n=_t[a.toLowerCase()];if(!n)throw new Error(`Unsupported language: ${a}`);const x=await fetch(`${Ps}/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:n.language,version:n.version,files:[{name:Fs(a),content:t}],stdin:s,args:[],compile_timeout:1e4,run_timeout:3e3,compile_memory_limit:-1,run_memory_limit:-1})});if(!x.ok)throw new Error(`API request failed with status ${x.status}`);const h=await x.json(),g=Date.now()-r;return h.compile&&h.compile.code!==0?{success:!1,error:h.compile.stderr||h.compile.output||"Compilation failed",executionTime:g}:h.run.code!==0&&h.run.signal?{success:!1,error:h.run.stderr||h.run.output||"Runtime error",executionTime:g}:{success:!0,output:(h.run.stdout||h.run.output||"").trim(),error:h.run.stderr?h.run.stderr.trim():void 0,executionTime:g}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error occurred",executionTime:Date.now()-r}}}function Fs(t){switch(t.toLowerCase()){case"javascript":return"solution.js";case"python":case"python3":return"solution.py";case"java":return"Main.java";case"cpp":case"c":return"solution.cpp";case"typescript":return"solution.ts";case"go":return"solution.go";case"rust":return"solution.rs";case"ruby":return"solution.rb";case"kotlin":return"solution.kt";case"csharp":return"Solution.cs";case"swift":return"solution.swift";default:return"solution.txt"}}async function Ws(t,a,s=""){const r=await _s(t,a,s);return{output:r.output||"",error:r.error||null,time:r.executionTime?`${(r.executionTime/1e3).toFixed(3)}`:null,memory:null,status:r.success?"Accepted":r.error?"Error":"Unknown"}}const Ft=()=>Object.keys(_t).filter(t=>t!=="python3").map(t=>({id:t,name:t.charAt(0).toUpperCase()+t.slice(1),languageId:t})),zs=()=>{const{battleId:t}=Ve(),a=pe(),{user:s}=fe();be();const{setBattleActive:r}=qt(),[n,x]=i.useState(null),[h,g]=i.useState(!0),[b,w]=i.useState(5),[k,A]=i.useState(0),[y,B]=i.useState(null),[u,j]=i.useState([]),[c,C]=i.useState(""),[S,O]=i.useState("python"),[R,L]=i.useState(!1),[d,T]=i.useState(!1),[f,I]=i.useState(!1);i.useEffect(()=>(n?.status==="active"&&!f?r(!0):r(!1),()=>r(!1)),[n?.status,f,r]);const[v,m]=i.useState(null),[E,_]=i.useState(!1),[W,M]=i.useState(!1),[P,H]=i.useState(!1),[q,U]=i.useState(0),X=i.useRef(null),z=i.useRef(c),V=i.useRef(u),l=i.useRef(!1),p=i.useRef(null),F=Ft();i.useEffect(()=>{if(n?.status!=="active"||f)return;const N=D=>(D.preventDefault(),D.returnValue="You are in an active battle! Leaving will cause you to lose. Are you sure?",D.returnValue);return window.addEventListener("beforeunload",N),()=>window.removeEventListener("beforeunload",N)},[n?.status,f]);const J=i.useCallback(N=>{try{p.current||(p.current=new(window.AudioContext||window.webkitAudioContext));const D=p.current,$=D.currentTime;if(N===0){[523.25,659.25,783.99,1046.5].forEach((je,me)=>{const Ee=D.createOscillator(),Ne=D.createGain();Ee.connect(Ne),Ne.connect(D.destination),Ee.type="square",Ee.frequency.setValueAtTime(je,$+me*.05),Ne.gain.setValueAtTime(0,$),Ne.gain.linearRampToValueAtTime(.15,$+me*.05),Ne.gain.linearRampToValueAtTime(.15,$+me*.05+.15),Ne.gain.exponentialRampToValueAtTime(.001,$+.5),Ee.start($+me*.05),Ee.stop($+.6)});const G=D.createOscillator(),K=D.createGain();G.connect(K),K.connect(D.destination),G.type="sawtooth",G.frequency.setValueAtTime(130.81,$),G.frequency.exponentialRampToValueAtTime(65.41,$+.2),K.gain.setValueAtTime(.25,$),K.gain.exponentialRampToValueAtTime(.001,$+.3),G.start($),G.stop($+.4)}else{const Z=N===5?262:N===4?294:N===3?330:N===2?440:587,G=D.createOscillator(),K=D.createGain();G.connect(K),K.connect(D.destination),G.type="square",G.frequency.setValueAtTime(Z*2,$),G.frequency.exponentialRampToValueAtTime(Z,$+.08),K.gain.setValueAtTime(.2,$),K.gain.exponentialRampToValueAtTime(.001,$+.12),G.start($),G.stop($+.15);const je=D.createOscillator(),me=D.createGain();je.connect(me),me.connect(D.destination),je.type="sine",je.frequency.setValueAtTime(Z/2,$),me.gain.setValueAtTime(.15,$),me.gain.exponentialRampToValueAtTime(.001,$+.1),je.start($),je.stop($+.12)}}catch{console.log("Audio not supported")}},[]);i.useEffect(()=>{z.current=c},[c]),i.useEffect(()=>{V.current=u},[u]);const Pe={python:`# Battle Mode - Write your solution fast!
def solve():
    n = int(input())
    # Your code here
    print(result)

solve()`,cpp:`#include <bits/stdc++.h>
using namespace std;

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    int n;
    cin >> n;
    // Your code here
    cout << result << endl;
    return 0;
}`,java:`import java.util.*;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt();
        // Your code here
        System.out.println(result);
    }
}`,javascript:`const readline = require('readline');
const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
});

let lines = [];
rl.on('line', (line) => lines.push(line));
rl.on('close', () => {
    const n = parseInt(lines[0]);
    // Your code here
    console.log(result);
});`},ce=i.useCallback(()=>`battle_code_${t}`,[t]),de=i.useCallback(()=>`battle_language_${t}`,[t]);i.useEffect(()=>{if(!t)return;const N=localStorage.getItem(ce()),D=localStorage.getItem(de());N&&(console.log("Restoring code from localStorage"),C(N)),D&&["python","cpp","java","javascript"].includes(D)&&O(D)},[t,ce,de]),i.useEffect(()=>{if(!t||f)return;const N=setInterval(()=>{localStorage.setItem(ce(),c),localStorage.setItem(de(),S)},2e3);return()=>clearInterval(N)},[t,c,S,f,ce,de]),i.useEffect(()=>{f&&t&&(localStorage.removeItem(ce()),localStorage.removeItem(de()))},[f,t,ce,de]),i.useEffect(()=>{if(!t||!s||n?.status!=="active"||f)return;const N=()=>{document.hidden&&(U($=>$+1),H(!0))},D=()=>{n?.status==="active"&&!f&&(U($=>$+1),H(!0))};return document.addEventListener("visibilitychange",N),window.addEventListener("blur",D),()=>{document.removeEventListener("visibilitychange",N),window.removeEventListener("blur",D)}},[t,s,n?.status,f]),i.useEffect(()=>{q>=3&&n?.status==="active"&&!f&&(async()=>{try{await Y(`/battles/${t}/forfeit`,{method:"POST"}),a(`/dashboard/codearena/battle/results/${t}`)}catch(D){console.error("Error forfeiting battle:",D)}})()},[q,n?.status,f,t,a]),i.useEffect(()=>{if(!t||!s)return;const N=async()=>{try{const $=await Y(`/battles/${t}`);if(!$){a("/dashboard/codearena");return}if(x($),$.challenge&&!y&&$.challenge.description&&(Array.isArray($.challenge.testCases)||Array.isArray($.challenge.test_cases))){B($.challenge);const G=$.challenge.testCases&&$.challenge.testCases.length>0?$.challenge.testCases.map(K=>({input:K.input,output:K.expectedOutput||K.output||K.expected_output||""})):($.challenge.test_cases||[]).map(K=>({input:K.input,output:K.expected_output||K.output||""}));j(G)}const Z=$.participants.find(G=>G.odId===s?.id);Z?.hasSubmitted&&!f&&(I(!0),Z.submissionResult&&m({success:Z.submissionResult.passed,passed:Z.submissionResult.passed,status:Z.submissionResult.passed?"Accepted":"Wrong Answer",passedCount:Z.submissionResult.passedCount,totalCount:Z.submissionResult.totalCount,totalTime:Z.submissionResult.totalTime,executionTime:Z.submissionResult.totalTime})),$.forfeitedBy&&$.forfeitedBy!==s?.id&&M(!0),($.status==="completed"||$.status==="forfeited")&&a(`/dashboard/codearena/battle/results/${t}`),g(!1)}catch($){console.error("Failed to fetch battle data",$),a("/dashboard/codearena")}};N();const D=setInterval(N,3e3);return()=>clearInterval(D)},[t,s,f,y]),i.useEffect(()=>{const N=async D=>{if(n?.status==="active"&&!f&&!l.current)return t&&(localStorage.setItem(ce(),z.current),localStorage.setItem(de(),S),localStorage.setItem(`battle_autosubmit_${t}`,"true")),D.preventDefault(),D.returnValue="Your code will be auto-submitted when you return. Continue?",D.returnValue};return window.addEventListener("beforeunload",N),()=>{window.removeEventListener("beforeunload",N)}},[n?.status,t,f,S,ce,de]),i.useEffect(()=>{if(!t||!s||!n||f||l.current)return;if(localStorage.getItem(`battle_autosubmit_${t}`)==="true"&&n.status==="active"&&V.current.length>0){console.log("Auto-submitting code after page refresh..."),localStorage.removeItem(`battle_autosubmit_${t}`);const D=setTimeout(()=>{!f&&!l.current&&Je()},1e3);return()=>clearTimeout(D)}},[t,s,n?.status,f,u.length]),i.useEffect(()=>{if(n?.status==="countdown"){if(b>0){J(b);const N=setTimeout(()=>w(b-1),1200);return()=>clearTimeout(N)}else if(b===0){J(0);const N=setTimeout(async()=>{t&&await Y(`/battles/${t}/start`,{method:"POST"})},1500);return()=>clearTimeout(N)}}},[n?.status,b,t,J]),i.useEffect(()=>{n?.status==="countdown"&&w(3)},[n?.status]),i.useEffect(()=>{if(n?.status==="active"&&n.startTime){const N=new Date(n.startTime).getTime(),D=n.timeLimit*1e3;return X.current=setInterval(()=>{const Z=Date.now()-N,G=Math.max(0,D-Z);A(Math.ceil(G/1e3)),G<=0&&(X.current&&clearInterval(X.current),Wt())},1e3),()=>{X.current&&clearInterval(X.current)}}},[n?.status,n?.startTime,n?.timeLimit]),i.useEffect(()=>{C(Pe[S]||Pe.python)},[S]);const Wt=async()=>{!f&&n&&await Je()},zt=async()=>{if(!(!s||!n||!t||E||!window.confirm("âš ï¸ Are you sure you want to leave?\\n\\nLeaving will forfeit the match and your opponent will win the prize!"))){_(!0);try{await Y(`/battles/${t}/forfeit`,{method:"POST"}),a("/dashboard/codearena")}catch(D){console.error("Error forfeiting battle:",D),alert("Failed to leave battle. Please try again."),_(!1)}}},Je=async()=>{if(!(!s||!n||d||f||!t||l.current)){if(!u||u.length===0){m({success:!1,passed:!1,status:"Error",error:"No test cases available. Please try again.",passedCount:0,totalCount:0,totalTime:0,executionTime:0});return}l.current=!0,T(!0),localStorage.removeItem(`battle_autosubmit_${t}`);try{const N=await Y(`/battles/${t}/submit`,{method:"POST",body:JSON.stringify({code:c,language:S})});m({success:N.passed,passed:N.passed,status:N.passed?"Accepted":"Wrong Answer",passedCount:N.passedCount,totalCount:N.totalCount,totalTime:N.totalTime,executionTime:N.totalTime}),I(!0)}catch(N){console.error("Battle submission error:",N);let D="Submission failed. Please try again.";N instanceof $e?D=`Security Error: ${N.message}`:N instanceof ue?D=`Validation Error: ${N.message}`:N instanceof Error&&(N.message.includes("API request failed")?D="âš ï¸ Code execution service temporarily unavailable. Please try again.":N.message.includes("429")||N.message.includes("Too Many Requests")?D="â³ Too many submissions. Please wait a moment and try again.":D=N.message),m({success:!1,passed:!1,status:"Error",error:D,passedCount:0,totalCount:u.length,totalTime:0,executionTime:0})}T(!1),l.current=!1,t&&(localStorage.removeItem(ce()),localStorage.removeItem(de()))}},Ht=N=>{const D=Math.floor(N/60),$=N%60;return`${D.toString().padStart(2,"0")}:${$.toString().padStart(2,"0")}`},Ut=()=>n?.participants.find(N=>N.odId!==s?.id),Vt=()=>n?.participants.find(N=>N.odId===s?.id);if(console.log("Battle status:",n?.status,"Countdown:",b,"Loading:",h),h)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ae,{className:"w-16 h-16 text-cyan-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Loading battle..."})]})});if(n?.status==="countdown"&&b>=0)return console.log("Showing countdown overlay!",b),e.jsxs("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(20)].map((N,D)=>e.jsx(o.div,{className:"absolute w-2 h-2 bg-cyan-400/30 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-200],scale:[0,1,0],opacity:[0,1,0]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:D*.1}},D))}),e.jsx(o.div,{className:"absolute inset-0 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},children:[1,2,3].map(N=>e.jsx(o.div,{className:"absolute border-2 border-cyan-500/20 rounded-full",style:{width:N*200,height:N*200},animate:{scale:[1,1.5,1],opacity:[.3,.1,.3]},transition:{duration:2,repeat:1/0,delay:N*.3}},N))}),e.jsx(o.div,{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-[#00d4ff]/10",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3],rotate:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsx(oe,{mode:"wait",children:e.jsxs(o.div,{initial:{scale:.3,opacity:0,rotateY:-180},animate:{scale:1,opacity:1,rotateY:0},exit:{scale:2,opacity:0,rotateY:180},transition:{type:"spring",stiffness:300,damping:20},className:"text-center z-10",children:[e.jsx(o.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:"mb-6",children:e.jsx(o.div,{animate:{textShadow:["0 0 20px rgba(0, 173, 181, 0.5)","0 0 40px rgba(0, 173, 181, 0.8)","0 0 20px rgba(0, 173, 181, 0.5)"]},transition:{duration:1.5,repeat:1/0},className:"text-2xl font-bold text-cyan-400 tracking-widest",children:"âš”ï¸ BATTLE ARENA âš”ï¸"})}),e.jsxs("div",{className:"flex items-center justify-center gap-8 mb-8",children:[e.jsxs(o.div,{className:"text-center",initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[e.jsx(o.div,{className:"w-20 h-20 rounded-full bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center mb-2 shadow-lg shadow-cyan-500/50",animate:{boxShadow:["0 0 20px rgba(0, 173, 181, 0.5)","0 0 40px rgba(0, 173, 181, 0.8)","0 0 20px rgba(0, 173, 181, 0.5)"]},transition:{duration:1.5,repeat:1/0},children:e.jsx("span",{className:"text-white font-bold text-2xl",children:n.participants[0]?.odName?.charAt(0)||""})}),e.jsx("p",{className:"text-cyan-400 font-semibold",children:n.participants[0]?.odName}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Rating: ",n.participants[0]?.rating||1e3]})]}),e.jsx(o.div,{className:"text-cyan-400 text-5xl font-black",animate:{scale:[1,1.2,1],rotate:[0,5,-5,0],textShadow:["0 0 30px rgba(255, 0, 0, 0.5)","0 0 60px rgba(255, 0, 0, 0.8)","0 0 30px rgba(255, 0, 0, 0.5)"]},transition:{duration:1,repeat:1/0},style:{background:"linear-gradient(to right, #00ADB5, #ff4444, #00ADB5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"VS"}),e.jsxs(o.div,{className:"text-center",initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[e.jsx(o.div,{className:"w-20 h-20 rounded-full bg-gradient-to-br from-red-400 to-orange-500 flex items-center justify-center mb-2 shadow-lg shadow-red-500/50",animate:{boxShadow:["0 0 20px rgba(239, 68, 68, 0.5)","0 0 40px rgba(239, 68, 68, 0.8)","0 0 20px rgba(239, 68, 68, 0.5)"]},transition:{duration:1.5,repeat:1/0},children:e.jsx("span",{className:"text-white font-bold text-2xl",children:n.participants[1]?.odName?.charAt(0)||""})}),e.jsx("p",{className:"text-red-400 font-semibold",children:n.participants[1]?.odName}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Rating: ",n.participants[1]?.rating||1e3]})]})]}),e.jsx(o.p,{className:"text-gray-400 text-xl mb-6",animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0},children:b>0?"Battle starts in":""}),e.jsx(o.div,{animate:{scale:b===0?[1,1.5,1.2]:[1,1.2,1],color:b===0?"#22c55e":b===1?"#ef4444":b===2?"#f59e0b":"#06b6d4"},transition:{duration:.5,ease:"easeOut"},className:"text-9xl font-black mb-6",style:{textShadow:"0 0 50px currentColor, 0 0 100px currentColor",filter:"drop-shadow(0 0 30px currentColor)"},children:b===0?"âš”ï¸ FIGHT! âš”ï¸":b}),e.jsx(o.p,{animate:{opacity:[.5,1,.5],y:[0,-5,0]},transition:{duration:1,repeat:1/0},className:"text-gray-400 text-lg",children:b===0?"ðŸ”¥ Show your coding skills! ðŸ”¥":"âš¡ Get ready to code!"}),e.jsxs(o.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"mt-8 flex items-center justify-center gap-2 text-yellow-400",children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-bold",children:["Prize: ",n.prize," coins"]})]})]},b)})]});const ye=Ut(),_e=Vt();return e.jsxs("div",{className:"h-screen bg-gray-900 flex flex-col overflow-hidden -mx-4 -mt-6",children:[e.jsxs("header",{className:"bg-gray-800 border-b border-gray-700 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:_e?.odProfilePic||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s?.id}`,alt:"You",className:"w-10 h-10 rounded-full border-2 border-cyan-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:_e?.odName||"You"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Rating: ",_e?.rating||1e3]})]}),_e?.hasSubmitted&&e.jsx(re,{className:"w-5 h-5 text-green-400"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-3xl font-bold ${k<=60?"text-red-400 animate-pulse":"text-white"}`,children:Ht(k)}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:n?.challenge?.title||"Loading challenge..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[ye?.hasSubmitted&&e.jsx(re,{className:"w-5 h-5 text-green-400"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-medium",children:ye?.odName||"Opponent"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Rating: ",ye?.rating||1e3]})]}),e.jsx("img",{src:ye?.odProfilePic||`https://api.dicebear.com/7.x/avataaars/svg?seed=${ye?.odId}`,alt:"Opponent",className:"w-10 h-10 rounded-full border-2 border-red-400"})]})]}),e.jsxs("div",{className:"flex justify-center mt-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-1 bg-yellow-500/20 border border-yellow-500/30 rounded-full",children:[e.jsx(Q,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("span",{className:"text-yellow-400 font-bold",children:[n?.prize||0," coins"]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 text-green-400 bg-green-500/10 rounded-full border border-green-500/20",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Secure Battle"})]})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 border-r border-gray-700 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-gray-800/50 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-white font-medium flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4 text-cyan-400"}),y?.title||"Loading Challenge..."]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-700 text-gray-300 rounded",children:n?.difficulty})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsx("div",{className:"bg-gray-800/80 rounded-xl shadow-lg border border-cyan-900/30 p-5 mb-4 max-h-96 overflow-y-auto custom-scrollbar",children:e.jsx("div",{className:"prose prose-invert prose-base max-w-none problem-statement-prose",dangerouslySetInnerHTML:{__html:y?.problemStatement||y?.description||'<p class="text-white-400">Loading challenge...</p>'}})}),u.length>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"text-white font-medium",children:"Sample Cases"}),u.slice(0,2).map((N,D)=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 text-sm",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Input:"}),e.jsx("pre",{className:"text-cyan-400 font-mono mt-1",children:N.input})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Output:"}),e.jsx("pre",{className:"text-green-400 font-mono mt-1",children:N.output})]})]},D))]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col border-b border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-2 bg-gray-800/50 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium text-sm",children:"Your Code"}),f&&e.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-400",children:[e.jsx(re,{className:"w-3 h-3"}),"Submitted"]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>L(!R),disabled:f,className:"flex items-center gap-2 px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm disabled:opacity-50",children:[e.jsx("span",{className:"text-white capitalize",children:S}),e.jsx(lt,{className:"w-3 h-3 text-gray-400"})]}),e.jsx(oe,{children:R&&e.jsx(o.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"absolute right-0 top-full mt-1 w-36 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 overflow-hidden",children:F.filter(N=>["python","cpp","java","javascript"].includes(N.id)).map(N=>e.jsx("button",{onClick:()=>{O(N.id),L(!1)},className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-700 ${S===N.id?"text-cyan-400":"text-white"}`,children:N.name},N.id))})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(ct,{height:"100%",language:S==="cpp"?"cpp":S,value:c,onChange:N=>!f&&C(N||""),theme:"vs-dark",options:{fontSize:13,fontFamily:"JetBrains Mono, Fira Code, Consolas, monospace",minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",automaticLayout:!0,tabSize:4,readOnly:f,padding:{top:8}}})})]}),e.jsx("div",{className:"h-32 bg-gray-800/50 p-4 overflow-y-auto",children:v?e.jsxs("div",{className:`p-3 rounded-lg ${v.passed?"bg-green-900/20 border border-green-500/30":"bg-red-900/20 border border-red-500/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[v.passed?e.jsx(re,{className:"w-5 h-5 text-green-400"}):e.jsx(ve,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:`font-medium ${v.passed?"text-green-400":"text-red-400"}`,children:v.passed?"All Tests Passed!":"Some Tests Failed"})]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[v.passedCount," / ",v.totalCount," test cases â€¢ Time: ",(v.totalTime||0).toFixed(0),"ms"]}),ye?.hasSubmitted?e.jsx("p",{className:"text-sm text-cyan-400 mt-2",children:"Waiting for results..."}):e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Waiting for opponent to submit..."})]}):e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("p",{className:"text-sm",children:"Submit your code to see results"}),ye?.hasSubmitted&&e.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:"âš ï¸ Opponent has already submitted!"})]})})]})]}),e.jsx(oe,{children:W&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:e.jsxs(o.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full mx-4 text-center border border-green-500/30",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-green-500/20 rounded-full flex items-center justify-center",children:e.jsx(Q,{className:"w-10 h-10 text-green-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:"ðŸŽ‰ You Win!"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Your opponent left the battle."}),e.jsxs("p",{className:"text-yellow-400 font-bold text-xl mb-6",children:["+",n?.prize," coins awarded!"]}),e.jsx("button",{onClick:()=>a("/dashboard/codearena"),className:"w-full py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all",children:"Back to Arena"})]})})}),e.jsxs("div",{className:"bg-gray-800 border-t border-gray-700 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(o.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:zt,disabled:E||n?.status==="completed",className:"flex items-center gap-2 px-4 py-2 bg-red-500/20 border border-red-500/30 text-red-400 rounded-lg hover:bg-red-500/30 transition-all disabled:opacity-50",children:[E?e.jsx(ae,{className:"w-4 h-4 animate-spin"}):e.jsx(oa,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:E?"Leaving...":"Leave Battle"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsxs("span",{children:["Time Limit: ",n?.timeLimit?Math.floor(n.timeLimit/60):15," min"]})]})]}),e.jsx(o.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:Je,disabled:d||f,className:`flex items-center gap-2 px-6 py-2.5 rounded-lg font-medium transition-all ${f?"bg-green-600 text-white cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white"} disabled:opacity-70`,children:d?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-4 h-4 animate-spin"}),"Submitting..."]}):f?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4"}),"Submitted"]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"w-4 h-4"}),"Submit Solution"]})})]}),e.jsx("style",{children:`
        .problem-statement-prose, .problem-statement-prose *, .problem-statement-prose h1, .problem-statement-prose h2, .problem-statement-prose h3 {
          color: #fff !important;
        }
        .problem-statement-prose h1, .problem-statement-prose h2, .problem-statement-prose h3 {
          margin-top: 1.2em;
          margin-bottom: 0.5em;
        }
        .problem-statement-prose ul, .problem-statement-prose ol {
          margin-left: 1.5em;
          margin-bottom: 1em;
        }
        .problem-statement-prose pre, .problem-statement-prose code {
          background: #1e293b;
          color: #facc15;
          border-radius: 0.3em;
          padding: 0.3em 0.6em;
          font-size: 1em;
        }
        .problem-statement-prose p {
          margin: 0.7em 0;
          line-height: 1.7;
        }
        .problem-statement-prose table {
          background: #0f172a;
          border-radius: 0.3em;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #334155;
          border-radius: 4px;
        }
      `}),e.jsx(oe,{children:P&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx(o.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gray-800 border-2 border-red-500 rounded-2xl p-6 max-w-md w-full shadow-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-500/20 rounded-full flex items-center justify-center",children:e.jsx(He,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"âš ï¸ Warning!"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"You switched away from the battle! This is not allowed during an active battle."}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-4",children:[e.jsxs("p",{className:"text-red-400 font-semibold",children:["Tab switches: ",q,"/3"]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:q>=3?"You have been disqualified!":`${3-q} more switch(es) and you will automatically lose!`})]}),e.jsx("button",{onClick:()=>H(!1),className:"w-full py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold rounded-xl hover:shadow-lg transition-all",children:"I Understand, Continue Battle"})]})})})})]})};class Hs{BACKEND_URL="https://nextstepbackend-qhxw.onrender.com";async executeCode(a,s,r){const n=localStorage.getItem("authToken");if(!n)throw new Error("Authentication required");const x=Ze({code:a,language:s});try{const h=await fetch(`${this.BACKEND_URL}/api/execute`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({source_code:x.code,language_id:this.getLanguageId(s),stdin:r||""})});if(!h.ok)throw new Error(`Execution failed: ${h.statusText}`);return await h.json()}catch(h){throw console.error("Code execution error:",h),new Error("Failed to execute code. Please try again.")}}async submitChallenge(a,s,r,n,x,h,g){if(!localStorage.getItem("authToken"))throw new Error("Authentication required");const w=Ze({code:s,language:r,challengeId:a});try{const k=await Y(`/challenges/${a}/submit`,{method:"POST",body:JSON.stringify({code:w.code,language:r,testCases:n,coinReward:x,title:h,difficulty:g})});return{success:k.success||!1,passed:k.passed||k.passedCount||0,total:k.total||k.totalCount||0,passedCount:k.passedCount||k.passed||0,totalCount:k.totalCount||k.total||0,message:k.message||(k.success?"All test cases passed!":"Some test cases failed"),coinsChanged:k.coinsChanged||0,testResults:k.testResults}}catch(k){throw console.error("Challenge submission error:",k),new Error("Failed to submit solution. Please try again.")}}async submitBattleSolution(a,s,r){if(!localStorage.getItem("authToken"))throw new Error("Authentication required");const x=Ze({code:s,language:r,battleId:a});try{return await Y(`/battles/${a}/submit`,{method:"POST",body:JSON.stringify({code:x.code,language:r})})}catch(h){throw console.error("Battle submission error:",h),new Error("Failed to submit battle solution. Please try again.")}}getLanguageId(a){return{javascript:63,python:71,java:62,cpp:54,c:50,csharp:51,ruby:72,go:60,rust:73,php:68,swift:83,kotlin:78}[a.toLowerCase()]||63}async verifyBattleEntry(a,s){try{return(await Y(`/battles/verify-entry?userId=${a}&fee=${s}`)).canEnter||!1}catch(r){return console.error("Battle entry verification error:",r),!1}}}const st=new Hs,Us=[{id:"python",name:"Python"},{id:"cpp",name:"C++"},{id:"java",name:"Java"},{id:"javascript",name:"JavaScript"}],Vs=()=>{const{challengeId:t}=Ve(),a=pe(),s=it(),{user:r}=fe();be();const[n,x]=i.useState(null),[h,g]=i.useState([]),[b,w]=i.useState(!0),[k,A]=i.useState(""),[y,B]=i.useState("python"),[u,j]=i.useState(!1),[c,C]=i.useState(!1),[S,O]=i.useState(!1),[R,L]=i.useState(null),[d,T]=i.useState(null),[f,I]=i.useState(""),[v,m]=i.useState(!1),[E,_]=i.useState("description"),[W,M]=i.useState(!1),[P,H]=i.useState(!1),q=Us,U={python:`# Write your solution here
def solve():
    # Read input
    n = int(input())
    
    # Your code here
    result = n
    
    # Print output
    print(result)

solve()`,cpp:`#include <bits/stdc++.h>
using namespace std;

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    
    // Read input
    int n;
    cin >> n;
    
    // Your code here
    int result = n;
    
    // Print output
    cout << result << endl;
    
    return 0;
}`,java:`import java.util.*;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        
        // Read input
        int n = sc.nextInt();
        
        // Your code here
        int result = n;
        
        // Print output
        System.out.println(result);
    }
}`,javascript:`// Read input from stdin
const readline = require('readline');
const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
});

let lines = [];
rl.on('line', (line) => {
    lines.push(line);
});

rl.on('close', () => {
    // Parse input
    const n = parseInt(lines[0]);
    
    // Your code here
    const result = n;
    
    // Print output
    console.log(result);
});`};i.useEffect(()=>{(async()=>{if(t){w(!0);try{const p=s.state?.challenge;if(p)x(p),p.testCases&&g(Array.isArray(p.testCases)?p.testCases:[]);else{const F=await Pt(t);if(F){x(F);const J=await yt(t);g(J)}else x(null)}w(!1)}catch(p){console.error("Error loading challenge:",p),x(null),w(!1)}}})()},[t,s]),i.useEffect(()=>{A(U[y]||U.python)},[y]);const X=async()=>{C(!0),T(null),L(null);try{const l=v?f:h[0]?.input||"",p=await st.executeCode(k,y,l);T(p)}catch(l){let p="Failed to run code. Please try again.";l instanceof $e?p=`Security Error: ${l.message}`:l instanceof ue?p=`Validation Error: ${l.message}`:l instanceof Error&&(p=l.message),T({output:"",stderr:p,time:"0",memory:"0",status:"Error"})}C(!1)},z=async()=>{if(!t){alert("Invalid challenge ID");return}if(h.length===0){alert("No test cases available for this problem. Please try again or use the Run button with custom input.");return}O(!0),L(null),T(null);try{const l=await st.submitChallenge(t,k,y,h.map(p=>({input:p.input,expected_output:p.expectedOutput,expectedOutput:p.expectedOutput})),n?.coinReward,n?.title,n?.difficulty);l.success&&n&&r?(H(!0),L({success:!0,passedCount:l.passedCount,totalCount:l.totalCount,totalTime:0,totalMemory:0,results:l.testResults?.map((p,F)=>({testCase:F+1,passed:p.passed,input:p.input,expected:p.expected,output:p.output}))||h.map((p,F)=>({testCase:F+1,passed:!0}))}),l.coinsChanged>0&&alert(`ðŸŽ‰ ${l.message}`)):(L({success:!1,passedCount:l.passedCount,totalCount:l.totalCount,totalTime:0,totalMemory:0,results:l.testResults?.map((p,F)=>({testCase:F+1,passed:p.passed,input:p.input,expected:p.expected,output:p.output,error:p.error}))||h.map((p,F)=>({testCase:F+1,passed:!1}))}),l.coinsChanged<0?alert(`âŒ ${l.message}`):l.message&&alert(l.message))}catch(l){console.error("Submission error:",l);let p="Submission failed. Please try again.";l instanceof $e?p=`Security Error: ${l.message}`:l instanceof ue?p=`Validation Error: ${l.message}`:l instanceof Error&&(p=l.message),L({success:!1,results:[],passedCount:0,totalCount:h.length,totalTime:0,totalMemory:0,compilationError:p})}O(!1)},V=l=>{switch(l){case"easy":return"text-green-400 bg-green-400/10 border-green-400/30";case"medium":return"text-yellow-400 bg-yellow-400/10 border-yellow-400/30";case"hard":return"text-red-400 bg-red-400/10 border-red-400/30";case"expert":return"text-purple-400 bg-purple-400/10 border-purple-400/30";default:return"text-gray-400 bg-gray-400/10 border-gray-400/30"}};return b?e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx(o.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"h-screen bg-gray-900 flex flex-col overflow-hidden -mx-4 -mt-6",children:[e.jsxs("header",{className:"bg-gradient-to-r from-gray-800 via-gray-900 to-black border-b border-gray-700 px-4 py-3 flex items-center justify-between relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-20 bg-gradient-to-bl from-cyan-500/20 to-transparent rounded-full -translate-y-10 translate-x-20"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/dashboard/codearena/practice"),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(kt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-bold text-white flex items-center gap-2",children:[n?.title||"Loading...",P&&e.jsx(re,{className:"w-5 h-5 text-green-400"})]}),e.jsx("div",{className:"flex items-center gap-3 text-sm",children:n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full border ${V(n.difficulty)}`,children:n.difficulty?n.difficulty.charAt(0).toUpperCase()+n.difficulty.slice(1):"Unknown"}),e.jsxs("span",{className:"text-gray-400",children:["Category: ",n.category||"N/A"]}),e.jsxs("span",{className:"flex items-center gap-1 text-yellow-400",children:[e.jsx(ee,{className:"w-4 h-4"}),n.coinReward]})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>j(!u),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500 rounded-lg transition-all shadow-lg border border-gray-600 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-blue-500/10"}),e.jsx(le,{className:"w-4 h-4 text-cyan-400 relative"}),e.jsx("span",{className:"text-white capitalize font-semibold relative",children:y}),e.jsx(lt,{className:"w-4 h-4 text-gray-400 relative"})]}),e.jsx(oe,{children:u&&e.jsx(o.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 top-full mt-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 overflow-hidden",children:q.filter(l=>["python","cpp","java","javascript"].includes(l.id)).map(l=>e.jsx("button",{onClick:()=>{B(l.id),j(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-700 transition-colors ${y===l.id?"text-cyan-400 bg-gray-700/50":"text-white"}`,children:l.name},l.id))})})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-gray-400 hover:text-white transition-colors cursor-pointer",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Database Challenge"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-green-400 bg-green-500/10 rounded-lg border border-green-500/20",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Secure Mode"})]})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-1/2 border-r border-gray-700 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-700",children:[e.jsx("button",{onClick:()=>_("description"),className:`px-4 py-3 text-sm font-medium transition-colors ${E==="description"?"text-cyan-400 border-b-2 border-cyan-400":"text-gray-400 hover:text-white"}`,children:"Description"}),e.jsx("button",{onClick:()=>_("submissions"),className:`px-4 py-3 text-sm font-medium transition-colors ${E==="submissions"?"text-cyan-400 border-b-2 border-cyan-400":"text-gray-400 hover:text-white"}`,children:"Submissions"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:E==="description"?e.jsx("div",{className:"space-y-4",children:b?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx(ae,{className:"w-8 h-8 text-cyan-400 animate-spin"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"prose prose-invert max-w-none problem-statement",dangerouslySetInnerHTML:{__html:n?.problemStatement||""}}),n?.examples&&n.examples.length>0&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Examples"}),n.examples.map((l,p)=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 divide-x divide-gray-700",children:[e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Input"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:l.input})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Output"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:l.output})]})]}),l.explanation&&e.jsxs("div",{className:"px-3 pb-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Explanation"}),e.jsx("p",{className:"text-sm text-gray-300",children:l.explanation})]})]},p))]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Sample Test Cases (",h.length,")"]}),e.jsxs("button",{onClick:async()=>{if(t){w(!0);const l=await yt(t);g(l),w(!1)}},className:"flex items-center gap-1 text-sm text-cyan-400 hover:text-cyan-300",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Refresh"]})]}),h.length>0?h.map((l,p)=>e.jsx(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:p*.1},className:"bg-gradient-to-br from-gray-800/80 to-gray-900/80 rounded-xl border border-gray-700 overflow-hidden shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"grid grid-cols-2 divide-x divide-gray-700",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-900/20 to-transparent",children:[e.jsx("p",{className:"text-xs text-[#00ADB5] mb-2 font-semibold flex items-center gap-1",children:"ðŸ“ Input"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap bg-gray-900/50 p-2 rounded",children:l.input})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-900/20 to-transparent",children:[e.jsx("p",{className:"text-xs text-green-400 mb-2 font-semibold flex items-center gap-1",children:"âœ… Output"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap bg-gray-900/50 p-2 rounded",children:l.expectedOutput})]})]})},p)):e.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700 p-6 text-center",children:[e.jsx("p",{className:"text-gray-400 mb-2",children:"No test cases loaded yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click Refresh to load test cases or use custom input"})]})]}),n?.tags&&n.tags.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("button",{onClick:()=>M(!W),className:"flex items-center gap-2 text-yellow-400 hover:text-yellow-300 transition-colors",children:[e.jsx(St,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:W?"Hide Hints":"Show Hints (Tags)"})]}),e.jsx(oe,{children:W&&e.jsx(o.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 flex flex-wrap gap-2",children:n.tags.map((l,p)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-700 text-gray-300 rounded",children:l},p))})})]})]})}):e.jsxs("div",{className:"text-center py-10 text-gray-400",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Your submission history will appear here"})]})})]}),e.jsxs("div",{className:"w-1/2 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(ct,{height:"100%",language:y==="cpp"?"cpp":y,value:k,onChange:l=>A(l||""),theme:"vs-dark",options:{fontSize:14,fontFamily:"JetBrains Mono, Fira Code, Consolas, monospace",minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",glyphMargin:!1,folding:!0,lineDecorationsWidth:10,automaticLayout:!0,tabSize:4,wordWrap:"on",padding:{top:10}}})}),e.jsxs("div",{className:"border-t border-gray-700 px-4 py-2 flex items-center gap-4 bg-gray-800/50",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:l=>m(l.target.checked),className:"w-4 h-4 bg-gray-700 border-gray-600 rounded accent-cyan-500"}),"Custom Input"]}),v&&e.jsx("textarea",{value:f,onChange:l=>I(l.target.value),placeholder:"Enter custom input...",className:"flex-1 px-3 py-1 bg-gray-800 border border-gray-700 rounded text-sm text-white resize-none h-8"})]}),e.jsx("div",{className:"h-48 border-t border-gray-700 bg-gray-800/50 overflow-y-auto",children:R||d?e.jsxs("div",{className:"p-4",children:[d&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-medium ${d.error?"text-red-400":"text-green-400"}`,children:d.status}),d.time&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(we,{className:"w-3 h-3"}),d.time,"s"]}),d.memory&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Me,{className:"w-3 h-3"}),(d.memory/1024).toFixed(2)," MB"]})]}),d.output&&e.jsxs("div",{className:"bg-gray-900 rounded p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Output:"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:d.output})]}),d.stderr&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-3",children:[e.jsx("p",{className:"text-xs text-red-400 mb-1",children:"Error:"}),e.jsx("pre",{className:"text-sm text-red-300 font-mono whitespace-pre-wrap",children:d.stderr})]})]}),R&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${R.success?"bg-green-900/20 border border-green-500/30":"bg-red-900/20 border border-red-500/30"}`,children:[R.success?e.jsx(re,{className:"w-6 h-6 text-green-400"}):e.jsx(ve,{className:"w-6 h-6 text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${R.success?"text-green-400":"text-red-400"}`,children:R.success?"All Tests Passed!":"Some Tests Failed"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[R.passedCount," / ",R.totalCount," test cases passed"]})]}),R.success&&n&&e.jsxs("div",{className:"ml-auto flex items-center gap-2 text-yellow-400",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-bold",children:["+",n.coinReward]})]})]}),R.compilationError&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-3",children:[e.jsx("p",{className:"text-xs text-red-400 mb-1",children:"Compilation Error:"}),e.jsx("pre",{className:"text-sm text-red-300 font-mono whitespace-pre-wrap",children:R.compilationError})]}),R.results&&R.results.length>0&&e.jsx("div",{className:"space-y-2",children:R.results.map((l,p)=>e.jsx("div",{className:`p-2 rounded border ${l.passed?"bg-green-900/10 border-green-500/20":"bg-red-900/10 border-red-500/20"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[l.passed?e.jsx(re,{className:"w-4 h-4 text-green-400"}):e.jsx(ve,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:"text-sm text-white",children:["Test Case ",l.testCase]}),l.time&&e.jsxs("span",{className:"text-xs text-gray-400",children:[l.time,"s"]})]})},p))})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsx("p",{className:"text-sm",children:"Run or submit your code to see results"})})}),e.jsxs("div",{className:"border-t border-gray-700 p-4 flex items-center justify-between bg-gray-800",children:[e.jsxs("button",{onClick:()=>A(U[y]||""),className:"flex items-center gap-2 px-4 py-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Reset Code"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(o.button,{whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(59, 130, 246, 0.3)"},whileTap:{scale:.98},onClick:X,disabled:c||S,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#00ADB5] to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg relative overflow-hidden",children:[c&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/20 to-indigo-400/20"}),c?e.jsx(o.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full relative"}):e.jsx(Ct,{className:"w-4 h-4 relative"}),e.jsx("span",{className:"relative",children:"Run"})]}),e.jsxs(o.button,{whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(34, 197, 94, 0.3)"},whileTap:{scale:.98},onClick:z,disabled:c||S,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 via-emerald-500 to-green-600 hover:from-green-600 hover:via-emerald-600 hover:to-green-700 text-white rounded-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg relative overflow-hidden",children:[S&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-400/20 to-emerald-400/20"}),S?e.jsx(o.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full relative"}):e.jsx(ot,{className:"w-4 h-4 relative"}),e.jsx("span",{className:"relative",children:"âš¡ Submit"})]})]})]})]})]}),e.jsx("style",{children:`
        .problem-statement {
          color: #e5e7eb;
        }
        .problem-statement .header {
          font-size: 1.25rem;
          font-weight: 600;
          margin-bottom: 1rem;
        }
        .problem-statement .time-limit,
        .problem-statement .memory-limit {
          color: #9ca3af;
          font-size: 0.875rem;
        }
        .problem-statement pre {
          background: #1f2937;
          padding: 0.75rem;
          border-radius: 0.5rem;
          overflow-x: auto;
        }
        .problem-statement .section-title {
          font-size: 1.125rem;
          font-weight: 600;
          margin-top: 1.5rem;
          margin-bottom: 0.5rem;
          color: #60a5fa;
        }
        .problem-statement .input-specification,
        .problem-statement .output-specification,
        .problem-statement .note {
          margin-top: 1rem;
        }
        .problem-statement .sample-tests {
          margin-top: 1.5rem;
        }
        .problem-statement .input,
        .problem-statement .output {
          background: #1f2937;
          padding: 0.5rem;
          border-radius: 0.25rem;
          margin: 0.5rem 0;
        }
      `})]})},Ys=()=>{const{user:t}=fe(),{fetchGlobalLeaderboard:a,fetchWeeklyLeaderboard:s,fetchMonthlyLeaderboard:r,getUserWallet:n}=be(),[x,h]=i.useState("global"),[g,b]=i.useState([]),[w,k]=i.useState(!0),[A,y]=i.useState(null),[B,u]=i.useState(null);i.useEffect(()=>{(async()=>{k(!0);try{let C=[];switch(x){case"global":C=await a();break;case"weekly":C=await s();break;case"monthly":C=await r();break}if(b(C),t){const S=await n(t.id);u(S);const O=C.find(R=>R.odId===t.id);O&&y(O)}}catch(C){console.error("Error loading leaderboard:",C),b([])}finally{k(!1)}})()},[x,t]);const j=c=>{switch(c){case 1:return e.jsx(ge,{className:"w-5 h-5 text-yellow-500"});case 2:return e.jsx(Ie,{className:"w-5 h-5 text-gray-400"});case 3:return e.jsx(Ie,{className:"w-5 h-5 text-amber-600"});default:return null}};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"space-y-6 pb-20 md:pb-6",children:[e.jsx(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-xl",children:e.jsx(Q,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ðŸ† Leaderboard"}),e.jsx("p",{className:"text-gray-500 dark:text-white text-sm",children:"Compete with the best coders"})]})]}),e.jsx("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-700 p-2 rounded-lg",children:[{id:"global",label:"All Time",icon:Q},{id:"weekly",label:"Weekly",icon:vt},{id:"monthly",label:"Monthly",icon:we}].map(c=>e.jsxs(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${x===c.id?"bg-[#00ADB5] text-white":"text-gray-600 dark:text-white hover:text-gray-800 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(c.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:c.label})]},c.id))})]})}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6 text-center",children:"Top Performers"}),e.jsxs("div",{className:"flex items-end justify-center gap-4 md:gap-8",children:[g[1]&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full bg-gray-500 flex items-center justify-center text-xl md:text-2xl font-bold text-white shadow-md border-2 border-gray-400",children:g[1]?.avatar||g[1]?.odName?.[0]||"?"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-7 h-7 bg-gray-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"2"})})]}),e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold text-sm md:text-base text-center truncate max-w-[80px] md:max-w-[100px]",children:g[1]?.odName}),e.jsxs("p",{className:"text-gray-600 dark:text-white text-xs",children:["Level ",g[1]?.level]}),e.jsxs("div",{className:"mt-3 h-20 w-20 md:w-24 rounded-t-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-[#00ADB5] font-bold text-lg",children:g[1]?.rating}),e.jsxs("span",{className:"text-gray-600 dark:text-white text-xs",children:[g[1]?.problemsSolved," solved"]})]})]}),g[0]&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center -mt-4",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full bg-amber-500 flex items-center justify-center text-2xl md:text-3xl font-bold text-white shadow-xl border-3 border-amber-400",children:g[0]?.avatar||g[0]?.odName?.[0]||"?"}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-amber-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(ge,{className:"w-5 h-5 text-white"})})]}),e.jsx("p",{className:"text-gray-900 dark:text-white font-bold text-base md:text-lg text-center truncate max-w-[100px] md:max-w-[120px]",children:g[0]?.odName}),e.jsxs("p",{className:"text-gray-600 dark:text-white text-xs",children:["Level ",g[0]?.level]}),e.jsxs("div",{className:"mt-3 h-28 w-24 md:w-28 rounded-t-xl bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700 shadow-md flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-[#00ADB5] font-bold text-xl",children:g[0]?.rating}),e.jsxs("span",{className:"text-gray-600 dark:text-white text-xs",children:[g[0]?.problemsSolved," solved"]})]})]}),g[2]&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full bg-orange-500 flex items-center justify-center text-xl md:text-2xl font-bold text-white shadow-md border-2 border-orange-400",children:g[2]?.avatar||g[2]?.odName?.[0]||"?"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-7 h-7 bg-orange-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"3"})})]}),e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold text-sm md:text-base text-center truncate max-w-[80px] md:max-w-[100px]",children:g[2]?.odName}),e.jsxs("p",{className:"text-gray-600 dark:text-white text-xs",children:["Level ",g[2]?.level]}),e.jsxs("div",{className:"mt-3 h-16 w-20 md:w-24 rounded-t-xl bg-orange-50 dark:bg-orange-900/30 border border-orange-200 dark:border-orange-700 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-[#00ADB5] font-bold text-lg",children:g[2]?.rating}),e.jsxs("span",{className:"text-gray-600 dark:text-white text-xs",children:[g[2]?.problemsSolved," solved"]})]})]})]})]}),B&&e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 border border-[#00ADB5]/30 dark:border-blue-700 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-xl font-bold text-white shadow-lg",children:B?.userName?.[0]||"Y"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-[#00ADB5] rounded-full flex items-center justify-center text-xs font-bold text-white border-2 border-white dark:border-gray-800",children:A?.rank||"?"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:B?.userName||"You"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-white",children:"Your Current Rank"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#00ADB5] font-bold text-xl",children:A?.rating||B?.coins||1e3}),e.jsx("p",{className:"text-xs text-gray-500",children:"Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-emerald-600 font-bold text-xl",children:A?.problemsSolved||0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:"Solved"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-purple-600 font-bold text-xl",children:A?.battlesWon||0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:"Wins"})]})]})]})}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-4 py-3 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"col-span-1 text-center",children:"#"}),e.jsx("div",{className:"col-span-5",children:"Player"}),e.jsx("div",{className:"col-span-2 text-center",children:"Rating"}),e.jsx("div",{className:"col-span-2 text-center hidden sm:block",children:"Solved"}),e.jsx("div",{className:"col-span-2 text-center hidden sm:block",children:"Wins"})]}),w?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(ae,{className:"w-8 h-8 text-[#00ADB5] animate-spin"})}):g.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-500 dark:text-white",children:[e.jsx(Q,{className:"w-12 h-12 mb-3 opacity-30"}),e.jsx("p",{className:"text-lg font-medium",children:"No rankings yet"}),e.jsx("p",{className:"text-sm",children:"Start solving challenges to appear on the leaderboard!"})]}):e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:g.map((c,C)=>e.jsxs(o.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:C*.03},className:`grid grid-cols-12 gap-2 px-4 py-4 items-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${c.odId===t?.id?"bg-[#00ADB5]/10 dark:bg-[#00ADB5]/20 border-l-4 border-[#00ADB5]":""}`,children:[e.jsx("div",{className:"col-span-1 flex items-center justify-center",children:c.rank<=3?e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${c.rank===1?"bg-yellow-100":c.rank===2?"bg-gray-100":"bg-amber-100"}`,children:j(c.rank)}):e.jsx("span",{className:"text-gray-500 dark:text-white font-medium",children:c.rank})}),e.jsxs("div",{className:"col-span-5 flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold text-white flex-shrink-0 ${c.rank===1?"bg-amber-500":c.rank===2?"bg-gray-500":c.rank===3?"bg-orange-500":"bg-gray-400"}`,children:c.avatar||c.odName?.[0]||"?"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium truncate flex items-center gap-2",children:[c.odName,c.odId===t?.id&&e.jsx("span",{className:"text-xs bg-[#00ADB5]/20 dark:bg-blue-900/50 text-[#00ADB5] dark:text-[#00ADB5] px-2 py-0.5 rounded-full font-medium",children:"You"})]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-white flex items-center gap-1",children:[e.jsx(Ae,{className:"w-3 h-3 text-amber-500"}),"Level ",c.level]})]})]}),e.jsx("div",{className:"col-span-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Ye,{className:"w-4 h-4 text-[#00ADB5]"}),e.jsx("span",{className:"text-[#00ADB5] font-bold",children:c.rating})]})}),e.jsx("div",{className:"col-span-2 text-center hidden sm:block",children:e.jsx("span",{className:"text-green-600 font-medium",children:c.problemsSolved})}),e.jsx("div",{className:"col-span-2 text-center hidden sm:block",children:e.jsx("span",{className:"text-purple-600 font-medium",children:c.battlesWon})})]},c.odId||C))})]}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(Gt,{className:"w-5 h-5 text-amber-600"}),"Weekly Rewards"]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:[{rank:"1st Place",coins:100,icon:ge,bgColor:"bg-amber-50 dark:bg-amber-900/30",iconBg:"bg-amber-500",borderColor:"border-amber-200 dark:border-amber-700"},{rank:"2nd Place",coins:50,icon:Ie,bgColor:"bg-gray-50 dark:bg-gray-700",iconBg:"bg-gray-500",borderColor:"border-gray-200 dark:border-gray-600"},{rank:"3rd Place",coins:200,icon:Ie,bgColor:"bg-orange-50 dark:bg-orange-900/30",iconBg:"bg-orange-500",borderColor:"border-orange-200 dark:border-orange-700"}].map((c,C)=>e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6+C*.1},className:`flex items-center gap-4 p-4 rounded-lg border ${c.bgColor} ${c.borderColor} hover:shadow-md transition-all`,children:[e.jsx("div",{className:`p-3 rounded-lg ${c.iconBg} shadow-sm`,children:e.jsx(c.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:c.rank}),e.jsxs("p",{className:"text-amber-600 font-bold text-lg",children:[c.coins.toLocaleString()," coins"]})]})]},C))})]})]})})},jt=t=>Array.isArray(t)?t.map(a=>({input:a.input||"",expectedOutput:a.expectedOutput||a.expected_output||"",isHidden:a.isHidden||!1,points:a.points||0})):[],qs=()=>{const{challengeId:t}=Ve(),a=pe(),s=it(),[r,n]=i.useState(null),[x,h]=i.useState(!0),[g,b]=i.useState(""),[w,k]=i.useState("python"),[A,y]=i.useState(!1),[B,u]=i.useState(!1),[j,c]=i.useState(!1),[C,S]=i.useState(null),[O,R]=i.useState(null),[L,d]=i.useState(""),[T,f]=i.useState(!1),[I,v]=i.useState("description"),[m,E]=i.useState(!1),[_,W]=i.useState(!1),[M,P]=i.useState({}),H=Ft();i.useEffect(()=>{(async()=>{if(t){h(!0);try{let p=s.state?.challenge;if(p&&!p.problemStatement){const J={easy:"Easy",Easy:"Easy",medium:"Medium",Medium:"Medium",hard:"Hard",Hard:"Hard",expert:"Hard"}[p.difficulty]||"Medium";p={id:p.id,title:p.title,description:p.description,difficulty:J,category:p.category||p.topic,points:100,coinReward:p.coinReward||10,timeLimit:5e3,memoryLimit:256,problemStatement:p.description,inputFormat:"Standard input",outputFormat:"Standard output",constraints:[p.constraints||"N/A"],examples:[],testCases:jt(p.testCases||p.test_cases||[]),hints:[],tags:[p.category||p.topic],isPremium:!1,isDaily:!1,totalSubmissions:0,successfulSubmissions:0,acceptanceRate:0,createdAt:new Date,updatedAt:new Date}}p||(p=await Pt(t)),p&&(n(p),p.starterCode?.[w]?b(p.starterCode[w]||""):b(q(w))),h(!1)}catch(p){console.error("Error loading challenge:",p),h(!1)}}})()},[t,s]),i.useEffect(()=>{r?.starterCode?.[w]?b(r.starterCode[w]||""):b(q(w))},[w,r]);const q=l=>{const p={python:`# Write your solution here
def solve():
    # Read input
    n = int(input())
    
    # Your code here
    result = n
    
    # Print output
    print(result)

solve()`,cpp:`#include <bits/stdc++.h>
using namespace std;

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    
    // Read input
    int n;
    cin >> n;
    
    // Your code here
    int result = n;
    
    // Print output
    cout << result << endl;
    
    return 0;
}`,java:`import java.util.*;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        
        // Read input
        int n = sc.nextInt();
        
        // Your code here
        int result = n;
        
        // Print output
        System.out.println(result);
    }
}`,javascript:`// Read input from stdin
const readline = require('readline');
const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
});

let lines = [];
rl.on('line', (line) => {
    lines.push(line);
});

rl.on('close', () => {
    // Parse input
    const n = parseInt(lines[0]);
    
    // Your code here
    const result = n;
    
    // Print output
    console.log(result);
});`};return p[l]||p.python},U=async()=>{if(r){u(!0),R(null),S(null);try{const l=r.testCases.filter(J=>!J.isHidden),p=T?L:l[0]?.input||"",F=await Ws(g,w,p);R(F)}catch(l){R({output:"",error:l?.message||"Failed to run code. Please try again.",time:null,memory:null,status:"Error"})}u(!1)}},X=async()=>{if(!(!r||!t)){c(!0),S(null),R(null);try{let l=r.testCases||[];if(l.length===0&&(l=jt(await Os(t)||[])),l.length===0){S({success:!1,results:[],passedCount:0,totalCount:0,totalTime:0,totalMemory:0,compilationError:"No test cases available for this challenge."}),c(!1);return}const p=l.map(J=>({input:J.input||"",expectedOutput:J.expectedOutput||J.expected_output||""})),F=await st.submitChallenge(t,g,w,p,r.coinReward||10,r.title,r.difficulty);S({success:F.success,passedCount:F.passedCount,totalCount:F.totalCount,totalTime:0,totalMemory:0,results:F.testResults?.map((J,Pe)=>({testCase:Pe+1,passed:J.passed,input:J.input,expected:J.expected,output:J.output,error:J.error}))||[]}),F.success?(W(!0),F.coinsChanged>0&&alert(`ðŸŽ‰ ${F.message}`)):F.coinsChanged<0?alert(`âŒ ${F.message}`):F.message&&alert(F.message)}catch(l){console.error("Submission error:",l),S({success:!1,results:[],passedCount:0,totalCount:0,totalTime:0,totalMemory:0,compilationError:l?.message||"Submission failed. Please try again."})}c(!1)}},z=l=>{switch(l){case"easy":return"text-green-400 bg-green-400/10 border-green-400/30";case"medium":return"text-yellow-400 bg-yellow-400/10 border-yellow-400/30";case"hard":return"text-red-400 bg-red-400/10 border-red-400/30";case"expert":return"text-purple-400 bg-purple-400/10 border-purple-400/30";default:return"text-gray-400 bg-gray-400/10 border-gray-400/30"}};if(x)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx(o.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full"})});if(!r)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Challenge Not Found"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"The challenge you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>a("/dashboard/codearena/practice"),className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors",children:"Back to Challenges"})]})});const V=r.testCases.filter(l=>!l.isHidden);return e.jsxs("div",{className:"h-screen bg-gray-900 flex flex-col overflow-hidden -mx-4 -mt-6",children:[e.jsxs("header",{className:"bg-gray-800/90 border-b border-gray-700 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/dashboard/codearena/practice"),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(kt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-bold text-white flex items-center gap-2",children:[r.title,_&&e.jsx(re,{className:"w-5 h-5 text-green-400"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full border ${z(r.difficulty)}`,children:r.difficulty?r.difficulty.charAt(0).toUpperCase()+r.difficulty.slice(1):"Unknown"}),e.jsx("span",{className:"text-gray-400",children:r.category}),e.jsxs("span",{className:"flex items-center gap-1 text-yellow-400",children:[e.jsx(ee,{className:"w-4 h-4"}),r.coinReward]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>y(!A),className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[e.jsx(le,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{className:"text-white capitalize",children:w}),e.jsx(lt,{className:"w-4 h-4 text-gray-400"})]}),e.jsx(oe,{children:A&&e.jsx(o.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 top-full mt-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 overflow-hidden",children:H.filter(l=>["python","cpp","java","javascript"].includes(l.id)).map(l=>e.jsx("button",{onClick:()=>{k(l.id),y(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-700 transition-colors ${w===l.id?"text-cyan-400 bg-gray-700/50":"text-white"}`,children:l.name},l.id))})})]})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-1/2 border-r border-gray-700 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-700",children:[e.jsx("button",{onClick:()=>v("description"),className:`px-4 py-3 text-sm font-medium transition-colors ${I==="description"?"text-cyan-400 border-b-2 border-cyan-400":"text-gray-400 hover:text-white"}`,children:"Description"}),e.jsx("button",{onClick:()=>v("submissions"),className:`px-4 py-3 text-sm font-medium transition-colors ${I==="submissions"?"text-cyan-400 border-b-2 border-cyan-400":"text-gray-400 hover:text-white"}`,children:"Submissions"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:I==="description"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"prose prose-invert max-w-none problem-statement",dangerouslySetInnerHTML:{__html:r.problemStatement||""}}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Examples"}),(r.examples||[]).map((l,p)=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 divide-x divide-gray-700",children:[e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Input"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:l.input})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Output"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:l.output})]})]}),l.explanation&&e.jsxs("div",{className:"p-3 border-t border-gray-700 bg-gray-800/30",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Explanation"}),e.jsx("p",{className:"text-sm text-gray-300",children:l.explanation})]})]},p))]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Sample Test Cases (",V.length,")"]}),V.map((l,p)=>e.jsx("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700 overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-2 divide-x divide-gray-700",children:[e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Input"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:l.input})]}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Expected Output"}),e.jsxs("button",{onClick:()=>P(F=>({...F,[p]:!F[p]})),className:"text-xs text-cyan-400 hover:text-cyan-300 flex items-center gap-1",children:[M[p]?e.jsx(da,{className:"w-3 h-3"}):e.jsx(Kt,{className:"w-3 h-3"}),M[p]?"Hide":"Show"]})]}),M[p]?e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:l.expectedOutput}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:'Click "Show" to reveal'})]})]})},p))]}),r.hints&&r.hints.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("button",{onClick:()=>E(!m),className:"flex items-center gap-2 text-yellow-400 hover:text-yellow-300 transition-colors",children:[e.jsx(St,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:m?"Hide Hints":"Show Hints"})]}),e.jsx(oe,{children:m&&e.jsx(o.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 space-y-2",children:r.hints.map((l,p)=>e.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-xs text-yellow-400",children:["Hint ",p+1]}),e.jsxs("span",{className:"text-xs text-yellow-400/70",children:[typeof l=="object"?l.coinCost:5," coins"]})]}),e.jsx("p",{className:"text-sm text-gray-300",children:typeof l=="object"?l.text:l})]},p))})})]}),r.tags&&r.tags.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map((l,p)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-700 text-gray-300 rounded",children:l},p))})]})]}):e.jsxs("div",{className:"text-center py-10 text-gray-400",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Your submission history will appear here"})]})})]}),e.jsxs("div",{className:"w-1/2 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(ct,{height:"100%",language:w==="cpp"?"cpp":w,value:g,onChange:l=>b(l||""),theme:"vs-dark",options:{fontSize:14,fontFamily:"JetBrains Mono, Fira Code, Consolas, monospace",minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",glyphMargin:!1,folding:!0,lineDecorationsWidth:10,automaticLayout:!0,tabSize:4,wordWrap:"on",padding:{top:10}}})}),e.jsxs("div",{className:"border-t border-gray-700 px-4 py-2 flex items-center gap-4 bg-gray-800/50",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:l=>f(l.target.checked),className:"w-4 h-4 bg-gray-700 border-gray-600 rounded accent-cyan-500"}),"Custom Input"]}),T&&e.jsx("textarea",{value:L,onChange:l=>d(l.target.value),placeholder:"Enter custom input...",className:"flex-1 px-3 py-1 bg-gray-800 border border-gray-700 rounded text-sm text-white resize-none h-8"})]}),e.jsx("div",{className:"h-48 border-t border-gray-700 bg-gray-800/50 overflow-y-auto",children:C||O?e.jsxs("div",{className:"p-4",children:[O&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-medium ${O.error?"text-red-400":"text-green-400"}`,children:O.status}),O.time&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(we,{className:"w-3 h-3"}),O.time,"s"]}),O.memory&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Me,{className:"w-3 h-3"}),(O.memory/1024).toFixed(2)," MB"]})]}),O.output&&e.jsxs("div",{className:"bg-gray-900 rounded p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Output:"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:O.output})]}),O.error&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-3",children:[e.jsx("p",{className:"text-xs text-red-400 mb-1",children:"Error:"}),e.jsx("pre",{className:"text-sm text-red-300 font-mono whitespace-pre-wrap",children:O.error})]})]}),C&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${C.success?"bg-green-900/20 border border-green-500/30":"bg-red-900/20 border border-red-500/30"}`,children:[C.success?e.jsx(re,{className:"w-6 h-6 text-green-400"}):e.jsx(ve,{className:"w-6 h-6 text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${C.success?"text-green-400":"text-red-400"}`,children:C.success?"All Tests Passed!":"Some Tests Failed"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[C.passedCount," / ",C.totalCount," test cases passed"]})]}),C.success&&r&&e.jsxs("div",{className:"ml-auto flex items-center gap-2 text-yellow-400",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-bold",children:["+",r.coinReward]})]})]}),C.compilationError&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-3",children:[e.jsx("p",{className:"text-xs text-red-400 mb-1",children:"Compilation Error:"}),e.jsx("pre",{className:"text-sm text-red-300 font-mono whitespace-pre-wrap",children:C.compilationError})]}),C.results&&C.results.length>0&&e.jsx("div",{className:"space-y-2",children:C.results.map((l,p)=>e.jsxs("div",{className:`p-2 rounded border ${l.passed?"bg-green-900/10 border-green-500/20":"bg-red-900/10 border-red-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[l.passed?e.jsx(re,{className:"w-4 h-4 text-green-400"}):e.jsx(ve,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:"text-sm text-white",children:["Test Case ",l.testCase]}),l.time&&e.jsxs("span",{className:"text-xs text-gray-400",children:[l.time,"s"]})]}),!l.passed&&l.actualOutput&&e.jsxs("div",{className:"mt-2 pl-6",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Your output:"}),e.jsx("pre",{className:"text-xs text-red-300 font-mono",children:l.actualOutput}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Expected:"}),e.jsx("pre",{className:"text-xs text-green-300 font-mono",children:l.expectedOutput})]})]},p))})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsx("p",{className:"text-sm",children:"Run or submit your code to see results"})})}),e.jsxs("div",{className:"border-t border-gray-700 p-4 flex items-center justify-between bg-gray-800",children:[e.jsxs("button",{onClick:()=>{r?.starterCode?.[w]?b(r.starterCode[w]||""):b(q(w))},className:"flex items-center gap-2 px-4 py-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Reset Code"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(o.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:U,disabled:B||j,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[B?e.jsx(ae,{className:"w-4 h-4 animate-spin"}):e.jsx(Ct,{className:"w-4 h-4"}),"Run"]}),e.jsxs(o.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:X,disabled:B||j,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[j?e.jsx(ae,{className:"w-4 h-4 animate-spin"}):e.jsx(ot,{className:"w-4 h-4"}),"Submit"]})]})]})]})]}),e.jsx("style",{children:`
        .problem-statement {
          color: #e5e7eb;
        }
        .problem-statement .header {
          font-size: 1.25rem;
          font-weight: 600;
          margin-bottom: 1rem;
        }
        .problem-statement .time-limit,
        .problem-statement .memory-limit {
          color: #9ca3af;
          font-size: 0.875rem;
        }
        .problem-statement pre {
          background: #1f2937;
          padding: 0.75rem;
          border-radius: 0.5rem;
          overflow-x: auto;
        }
        .problem-statement code {
          background: #374151;
          padding: 0.125rem 0.375rem;
          border-radius: 0.25rem;
          font-size: 0.875rem;
        }
        .problem-statement .section-title {
          font-size: 1.125rem;
          font-weight: 600;
          margin-top: 1.5rem;
          margin-bottom: 0.5rem;
          color: #60a5fa;
        }
        .problem-statement ul {
          padding-left: 1.5rem;
          list-style-type: disc;
        }
        .problem-statement ol {
          padding-left: 1.5rem;
          list-style-type: decimal;
        }
        .problem-statement li {
          margin: 0.25rem 0;
        }
      `})]})},Gs=[{problems:[{id:"A001",title:"Maximum Subarray Sum",difficulty:"Medium",timeLimit:"1s",memoryLimit:"256MB",description:"Given an integer array nums, find the contiguous subarray (containing at least one number) which has the largest sum and return its sum.",inputFormat:`First line contains integer n (1 â‰¤ n â‰¤ 10^5) - the length of array.
Second line contains n integers a_i (-10^4 â‰¤ a_i â‰¤ 10^4) - array elements.`,outputFormat:"Print a single integer - the maximum sum of contiguous subarray.",constraints:["1 â‰¤ n â‰¤ 100000","-10000 â‰¤ nums[i] â‰¤ 10000"],tags:["array","dynamic-programming","kadane"],testCases:[{input:`9
-2 1 -3 4 -1 2 1 -5 4`,output:"6",explanation:"Subarray [4,-1,2,1] has the largest sum = 6"},{input:`1
5`,output:"5",explanation:"Single element array"},{input:`5
-1 -2 -3 -4 -5`,output:"-1",explanation:"All negative, choose the largest"}]},{id:"A002",title:"Rotate Array",difficulty:"Easy",timeLimit:"2s",memoryLimit:"256MB",description:"Given an array, rotate the array to the right by k steps, where k is non-negative.",inputFormat:`First line contains two integers n and k (1 â‰¤ n â‰¤ 10^5, 0 â‰¤ k â‰¤ 10^9) - array length and rotation steps.
Second line contains n integers a_i (1 â‰¤ a_i â‰¤ 10^9) - array elements.`,outputFormat:"Print n integers - the rotated array.",constraints:["1 â‰¤ n â‰¤ 100000","0 â‰¤ k â‰¤ 10^9","1 â‰¤ nums[i] â‰¤ 10^9"],tags:["array","math"],testCases:[{input:`7 3
1 2 3 4 5 6 7`,output:"5 6 7 1 2 3 4",explanation:"Rotate right by 3 steps"},{input:`3 2
-1 -100 3`,output:"-100 3 -1",explanation:"Rotate right by 2 steps"},{input:`2 5
1 2`,output:"2 1",explanation:"k=5 is same as k=1 for length 2"}]},{id:"A003",title:"Find Missing Number",difficulty:"Easy",timeLimit:"1s",memoryLimit:"256MB",description:"Given an array nums containing n distinct numbers in the range [0, n], return the only number in the range that is missing from the array.",inputFormat:`First line contains integer n (1 â‰¤ n â‰¤ 10^4).
Second line contains n integers - array elements (each in range [0, n]).`,outputFormat:"Print a single integer - the missing number.",constraints:["1 â‰¤ n â‰¤ 10000","0 â‰¤ nums[i] â‰¤ n","All numbers are distinct"],tags:["array","math","bit-manipulation"],testCases:[{input:`3
3 0 1`,output:"2",explanation:"n=3, array has [0,1,3], missing 2"},{input:`2
0 1`,output:"2",explanation:"Range [0,2], missing 2"},{input:`9
9 6 4 2 3 5 7 0 1`,output:"8",explanation:"Missing number is 8"}]},{id:"A004",title:"Product of Array Except Self",difficulty:"Medium",timeLimit:"2s",memoryLimit:"256MB",description:"Given an integer array nums, return an array answer such that answer[i] is equal to the product of all the elements of nums except nums[i]. You must write an algorithm that runs in O(n) time and without using the division operation.",inputFormat:`First line contains integer n (2 â‰¤ n â‰¤ 10^5).
Second line contains n integers a_i (1 â‰¤ |a_i| â‰¤ 30) - array elements.`,outputFormat:"Print n integers - the product array.",constraints:["2 â‰¤ n â‰¤ 100000","-30 â‰¤ nums[i] â‰¤ 30","Product of any prefix/suffix fits in 32-bit integer"],tags:["array","prefix-sum"],testCases:[{input:`4
1 2 3 4`,output:"24 12 8 6",explanation:"[2*3*4, 1*3*4, 1*2*4, 1*2*3]"},{input:`5
-1 1 0 -3 3`,output:"0 0 9 0 0",explanation:"Product except self with zero"}]},{id:"A005",title:"Container With Most Water",difficulty:"Medium",timeLimit:"1s",memoryLimit:"256MB",description:"You are given an integer array height of length n. There are n vertical lines drawn such that the two endpoints of the i-th line are (i, 0) and (i, height[i]). Find two lines that together with the x-axis form a container, such that the container contains the most water. Return the maximum amount of water a container can store.",inputFormat:`First line contains integer n (2 â‰¤ n â‰¤ 10^5).
Second line contains n integers h_i (0 â‰¤ h_i â‰¤ 10^4) - heights.`,outputFormat:"Print a single integer - maximum water area.",constraints:["2 â‰¤ n â‰¤ 100000","0 â‰¤ height[i] â‰¤ 10000"],tags:["array","two-pointers","greedy"],testCases:[{input:`9
1 8 6 2 5 4 8 3 7`,output:"49",explanation:"Lines at index 1 and 8, area = min(8,7) * 7 = 49"},{input:`2
1 1`,output:"1",explanation:"Only two lines, area = 1"},{input:`6
4 3 2 1 4 5`,output:"16",explanation:"Lines at index 0 and 5, area = min(4,5) * 5 = 20? No, distance is 5"}]},{id:"A006",title:"Find All Duplicates in Array",difficulty:"Medium",timeLimit:"1s",memoryLimit:"256MB",description:"Given an integer array nums of length n where all integers are in the range [1, n] and each integer appears once or twice, return an array of all the integers that appears twice. You must solve it without extra space and in O(n) runtime.",inputFormat:`First line contains integer n (1 â‰¤ n â‰¤ 10^5).
Second line contains n integers a_i (1 â‰¤ a_i â‰¤ n).`,outputFormat:"Print all duplicate numbers in any order (space-separated). If no duplicates, print empty line.",constraints:["1 â‰¤ n â‰¤ 100000","1 â‰¤ nums[i] â‰¤ n","Each element appears once or twice"],tags:["array","hash-table"],testCases:[{input:`8
4 3 2 7 8 2 3 1`,output:"2 3",explanation:"2 and 3 appear twice"},{input:`2
1 1`,output:"1",explanation:"1 appears twice"},{input:`1
1`,output:"",explanation:"No duplicates"}]}]}],Js="/questions.json";let Be=null,tt=0;const Qs=36e5,rt=async()=>{if(Be&&Date.now()-tt<Qs)return console.log("âœ“ Using cached questions:",Be.length),Be;try{console.log("ðŸ“¥ Attempting to fetch from local /questions.json...");const t=await fetch(Js);if(t.ok){const a=await t.json(),s=wt(a);if(s.length>0)return console.log(`âœ“ Loaded ${s.length} questions from local file`),Be=s,tt=Date.now(),s}}catch{console.warn("âš ï¸ Local file fetch failed, using bundled data...")}try{const a=wt(Gs);if(a.length>0)return console.log(`âœ“ Loaded ${a.length} questions from bundled data`),Be=a,tt=Date.now(),a}catch(t){console.error("âŒ Failed to load bundled questions:",t)}return console.error("âŒ All question sources failed"),[]};function wt(t){if(!t)return[];let a=[];if(Array.isArray(t))a=t;else{const s=t;if(Array.isArray(s.problems))a=s.problems;else if(Array.isArray(s.questions))a=s.questions;else return[]}return a.map(s=>{const r=s,n=String(r.difficulty??r.level??"").trim().toLowerCase();let x="medium";n.startsWith("e")?x="easy":n.startsWith("m")?x="medium":n.startsWith("h")&&(x="hard");const h=r.id??r._id??"",g=r.title??r.name??"Untitled",b=r.description??r.prompt??"";let w="General";typeof r.category=="string"?w=String(r.category):Array.isArray(r.tags)&&r.tags.length>0?w=String(r.tags[0]):typeof r.topic=="string"&&(w=String(r.topic));const k=Number(r.coinReward??r.coins??r.reward??0)||0,A=Array.isArray(r.testCases)?r.testCases:Array.isArray(r.test_cases)?r.test_cases:[],y=B=>{const u=B,j=String(u.input??u.stdin??""),c=String(u.output??u.expected_output??u.expectedOutput??""),C=!!(u.isHidden??u.hidden??!1),S=typeof u.points=="number"?u.points:void 0;return{input:j,expectedOutput:c,expected_output:c,isHidden:C,points:S}};return{id:String(h),title:String(g),description:String(b),category:w,difficulty:x,coinReward:k,coins:k,constraints:String(r.constraints??r.limits??""),solution_hint:String(r.solution_hint??r.hint??""),testCases:A.map(y),test_cases:A.map(B=>{const u=y(B);return{input:u.input,expected_output:u.expected_output}})}})}const Ks=async()=>{const t=await rt(),a=new Set(t.map(s=>s.category));return Array.from(a).sort()},Xs=()=>{const t=pe(),[a,s]=i.useState([]),[r,n]=i.useState([]),[x,h]=i.useState(!0),[g,b]=i.useState(""),[w,k]=i.useState("all"),[A,y]=i.useState("all"),[B,u]=i.useState([]),[j,c]=i.useState(1),C=20,S=[{id:"all",label:"All",color:"bg-gray-100 text-gray-700 border-gray-200"},{id:"easy",label:"Easy",color:"bg-green-50 text-green-700 border-green-200"},{id:"medium",label:"Medium",color:"bg-yellow-50 text-yellow-700 border-yellow-200"},{id:"hard",label:"Hard",color:"bg-red-50 text-red-700 border-red-200"}];i.useEffect(()=>{(async()=>{h(!0);try{const T=await rt();console.log("Questions loaded:",T.length);const f=await Ks();console.log("Topics:",f.length);const I=T.map(v=>({id:v.id,title:v.title,description:v.description,difficulty:v.difficulty,topic:v.category,tags:[v.category],coinReward:v.coins,acceptanceRate:75,category:v.category,isDaily:!1,isPremium:!1,testCases:v.test_cases,sampleCode:"",examples:"",constraints:v.constraints,solution_hint:v.solution_hint}));console.log("Challenges prepared:",I.length),s(I),n(I.slice(0,C)),u(f),h(!1)}catch(T){console.error("Error loading questions:",T),h(!1)}})()},[]),i.useEffect(()=>{let d=[...a];if(w!=="all"&&(d=d.filter(I=>I.difficulty===w)),A!=="all"&&(d=d.filter(I=>I.topic===A)),g){const I=g.toLowerCase();d=d.filter(v=>v.title.toLowerCase().includes(I)||v.description.toLowerCase().includes(I)||v.tags.some(m=>m.toLowerCase().includes(I)))}console.log("Filtered challenges:",d.length,"from",a.length);const T=(j-1)*C,f=d.slice(T,T+C);console.log("Paginated challenges:",f.length),n(f)},[a,w,A,g,j]);const O=async()=>{h(!0);try{const T=(await rt()).map(f=>({id:f.id,title:f.title,description:f.description,difficulty:f.difficulty,topic:f.category,tags:[f.category],coinReward:f.coins,acceptanceRate:75,category:f.category,isDaily:!1,isPremium:!1,testCases:f.test_cases,sampleCode:"",solution_hint:f.solution_hint}));s(T),c(1)}catch(d){console.error("Error refreshing questions:",d)}h(!1)},R=d=>{t(`/dashboard/codearena/challenge/${d.id}`,{state:{challenge:d}})},L=[{label:"Total",value:a.length.toLocaleString(),icon:le,color:"text-[#00ADB5] bg-[#00ADB5]/10"},{label:"Easy",value:a.filter(d=>d.difficulty==="easy").length,icon:Me,color:"text-green-600 bg-green-50"},{label:"Medium",value:a.filter(d=>d.difficulty==="medium").length,icon:xe,color:"text-yellow-600 bg-yellow-50"},{label:"Hard",value:a.filter(d=>d.difficulty==="hard").length,icon:Ae,color:"text-red-600 bg-red-50"}];return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"space-y-6 pb-20 md:pb-6",children:[e.jsx(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:e.jsx(xe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"âš¡ Practice Challenges"}),e.jsx("p",{className:"text-gray-500 dark:text-white text-sm",children:"Solve coding challenges from 3000+ questions and earn coins"})]})]}),e.jsxs(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:O,disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-[#00ADB5] hover:bg-[#00ADB5]/80 text-white font-medium rounded-lg transition-all disabled:opacity-50",children:[e.jsx(Ce,{className:`w-4 h-4 ${x?"animate-spin":""}`}),"Refresh"]})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:L.map((d,T)=>e.jsxs(o.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:T*.1},whileHover:{y:-2,scale:1.02},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:`inline-flex p-2 rounded-lg ${d.color} dark:bg-opacity-20 mb-3 group-hover:scale-110 transition-transform`,children:e.jsx(d.icon,{className:"w-4 h-4"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.value}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-white",children:d.label})]},d.label))}),e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search challenges...",value:g,onChange:d=>{b(d.target.value),c(1)},className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-[#00ADB5] transition-all"})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:S.map(d=>e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{k(d.id),c(1)},className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${w===d.id?d.color:"bg-gray-50 dark:bg-gray-900 text-gray-600 dark:text-white border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:d.label},d.id))}),B.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{y("all"),c(1)},className:`px-4 py-2 rounded-full text-xs font-medium transition-all ${A==="all"?"bg-[#00ADB5] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"All Topics"}),B.slice(0,10).map(d=>e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{y(d),c(1)},className:`px-4 py-2 rounded-full text-xs font-medium transition-all ${A===d?"bg-[#00ADB5] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:d},d)),B.length>10&&e.jsxs("span",{className:"px-4 py-2 text-xs text-gray-500 dark:text-white",children:["+",B.length-10," more"]})]})]}),x?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs(o.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8",children:[e.jsx(o.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-[#00ADB5] border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Loading 3000+ questions from GitHub..."})]})}):r.length===0?e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-20 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(Jt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg",children:"No challenges found"}),e.jsx("p",{className:"text-gray-500 dark:text-white text-sm mt-2",children:"Try adjusting your filters"})]}):e.jsx("div",{className:"space-y-3",children:r.map((d,T)=>e.jsx(o.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:T*.05,duration:.4},whileHover:{y:-2,scale:1.02},className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-6 hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 transition-all group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg group-hover:text-[#00ADB5] dark:group-hover:text-[#00ADB5] transition-colors",children:d.title})}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-3 group-hover:text-gray-700 dark:group-hover:text-gray-300 transition-colors line-clamp-2",children:d.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm mb-3",children:[e.jsx(o.span,{whileHover:{scale:1.05},className:`px-3 py-1 rounded-full text-xs font-semibold ${d.difficulty==="easy"?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-700":d.difficulty==="medium"?"bg-yellow-50 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 border border-yellow-200 dark:border-yellow-700":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-700"}`,children:d.difficulty?d.difficulty.charAt(0).toUpperCase()+d.difficulty.slice(1):"Unknown"}),e.jsx("span",{className:"text-gray-600 dark:text-white text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:d.category}),e.jsxs("span",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400 text-xs font-medium",children:[e.jsx(ee,{className:"w-3 h-3"}),d.coinReward||d.coins||0]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-6",children:e.jsxs(o.button,{whileHover:{scale:1.05,boxShadow:"0 10px 30px rgba(59, 130, 246, 0.3)"},whileTap:{scale:.95},onClick:()=>R(d),className:"flex items-center gap-2 px-6 py-3 bg-[#00ADB5] hover:bg-[#00ADB5]/80 text-white text-sm font-semibold rounded-lg transition-all",children:[e.jsx("span",{className:"relative",children:"Solve"}),e.jsx(qe,{className:"w-4 h-4 relative"})]})})]})},d.id))}),!x&&r.length>0&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-center gap-3",children:[e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(d=>Math.max(1,d-1)),disabled:j===1,className:"px-6 py-3 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all font-medium shadow-sm",children:"Previous"}),e.jsxs("span",{className:"px-4 py-3 text-gray-700 dark:text-gray-300 text-sm bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:["Page ",j]}),e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(d=>d+1),disabled:r.length<C,className:"px-6 py-3 bg-[#00ADB5] hover:bg-[#00ADB5]/80 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all font-medium shadow-sm",children:"Next"})]})]})})},Zs=()=>{const[t,a]=i.useState(!1),[s,r]=i.useState(!1),[n,x]=i.useState(null),[h,g]=i.useState(null),b=async()=>{try{const y=(await Y("/challenges")).challenges?.length||0;return g(y),y}catch(A){return console.error("Error checking challenges:",A),0}},w=async()=>{a(!0),x(null);try{let A=0;for(const y of et)await Y("/challenges",{method:"POST",body:JSON.stringify({...y,createdAt:new Date,updatedAt:new Date})}),A++;x({type:"success",text:`Successfully added ${A} challenges to backend!`}),await b()}catch(A){console.error("Error seeding challenges:",A),x({type:"error",text:`Error: ${A.message||"Failed to seed challenges"}`})}a(!1)},k=async()=>{if(confirm("Are you sure you want to delete ALL challenges? This cannot be undone.")){r(!0),x(null);try{const y=(await Y("/challenges")).challenges||[];let B=0;for(const u of y)await Y(`/challenges/${u.id}`,{method:"DELETE"}),B++;x({type:"info",text:`Deleted ${B} challenges from backend.`}),g(0)}catch(A){console.error("Error deleting challenges:",A),x({type:"error",text:`Error: ${A.message||"Failed to delete challenges"}`})}r(!1)}};return i.useEffect(()=>{b()},[]),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg p-8 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex p-3 bg-[#00ADB5]/20 dark:bg-blue-900/50 rounded-full mb-4",children:e.jsx(ia,{className:"w-8 h-8 text-[#00ADB5] dark:text-[#00ADB5]"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"CodeArena Seed Tool"}),e.jsx("p",{className:"text-gray-500 dark:text-white",children:"Add sample challenges to your backend database"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-white",children:"Challenges to add:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:et.length})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-white",children:"Existing in backend:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:h!==null?h:e.jsx(Ce,{className:"w-4 h-4 animate-spin text-gray-400"})})]})]}),n&&e.jsxs(o.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:`mb-6 p-4 rounded-lg flex items-start gap-3 ${n.type==="success"?"bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700":n.type==="error"?"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700":"bg-[#00ADB5]/10 dark:bg-[#00ADB5]/20 border border-[#00ADB5]/30 dark:border-blue-700"}`,children:[n.type==="success"?e.jsx(re,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}):n.type==="error"?e.jsx(mt,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}):e.jsx(mt,{className:"w-5 h-5 text-[#00ADB5] dark:text-[#00ADB5] flex-shrink-0 mt-0.5"}),e.jsx("p",{className:`text-sm ${n.type==="success"?"text-green-700 dark:text-green-400":n.type==="error"?"text-red-700 dark:text-red-400":"text-blue-700 dark:text-[#00ADB5]"}`,children:n.text})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:w,disabled:t||s,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-[#00ADB5] text-white font-medium rounded-lg hover:bg-[#00ADB5]/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[t?e.jsx(ae,{className:"w-5 h-5 animate-spin"}):e.jsx(Xt,{className:"w-5 h-5"}),t?"Adding Challenges...":"Seed Challenges"]}),e.jsxs("button",{onClick:()=>b(),disabled:t||s,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Ce,{className:"w-5 h-5"}),"Refresh Count"]}),e.jsxs("button",{onClick:k,disabled:t||s||h===0,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 font-medium rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors border border-red-200 dark:border-red-700",children:[s?e.jsx(ae,{className:"w-5 h-5 animate-spin"}):e.jsx(Zt,{className:"w-5 h-5"}),s?"Deleting...":"Delete All Challenges"]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Challenges to be added:"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:et.map((A,y)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:A.title}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${A.difficulty==="easy"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-400":A.difficulty==="medium"?"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-400"}`,children:A.difficulty})]},y))})]})]})})},er=({wallet:t,onClose:a})=>{const{user:s}=fe(),{fetchUserTransactions:r,getUserProgress:n}=be(),[x,h]=i.useState([]),[g,b]=i.useState(!0),[w,k]=i.useState("overview"),[A,y]=i.useState({problemsSolved:0,battlesWon:0,currentStreak:0});i.useEffect(()=>{(async()=>{if(s)try{const C=(await n?.(s.id))?.solvedChallenges?.length||t?.achievements?.problemsSolved||0;let S=0,O=0;try{S=t?.achievements?.battlesWon||0,O=t?.streak?.current||0}catch(R){console.error("Error fetching battles for wallet:",R),S=t?.achievements?.battlesWon||0,O=t?.streak?.current||0}y({problemsSolved:C,battlesWon:S,currentStreak:O})}catch(c){console.error("Error fetching real stats:",c),y({problemsSolved:t?.achievements?.problemsSolved||0,battlesWon:t?.achievements?.battlesWon||0,currentStreak:t?.streak?.current||0})}})()},[s,t,n]),i.useEffect(()=>{(async()=>{if(s)try{const c=await r(s.id);h(c||[])}catch(c){console.error("Error loading transactions:",c),h([])}finally{b(!1)}})()},[s,r]);const B=(j,c)=>{if(j==="earn")switch(c){case"challenge":return xe;case"battle":return te;case"tournament":return Q;default:return dt}else switch(c){case"hint":return Ae;case"entry_fee":return te;default:return ee}},u=j=>j?(j.toDate?j.toDate():new Date(j)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-end",onClick:a,children:e.jsxs(o.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},onClick:j=>j.stopPropagation(),className:"h-full w-full max-w-sm bg-gray-900 border-l border-gray-700/50 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:e.jsx(ba,{className:"w-5 h-5 text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"My Wallet"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Manage your coins & rewards"})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-700/50 rounded-lg transition-colors",children:e.jsx(nt,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/20 via-amber-500/20 to-orange-500/20 border border-yellow-500/30 rounded-2xl p-6",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Total Balance"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"â‚¿"})}),e.jsx("span",{className:"text-4xl font-bold text-white",children:t?.coins?.toLocaleString()||0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-400 mb-1",children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Earned"})]}),e.jsx("p",{className:"text-white font-bold",children:t?.totalEarned?.toLocaleString()||0})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-400 mb-1",children:[e.jsx(At,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Spent"})]}),e.jsx("p",{className:"text-white font-bold",children:t?.totalSpent?.toLocaleString()||0})]})]})]})}),e.jsx("div",{className:"flex gap-2 px-4",children:[{id:"overview",label:"Overview"},{id:"history",label:"History"}].map(j=>e.jsx("button",{onClick:()=>k(j.id),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${w===j.id?"bg-cyan-500/20 text-cyan-400":"bg-gray-800/50 text-gray-400 hover:text-white"}`,children:j.label},j.id))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:w==="overview"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-purple-400"}),e.jsxs("span",{className:"text-white font-medium",children:["Level ",t?.level||1]})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[t?.experience||0," / ",(t?.level||1)*100," XP"]})]}),e.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(o.div,{initial:{width:0},animate:{width:`${(t?.experience||0)/((t?.level||1)*100)*100}%`},className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsx(xe,{className:"w-5 h-5 text-green-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:A.problemsSolved}),e.jsx("p",{className:"text-sm text-gray-400",children:"Problems Solved"})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsx(te,{className:"w-5 h-5 text-[#00ADB5] mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:A.battlesWon}),e.jsx("p",{className:"text-sm text-gray-400",children:"Battles Won"})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsx(Q,{className:"w-5 h-5 text-yellow-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t?.achievements?.tournamentsWon||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tournaments"})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsx(Me,{className:"w-5 h-5 text-orange-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:A.currentStreak}),e.jsx("p",{className:"text-sm text-gray-400",children:"Win Streak"})]})]}),t?.badges&&t.badges.length>0&&e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5 text-pink-400"}),"Badges"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.badges.map((j,c)=>e.jsxs("div",{className:"px-3 py-1.5 bg-gray-700/50 rounded-lg text-sm text-white flex items-center gap-2",title:j.description,children:[e.jsx("span",{children:j.icon}),e.jsx("span",{children:j.name})]},c))})]})]}):e.jsx("div",{className:"space-y-3",children:g?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(o.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full"})}):x.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(at,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No transactions yet"})]}):x.map((j,c)=>{const C=B(j.type,j.category),S=j.type==="earn";return e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:c*.05},className:"flex items-center justify-between p-3 bg-gray-800/50 border border-gray-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${S?"bg-green-500/20":"bg-red-500/20"}`,children:e.jsx(C,{className:`w-4 h-4 ${S?"text-green-400":"text-red-400"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:j.description}),e.jsx("p",{className:"text-xs text-gray-400",children:u(j.createdAt)})]})]}),e.jsxs("div",{className:`flex items-center gap-1 font-bold ${S?"text-green-400":"text-red-400"}`,children:[S?e.jsx(sa,{className:"w-4 h-4"}):e.jsx(ta,{className:"w-4 h-4"}),e.jsxs("span",{children:[S?"+":"-",j.amount]})]})]},j.id||c)})})})]})})};class tr extends i.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,s){console.error("CodeArena Error:",a,s)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-red-200 dark:border-red-800 p-8 max-w-md w-full text-center",children:[e.jsx(Et,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-4",children:"There was an error loading CodeArena. Please refresh the page or try again later."}),e.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 p-3 rounded-lg mb-4 text-left",children:e.jsx("pre",{className:"text-xs text-red-700 dark:text-red-400 whitespace-pre-wrap",children:this.state.error?.message||"Unknown error"})}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-[#00ADB5] text-white rounded-lg hover:bg-[#00ADB5]/80 transition-colors",children:"Refresh Page"})]})}):this.props.children}}const ar=()=>{const t=pe(),a=it(),{user:s}=fe(),{getUserWallet:r,initializeWallet:n,subscribeToWallet:x,userprofile:h,fetchGlobalLeaderboard:g,getUserProgress:b}=be(),[w,k]=i.useState("home"),[A,y]=i.useState(null),[B,u]=i.useState({problemsSolved:0,battlesWon:0,currentStreak:0,globalRank:"-"}),[j,c]=i.useState(!0),[C,S]=i.useState(!1),[O,R]=i.useState(null),L=async(f,I)=>{try{const m=(await b?.(f))?.solvedChallenges?.length||I?.achievements?.problemsSolved||0;let E=0,_=0;try{const H=((await Y("/battles")).battles||[]).filter(U=>(U.participants||[]).some(z=>(z.odId||z.userId)===f));H.forEach(U=>{U.winnerId===f&&E++});const q=H.filter(U=>U.status==="completed"||U.status==="forfeited").sort((U,X)=>{const z=V=>V?typeof V=="object"&&V.toDate?V.toDate().getTime():V instanceof Date?V.getTime():typeof V=="number"?V:0:0;return z(X.createdAt)-z(U.createdAt)});for(const U of q)if(U.winnerId===f)_++;else if(U.winnerId)break}catch(M){console.error("Error fetching battles:",M),E=I?.achievements?.battlesWon||0,_=I?.streak?.current||0}let W="-";try{const P=(await g?.())?.find(H=>H.odId===f);P&&(W=P.rank)}catch{}u({problemsSolved:m,battlesWon:E,currentStreak:_,globalRank:W})}catch(v){console.error("Error fetching user stats:",v),u({problemsSolved:I?.achievements?.problemsSolved||0,battlesWon:I?.achievements?.battlesWon||0,currentStreak:I?.streak?.current||0,globalRank:"-"})}};i.useEffect(()=>{(async()=>{if(s&&s.id)try{console.log("Initializing wallet for user:",s.id);const I=await r(s.id);console.log("Existing wallet:",I),I||(console.log("No wallet found, creating new one..."),await n(s.id));const v=x(s.id,async m=>{console.log("Wallet data received:",m),y(m),await L(s.id,m),c(!1)});return()=>v()}catch(I){console.error("Error initializing wallet:",I),R("Failed to initialize wallet. Please check your connection and try again."),c(!1)}else console.log("No user or user.id, skipping wallet init"),c(!1)})()},[s,r,n,x,h]),i.useEffect(()=>{const f=a.pathname;f.includes("/battle/history")?k("history"):f.includes("/battle")?k("battle"):f.includes("/practice")?k("practice"):f.includes("/leaderboard")?k("leaderboard"):k("home")},[a]);const d=[{label:"Problems Solved",value:B.problemsSolved,icon:le,color:"text-emerald-600 bg-emerald-50"},{label:"Battles Won",value:B.battlesWon,icon:te,color:"text-[#00ADB5] bg-[#00ADB5]/10"},{label:"Current Streak",value:B.currentStreak,icon:Ae,color:"text-orange-600 bg-orange-50"},{label:"Global Rank",value:B.globalRank,icon:Q,color:"text-amber-600 bg-amber-50"}],T=[{title:"Quick Battle",description:"Compete in a 1v1 coding duel",icon:te,color:"bg-red-500",path:"battle"},{title:"Practice Mode",description:"Solve problems from Codeforces",icon:xe,color:"bg-[#00ADB5]",path:"practice"},{title:"Leaderboard",description:"View global rankings",icon:Q,color:"bg-amber-500",path:"leaderboard"}];return j?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ae,{className:"w-8 h-8 text-[#00ADB5] animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Loading CodeArena..."})]})}):O?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-red-200 dark:border-red-700 p-8 max-w-md w-full text-center",children:[e.jsx(Et,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Error Loading CodeArena"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-4",children:O}),e.jsx("button",{onClick:()=>{R(null),c(!0),window.location.reload()},className:"px-4 py-2 bg-[#00ADB5] text-white rounded-lg hover:bg-[#00ADB5]/80 transition-colors",children:"Try Again"})]})}):s?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-[#00ADB5] rounded-lg",children:e.jsx(le,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"CodeArena"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:"Battle. Code. Win."})]})]}),e.jsx("nav",{className:"hidden md:flex items-center gap-1",children:[{id:"home",label:"Home",icon:le,path:""},{id:"battle",label:"Battle",icon:te,path:"battle"},{id:"history",label:"History",icon:at,path:"battle/history"},{id:"practice",label:"Practice",icon:xe,path:"practice"},{id:"leaderboard",label:"Ranks",icon:Q,path:"leaderboard"}].map(f=>e.jsxs("button",{onClick:()=>t(`/dashboard/codearena/${f.path}`),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${w===f.id?"bg-[#00ADB5]/10 dark:bg-[#00ADB5]/20 text-[#00ADB5] dark:text-[#00ADB5]":"text-gray-600 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(f.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:f.label})]},f.id))}),e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700 rounded-lg hover:bg-amber-100 dark:hover:bg-amber-900/50 transition-all",children:[e.jsx(ee,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),e.jsx("span",{className:"text-amber-700 dark:text-amber-300 font-semibold",children:A?.coins?.toLocaleString()||0})]})]})})}),e.jsx("main",{className:"max-w-6xl mx-auto px-4 py-6",children:e.jsxs(Qt,{children:[e.jsx(ie,{path:"/",element:e.jsx(sr,{stats:d,quickActions:T,navigate:t})}),e.jsx(ie,{path:"/battle",element:e.jsx(ka,{wallet:A})}),e.jsx(ie,{path:"/battle/history",element:e.jsx(ya,{})}),e.jsx(ie,{path:"/battle/:battleId",element:e.jsx(zs,{})}),e.jsx(ie,{path:"/battle/results/:battleId",element:e.jsx(Ca,{})}),e.jsx(ie,{path:"/practice",element:e.jsx(Xs,{})}),e.jsx(ie,{path:"/practice/:challengeId",element:e.jsx(Vs,{})}),e.jsx(ie,{path:"/challenge/:challengeId",element:e.jsx(qs,{})}),e.jsx(ie,{path:"/leaderboard",element:e.jsx(Ys,{})}),e.jsx(ie,{path:"/seed",element:e.jsx(Zs,{})})]})}),e.jsx(oe,{children:C&&e.jsx(er,{wallet:A,onClose:()=>S(!1)})}),e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-4 py-2 z-50",children:e.jsx("div",{className:"flex justify-around",children:[{id:"home",label:"Home",icon:le,path:""},{id:"battle",label:"Battle",icon:te,path:"battle"},{id:"history",label:"History",icon:at,path:"battle/history"},{id:"leaderboard",label:"Ranks",icon:Q,path:"leaderboard"}].map(f=>e.jsxs("button",{onClick:()=>t(`/dashboard/codearena/${f.path}`),className:`flex flex-col items-center gap-1 p-2 ${w===f.id?"text-[#00ADB5]":"text-gray-400"}`,children:[e.jsx(f.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:f.label})]},f.id))})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8 max-w-md w-full text-center",children:[e.jsx(le,{className:"w-12 h-12 text-[#00ADB5] mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Login Required"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-4",children:"Please log in to access CodeArena."}),e.jsx("button",{onClick:()=>t("/login"),className:"px-4 py-2 bg-[#00ADB5] text-white rounded-lg hover:bg-[#00ADB5]/80 transition-colors",children:"Go to Login"})]})})},sr=({stats:t,quickActions:a,navigate:s})=>{const{fetchGlobalLeaderboard:r}=be(),[n,x]=i.useState([]),[h,g]=i.useState([]),[b,w]=i.useState(!0),[k,A]=i.useState(!0);return i.useEffect(()=>{const y=async()=>{try{x([])}catch(j){console.error("Error loading battles:",j),x([])}finally{w(!1)}},B=async()=>{try{if(r){const j=await r();g(j?.slice(0,3)||[])}}catch(j){console.error("Error loading top players:",j),g([])}finally{A(!1)}};y(),B();const u=setInterval(()=>{y(),B()},3e4);return()=>clearInterval(u)},[]),e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6 pb-20 md:pb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome Back! ðŸ‘‹"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:"Ready to test your coding skills? Battle other developers or practice with Codeforces problems."}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>s("/dashboard/codearena/battle"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#00ADB5] text-white font-medium rounded-lg hover:bg-[#00ADB5]/80 transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),"Find Match"]}),e.jsxs("button",{onClick:()=>s("/dashboard/codearena/practice"),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(xe,{className:"w-4 h-4"}),"Practice"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map((y,B)=>e.jsxs(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:B*.05},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("div",{className:`inline-flex p-2 rounded-lg ${y.color} mb-3`,children:e.jsx(y.icon,{className:"w-4 h-4"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.value}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-white",children:y.label})]},y.label))}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:a.map((y,B)=>e.jsxs(o.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1+B*.05},onClick:()=>s(`/dashboard/codearena/${y.path}`),className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5 text-left hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-sm transition-all group",children:[e.jsx("div",{className:`inline-flex p-3 rounded-lg ${y.color} mb-4`,children:e.jsx(y.icon,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:y.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-white mb-4",children:y.description}),e.jsxs("div",{className:"flex items-center gap-1 text-[#00ADB5] dark:text-[#00ADB5] text-sm font-medium group-hover:gap-2 transition-all",children:[e.jsx("span",{children:"Get Started"}),e.jsx(qe,{className:"w-4 h-4"})]})]},y.title))}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-green-600"}),"Live Battles"]}),e.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600 bg-green-50 dark:bg-green-900/30 px-2 py-1 rounded-full",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Live"]})]}),b?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ae,{className:"w-5 h-5 text-gray-400 animate-spin"})}):n.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-white",children:[e.jsx(ze,{className:"w-8 h-8 mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No active battles"}),e.jsx("button",{onClick:()=>s("/dashboard/codearena/battle"),className:"mt-2 text-xs text-[#00ADB5] hover:underline",children:"Start a battle"})]}):e.jsx("div",{className:"space-y-3",children:n.map((y,B)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer",onClick:()=>s(`/dashboard/codearena/battle/${y.id}`),title:"Rejoin this battle",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex -space-x-2",children:y.participants?.slice(0,2).map((u,j)=>e.jsx("div",{className:`w-7 h-7 rounded-full border-2 border-white dark:border-gray-800 flex items-center justify-center text-xs font-bold text-white ${j===0?"bg-[#00ADB5]":"bg-purple-500"}`,children:u.userName?.[0]||"?"},j))}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[y.participants?.[0]?.userName||"Player"," vs ",y.participants?.[1]?.userName||"Waiting..."]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white capitalize",children:y.difficulty||"Medium"})]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${y.status==="waiting"?"text-[#00ADB5] bg-[#00ADB5]/10 dark:bg-[#00ADB5]/20":"text-orange-600 bg-orange-50 dark:bg-orange-900/30"}`,children:y.status==="waiting"?"Waiting":"In Progress"})]},y.id||B))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 text-amber-500"}),"Top Players"]}),e.jsx("button",{onClick:()=>s("/dashboard/codearena/leaderboard"),className:"text-sm text-[#00ADB5] dark:text-[#00ADB5] hover:underline",children:"View All"})]}),k?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ae,{className:"w-5 h-5 text-gray-400 animate-spin"})}):h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-white",children:[e.jsx(ge,{className:"w-8 h-8 mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No rankings yet"}),e.jsx("button",{onClick:()=>s("/dashboard/codearena/practice"),className:"mt-2 text-xs text-[#00ADB5] hover:underline",children:"Start solving challenges"})]}):e.jsx("div",{className:"space-y-3",children:h.map(y=>{const B=["text-amber-500 bg-amber-50 dark:bg-amber-900/30","text-gray-400 bg-gray-100 dark:bg-gray-700","text-orange-500 bg-orange-50 dark:bg-orange-900/30"];return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold ${B[y.rank-1]||"text-gray-600 dark:text-white bg-gray-50 dark:bg-gray-700"}`,children:y.rank}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.odName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:[y.problemsSolved," solved"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-[#00ADB5] dark:text-[#00ADB5]",children:[e.jsx(Ye,{className:"w-3 h-3"}),e.jsx("span",{className:"text-sm font-medium",children:y.rating})]})]},y.odId)})})]})]})]})},pr=()=>e.jsx(tr,{children:e.jsx(ar,{})});export{pr as default};
