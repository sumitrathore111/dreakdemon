import{c as ce,u as be,i as ge,r,j as e,O as te,K as l,T as pe,b as Z,Q as X,p as Nt,q as z,k as xe,V as le,n as St,h as ve,U as Ye,X as rt,Z as Oe,t as Ve,C as ee,f as Ue,W as Ut,Y as Me,$ as ke,a0 as Gt,o as oe,a1 as Kt,m as ot,z as kt,D as Ce,L as Ct,d as Jt,B as Qt,a2 as mt,a3 as nt,a4 as Ft,a5 as Zt,a6 as re}from"./index-DdMfi3-U.js";import{C as je}from"./circle-x-I5sZrmRT.js";import{C as Ge}from"./chevron-right-7Yygff__.js";import{S as He}from"./shield-D40EFBDL.js";import{S as Fe}from"./star-BtvrPA9v.js";import{C as lt}from"./chevron-down-BzUXJE80.js";import{S as ct}from"./send-DJ9wiIUx.js";import{P as Lt}from"./play-4djRSDZz.js";import{E as Xt}from"./eye-dgjQTIBd.js";import{C as ut}from"./circle-alert-BD7p7N9V.js";import{U as ea}from"./upload-Cxo7EaFV.js";import{T as ta}from"./trash-2-uqlsjZbx.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],na=ce("arrow-down-right",aa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],sa=ce("arrow-up-right",ia);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ye=ce("crown",ra);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],la=ce("database",oa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],da=ce("eye-off",ca);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ae=ce("loader-circle",ma);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Ee=ce("medal",ua);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ga=ce("rotate-ccw",pa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Mt=ce("trending-down",xa);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ya=ce("wallet",ha),fa=()=>{const t=be(),{user:a}=ge(),[n,i]=r.useState([]),[s,m]=r.useState(!0),[h,p]=r.useState("all"),[b,y]=r.useState({totalBattles:0,wins:0,losses:0,winRate:0,totalEarnings:0});r.useEffect(()=>{(async()=>{if(!a){m(!1);return}try{const d=(await z(`/battles/user/${a.id}`)).battles||[];console.log("User battles:",d.length),console.log("Current user ID:",a.id),console.log("User participated in:",d.length,"battles");const k=d.filter(E=>E.status==="completed"||E.status==="forfeited");k.sort((E,R)=>{const j=S=>S?typeof S=="object"&&"toDate"in S&&S.toDate?S.toDate().getTime():S instanceof Date?S.getTime():typeof S=="number"?S:0:0;return j(R.createdAt)-j(E.createdAt)}),console.log("Completed battles:",k.length),k.length>0&&console.log("Sample battle:",k[0]),i(k);let N=0,T=0,O=0;d.forEach(E=>{E.winnerId===a.id?(N++,O+=E.prize||0):E.winnerId&&E.winnerId!==a.id&&(T++,O-=E.entryFee||0)}),y({totalBattles:d.length,wins:N,losses:T,winRate:d.length>0?Math.round(N/d.length*100):0,totalEarnings:O})}catch(f){console.error("Error fetching battle history:",f)}finally{m(!1)}})()},[a]);const M=()=>h==="all"?n:h==="won"?n.filter(g=>g.winnerId===a?.id):h==="lost"?n.filter(g=>g.winnerId&&g.winnerId!==a?.id):n,F=g=>{if(!g)return"N/A";let f;return typeof g=="object"&&"toDate"in g&&g.toDate?f=g.toDate():g instanceof Date?f=g:f=new Date(g),new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(f)},w=g=>g.participants?.find(d=>{const k=d;return k.odId!==a?.id&&k.userId!==a?.id}),L=g=>g.participants?.find(d=>{const k=d;return k.odId===a?.id||k.userId===a?.id});return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ae,{className:"w-12 h-12 text-[#00ADB5] animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading battle history..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-cyan-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800",children:[e.jsxs("header",{className:"relative overflow-hidden py-8 md:py-12",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent"}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-white/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 relative z-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:e.jsx(te,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:"Battle History"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Your past matches and performance"})]})]})}),e.jsxs("button",{onClick:()=>t("/dashboard/codearena/battle"),className:"px-5 py-2.5 bg-white text-[#00ADB5] font-semibold rounded-xl hover:bg-white/90 transition-all shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),"New Battle"]})]})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 p-4 hover:shadow-xl transition-all",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:e.jsx(pe,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Battles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.totalBattles})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 rounded-2xl shadow-lg border border-green-100 dark:border-green-800 p-4 hover:shadow-xl transition-all",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-100 dark:bg-green-800/50 flex items-center justify-center",children:e.jsx(Z,{className:"w-5 h-5 text-green-600 dark:text-green-400"})})}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mb-1",children:"Victories"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:b.wins})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/30 dark:to-orange-900/30 rounded-2xl shadow-lg border border-red-100 dark:border-red-800 p-4 hover:shadow-xl transition-all",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-100 dark:bg-red-800/50 flex items-center justify-center",children:e.jsx(je,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mb-1",children:"Defeats"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:b.losses})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-teal-50 dark:from-cyan-900/30 dark:to-teal-900/30 rounded-2xl shadow-lg border border-cyan-100 dark:border-cyan-800 p-4 hover:shadow-xl transition-all",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#00ADB5]/20 flex items-center justify-center",children:e.jsx(ye,{className:"w-5 h-5 text-[#00ADB5]"})})}),e.jsx("p",{className:"text-xs text-[#00ADB5] mb-1",children:"Win Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-[#00ADB5]",children:[b.winRate,"%"]})]}),e.jsxs("div",{className:`rounded-2xl shadow-lg border p-4 hover:shadow-xl transition-all ${b.totalEarnings>=0?"bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-900/30 dark:to-yellow-900/30 border-amber-100 dark:border-amber-800":"bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700"}`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${b.totalEarnings>=0?"bg-amber-100 dark:bg-amber-800/50":"bg-gray-100 dark:bg-gray-700"}`,children:e.jsx(X,{className:`w-5 h-5 ${b.totalEarnings>=0?"text-amber-600 dark:text-amber-400":"text-gray-600"}`})})}),e.jsx("p",{className:`text-xs mb-1 ${b.totalEarnings>=0?"text-amber-600 dark:text-amber-400":"text-gray-500"}`,children:"Total Earnings"}),e.jsxs("p",{className:`text-2xl font-bold ${b.totalEarnings>=0?"text-amber-600 dark:text-amber-400":"text-red-600"}`,children:[b.totalEarnings>=0?"+":"",b.totalEarnings]})]})]}),e.jsx(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex items-center gap-2 bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700 p-1.5 w-fit",children:[{id:"all",label:"All Battles",count:n.length},{id:"won",label:"Victories",count:n.filter(g=>g.winnerId===a?.id).length},{id:"lost",label:"Defeats",count:n.filter(g=>g.winnerId&&g.winnerId!==a?.id).length}].map(g=>e.jsxs("button",{onClick:()=>p(g.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${h===g.id?"bg-gradient-to-r from-[#00ADB5] to-[#00d4ff] text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[g.label,e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${h===g.id?"bg-white/20":"bg-gray-200 dark:bg-gray-600"}`,children:g.count})]},g.id))}),e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"space-y-3",children:M().length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 p-12 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 dark:bg-gray-700 mx-auto mb-4 flex items-center justify-center",children:e.jsx(te,{className:"w-10 h-10 text-gray-400 dark:text-gray-500"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-200 mb-2",children:"No battles found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:h==="all"?"You haven't participated in any battles yet. Start your first battle and prove your coding skills!":h==="won"?"No victories yet. Keep practicing and you'll get there!":"No defeats recorded. You're doing great!"}),e.jsxs("button",{onClick:()=>t("/dashboard/codearena/battle"),className:"px-6 py-3 bg-gradient-to-r from-[#00ADB5] to-[#00d4ff] text-white font-semibold rounded-xl hover:shadow-lg transition-all transform hover:scale-105 inline-flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),"Start Your First Battle"]})]}):M().map((g,f)=>{const d=g.winnerId===a?.id,k=w(g),N=L(g),T=g.status==="forfeited"&&g.forfeitedBy!==a?.id,O=g.status==="forfeited"&&g.forfeitedBy===a?.id;return e.jsxs(l.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:f*.05},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>t(`/dashboard/codearena/battle/results/${g.id}`),className:`bg-white dark:bg-gray-800 rounded-2xl shadow-md border-2 p-4 cursor-pointer hover:shadow-xl transition-all group ${d?"border-green-200 dark:border-green-700/50 hover:border-green-400 dark:hover:border-green-600":"border-red-200 dark:border-red-700/50 hover:border-red-400 dark:hover:border-red-600"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center shadow-lg ${d?"bg-gradient-to-br from-green-400 to-emerald-500":"bg-gradient-to-br from-red-400 to-orange-500"}`,children:d?e.jsx(Z,{className:"w-7 h-7 text-white"}):e.jsx(je,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-lg font-bold ${d?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d?"ðŸ† Victory":"ðŸ’” Defeat"}),T&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-400 rounded-full font-medium",children:"Opponent Left"}),O&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full font-medium",children:"Forfeited"})]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:["vs ",e.jsx("span",{className:"text-gray-900 dark:text-white",children:k?.odName||"Unknown Player"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[e.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(Nt,{className:"w-3.5 h-3.5"}),F(g.endTime||g.createdAt)]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium capitalize ${g.difficulty==="easy"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-400":g.difficulty==="medium"?"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-400"}`,children:g.difficulty})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[N?.submissionResult&&e.jsxs("div",{className:"text-center hidden md:block bg-gray-50 dark:bg-gray-700/50 px-4 py-2 rounded-xl",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:"Tests Passed"}),e.jsxs("p",{className:`text-lg font-bold ${N.submissionResult.passed?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400"}`,children:[N.submissionResult.passedCount,"/",N.submissionResult.totalCount]})]}),e.jsxs("div",{className:`text-center px-4 py-2 rounded-xl ${d?"bg-green-50 dark:bg-green-900/30":"bg-red-50 dark:bg-red-900/30"}`,children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:"Coins"}),e.jsxs("p",{className:`text-lg font-bold flex items-center justify-center gap-1 ${d?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[e.jsx(X,{className:"w-4 h-4"}),d?"+":"-",d?g.prize:g.entryFee]})]}),e.jsx("div",{className:"hidden md:flex w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 items-center justify-center group-hover:bg-[#00ADB5] group-hover:text-white transition-all",children:e.jsx(Ge,{className:"w-5 h-5 text-gray-400 group-hover:text-white group-hover:translate-x-0.5 transition-all"})})]})]}),g.winReason&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Result: "}),g.winReason]})})]},g.id)})})]})]})},At=async t=>{try{const a=await z("/battles/create",{method:"POST",body:JSON.stringify(t)});return console.log(`Created battle ${a.battleId}`),a.battleId}catch(a){throw console.error("Error creating random battle:",a),a}},ba=async(t,a)=>{try{return(await z(`/battles/find?difficulty=${t}&entryFee=${a}`)).battle?._id||null}catch(n){return console.error("Error finding available battle:",n),null}},wa=async t=>{try{const{difficulty:a,entryFee:n}=t,i=await ba(a,n);if(i)return i;const s=await At(t);if(!s)throw new Error("Failed to create battle");return s}catch(a){throw console.error("Error joining or creating battle:",a),a}},va=async(t,a,n)=>{try{if(t.originalBattleId){const i=await z(`/battles/${t.originalBattleId}/rematch`,{method:"POST",body:JSON.stringify({to:a,toName:n||"Opponent",fromName:t.userName,difficulty:t.difficulty,entryFee:t.entryFee,userName:t.userName,userAvatar:t.userAvatar,rating:t.rating})});return console.log(`Created rematch battle ${i.battleId}`),i.battleId}return At(t)}catch(i){throw console.error("Error creating rematch battle:",i),i}},ja=[{id:"easy",label:"Easy",color:"bg-green-500",rating:"800-1200",time:15},{id:"medium",label:"Medium",color:"bg-yellow-500",rating:"1200-1600",time:20},{id:"hard",label:"Hard",color:"bg-red-500",rating:"1600-2000",time:30}],pt=[{fee:5,prize:9},{fee:10,prize:18},{fee:20,prize:36},{fee:50,prize:90}],Na=({wallet:t})=>{const a=be(),{user:n}=ge(),{userprofile:i,deductCoins:s}=xe(),[m,h]=r.useState("medium"),[p,b]=r.useState(pt[1]),[y,M]=r.useState(!1),[F,w]=r.useState(!1),[L,g]=r.useState([]),[f,d]=r.useState(null),[k,N]=r.useState(0);r.useEffect(()=>{if(!n)return;const u=async()=>{try{const A=((await z(`/battles?status=waiting&difficulty=${m}`)).battles||[]).filter($=>$.creatorId!==n.id);g(A)}catch(B){console.error("Error fetching waiting battles:",B)}};u();const C=setInterval(u,5e3);return()=>clearInterval(C)},[n,m]),r.useEffect(()=>{if(!f||!y||!n)return;const u=async()=>{try{const B=await z(`/battles/${f}`);if(B&&(B.status==="countdown"||B.status==="active"||B.participants&&B.participants.length>=2)){console.log("Opponent found! Navigating to battle..."),a(`/dashboard/codearena/battle/${f}`);return}const A=((await z(`/battles?status=waiting&difficulty=${m}`)).battles||[]).filter($=>$.creatorId!==n.id&&$.id!==f&&$.entryFee===p.fee);if(A.length>0){const $=A[0];console.log("Auto-match: Found existing battle, joining...",$.id);try{await z(`/battles/${f}`,{method:"DELETE"})}catch{console.log("Could not delete own battle, may already be matched")}await z(`/battles/${$.id}/join`,{method:"POST",body:JSON.stringify({userId:n.id,userName:i?.name||n.email?.split("@")[0]||"User",userAvatar:i?.profilePic||"",rating:t?.rating||1e3})}),a(`/dashboard/codearena/battle/${$.id}`)}}catch(B){console.error("Error polling battle status:",B)}};u();const C=setInterval(u,2e3);return()=>clearInterval(C)},[f,y,a,n,m,p.fee,i,t]),r.useEffect(()=>{if(!f||!y)return;const u=async()=>{try{const C=localStorage.getItem("authToken");navigator.sendBeacon(`https://nextstepbackend-qhxw.onrender.com/api/battles/${f}/cancel`,JSON.stringify({token:C}))}catch(C){console.error("Error cancelling battle:",C)}};return window.addEventListener("beforeunload",u),()=>{window.removeEventListener("beforeunload",u),f&&y&&z(`/battles/${f}`,{method:"DELETE"}).catch(()=>{})}},[f,y]),r.useEffect(()=>{let u;return y&&(u=setInterval(()=>{N(C=>C+1)},1e3)),()=>clearInterval(u)},[y]);const T=async()=>{if(console.log("handleFindMatch called",{user:n,wallet:t,selectedEntry:p}),!n){alert("Please log in to find a match");return}if(!t){alert("Wallet not loaded. Please wait or refresh the page.");return}if((t.coins||0)<p.fee){alert(`Insufficient coins! You have ${t.coins||0} coins but need ${p.fee} coins.`);return}M(!0),N(0);try{const u=L.find(C=>C.difficulty===m&&C.entryFee===p.fee&&C.creatorId!==n.id);u?await E(u,!0):await O(!0)}catch(u){console.error("Error finding match:",u),alert("Failed to find match. Please try again."),M(!1)}},O=async(u=!1)=>{try{if(w(!0),!t){alert("Wallet not initialized. Please refresh the page."),M(!1);return}if((t.coins||0)<p.fee){alert(`Insufficient coins! You have ${t.coins||0} coins but need ${p.fee} coins.`),M(!1);return}const C={difficulty:m,entryFee:p.fee,userId:n.id,userName:i?.name||n.email?.split("@")[0]||"User",userAvatar:i?.profilePic||"",rating:t?.rating||1e3};console.log("Creating battle with request:",C);const B=await wa(C);console.log("Battle created with ID:",B),u&&await s(n.id,p.fee,"Battle entry fee"),d(B)}catch(C){console.error("Error creating battle:",C),alert(C instanceof Error?C.message:"Failed to create battle"),M(!1)}finally{w(!1)}},E=async(u,C=!1)=>{try{if(!t){alert("Wallet not initialized. Please refresh the page."),M(!1);return}if((t.coins||0)<u.entryFee){alert(`Insufficient coins! You have ${t.coins||0} coins but need ${u.entryFee} coins.`),M(!1);return}console.log("Joining battle:",u.id),await z(`/battles/${u.id}/join`,{method:"POST",body:JSON.stringify({userId:n.id,userName:i?.name||n.email?.split("@")[0]||"User",userAvatar:i?.profilePic||"",rating:t?.rating||1e3})}),C&&await s(n.id,u.entryFee,"Battle entry fee"),a(`/dashboard/codearena/battle/${u.id}`)}catch(B){console.error("Error joining battle:",B),alert(B instanceof Error?B.message:"Failed to join battle. Battle may have been taken by another player."),M(!1)}},R=async()=>{if(f)try{await s(n.id,-p.fee,"Battle cancelled - refund"),await z(`/battles/${f}`,{method:"DELETE"})}catch(u){console.error("Error cancelling battle:",u)}M(!1),d(null),N(0)},j=u=>{const C=Math.floor(u/60),B=u%60;return`${C}:${B.toString().padStart(2,"0")}`},S=t?.coins??0,W=S>=p.fee,c=!t||!W||y||F;return console.log("BattleLobby render:",{wallet:t,walletCoins:S,selectedEntry:p,hasEnoughCoins:W,isButtonDisabled:c}),e.jsxs("div",{className:"space-y-6 pb-20 md:pb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(te,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Battle Arena"}),e.jsx("p",{className:"text-gray-500 dark:text-white text-xs",children:"Compete against other coders in real-time"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-amber-50 dark:bg-amber-900/30 rounded-lg",children:[e.jsx(X,{className:"w-4 h-4 text-amber-600"}),e.jsxs("span",{className:"text-amber-700 dark:text-amber-400 font-semibold text-sm",children:["Balance: ",t?.coins?.toLocaleString()||0," coins"]})]})]}),e.jsx(le,{children:y&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(l.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-md w-full mx-4 text-center",children:[e.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-6",children:[e.jsx(l.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border-4 border-[#00ADB5]/30 dark:border-[#00ADB5]/40 border-t-blue-600"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(St,{className:"w-8 h-8 text-[#00ADB5]"})})]}),e.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-[#00ADB5] to-purple-600 bg-clip-text text-transparent mb-2",children:"ðŸ” Finding Opponent..."}),e.jsxs("p",{className:"text-gray-600 dark:text-white mb-6 text-lg",children:["Searching for a ",e.jsx("span",{className:"font-bold text-[#00ADB5]",children:m})," battle ðŸŽ¯"]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 text-3xl font-mono bg-gradient-to-r from-[#00ADB5] to-purple-600 bg-clip-text text-transparent mb-6 font-bold",children:[e.jsx(ve,{className:"w-6 h-6 text-[#00ADB5]"}),j(k)]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-gray-600 mb-8",children:[e.jsxs(l.span,{animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full",children:[e.jsx(Ye,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"font-semibold text-green-700",children:[L.length," players waiting"]})]}),e.jsxs("span",{className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-100 to-yellow-100 rounded-full",children:[e.jsx(X,{className:"w-4 h-4 text-amber-600"}),e.jsxs("span",{className:"font-semibold text-amber-700",children:["Entry: ",p.fee]})]})]}),e.jsxs(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:R,className:"flex items-center justify-center gap-2 w-full py-4 bg-gradient-to-r from-red-500 to-pink-500 text-white font-bold rounded-2xl hover:from-red-600 hover:to-pink-600 transition-all shadow-lg",children:[e.jsx(rt,{className:"w-5 h-5"}),"Cancel Battle ðŸš«"]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm mb-3",children:"Select Difficulty"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:ja.map(u=>e.jsxs(l.button,{whileHover:{scale:1.03,y:-2},whileTap:{scale:.97},onClick:()=>h(u.id),className:`p-3 rounded-xl border-2 transition-all relative overflow-hidden ${m===u.id?"border-[#00ADB5] bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 shadow-md":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 hover:shadow-md bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-700"}`,children:[m===u.id&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/10 to-purple-400/10 rounded-xl"}),e.jsx("div",{className:`w-3 h-3 rounded-full ${u.color} mb-2 mx-auto shadow-sm`}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:u.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:u.rating}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-white mt-0.5",children:[e.jsx(ve,{className:"w-3 h-3 inline mr-0.5"}),u.time,"m"]})]},u.id))}),e.jsxs("h3",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’°"})," Entry Fee & Prize"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:pt.map(u=>e.jsxs(l.button,{whileHover:{scale:t?.coins>=u.fee?1.03:1},whileTap:{scale:t?.coins>=u.fee?.97:1},onClick:()=>b(u),disabled:t?.coins<u.fee,className:`p-3 rounded-xl border-2 transition-all relative overflow-hidden ${p.fee===u.fee?"border-amber-400 bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-900/30 dark:to-yellow-900/30 shadow-md":t?.coins<u.fee?"border-gray-200 dark:border-gray-600 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 opacity-50 cursor-not-allowed":"border-gray-200 dark:border-gray-600 hover:border-amber-300 dark:hover:border-amber-600 hover:shadow-md bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-700"}`,children:[p.fee===u.fee&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-400/10 to-yellow-400/10 rounded-xl"}),e.jsxs("div",{className:"flex items-center justify-center gap-1 text-amber-600 font-medium text-sm",children:[e.jsx(X,{className:"w-3.5 h-3.5"}),u.fee]}),e.jsxs("div",{className:"flex items-center justify-center gap-1 text-green-600 text-xs mt-0.5",children:[e.jsx(Z,{className:"w-3 h-3"}),"Win ",u.prize]})]},u.fee))}),e.jsx(l.button,{whileHover:{scale:c?1:1.02},whileTap:{scale:c?1:.98},onClick:T,disabled:c,className:`w-full py-3 rounded-xl font-semibold text-base flex items-center justify-center gap-2 transition-all shadow-md ${c?"bg-gradient-to-r from-gray-300 to-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-[#00ADB5] via-purple-600 to-indigo-600 text-white hover:from-blue-700 hover:via-purple-700 hover:to-indigo-700 cursor-pointer"}`,children:F?e.jsxs(e.Fragment,{children:[e.jsx(l.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4"}),"Find Match",e.jsx(Ge,{className:"w-4 h-4"})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2 text-xs text-green-600 dark:text-green-400",children:[e.jsx(He,{className:"w-3 h-3"}),e.jsx("span",{children:"Secure Battle System"})]}),!t&&e.jsx("p",{className:"text-center text-amber-500 text-xs mt-2",children:"Loading wallet... Please wait"}),t&&!W&&e.jsxs("p",{className:"text-center text-red-500 text-xs mt-2",children:["Need ",p.fee-S," more coins (You have ",S,")"]}),t&&W&&e.jsxs("p",{className:"text-center text-green-500 text-xs mt-2",children:["Ready to battle! (",S," coins available)"]})]}),L.length>0&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-white to-green-50 dark:from-gray-800 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-700 shadow p-4 relative overflow-hidden",children:[e.jsxs("h3",{className:"font-bold text-sm text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg",children:e.jsx(Ye,{className:"w-4 h-4 text-white"})}),"Open Battles",e.jsxs(l.span,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"text-xs bg-gradient-to-r from-green-500 to-emerald-500 text-white px-2 py-0.5 rounded-full font-semibold",children:[L.length," live"]})]}),e.jsx("div",{className:"space-y-2",children:L.map(u=>e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:u.creatorProfilePic||`https://api.dicebear.com/7.x/avataaars/svg?seed=${u.creatorId}`,alt:u.creatorName,className:"w-8 h-8 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:u.creatorName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:[u.creatorRating," â€¢ ",u.difficulty]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 text-amber-600 font-medium text-sm",children:[e.jsx(X,{className:"w-3 h-3"}),u.entryFee]}),e.jsxs("div",{className:"text-xs text-green-600",children:["Win ",u.prize]})]}),e.jsx("button",{onClick:async()=>{t?.coins>=u.entryFee&&await E(u,!0)},disabled:t?.coins<u.entryFee,className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${t?.coins>=u.entryFee?"bg-[#00ADB5] text-white hover:bg-[#00ADB5]/80":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:"Join"})]})]},u.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm mb-3",children:"How Battles Work"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:[{icon:X,title:"Pay Entry Fee",description:"Contribute coins to prize pool"},{icon:te,title:"Solve Problem",description:"Race to solve faster"},{icon:Z,title:"Winner Takes All",description:"Win the prize pool"}].map((u,C)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("div",{className:"p-1.5 bg-[#00ADB5]/20 dark:bg-[#00ADB5]/20 rounded-lg",children:e.jsx(u.icon,{className:"w-4 h-4 text-[#00ADB5]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:u.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:u.description})]})]},C))})]})]})},Sa=()=>{const t=["#00ADB5","#FFD700","#FF6B6B","#4ECDC4","#45B7D1"];for(let n=0;n<100;n++){const i=document.createElement("div");i.style.cssText=`
      position: fixed;
      width: 10px;
      height: 10px;
      background: ${t[Math.floor(Math.random()*t.length)]};
      left: ${Math.random()*100}vw;
      top: -10px;
      border-radius: ${Math.random()>.5?"50%":"0"};
      pointer-events: none;
      z-index: 9999;
      animation: confetti-fall ${2+Math.random()*2}s ease-out forwards;
    `,document.body.appendChild(i),setTimeout(()=>i.remove(),4e3)}};if(typeof document<"u"&&!document.getElementById("confetti-styles")){const t=document.createElement("style");t.id="confetti-styles",t.textContent=`
    @keyframes confetti-fall {
      to {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
  `,document.head.appendChild(t)}const ka=()=>{const{battleId:t}=Ve(),a=be(),{user:n}=ge(),{userprofile:i,getUserWallet:s}=xe(),[m,h]=r.useState(null),[p,b]=r.useState(!0),[y,M]=r.useState(!1),[F,w]=r.useState(null),[L,g]=r.useState(null),[f,d]=r.useState(0),[k,N]=r.useState(!1),[T,O]=r.useState(""),[E,R]=r.useState(!1),[j,S]=r.useState(!1),[W,c]=r.useState(null);r.useEffect(()=>{n?.id&&m?.status==="completed"&&s(n.id).then(B=>{B&&c(B.coins)})},[n?.id,m?.status,s]),r.useEffect(()=>{(async()=>{if(t)try{const D=await z(`/battles/${t}`),A=D.battle||D;if(console.log("Battle results data:",A),!A||!A.participants){a("/dashboard/codearena");return}h(A);const $=A.participants?.find(H=>H.odId===n?.id),_=A.participants?.find(H=>H.odId!==n?.id);w($||null),g(_||null);const U=A.winnerId===n?.id;M(U),A.status==="forfeited"&&A.forfeitedBy!==n?.id&&N(!0);let q="";if(A.winReason)q=A.winReason;else if(A.status==="forfeited")A.forfeitedBy===n?.id?q="You left the battle":q="Opponent left the battle";else if($&&_){const H=$.submissionResult?.passedCount||0,Y=_.submissionResult?.passedCount||0,K=$.submissionResult?.totalTime||1/0,o=_.submissionResult?.totalTime||1/0;U?H>Y?q=`You passed more test cases (${H} vs ${Y})`:H===Y&&K<o?q="Same test cases passed, but you were faster!":_.hasSubmitted?q="You solved it better!":q="Opponent did not submit":Y>H?q=`Opponent passed more test cases (${Y} vs ${H})`:H===Y&&o<K?q="Same test cases passed, but opponent was faster":$.hasSubmitted?q="Opponent solved it better":q="You did not submit in time"}O(q),d(U?Math.floor(25+Math.random()*10):-Math.floor(15+Math.random()*10)),b(!1),U&&setTimeout(()=>{Sa()},500)}catch(D){console.error("Error fetching battle results:",D),b(!1)}})()},[t,n,a]);const u=B=>{const D=Math.floor(B/60),A=B%60;return`${D}m ${A}s`},C=async()=>{if(!(!n||!L||!m||E||j)){R(!0);try{const B=m.entryFee||50,D=m.difficulty||"easy",A=await va({difficulty:D,entryFee:B,userId:n.id,userName:i?.name||n?.name||"Player",userAvatar:i?.profilePic||i?.avatarUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${n.id}`,rating:F?.rating||1e3,originalBattleId:t},L.odId,L.odName);if(A){S(!0),Me.success(`âš”ï¸ Rematch request sent to ${L.odName}! Waiting for response...`,{duration:5e3,icon:"âš”ï¸"});const _=setInterval(async()=>{try{const q=await z(`/battles/${A}`),H=q.battle||q;H?.status==="countdown"&&H?.participants?.length===2?(clearInterval(_),Me.success(`ðŸŽ‰ ${L.odName} accepted the rematch! Starting battle...`,{duration:3e3,icon:"ðŸŽ‰"}),a(`/dashboard/codearena/battle/${A}`)):H?.status==="rejected"&&(clearInterval(_),S(!1),Me.error(`${L?.odName||"Opponent"} declined the rematch request.`,{duration:4e3,icon:"âŒ"}))}catch(q){console.error("Error polling rematch status:",q),clearInterval(_),S(!1)}},5e3);let U=!0;setTimeout(()=>{clearInterval(_),U&&(U=!1,S(!1),Me("Rematch request timed out. Please try again.",{duration:4e3,icon:"â°"}))},3e5)}}catch(B){console.error("Error creating rematch:",B),Me.error("Failed to send rematch request. Please try again."),S(!1)}finally{R(!1)}}};return p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center",children:e.jsx(l.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 py-8 px-4 relative overflow-hidden",children:[e.jsx(l.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a("/dashboard/codearena/battle"),className:"absolute top-4 right-4 z-50 w-12 h-12 bg-gray-800/80 hover:bg-gray-700 border border-gray-600 rounded-full flex items-center justify-center text-gray-400 hover:text-white transition-all shadow-lg",children:e.jsx(rt,{className:"w-6 h-6"})}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-10 left-10 w-40 h-40 bg-gradient-to-br from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-40 right-20 w-60 h-60 bg-gradient-to-br from-purple-500/15 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-20 left-20 w-32 h-32 bg-gradient-to-br from-yellow-500/20 to-transparent rounded-full blur-2xl"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[e.jsxs(l.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center mb-10 relative",children:[y?e.jsxs(e.Fragment,{children:[e.jsxs(l.div,{animate:{rotate:[0,-10,10,-10,10,0],scale:[1,1.1,1]},transition:{duration:.8,delay:.3,repeat:1/0,repeatDelay:3},className:"w-40 h-40 mx-auto mb-6 bg-gradient-to-br from-yellow-400 via-orange-400 to-amber-500 rounded-full flex items-center justify-center shadow-2xl shadow-yellow-500/50 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-300/30 to-orange-300/30 rounded-full animate-pulse"}),e.jsx(Z,{className:"w-20 h-20 text-white relative z-10"})]}),e.jsx(l.h1,{initial:{y:20},animate:{y:0},transition:{delay:.5},className:"text-6xl font-bold bg-gradient-to-r from-yellow-400 via-orange-400 to-yellow-500 bg-clip-text text-transparent mb-4",children:"ðŸ† Victory!"}),e.jsx(l.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"text-2xl text-gray-300 mb-4",children:k?"ðŸšª Your opponent left the battle!":"âœ¨ Congratulations! You won the battle! âœ¨"}),k&&e.jsx(l.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"text-lg text-yellow-400",children:"Prize coins have been awarded to you!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(l.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-36 h-36 mx-auto mb-6 bg-gradient-to-br from-gray-600 via-gray-700 to-gray-800 rounded-full flex items-center justify-center shadow-2xl shadow-gray-500/30 relative overflow-hidden",children:[e.jsx(l.div,{className:"absolute inset-0 bg-gradient-to-r from-gray-500/20 to-gray-400/20 rounded-full",animate:{opacity:[.3,.5,.3]},transition:{duration:2,repeat:1/0}}),e.jsx(Ee,{className:"w-18 h-18 text-gray-400 relative z-10"})]}),e.jsx(l.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-5xl font-bold bg-gradient-to-r from-gray-400 via-gray-500 to-gray-400 bg-clip-text text-transparent mb-4",children:"ðŸ’” Defeat"}),e.jsx(l.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-xl text-gray-300 mb-2",children:"Good effort! Keep practicing!"}),e.jsx(l.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"text-md text-cyan-400",children:"ðŸ’ª Every defeat is a step towards victory!"})]}),T&&e.jsx(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:1},className:`mt-6 px-6 py-3 rounded-xl border ${y?"bg-green-500/10 border-green-500/30 text-green-400":"bg-red-500/10 border-red-500/30 text-red-400"}`,children:e.jsxs("p",{className:"text-lg font-medium",children:["ðŸ“‹ ",T]})})]}),e.jsxs(l.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-gradient-to-br from-gray-800/60 via-gray-900/60 to-black/60 backdrop-blur-sm border border-gray-700/50 rounded-2xl p-8 mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-bl from-cyan-500/10 to-transparent rounded-full -translate-y-10 translate-x-10"}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 items-center",children:[e.jsxs(l.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4},className:"text-center",children:[e.jsx(l.div,{whileHover:{scale:1.1,rotate:5},className:`w-24 h-24 mx-auto mb-4 rounded-full flex items-center justify-center text-2xl font-bold text-white shadow-lg ${y?"bg-gradient-to-br from-yellow-400 to-amber-500 ring-4 ring-yellow-500/50 shadow-yellow-500/30":"bg-gradient-to-br from-cyan-400 to-blue-500 ring-2 ring-cyan-500/30 shadow-cyan-500/20"}`,children:i?.name?.[0]||"Y"}),e.jsx("p",{className:"text-white font-bold text-lg",children:i?.name||"You"}),e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Level ",F?.level||1]}),y&&e.jsxs(l.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,type:"spring"},className:"flex items-center justify-center gap-2 mt-2 text-yellow-400",children:[e.jsx(ye,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"ðŸ† Winner"})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(l.div,{animate:{rotateY:[0,180,360]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"text-4xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"VS"})}),e.jsxs(l.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4},className:"text-center",children:[e.jsx(l.div,{whileHover:{scale:1.1,rotate:-5},className:`w-24 h-24 mx-auto mb-4 rounded-full flex items-center justify-center text-2xl font-bold text-white shadow-lg ${y?"bg-gradient-to-br from-red-400 to-orange-500 ring-2 ring-red-500/30 shadow-red-500/20":"bg-gradient-to-br from-yellow-400 to-amber-500 ring-4 ring-yellow-500/50 shadow-yellow-500/30"}`,children:L?.odName?.[0]||"O"}),e.jsx("p",{className:"text-white font-bold text-lg",children:L?.odName||"Opponent"}),e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Level ",L?.level||1]}),!y&&e.jsxs(l.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,type:"spring"},className:"flex items-center justify-center gap-2 mt-2 text-yellow-400",children:[e.jsx(ye,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"ðŸ† Winner"})]})]})]})]}),e.jsxs(l.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"bg-gray-800/50 border border-gray-700/50 rounded-2xl p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5 text-cyan-400"}),"Battle Stats"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-2xl font-bold text-white",children:[F?.submissionResult?.passedCount||0,"/",F?.submissionResult?.totalCount||0]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Tests Passed"})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-2xl font-bold text-white",children:[L?.submissionResult?.passedCount||0,"/",L?.submissionResult?.totalCount||0]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-2xl font-bold text-white",children:u(Math.round((F?.submissionResult?.totalTime||0)/1e3))})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-400",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Time Taken"})]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-2xl font-bold text-white",children:u(Math.round((L?.submissionResult?.totalTime||0)/1e3))})})]})]})]}),e.jsxs(l.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{className:`p-6 rounded-2xl border ${y?"bg-gradient-to-br from-yellow-500/20 to-amber-500/20 border-yellow-500/30":"bg-gray-800/50 border-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Coins Earned"}),e.jsx("p",{className:`text-3xl font-bold ${y?"text-yellow-400":"text-gray-400"}`,children:y?`+${m?.prize||m?.prizePool||0}`:"+0"}),W!==null&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Balance: ",W.toLocaleString()," coins"]})]}),e.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${y?"bg-yellow-500/20":"bg-gray-700/50"}`,children:e.jsx(X,{className:`w-7 h-7 ${y?"text-yellow-400":"text-gray-500"}`})})]})}),e.jsx("div",{className:`p-6 rounded-2xl border ${f>0?"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-500/30":"bg-gradient-to-br from-red-500/20 to-orange-500/20 border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Rating Change"}),e.jsxs("p",{className:`text-3xl font-bold ${f>0?"text-green-400":"text-red-400"}`,children:[f>0?"+":"",f]})]}),e.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${f>0?"bg-green-500/20":"bg-red-500/20"}`,children:f>0?e.jsx(Ue,{className:"w-7 h-7 text-green-400"}):e.jsx(Mt,{className:"w-7 h-7 text-red-400"})})]})})]}),e.jsxs(l.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"bg-gray-800/50 border border-gray-700/50 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{className:"text-white font-medium",children:"Experience Gained"})]}),e.jsxs("span",{className:"text-purple-400 font-bold",children:["+",y?50:20," XP"]})]}),e.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${y?70:45}%`},transition:{delay:.7,duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full"})}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"350/500 XP to Level Up"})]}),e.jsxs(l.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(l.button,{whileHover:j?{}:{scale:1.05,y:-2,boxShadow:"0 20px 40px rgba(239, 68, 68, 0.4)"},whileTap:j?{}:{scale:.98},onClick:C,disabled:E||j,className:`flex-1 flex items-center justify-center gap-3 py-4 px-6 text-white font-bold text-lg rounded-xl shadow-lg transition-all relative overflow-hidden group disabled:cursor-not-allowed ${j?"bg-gradient-to-r from-yellow-600 via-amber-600 to-orange-600 shadow-yellow-500/30":"bg-gradient-to-r from-red-500 via-orange-500 to-amber-500 shadow-red-500/30 hover:shadow-red-500/50"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-400/20 to-orange-400/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),E?e.jsx(ae,{className:"w-6 h-6 relative animate-spin"}):j?e.jsx(ae,{className:"w-6 h-6 relative animate-spin"}):e.jsx(te,{className:"w-6 h-6 relative"}),e.jsx("span",{className:"relative",children:E?"Sending...":j?`â³ Waiting for ${L?.odName?.split(" ")[0]||"Opponent"}...`:`ðŸ”¥ Rematch ${L?.odName?.split(" ")[0]||"Opponent"}`})]}),e.jsxs(l.button,{whileHover:{scale:1.05,y:-2,boxShadow:"0 20px 40px rgba(59, 130, 246, 0.4)"},whileTap:{scale:.98},onClick:()=>a("/dashboard/codearena/battle"),className:"flex-1 flex items-center justify-center gap-3 py-4 px-6 bg-gradient-to-r from-cyan-500 via-blue-500 to-indigo-600 text-white font-bold text-lg rounded-xl shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50 transition-all relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400/20 to-blue-400/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),e.jsx(ga,{className:"w-6 h-6 relative"}),e.jsx("span",{className:"relative",children:"âš”ï¸ New Battle"})]}),e.jsxs(l.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.98},onClick:()=>a("/dashboard/codearena"),className:"flex-1 flex items-center justify-center gap-3 py-4 px-6 bg-gradient-to-r from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500 text-white font-bold text-lg rounded-xl border border-gray-600 hover:border-gray-500 shadow-lg transition-all relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-500/20 to-gray-400/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),e.jsx(Ut,{className:"w-6 h-6 relative"}),e.jsx("span",{className:"relative",children:"ðŸ  Back to Arena"})]})]})]})]})};function gt(t,a){(a==null||a>t.length)&&(a=t.length);for(var n=0,i=Array(a);n<a;n++)i[n]=t[n];return i}function Ca(t){if(Array.isArray(t))return t}function Fa(t,a,n){return(a=Ia(a))in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}function La(t,a){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,s,m,h,p=[],b=!0,y=!1;try{if(m=(n=n.call(t)).next,a!==0)for(;!(b=(i=m.call(n)).done)&&(p.push(i.value),p.length!==a);b=!0);}catch(M){y=!0,s=M}finally{try{if(!b&&n.return!=null&&(h=n.return(),Object(h)!==h))return}finally{if(y)throw s}}return p}}function Ma(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xt(t,a){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function ht(t){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?xt(Object(n),!0).forEach(function(i){Fa(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Aa(t,a){if(t==null)return{};var n,i,s=Ba(t,a);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);for(i=0;i<m.length;i++)n=m[i],a.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Ba(t,a){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(a.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Ea(t,a){return Ca(t)||La(t,a)||Ta(t,a)||Ma()}function Pa(t,a){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,a);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Ia(t){var a=Pa(t,"string");return typeof a=="symbol"?a:a+""}function Ta(t,a){if(t){if(typeof t=="string")return gt(t,a);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gt(t,a):void 0}}function Ra(t,a,n){return a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}function yt(t,a){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function ft(t){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?yt(Object(n),!0).forEach(function(i){Ra(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Oa(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return function(i){return a.reduceRight(function(s,m){return m(s)},i)}}function Pe(t){return function a(){for(var n=this,i=arguments.length,s=new Array(i),m=0;m<i;m++)s[m]=arguments[m];return s.length>=t.length?t.apply(this,s):function(){for(var h=arguments.length,p=new Array(h),b=0;b<h;b++)p[b]=arguments[b];return a.apply(n,[].concat(s,p))}}}function _e(t){return{}.toString.call(t).includes("Object")}function Da(t){return!Object.keys(t).length}function Te(t){return typeof t=="function"}function $a(t,a){return Object.prototype.hasOwnProperty.call(t,a)}function Wa(t,a){return _e(a)||fe("changeType"),Object.keys(a).some(function(n){return!$a(t,n)})&&fe("changeField"),a}function za(t){Te(t)||fe("selectorType")}function qa(t){Te(t)||_e(t)||fe("handlerType"),_e(t)&&Object.values(t).some(function(a){return!Te(a)})&&fe("handlersType")}function Ya(t){t||fe("initialIsRequired"),_e(t)||fe("initialType"),Da(t)&&fe("initialContent")}function Ha(t,a){throw new Error(t[a]||t.default)}var _a={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},fe=Pe(Ha)(_a),ze={changes:Wa,selector:za,handler:qa,initial:Ya};function Va(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ze.initial(t),ze.handler(a);var n={current:t},i=Pe(Ka)(n,a),s=Pe(Ga)(n),m=Pe(ze.changes)(t),h=Pe(Ua)(n);function p(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(M){return M};return ze.selector(y),y(n.current)}function b(y){Oa(i,s,m,h)(y)}return[p,b]}function Ua(t,a){return Te(a)?a(t.current):a}function Ga(t,a){return t.current=ft(ft({},t.current),a),a}function Ka(t,a,n){return Te(a)?a(t.current):Object.keys(n).forEach(function(i){var s;return(s=a[i])===null||s===void 0?void 0:s.call(a,t.current[i])}),n}var Ja={create:Va},Qa={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Za(t){return function a(){for(var n=this,i=arguments.length,s=new Array(i),m=0;m<i;m++)s[m]=arguments[m];return s.length>=t.length?t.apply(this,s):function(){for(var h=arguments.length,p=new Array(h),b=0;b<h;b++)p[b]=arguments[b];return a.apply(n,[].concat(s,p))}}}function Xa(t){return{}.toString.call(t).includes("Object")}function en(t){return t||bt("configIsRequired"),Xa(t)||bt("configType"),t.urls?(tn(),{paths:{vs:t.urls.monacoBase}}):t}function tn(){console.warn(Bt.deprecation)}function an(t,a){throw new Error(t[a]||t.default)}var Bt={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},bt=Za(an)(Bt),nn={config:en},sn=function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return function(s){return n.reduceRight(function(m,h){return h(m)},s)}};function Et(t,a){return Object.keys(a).forEach(function(n){a[n]instanceof Object&&t[n]&&Object.assign(a[n],Et(t[n],a[n]))}),ht(ht({},t),a)}var rn={type:"cancelation",msg:"operation is manually canceled"};function Qe(t){var a=!1,n=new Promise(function(i,s){t.then(function(m){return a?s(rn):i(m)}),t.catch(s)});return n.cancel=function(){return a=!0},n}var on=["monaco"],ln=Ja.create({config:Qa,isInitialized:!1,resolve:null,reject:null,monaco:null}),Pt=Ea(ln,2),De=Pt[0],Ke=Pt[1];function cn(t){var a=nn.config(t),n=a.monaco,i=Aa(a,on);Ke(function(s){return{config:Et(s.config,i),monaco:n}})}function dn(){var t=De(function(a){var n=a.monaco,i=a.isInitialized,s=a.resolve;return{monaco:n,isInitialized:i,resolve:s}});if(!t.isInitialized){if(Ke({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Qe(Ze);if(window.monaco&&window.monaco.editor)return It(window.monaco),t.resolve(window.monaco),Qe(Ze);sn(mn,pn)(gn)}return Qe(Ze)}function mn(t){return document.body.appendChild(t)}function un(t){var a=document.createElement("script");return t&&(a.src=t),a}function pn(t){var a=De(function(i){var s=i.config,m=i.reject;return{config:s,reject:m}}),n=un("".concat(a.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=a.reject,n}function gn(){var t=De(function(n){var i=n.config,s=n.resolve,m=n.reject;return{config:i,resolve:s,reject:m}}),a=window.require;a.config(t.config),a(["vs/editor/editor.main"],function(n){var i=n.m||n;It(i),t.resolve(i)},function(n){t.reject(n)})}function It(t){De().monaco||Ke({monaco:t})}function xn(){return De(function(t){var a=t.monaco;return a})}var Ze=new Promise(function(t,a){return Ke({resolve:t,reject:a})}),Tt={config:cn,init:dn,__getMonacoInstance:xn},hn={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Xe=hn,yn={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},fn=yn;function bn({children:t}){return ke.createElement("div",{style:fn.container},t)}var wn=bn,vn=wn;function jn({width:t,height:a,isEditorReady:n,loading:i,_ref:s,className:m,wrapperProps:h}){return ke.createElement("section",{style:{...Xe.wrapper,width:t,height:a},...h},!n&&ke.createElement(vn,null,i),ke.createElement("div",{ref:s,style:{...Xe.fullWidth,...!n&&Xe.hide},className:m}))}var Nn=jn,Rt=r.memo(Nn);function Sn(t){r.useEffect(t,[])}var Ot=Sn;function kn(t,a,n=!0){let i=r.useRef(!0);r.useEffect(i.current||!n?()=>{i.current=!1}:t,a)}var ne=kn;function Ie(){}function Se(t,a,n,i){return Cn(t,i)||Fn(t,a,n,i)}function Cn(t,a){return t.editor.getModel(Dt(t,a))}function Fn(t,a,n,i){return t.editor.createModel(a,n,i?Dt(t,i):void 0)}function Dt(t,a){return t.Uri.parse(a)}function Ln({original:t,modified:a,language:n,originalLanguage:i,modifiedLanguage:s,originalModelPath:m,modifiedModelPath:h,keepCurrentOriginalModel:p=!1,keepCurrentModifiedModel:b=!1,theme:y="light",loading:M="Loading...",options:F={},height:w="100%",width:L="100%",className:g,wrapperProps:f={},beforeMount:d=Ie,onMount:k=Ie}){let[N,T]=r.useState(!1),[O,E]=r.useState(!0),R=r.useRef(null),j=r.useRef(null),S=r.useRef(null),W=r.useRef(k),c=r.useRef(d),u=r.useRef(!1);Ot(()=>{let A=Tt.init();return A.then($=>(j.current=$)&&E(!1)).catch($=>$?.type!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>R.current?D():A.cancel()}),ne(()=>{if(R.current&&j.current){let A=R.current.getOriginalEditor(),$=Se(j.current,t||"",i||n||"text",m||"");$!==A.getModel()&&A.setModel($)}},[m],N),ne(()=>{if(R.current&&j.current){let A=R.current.getModifiedEditor(),$=Se(j.current,a||"",s||n||"text",h||"");$!==A.getModel()&&A.setModel($)}},[h],N),ne(()=>{let A=R.current.getModifiedEditor();A.getOption(j.current.editor.EditorOption.readOnly)?A.setValue(a||""):a!==A.getValue()&&(A.executeEdits("",[{range:A.getModel().getFullModelRange(),text:a||"",forceMoveMarkers:!0}]),A.pushUndoStop())},[a],N),ne(()=>{R.current?.getModel()?.original.setValue(t||"")},[t],N),ne(()=>{let{original:A,modified:$}=R.current.getModel();j.current.editor.setModelLanguage(A,i||n||"text"),j.current.editor.setModelLanguage($,s||n||"text")},[n,i,s],N),ne(()=>{j.current?.editor.setTheme(y)},[y],N),ne(()=>{R.current?.updateOptions(F)},[F],N);let C=r.useCallback(()=>{if(!j.current)return;c.current(j.current);let A=Se(j.current,t||"",i||n||"text",m||""),$=Se(j.current,a||"",s||n||"text",h||"");R.current?.setModel({original:A,modified:$})},[n,a,s,t,i,m,h]),B=r.useCallback(()=>{!u.current&&S.current&&(R.current=j.current.editor.createDiffEditor(S.current,{automaticLayout:!0,...F}),C(),j.current?.editor.setTheme(y),T(!0),u.current=!0)},[F,y,C]);r.useEffect(()=>{N&&W.current(R.current,j.current)},[N]),r.useEffect(()=>{!O&&!N&&B()},[O,N,B]);function D(){let A=R.current?.getModel();p||A?.original?.dispose(),b||A?.modified?.dispose(),R.current?.dispose()}return ke.createElement(Rt,{width:L,height:w,isEditorReady:N,loading:M,_ref:S,className:g,wrapperProps:f})}var Mn=Ln;r.memo(Mn);function An(t){let a=r.useRef();return r.useEffect(()=>{a.current=t},[t]),a.current}var Bn=An,qe=new Map;function En({defaultValue:t,defaultLanguage:a,defaultPath:n,value:i,language:s,path:m,theme:h="light",line:p,loading:b="Loading...",options:y={},overrideServices:M={},saveViewState:F=!0,keepCurrentModel:w=!1,width:L="100%",height:g="100%",className:f,wrapperProps:d={},beforeMount:k=Ie,onMount:N=Ie,onChange:T,onValidate:O=Ie}){let[E,R]=r.useState(!1),[j,S]=r.useState(!0),W=r.useRef(null),c=r.useRef(null),u=r.useRef(null),C=r.useRef(N),B=r.useRef(k),D=r.useRef(),A=r.useRef(i),$=Bn(m),_=r.useRef(!1),U=r.useRef(!1);Ot(()=>{let Y=Tt.init();return Y.then(K=>(W.current=K)&&S(!1)).catch(K=>K?.type!=="cancelation"&&console.error("Monaco initialization: error:",K)),()=>c.current?H():Y.cancel()}),ne(()=>{let Y=Se(W.current,t||i||"",a||s||"",m||n||"");Y!==c.current?.getModel()&&(F&&qe.set($,c.current?.saveViewState()),c.current?.setModel(Y),F&&c.current?.restoreViewState(qe.get(m)))},[m],E),ne(()=>{c.current?.updateOptions(y)},[y],E),ne(()=>{!c.current||i===void 0||(c.current.getOption(W.current.editor.EditorOption.readOnly)?c.current.setValue(i):i!==c.current.getValue()&&(U.current=!0,c.current.executeEdits("",[{range:c.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),c.current.pushUndoStop(),U.current=!1))},[i],E),ne(()=>{let Y=c.current?.getModel();Y&&s&&W.current?.editor.setModelLanguage(Y,s)},[s],E),ne(()=>{p!==void 0&&c.current?.revealLine(p)},[p],E),ne(()=>{W.current?.editor.setTheme(h)},[h],E);let q=r.useCallback(()=>{if(!(!u.current||!W.current)&&!_.current){B.current(W.current);let Y=m||n,K=Se(W.current,i||t||"",a||s||"",Y||"");c.current=W.current?.editor.create(u.current,{model:K,automaticLayout:!0,...y},M),F&&c.current.restoreViewState(qe.get(Y)),W.current.editor.setTheme(h),p!==void 0&&c.current.revealLine(p),R(!0),_.current=!0}},[t,a,n,i,s,m,y,M,F,h,p]);r.useEffect(()=>{E&&C.current(c.current,W.current)},[E]),r.useEffect(()=>{!j&&!E&&q()},[j,E,q]),A.current=i,r.useEffect(()=>{E&&T&&(D.current?.dispose(),D.current=c.current?.onDidChangeModelContent(Y=>{U.current||T(c.current.getValue(),Y)}))},[E,T]),r.useEffect(()=>{if(E){let Y=W.current.editor.onDidChangeMarkers(K=>{let o=c.current.getModel()?.uri;if(o&&K.find(x=>x.path===o.path)){let x=W.current.editor.getModelMarkers({resource:o});O?.(x)}});return()=>{Y?.dispose()}}return()=>{}},[E,O]);function H(){D.current?.dispose(),w?F&&qe.set(m,c.current.saveViewState()):c.current.getModel()?.dispose(),c.current.dispose()}return ke.createElement(Rt,{width:L,height:g,isEditorReady:E,loading:b,_ref:u,className:f,wrapperProps:d})}var Pn=En,In=r.memo(Pn),dt=In;const Ae={MAX_CODE_LENGTH:5e4,MIN_CODE_LENGTH:10,ALLOWED_LANGUAGES:["python","javascript","cpp","java","c","go","rust"],BLOCKED_PATTERNS:[/import\s+os/gi,/import\s+subprocess/gi,/import\s+sys/gi,/exec\s*\(/gi,/eval\s*\(/gi,/system\s*\(/gi,/__import__/gi,/open\s*\(/gi,/file\s*\(/gi,/socket/gi,/urllib/gi,/requests/gi,/http/gi,/net/gi,/process/gi,/runtime/gi],SUSPICIOUS_KEYWORDS:["rm -rf","del /s","format c:","sudo","chmod 777","while(true)","for(;;)","while True:","infinite","fork()","thread","async","await"]};class Re extends Error{code;constructor(a,n){super(a),this.name="SecurityError",this.code=n}}class he extends Error{field;constructor(a,n){super(a),this.name="ValidationError",this.field=n}}const Tn=t=>t.replace(/<[^>]*>/g,"").replace(/&[^;]+;/g,"").replace(/javascript:/gi,"").replace(/data:/gi,"").trim(),et=t=>{const{code:a,language:n,challengeId:i,battleId:s}=t;if(!Ae.ALLOWED_LANGUAGES.includes(n))throw new he(`Unsupported programming language: ${n}`,"language");if(!a||a.length<Ae.MIN_CODE_LENGTH)throw new he("Code is too short","code");if(a.length>Ae.MAX_CODE_LENGTH)throw new he("Code exceeds maximum length (50KB)","code");for(const p of Ae.BLOCKED_PATTERNS)if(p.test(a))throw new Re("Code contains prohibited functions or imports","BLOCKED_CODE");const m=a.toLowerCase();for(const p of Ae.SUSPICIOUS_KEYWORDS)if(m.includes(p.toLowerCase()))throw new Re(`Code contains suspicious keyword: ${p}`,"SUSPICIOUS_CODE");const h=Tn(a);if(i&&!/^[a-zA-Z0-9_-]+$/.test(i))throw new he("Invalid challenge ID format","challengeId");if(s&&!/^[a-zA-Z0-9_-]+$/.test(s))throw new he("Invalid battle ID format","battleId");return{code:h,language:n,challengeId:i,battleId:s}},Rn=async t=>{try{return(await z(`/challenges/${t}`)).challenge||null}catch(a){return console.error("Error fetching challenge:",a),null}},$t=Rn,wt=async t=>{try{return(await z(`/challenges/${t}/testcases`)).testCases||[]}catch(a){return console.error("Error fetching test cases:",a),[]}},On=async t=>{try{return(await z(`/challenges/${t}/validation-testcases`)).testCases||[]}catch(a){return console.error("Error fetching validation test cases:",a),[]}},tt=[],Dn="https://emkc.org/api/v2/piston",Wt={javascript:{language:"javascript",version:"18.15.0"},python:{language:"python",version:"3.10.0"},python3:{language:"python",version:"3.10.0"},java:{language:"java",version:"15.0.2"},cpp:{language:"c++",version:"10.2.0"},c:{language:"c",version:"10.2.0"},typescript:{language:"typescript",version:"5.0.3"},go:{language:"go",version:"1.16.2"},rust:{language:"rust",version:"1.68.2"},ruby:{language:"ruby",version:"3.0.1"},kotlin:{language:"kotlin",version:"1.8.20"},csharp:{language:"csharp",version:"6.12.0"},swift:{language:"swift",version:"5.3.3"}};async function $n(t,a,n=""){const i=Date.now();try{const s=Wt[a.toLowerCase()];if(!s)throw new Error(`Unsupported language: ${a}`);const m=await fetch(`${Dn}/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:s.language,version:s.version,files:[{name:Wn(a),content:t}],stdin:n,args:[],compile_timeout:1e4,run_timeout:3e3,compile_memory_limit:-1,run_memory_limit:-1})});if(!m.ok)throw new Error(`API request failed with status ${m.status}`);const h=await m.json(),p=Date.now()-i;return h.compile&&h.compile.code!==0?{success:!1,error:h.compile.stderr||h.compile.output||"Compilation failed",executionTime:p}:h.run.code!==0&&h.run.signal?{success:!1,error:h.run.stderr||h.run.output||"Runtime error",executionTime:p}:{success:!0,output:(h.run.stdout||h.run.output||"").trim(),error:h.run.stderr?h.run.stderr.trim():void 0,executionTime:p}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error occurred",executionTime:Date.now()-i}}}function Wn(t){switch(t.toLowerCase()){case"javascript":return"solution.js";case"python":case"python3":return"solution.py";case"java":return"Main.java";case"cpp":case"c":return"solution.cpp";case"typescript":return"solution.ts";case"go":return"solution.go";case"rust":return"solution.rs";case"ruby":return"solution.rb";case"kotlin":return"solution.kt";case"csharp":return"Solution.cs";case"swift":return"solution.swift";default:return"solution.txt"}}async function zn(t,a,n=""){const i=await $n(t,a,n);return{output:i.output||"",error:i.error||null,time:i.executionTime?`${(i.executionTime/1e3).toFixed(3)}`:null,memory:null,status:i.success?"Accepted":i.error?"Error":"Unknown"}}const zt=()=>Object.keys(Wt).filter(t=>t!=="python3").map(t=>({id:t,name:t.charAt(0).toUpperCase()+t.slice(1),languageId:t})),qn=()=>{const{battleId:t}=Ve(),a=be(),{user:n}=ge();xe();const{setBattleActive:i}=Gt(),[s,m]=r.useState(null),[h,p]=r.useState(!0),[b,y]=r.useState(5),[M,F]=r.useState(0),[w,L]=r.useState(null),[g,f]=r.useState([]),[d,k]=r.useState(""),[N,T]=r.useState("python"),[O,E]=r.useState(!1),[R,j]=r.useState(!1),[S,W]=r.useState(!1);r.useEffect(()=>((s?.status==="active"||s?.status==="countdown")&&!S&&t?i(!0,t):i(!1,null),()=>i(!1,null)),[s?.status,S,i,t]);const[c,u]=r.useState(null),[C,B]=r.useState(!1),[D,A]=r.useState(!1),[$,_]=r.useState(!1),[U,q]=r.useState(0),H=r.useRef(null),Y=r.useRef(d),K=r.useRef(g),o=r.useRef(!1),x=r.useRef(null),V=zt();r.useEffect(()=>{if(s?.status!=="active"||S)return;const v=P=>(P.preventDefault(),P.returnValue="You are in an active battle! Leaving will cause you to lose. Are you sure?",P.returnValue);return window.addEventListener("beforeunload",v),()=>window.removeEventListener("beforeunload",v)},[s?.status,S]);const J=r.useCallback(v=>{try{x.current||(x.current=new(window.AudioContext||window.webkitAudioContext));const P=x.current,I=P.currentTime;if(v===0){[523.25,659.25,783.99,1046.5].forEach((se,ue)=>{const Le=P.createOscillator(),Ne=P.createGain();Le.connect(Ne),Ne.connect(P.destination),Le.type="square",Le.frequency.setValueAtTime(se,I+ue*.05),Ne.gain.setValueAtTime(0,I),Ne.gain.linearRampToValueAtTime(.15,I+ue*.05),Ne.gain.linearRampToValueAtTime(.15,I+ue*.05+.15),Ne.gain.exponentialRampToValueAtTime(.001,I+.5),Le.start(I+ue*.05),Le.stop(I+.6)});const Q=P.createOscillator(),ie=P.createGain();Q.connect(ie),ie.connect(P.destination),Q.type="sawtooth",Q.frequency.setValueAtTime(130.81,I),Q.frequency.exponentialRampToValueAtTime(65.41,I+.2),ie.gain.setValueAtTime(.25,I),ie.gain.exponentialRampToValueAtTime(.001,I+.3),Q.start(I),Q.stop(I+.4)}else{const G=v===5?262:v===4?294:v===3?330:v===2?440:587,Q=P.createOscillator(),ie=P.createGain();Q.connect(ie),ie.connect(P.destination),Q.type="square",Q.frequency.setValueAtTime(G*2,I),Q.frequency.exponentialRampToValueAtTime(G,I+.08),ie.gain.setValueAtTime(.2,I),ie.gain.exponentialRampToValueAtTime(.001,I+.12),Q.start(I),Q.stop(I+.15);const se=P.createOscillator(),ue=P.createGain();se.connect(ue),ue.connect(P.destination),se.type="sine",se.frequency.setValueAtTime(G/2,I),ue.gain.setValueAtTime(.15,I),ue.gain.exponentialRampToValueAtTime(.001,I+.1),se.start(I),se.stop(I+.12)}}catch{console.log("Audio not supported")}},[]);r.useEffect(()=>{Y.current=d},[d]),r.useEffect(()=>{K.current=g},[g]);const $e={python:`# Battle Mode - Write your solution fast!
def solve():
    n = int(input())
    # Your code here
    print(result)

solve()`,cpp:`#include <bits/stdc++.h>
using namespace std;

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    int n;
    cin >> n;
    // Your code here
    cout << result << endl;
    return 0;
}`,java:`import java.util.*;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt();
        // Your code here
        System.out.println(result);
    }
}`,javascript:`const readline = require('readline');
const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
});

let lines = [];
rl.on('line', (line) => lines.push(line));
rl.on('close', () => {
    const n = parseInt(lines[0]);
    // Your code here
    console.log(result);
});`},de=r.useCallback(()=>`battle_code_${t}`,[t]),me=r.useCallback(()=>`battle_language_${t}`,[t]);r.useEffect(()=>{if(!t)return;const v=localStorage.getItem(de()),P=localStorage.getItem(me());v&&(console.log("Restoring code from localStorage"),k(v)),P&&["python","cpp","java","javascript"].includes(P)&&T(P)},[t,de,me]),r.useEffect(()=>{if(!t||S)return;const v=setInterval(()=>{localStorage.setItem(de(),d),localStorage.setItem(me(),N)},2e3);return()=>clearInterval(v)},[t,d,N,S,de,me]),r.useEffect(()=>{S&&t&&(localStorage.removeItem(de()),localStorage.removeItem(me()))},[S,t,de,me]),r.useEffect(()=>{if(!t||!n||s?.status!=="active"||S)return;const v=()=>{document.hidden&&(q(I=>I+1),_(!0))},P=()=>{s?.status==="active"&&!S&&(q(I=>I+1),_(!0))};return document.addEventListener("visibilitychange",v),window.addEventListener("blur",P),()=>{document.removeEventListener("visibilitychange",v),window.removeEventListener("blur",P)}},[t,n,s?.status,S]),r.useEffect(()=>{U>=3&&s?.status==="active"&&!S&&(async()=>{try{await z(`/battles/${t}/forfeit`,{method:"POST"}),a(`/dashboard/codearena/battle/results/${t}`)}catch(P){console.error("Error forfeiting battle:",P)}})()},[U,s?.status,S,t,a]),r.useEffect(()=>{if(!t||!n)return;const v=async()=>{try{const I=await z(`/battles/${t}`);if(!I){a("/dashboard/codearena");return}if(m(I),I.challenge&&!w&&I.challenge.description&&(Array.isArray(I.challenge.testCases)||Array.isArray(I.challenge.test_cases))){L(I.challenge);const ie=(I.challenge.testCases&&I.challenge.testCases.length>0?I.challenge.testCases:I.challenge.test_cases||[]).map(se=>({input:se.input||"",output:se.expectedOutput||se.expected_output||se.output||""}));console.log("BattleRoom: Loaded test cases:",ie.length),f(ie)}const G=I.participants.find(Q=>Q.odId===n?.id);G?.hasSubmitted&&!S&&(W(!0),G.submissionResult&&u({success:G.submissionResult.passed,passed:G.submissionResult.passed,status:G.submissionResult.passed?"Accepted":"Wrong Answer",passedCount:G.submissionResult.passedCount,totalCount:G.submissionResult.totalCount,totalTime:G.submissionResult.totalTime,executionTime:G.submissionResult.totalTime})),I.forfeitedBy&&I.forfeitedBy!==n?.id&&A(!0),(I.status==="completed"||I.status==="forfeited")&&a(`/dashboard/codearena/battle/results/${t}`),p(!1)}catch(I){console.error("Failed to fetch battle data",I),a("/dashboard/codearena")}};v();const P=setInterval(v,3e3);return()=>clearInterval(P)},[t,n,S,w]),r.useEffect(()=>{const v=async P=>{if(s?.status==="active"&&!S&&!o.current)return t&&(localStorage.setItem(de(),Y.current),localStorage.setItem(me(),N),localStorage.setItem(`battle_autosubmit_${t}`,"true")),P.preventDefault(),P.returnValue="Your code will be auto-submitted when you return. Continue?",P.returnValue};return window.addEventListener("beforeunload",v),()=>{window.removeEventListener("beforeunload",v)}},[s?.status,t,S,N,de,me]),r.useEffect(()=>{if(!t||!n||!s||S||o.current)return;if(localStorage.getItem(`battle_autosubmit_${t}`)==="true"&&s.status==="active"&&K.current.length>0){console.log("Auto-submitting code after page refresh..."),localStorage.removeItem(`battle_autosubmit_${t}`);const P=setTimeout(()=>{!S&&!o.current&&Je()},1e3);return()=>clearTimeout(P)}},[t,n,s?.status,S,g.length]),r.useEffect(()=>{if(s?.status==="countdown"){if(b>0){J(b);const v=setTimeout(()=>y(b-1),1200);return()=>clearTimeout(v)}else if(b===0){J(0);const v=setTimeout(async()=>{t&&await z(`/battles/${t}/start`,{method:"POST"})},1500);return()=>clearTimeout(v)}}},[s?.status,b,t,J]),r.useEffect(()=>{s?.status==="countdown"&&y(5)},[s?.status]),r.useEffect(()=>{if(s?.status==="active"&&s.startTime){const v=new Date(s.startTime).getTime(),P=s.timeLimit*1e3;return H.current=setInterval(()=>{const G=Date.now()-v,Q=Math.max(0,P-G);F(Math.ceil(Q/1e3)),Q<=0&&(H.current&&clearInterval(H.current),qt())},1e3),()=>{H.current&&clearInterval(H.current)}}},[s?.status,s?.startTime,s?.timeLimit]),r.useEffect(()=>{k($e[N]||$e.python)},[N]);const qt=async()=>{!S&&s&&await Je()},Yt=async()=>{if(!(!n||!s||!t||C||!window.confirm("âš ï¸ Are you sure you want to leave?\\n\\nLeaving will forfeit the match and your opponent will win the prize!"))){B(!0);try{await z(`/battles/${t}/forfeit`,{method:"POST"}),a("/dashboard/codearena")}catch(P){console.error("Error forfeiting battle:",P),alert("Failed to leave battle. Please try again."),B(!1)}}},Je=async()=>{if(!(!n||!s||R||S||!t||o.current)){if(!g||g.length===0){console.error("BattleRoom: No test cases available for submission");try{const v=await z(`/battles/${t}`);if(v?.challenge){const P=v.challenge.testCases||v.challenge.test_cases||[];if(P.length>0){const I=P.map(G=>({input:G.input||"",output:G.expectedOutput||G.expected_output||G.output||""}));f(I),console.log("BattleRoom: Reloaded test cases:",I.length)}else{u({success:!1,passed:!1,status:"Error",error:"No test cases available. Please try refreshing the page.",passedCount:0,totalCount:0,totalTime:0,executionTime:0});return}}}catch(v){console.error("BattleRoom: Failed to reload test cases:",v),u({success:!1,passed:!1,status:"Error",error:"Failed to load test cases. Please try refreshing the page.",passedCount:0,totalCount:0,totalTime:0,executionTime:0});return}}o.current=!0,j(!0),localStorage.removeItem(`battle_autosubmit_${t}`);try{const v=await z(`/battles/${t}/submit`,{method:"POST",body:JSON.stringify({code:d,language:N})});u({success:v.passed,passed:v.passed,status:v.passed?"Accepted":"Wrong Answer",passedCount:v.passedCount,totalCount:v.totalCount,totalTime:v.totalTime,executionTime:v.totalTime}),W(!0)}catch(v){console.error("Battle submission error:",v);let P="Submission failed. Please try again.";v instanceof Re?P=`Security Error: ${v.message}`:v instanceof he?P=`Validation Error: ${v.message}`:v instanceof Error&&(v.message.includes("API request failed")?P="âš ï¸ Code execution service temporarily unavailable. Please try again.":v.message.includes("429")||v.message.includes("Too Many Requests")?P="â³ Too many submissions. Please wait a moment and try again.":P=v.message),u({success:!1,passed:!1,status:"Error",error:P,passedCount:0,totalCount:g.length,totalTime:0,executionTime:0})}j(!1),o.current=!1,t&&(localStorage.removeItem(de()),localStorage.removeItem(me()))}},Ht=v=>{const P=Math.floor(v/60),I=v%60;return`${P.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}`},_t=()=>s?.participants.find(v=>v.odId!==n?.id),Vt=()=>s?.participants.find(v=>v.odId===n?.id);if(console.log("Battle status:",s?.status,"Countdown:",b,"Loading:",h),h)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ae,{className:"w-16 h-16 text-cyan-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Loading battle..."})]})});if(s?.status==="countdown"&&b>=0)return console.log("Showing countdown overlay!",b),e.jsxs("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(20)].map((v,P)=>e.jsx(l.div,{className:"absolute w-2 h-2 bg-cyan-400/30 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-200],scale:[0,1,0],opacity:[0,1,0]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:P*.1}},P))}),e.jsx(l.div,{className:"absolute inset-0 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},children:[1,2,3].map(v=>e.jsx(l.div,{className:"absolute border-2 border-cyan-500/20 rounded-full",style:{width:v*200,height:v*200},animate:{scale:[1,1.5,1],opacity:[.3,.1,.3]},transition:{duration:2,repeat:1/0,delay:v*.3}},v))}),e.jsx(l.div,{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/10 via-purple-500/10 to-[#00d4ff]/10",animate:{opacity:[.3,.5,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsx(le,{mode:"wait",children:e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"text-center z-10",children:[e.jsx(l.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:"mb-6",children:e.jsx(l.div,{animate:{textShadow:["0 0 20px rgba(0, 173, 181, 0.5)","0 0 40px rgba(0, 173, 181, 0.8)","0 0 20px rgba(0, 173, 181, 0.5)"]},transition:{duration:1.5,repeat:1/0},className:"text-2xl font-bold text-cyan-400 tracking-widest",children:"âš”ï¸ BATTLE ARENA âš”ï¸"})}),e.jsxs("div",{className:"flex items-center justify-center gap-8 mb-8",children:[e.jsxs(l.div,{className:"text-center",initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[e.jsx(l.div,{className:"w-20 h-20 rounded-full bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center mb-2 shadow-lg shadow-cyan-500/50",animate:{boxShadow:["0 0 20px rgba(0, 173, 181, 0.5)","0 0 40px rgba(0, 173, 181, 0.8)","0 0 20px rgba(0, 173, 181, 0.5)"]},transition:{duration:1.5,repeat:1/0},children:e.jsx("span",{className:"text-white font-bold text-2xl",children:s.participants[0]?.odName?.charAt(0)||""})}),e.jsx("p",{className:"text-cyan-400 font-semibold",children:s.participants[0]?.odName}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Rating: ",s.participants[0]?.rating||1e3]})]}),e.jsx(l.div,{className:"text-cyan-400 text-5xl font-black",animate:{scale:[1,1.2,1],rotate:[0,5,-5,0],textShadow:["0 0 30px rgba(255, 0, 0, 0.5)","0 0 60px rgba(255, 0, 0, 0.8)","0 0 30px rgba(255, 0, 0, 0.5)"]},transition:{duration:1,repeat:1/0},style:{background:"linear-gradient(to right, #00ADB5, #ff4444, #00ADB5)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"VS"}),e.jsxs(l.div,{className:"text-center",initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[e.jsx(l.div,{className:"w-20 h-20 rounded-full bg-gradient-to-br from-red-400 to-orange-500 flex items-center justify-center mb-2 shadow-lg shadow-red-500/50",animate:{boxShadow:["0 0 20px rgba(239, 68, 68, 0.5)","0 0 40px rgba(239, 68, 68, 0.8)","0 0 20px rgba(239, 68, 68, 0.5)"]},transition:{duration:1.5,repeat:1/0},children:e.jsx("span",{className:"text-white font-bold text-2xl",children:s.participants[1]?.odName?.charAt(0)||""})}),e.jsx("p",{className:"text-red-400 font-semibold",children:s.participants[1]?.odName}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Rating: ",s.participants[1]?.rating||1e3]})]})]}),e.jsx(l.p,{className:"text-gray-400 text-xl mb-6",children:b>0?"Battle starts in":""}),e.jsx(l.div,{initial:{opacity:.3},animate:{opacity:[.3,1,.3,1],color:b===0?"#22c55e":b===1?"#ef4444":b===2?"#f59e0b":"#06b6d4"},transition:{opacity:{duration:1,times:[0,.3,.6,1]},color:{duration:.3}},className:"text-9xl font-black mb-6",style:{textShadow:"0 0 50px currentColor, 0 0 100px currentColor",filter:"drop-shadow(0 0 30px currentColor)"},children:b===0?"âš”ï¸ FIGHT! âš”ï¸":b},`countdown-${b}`),b===0&&e.jsx(l.div,{className:"absolute inset-0 bg-white pointer-events-none",initial:{opacity:.8},animate:{opacity:0},transition:{duration:.5}}),e.jsx(l.p,{className:"text-gray-400 text-lg",children:b===0?"ðŸ”¥ Show your coding skills! ðŸ”¥":"âš¡ Get ready to code!"}),e.jsxs(l.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"mt-8 flex items-center justify-center gap-2 text-yellow-400",children:[e.jsx(Z,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-bold",children:["Prize: ",s.prize," coins"]})]})]},b)})]});const we=_t(),We=Vt();return e.jsxs("div",{className:"h-screen bg-gray-900 flex flex-col overflow-hidden -mx-4 -mt-6",children:[e.jsxs("header",{className:"bg-gray-800 border-b border-gray-700 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:We?.odProfilePic||`https://api.dicebear.com/7.x/avataaars/svg?seed=${n?.id}`,alt:"You",className:"w-10 h-10 rounded-full border-2 border-cyan-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:We?.odName||"You"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Rating: ",We?.rating||1e3]})]}),We?.hasSubmitted&&e.jsx(ee,{className:"w-5 h-5 text-green-400"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-3xl font-bold ${M<=60?"text-red-400 animate-pulse":"text-white"}`,children:Ht(M)}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s?.challenge?.title||"Loading challenge..."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[we?.hasSubmitted&&e.jsx(ee,{className:"w-5 h-5 text-green-400"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-medium",children:we?.odName||"Opponent"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Rating: ",we?.rating||1e3]})]}),e.jsx("img",{src:we?.odProfilePic||`https://api.dicebear.com/7.x/avataaars/svg?seed=${we?.odId}`,alt:"Opponent",className:"w-10 h-10 rounded-full border-2 border-red-400"})]})]}),e.jsxs("div",{className:"flex justify-center mt-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-1 bg-yellow-500/20 border border-yellow-500/30 rounded-full",children:[e.jsx(Z,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("span",{className:"text-yellow-400 font-bold",children:[s?.prize||0," coins"]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 text-green-400 bg-green-500/10 rounded-full border border-green-500/20",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Secure Battle"})]})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 border-r border-gray-700 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-gray-800/50 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-white font-medium flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4 text-cyan-400"}),w?.title||"Loading Challenge..."]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-700 text-gray-300 rounded",children:s?.difficulty})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsx("div",{className:"bg-gray-800/80 rounded-xl shadow-lg border border-cyan-900/30 p-5 mb-4 max-h-96 overflow-y-auto custom-scrollbar",children:e.jsx("div",{className:"prose prose-invert prose-base max-w-none problem-statement-prose",dangerouslySetInnerHTML:{__html:w?.problemStatement||w?.description||'<p class="text-white-400">Loading challenge...</p>'}})}),g.length>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"text-white font-medium",children:"Sample Cases"}),g.slice(0,2).map((v,P)=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 text-sm",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Input:"}),e.jsx("pre",{className:"text-cyan-400 font-mono mt-1",children:v.input})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Output:"}),e.jsx("pre",{className:"text-green-400 font-mono mt-1",children:v.output})]})]},P))]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col border-b border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-2 bg-gray-800/50 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium text-sm",children:"Your Code"}),S&&e.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-400",children:[e.jsx(ee,{className:"w-3 h-3"}),"Submitted"]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>E(!O),disabled:S,className:"flex items-center gap-2 px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm disabled:opacity-50",children:[e.jsx("span",{className:"text-white capitalize",children:N}),e.jsx(lt,{className:"w-3 h-3 text-gray-400"})]}),e.jsx(le,{children:O&&e.jsx(l.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"absolute right-0 top-full mt-1 w-36 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 overflow-hidden",children:V.filter(v=>["python","cpp","java","javascript"].includes(v.id)).map(v=>e.jsx("button",{onClick:()=>{T(v.id),E(!1)},className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-700 ${N===v.id?"text-cyan-400":"text-white"}`,children:v.name},v.id))})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(dt,{height:"100%",language:N==="cpp"?"cpp":N,value:d,onChange:v=>!S&&k(v||""),theme:"vs-dark",options:{fontSize:13,fontFamily:"JetBrains Mono, Fira Code, Consolas, monospace",minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",automaticLayout:!0,tabSize:4,readOnly:S,padding:{top:8}}})})]}),e.jsx("div",{className:"h-32 bg-gray-800/50 p-4 overflow-y-auto",children:c?e.jsxs("div",{className:`p-3 rounded-lg ${c.passed?"bg-green-900/20 border border-green-500/30":"bg-red-900/20 border border-red-500/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c.passed?e.jsx(ee,{className:"w-5 h-5 text-green-400"}):e.jsx(je,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:`font-medium ${c.passed?"text-green-400":"text-red-400"}`,children:c.passed?"All Tests Passed!":"Some Tests Failed"})]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[c.passedCount," / ",c.totalCount," test cases â€¢ Time: ",(c.totalTime||0).toFixed(0),"ms"]}),we?.hasSubmitted?e.jsx("p",{className:"text-sm text-cyan-400 mt-2",children:"Waiting for results..."}):e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Waiting for opponent to submit..."})]}):e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("p",{className:"text-sm",children:"Submit your code to see results"}),we?.hasSubmitted&&e.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:"âš ï¸ Opponent has already submitted!"})]})})]})]}),e.jsx(le,{children:D&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:e.jsxs(l.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gray-800 rounded-2xl p-8 max-w-md w-full mx-4 text-center border border-green-500/30",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-green-500/20 rounded-full flex items-center justify-center",children:e.jsx(Z,{className:"w-10 h-10 text-green-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:"ðŸŽ‰ You Win!"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Your opponent left the battle."}),e.jsxs("p",{className:"text-yellow-400 font-bold text-xl mb-6",children:["+",s?.prize," coins awarded!"]}),e.jsx("button",{onClick:()=>a("/dashboard/codearena"),className:"w-full py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all",children:"Back to Arena"})]})})}),e.jsxs("div",{className:"bg-gray-800 border-t border-gray-700 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:Yt,disabled:C||s?.status==="completed",className:"flex items-center gap-2 px-4 py-2 bg-red-500/20 border border-red-500/30 text-red-400 rounded-lg hover:bg-red-500/30 transition-all disabled:opacity-50",children:[C?e.jsx(ae,{className:"w-4 h-4 animate-spin"}):e.jsx(Kt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:C?"Leaving...":"Leave Battle"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsxs("span",{children:["Time Limit: ",s?.timeLimit?Math.floor(s.timeLimit/60):15," min"]})]})]}),e.jsx(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:Je,disabled:R||S,className:`flex items-center gap-2 px-6 py-2.5 rounded-lg font-medium transition-all ${S?"bg-green-600 text-white cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white"} disabled:opacity-70`,children:R?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-4 h-4 animate-spin"}),"Submitting..."]}):S?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"w-4 h-4"}),"Submitted"]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4"}),"Submit Solution"]})})]}),e.jsx("style",{children:`
        .problem-statement-prose, .problem-statement-prose *, .problem-statement-prose h1, .problem-statement-prose h2, .problem-statement-prose h3 {
          color: #fff !important;
        }
        .problem-statement-prose h1, .problem-statement-prose h2, .problem-statement-prose h3 {
          margin-top: 1.2em;
          margin-bottom: 0.5em;
        }
        .problem-statement-prose ul, .problem-statement-prose ol {
          margin-left: 1.5em;
          margin-bottom: 1em;
        }
        .problem-statement-prose pre, .problem-statement-prose code {
          background: #1e293b;
          color: #facc15;
          border-radius: 0.3em;
          padding: 0.3em 0.6em;
          font-size: 1em;
        }
        .problem-statement-prose p {
          margin: 0.7em 0;
          line-height: 1.7;
        }
        .problem-statement-prose table {
          background: #0f172a;
          border-radius: 0.3em;
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #334155;
          border-radius: 4px;
        }
      `}),e.jsx(le,{children:$&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx(l.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gray-800 border-2 border-red-500 rounded-2xl p-6 max-w-md w-full shadow-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-500/20 rounded-full flex items-center justify-center",children:e.jsx(He,{className:"w-8 h-8 text-red-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"âš ï¸ Warning!"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"You switched away from the battle! This is not allowed during an active battle."}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-4",children:[e.jsxs("p",{className:"text-red-400 font-semibold",children:["Tab switches: ",U,"/3"]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:U>=3?"You have been disqualified!":`${3-U} more switch(es) and you will automatically lose!`})]}),e.jsx("button",{onClick:()=>_(!1),className:"w-full py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold rounded-xl hover:shadow-lg transition-all",children:"I Understand, Continue Battle"})]})})})})]})};class Yn{BACKEND_URL="https://nextstepbackend-qhxw.onrender.com";async executeCode(a,n,i){const s=localStorage.getItem("authToken");if(!s)throw new Error("Authentication required");const m=et({code:a,language:n});try{const h=await fetch(`${this.BACKEND_URL}/api/execute`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({source_code:m.code,language_id:this.getLanguageId(n),stdin:i||""})});if(!h.ok)throw new Error(`Execution failed: ${h.statusText}`);return await h.json()}catch(h){throw console.error("Code execution error:",h),new Error("Failed to execute code. Please try again.")}}async submitChallenge(a,n,i,s,m,h,p){if(!localStorage.getItem("authToken"))throw new Error("Authentication required");const y=et({code:n,language:i,challengeId:a});try{const M=await z(`/challenges/${a}/submit`,{method:"POST",body:JSON.stringify({code:y.code,language:i,testCases:s,coinReward:m,title:h,difficulty:p})});return{success:M.success||!1,passed:M.passed||M.passedCount||0,total:M.total||M.totalCount||0,passedCount:M.passedCount||M.passed||0,totalCount:M.totalCount||M.total||0,message:M.message||(M.success?"All test cases passed!":"Some test cases failed"),coinsChanged:M.coinsChanged||0,testResults:M.testResults}}catch(M){throw console.error("Challenge submission error:",M),new Error("Failed to submit solution. Please try again.")}}async submitBattleSolution(a,n,i){if(!localStorage.getItem("authToken"))throw new Error("Authentication required");const m=et({code:n,language:i,battleId:a});try{return await z(`/battles/${a}/submit`,{method:"POST",body:JSON.stringify({code:m.code,language:i})})}catch(h){throw console.error("Battle submission error:",h),new Error("Failed to submit battle solution. Please try again.")}}getLanguageId(a){return{javascript:63,python:71,java:62,cpp:54,c:50,csharp:51,ruby:72,go:60,rust:73,php:68,swift:83,kotlin:78}[a.toLowerCase()]||63}async verifyBattleEntry(a,n){try{return(await z(`/battles/verify-entry?userId=${a}&fee=${n}`)).canEnter||!1}catch(i){return console.error("Battle entry verification error:",i),!1}}}const it=new Yn,Hn=[{id:"python",name:"Python"},{id:"cpp",name:"C++"},{id:"java",name:"Java"},{id:"javascript",name:"JavaScript"}],_n=()=>{const{challengeId:t}=Ve(),a=be(),n=ot(),{user:i}=ge();xe();const[s,m]=r.useState(null),[h,p]=r.useState([]),[b,y]=r.useState(!0),[M,F]=r.useState(""),[w,L]=r.useState("python"),[g,f]=r.useState(!1),[d,k]=r.useState(!1),[N,T]=r.useState(!1),[O,E]=r.useState(null),[R,j]=r.useState(null),[S,W]=r.useState(""),[c,u]=r.useState(!1),[C,B]=r.useState("description"),[D,A]=r.useState(!1),[$,_]=r.useState(!1),U=Hn,q={python:`# Write your solution here
def solve():
    # Read input
    n = int(input())
    
    # Your code here
    result = n
    
    # Print output
    print(result)

solve()`,cpp:`#include <bits/stdc++.h>
using namespace std;

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    
    // Read input
    int n;
    cin >> n;
    
    // Your code here
    int result = n;
    
    // Print output
    cout << result << endl;
    
    return 0;
}`,java:`import java.util.*;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        
        // Read input
        int n = sc.nextInt();
        
        // Your code here
        int result = n;
        
        // Print output
        System.out.println(result);
    }
}`,javascript:`// Read input from stdin
const readline = require('readline');
const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
});

let lines = [];
rl.on('line', (line) => {
    lines.push(line);
});

rl.on('close', () => {
    // Parse input
    const n = parseInt(lines[0]);
    
    // Your code here
    const result = n;
    
    // Print output
    console.log(result);
});`};r.useEffect(()=>{(async()=>{if(t){y(!0);try{const x=n.state?.challenge;if(x)m(x),x.testCases&&p(Array.isArray(x.testCases)?x.testCases:[]);else{const V=await $t(t);if(V){m(V);const J=await wt(t);p(J)}else m(null)}y(!1)}catch(x){console.error("Error loading challenge:",x),m(null),y(!1)}}})()},[t,n]),r.useEffect(()=>{F(q[w]||q.python)},[w]);const H=async()=>{k(!0),j(null),E(null);try{const o=c?S:h[0]?.input||"",x=await it.executeCode(M,w,o);j(x)}catch(o){let x="Failed to run code. Please try again.";o instanceof Re?x=`Security Error: ${o.message}`:o instanceof he?x=`Validation Error: ${o.message}`:o instanceof Error&&(x=o.message),j({output:"",stderr:x,time:"0",memory:"0",status:"Error"})}k(!1)},Y=async()=>{if(!t){alert("Invalid challenge ID");return}if(h.length===0){alert("No test cases available for this problem. Please try again or use the Run button with custom input.");return}T(!0),E(null),j(null);try{const o=await it.submitChallenge(t,M,w,h.map(x=>({input:x.input,expected_output:x.expectedOutput,expectedOutput:x.expectedOutput})),s?.coinReward,s?.title,s?.difficulty);o.success&&s&&i?(_(!0),E({success:!0,passedCount:o.passedCount,totalCount:o.totalCount,totalTime:0,totalMemory:0,results:o.testResults?.map((x,V)=>({testCase:V+1,passed:x.passed,input:x.input,expected:x.expected,output:x.output}))||h.map((x,V)=>({testCase:V+1,passed:!0}))}),o.coinsChanged>0&&alert(`ðŸŽ‰ ${o.message}`)):(E({success:!1,passedCount:o.passedCount,totalCount:o.totalCount,totalTime:0,totalMemory:0,results:o.testResults?.map((x,V)=>({testCase:V+1,passed:x.passed,input:x.input,expected:x.expected,output:x.output,error:x.error}))||h.map((x,V)=>({testCase:V+1,passed:!1}))}),o.coinsChanged<0?alert(`âŒ ${o.message}`):o.message&&alert(o.message))}catch(o){console.error("Submission error:",o);let x="Submission failed. Please try again.";o instanceof Re?x=`Security Error: ${o.message}`:o instanceof he?x=`Validation Error: ${o.message}`:o instanceof Error&&(x=o.message),E({success:!1,results:[],passedCount:0,totalCount:h.length,totalTime:0,totalMemory:0,compilationError:x})}T(!1)},K=o=>{switch(o){case"easy":return"text-green-400 bg-green-400/10 border-green-400/30";case"medium":return"text-yellow-400 bg-yellow-400/10 border-yellow-400/30";case"hard":return"text-red-400 bg-red-400/10 border-red-400/30";case"expert":return"text-purple-400 bg-purple-400/10 border-purple-400/30";default:return"text-gray-400 bg-gray-400/10 border-gray-400/30"}};return b?e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx(l.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"h-screen bg-gray-900 flex flex-col overflow-hidden -mx-4 -mt-6",children:[e.jsxs("header",{className:"bg-gradient-to-r from-gray-800 via-gray-900 to-black border-b border-gray-700 px-4 py-3 flex items-center justify-between relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-20 bg-gradient-to-bl from-cyan-500/20 to-transparent rounded-full -translate-y-10 translate-x-20"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/dashboard/codearena/practice"),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(kt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s?.title||"Loading...",$&&e.jsx(ee,{className:"w-5 h-5 text-green-400"})]}),e.jsx("div",{className:"flex items-center gap-3 text-sm",children:s&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full border ${K(s.difficulty)}`,children:s.difficulty?s.difficulty.charAt(0).toUpperCase()+s.difficulty.slice(1):"Unknown"}),e.jsxs("span",{className:"text-gray-400",children:["Category: ",s.category||"N/A"]}),e.jsxs("span",{className:"flex items-center gap-1 text-yellow-400",children:[e.jsx(X,{className:"w-4 h-4"}),s.coinReward]})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>f(!g),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500 rounded-lg transition-all shadow-lg border border-gray-600 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-blue-500/10"}),e.jsx(oe,{className:"w-4 h-4 text-cyan-400 relative"}),e.jsx("span",{className:"text-white capitalize font-semibold relative",children:w}),e.jsx(lt,{className:"w-4 h-4 text-gray-400 relative"})]}),e.jsx(le,{children:g&&e.jsx(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 top-full mt-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 overflow-hidden",children:U.filter(o=>["python","cpp","java","javascript"].includes(o.id)).map(o=>e.jsx("button",{onClick:()=>{L(o.id),f(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-700 transition-colors ${w===o.id?"text-cyan-400 bg-gray-700/50":"text-white"}`,children:o.name},o.id))})})]}),s&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-gray-400 hover:text-white transition-colors cursor-pointer",children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Database Challenge"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-green-400 bg-green-500/10 rounded-lg border border-green-500/20",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Secure Mode"})]})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-1/2 border-r border-gray-700 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-700",children:[e.jsx("button",{onClick:()=>B("description"),className:`px-4 py-3 text-sm font-medium transition-colors ${C==="description"?"text-cyan-400 border-b-2 border-cyan-400":"text-gray-400 hover:text-white"}`,children:"Description"}),e.jsx("button",{onClick:()=>B("submissions"),className:`px-4 py-3 text-sm font-medium transition-colors ${C==="submissions"?"text-cyan-400 border-b-2 border-cyan-400":"text-gray-400 hover:text-white"}`,children:"Submissions"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:C==="description"?e.jsx("div",{className:"space-y-4",children:b?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx(ae,{className:"w-8 h-8 text-cyan-400 animate-spin"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"prose prose-invert max-w-none problem-statement",dangerouslySetInnerHTML:{__html:s?.problemStatement||""}}),s?.examples&&s.examples.length>0&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Examples"}),s.examples.map((o,x)=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 divide-x divide-gray-700",children:[e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Input"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:o.input})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Output"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:o.output})]})]}),o.explanation&&e.jsxs("div",{className:"px-3 pb-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Explanation"}),e.jsx("p",{className:"text-sm text-gray-300",children:o.explanation})]})]},x))]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Sample Test Cases (",h.length,")"]}),e.jsxs("button",{onClick:async()=>{if(t){y(!0);const o=await wt(t);p(o),y(!1)}},className:"flex items-center gap-1 text-sm text-cyan-400 hover:text-cyan-300",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Refresh"]})]}),h.length>0?h.map((o,x)=>e.jsx(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:x*.1},className:"bg-gradient-to-br from-gray-800/80 to-gray-900/80 rounded-xl border border-gray-700 overflow-hidden shadow-lg hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"grid grid-cols-2 divide-x divide-gray-700",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-900/20 to-transparent",children:[e.jsx("p",{className:"text-xs text-[#00ADB5] mb-2 font-semibold flex items-center gap-1",children:"ðŸ“ Input"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap bg-gray-900/50 p-2 rounded",children:o.input})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-900/20 to-transparent",children:[e.jsx("p",{className:"text-xs text-green-400 mb-2 font-semibold flex items-center gap-1",children:"âœ… Output"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap bg-gray-900/50 p-2 rounded",children:o.expectedOutput})]})]})},x)):e.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700 p-6 text-center",children:[e.jsx("p",{className:"text-gray-400 mb-2",children:"No test cases loaded yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click Refresh to load test cases or use custom input"})]})]}),s?.tags&&s.tags.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("button",{onClick:()=>A(!D),className:"flex items-center gap-2 text-yellow-400 hover:text-yellow-300 transition-colors",children:[e.jsx(Ct,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:D?"Hide Hints":"Show Hints (Tags)"})]}),e.jsx(le,{children:D&&e.jsx(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 flex flex-wrap gap-2",children:s.tags.map((o,x)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-700 text-gray-300 rounded",children:o},x))})})]})]})}):e.jsxs("div",{className:"text-center py-10 text-gray-400",children:[e.jsx(Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Your submission history will appear here"})]})})]}),e.jsxs("div",{className:"w-1/2 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(dt,{height:"100%",language:w==="cpp"?"cpp":w,value:M,onChange:o=>F(o||""),theme:"vs-dark",options:{fontSize:14,fontFamily:"JetBrains Mono, Fira Code, Consolas, monospace",minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",glyphMargin:!1,folding:!0,lineDecorationsWidth:10,automaticLayout:!0,tabSize:4,wordWrap:"on",padding:{top:10}}})}),e.jsxs("div",{className:"border-t border-gray-700 px-4 py-2 flex items-center gap-4 bg-gray-800/50",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:o=>u(o.target.checked),className:"w-4 h-4 bg-gray-700 border-gray-600 rounded accent-cyan-500"}),"Custom Input"]}),c&&e.jsx("textarea",{value:S,onChange:o=>W(o.target.value),placeholder:"Enter custom input...",className:"flex-1 px-3 py-1 bg-gray-800 border border-gray-700 rounded text-sm text-white resize-none h-8"})]}),e.jsx("div",{className:"h-48 border-t border-gray-700 bg-gray-800/50 overflow-y-auto",children:O||R?e.jsxs("div",{className:"p-4",children:[R&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-medium ${R.error?"text-red-400":"text-green-400"}`,children:R.status}),R.time&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(ve,{className:"w-3 h-3"}),R.time,"s"]}),R.memory&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Oe,{className:"w-3 h-3"}),(R.memory/1024).toFixed(2)," MB"]})]}),R.output&&e.jsxs("div",{className:"bg-gray-900 rounded p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Output:"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:R.output})]}),R.stderr&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-3",children:[e.jsx("p",{className:"text-xs text-red-400 mb-1",children:"Error:"}),e.jsx("pre",{className:"text-sm text-red-300 font-mono whitespace-pre-wrap",children:R.stderr})]})]}),O&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${O.success?"bg-green-900/20 border border-green-500/30":"bg-red-900/20 border border-red-500/30"}`,children:[O.success?e.jsx(ee,{className:"w-6 h-6 text-green-400"}):e.jsx(je,{className:"w-6 h-6 text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${O.success?"text-green-400":"text-red-400"}`,children:O.success?"All Tests Passed!":"Some Tests Failed"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[O.passedCount," / ",O.totalCount," test cases passed"]})]}),O.success&&s&&e.jsxs("div",{className:"ml-auto flex items-center gap-2 text-yellow-400",children:[e.jsx(X,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-bold",children:["+",s.coinReward]})]})]}),O.compilationError&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-3",children:[e.jsx("p",{className:"text-xs text-red-400 mb-1",children:"Compilation Error:"}),e.jsx("pre",{className:"text-sm text-red-300 font-mono whitespace-pre-wrap",children:O.compilationError})]}),O.results&&O.results.length>0&&e.jsx("div",{className:"space-y-2",children:O.results.map((o,x)=>e.jsx("div",{className:`p-2 rounded border ${o.passed?"bg-green-900/10 border-green-500/20":"bg-red-900/10 border-red-500/20"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[o.passed?e.jsx(ee,{className:"w-4 h-4 text-green-400"}):e.jsx(je,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:"text-sm text-white",children:["Test Case ",o.testCase]}),o.time&&e.jsxs("span",{className:"text-xs text-gray-400",children:[o.time,"s"]})]})},x))})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsx("p",{className:"text-sm",children:"Run or submit your code to see results"})})}),e.jsxs("div",{className:"border-t border-gray-700 p-4 flex items-center justify-between bg-gray-800",children:[e.jsxs("button",{onClick:()=>F(q[w]||""),className:"flex items-center gap-2 px-4 py-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Reset Code"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(l.button,{whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(59, 130, 246, 0.3)"},whileTap:{scale:.98},onClick:H,disabled:d||N,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#00ADB5] to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg relative overflow-hidden",children:[d&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/20 to-indigo-400/20"}),d?e.jsx(l.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full relative"}):e.jsx(Lt,{className:"w-4 h-4 relative"}),e.jsx("span",{className:"relative",children:"Run"})]}),e.jsxs(l.button,{whileHover:{scale:1.02,boxShadow:"0 10px 30px rgba(34, 197, 94, 0.3)"},whileTap:{scale:.98},onClick:Y,disabled:d||N,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 via-emerald-500 to-green-600 hover:from-green-600 hover:via-emerald-600 hover:to-green-700 text-white rounded-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg relative overflow-hidden",children:[N&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-400/20 to-emerald-400/20"}),N?e.jsx(l.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full relative"}):e.jsx(ct,{className:"w-4 h-4 relative"}),e.jsx("span",{className:"relative",children:"âš¡ Submit"})]})]})]})]})]}),e.jsx("style",{children:`
        .problem-statement {
          color: #e5e7eb;
        }
        .problem-statement .header {
          font-size: 1.25rem;
          font-weight: 600;
          margin-bottom: 1rem;
        }
        .problem-statement .time-limit,
        .problem-statement .memory-limit {
          color: #9ca3af;
          font-size: 0.875rem;
        }
        .problem-statement pre {
          background: #1f2937;
          padding: 0.75rem;
          border-radius: 0.5rem;
          overflow-x: auto;
        }
        .problem-statement .section-title {
          font-size: 1.125rem;
          font-weight: 600;
          margin-top: 1.5rem;
          margin-bottom: 0.5rem;
          color: #60a5fa;
        }
        .problem-statement .input-specification,
        .problem-statement .output-specification,
        .problem-statement .note {
          margin-top: 1rem;
        }
        .problem-statement .sample-tests {
          margin-top: 1.5rem;
        }
        .problem-statement .input,
        .problem-statement .output {
          background: #1f2937;
          padding: 0.5rem;
          border-radius: 0.25rem;
          margin: 0.5rem 0;
        }
      `})]})},Vn=()=>{const{user:t}=ge(),{fetchGlobalLeaderboard:a,fetchWeeklyLeaderboard:n,fetchMonthlyLeaderboard:i,getUserWallet:s}=xe(),[m,h]=r.useState("global"),[p,b]=r.useState([]),[y,M]=r.useState(!0),[F,w]=r.useState(null),[L,g]=r.useState(null);r.useEffect(()=>{(async()=>{M(!0);try{let k=[];switch(m){case"global":k=await a();break;case"weekly":k=await n();break;case"monthly":k=await i();break}if(b(k),t){const N=await s(t.id);g(N);const T=k.find(O=>O.odId===t.id);T&&w(T)}}catch(k){console.error("Error loading leaderboard:",k),b([])}finally{M(!1)}})()},[m,t]);const f=d=>{switch(d){case 1:return e.jsx(ye,{className:"w-5 h-5 text-yellow-500"});case 2:return e.jsx(Ee,{className:"w-5 h-5 text-gray-400"});case 3:return e.jsx(Ee,{className:"w-5 h-5 text-amber-600"});default:return null}};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"space-y-6 pb-20 md:pb-6",children:[e.jsx(l.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/30 rounded-xl",children:e.jsx(Z,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ðŸ† Leaderboard"}),e.jsx("p",{className:"text-gray-500 dark:text-white text-sm",children:"Compete with the best coders"})]})]}),e.jsx("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-700 p-2 rounded-lg",children:[{id:"global",label:"All Time",icon:Z},{id:"weekly",label:"Weekly",icon:Nt},{id:"monthly",label:"Monthly",icon:ve}].map(d=>e.jsxs(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(d.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${m===d.id?"bg-[#00ADB5] text-white":"text-gray-600 dark:text-white hover:text-gray-800 dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[e.jsx(d.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:d.label})]},d.id))})]})}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6 text-center",children:"Top Performers"}),e.jsxs("div",{className:"flex items-end justify-center gap-4 md:gap-8",children:[p[1]&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full bg-gray-500 flex items-center justify-center text-xl md:text-2xl font-bold text-white shadow-md border-2 border-gray-400",children:p[1]?.avatar||p[1]?.odName?.[0]||"?"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-7 h-7 bg-gray-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"2"})})]}),e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold text-sm md:text-base text-center truncate max-w-[80px] md:max-w-[100px]",children:p[1]?.odName}),e.jsxs("p",{className:"text-gray-600 dark:text-white text-xs",children:["Level ",p[1]?.level]}),e.jsxs("div",{className:"mt-3 h-20 w-20 md:w-24 rounded-t-xl bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-[#00ADB5] font-bold text-lg",children:p[1]?.rating}),e.jsxs("span",{className:"text-gray-600 dark:text-white text-xs",children:[p[1]?.problemsSolved," solved"]})]})]}),p[0]&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center -mt-4",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full bg-amber-500 flex items-center justify-center text-2xl md:text-3xl font-bold text-white shadow-xl border-3 border-amber-400",children:p[0]?.avatar||p[0]?.odName?.[0]||"?"}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-amber-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(ye,{className:"w-5 h-5 text-white"})})]}),e.jsx("p",{className:"text-gray-900 dark:text-white font-bold text-base md:text-lg text-center truncate max-w-[100px] md:max-w-[120px]",children:p[0]?.odName}),e.jsxs("p",{className:"text-gray-600 dark:text-white text-xs",children:["Level ",p[0]?.level]}),e.jsxs("div",{className:"mt-3 h-28 w-24 md:w-28 rounded-t-xl bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700 shadow-md flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-[#00ADB5] font-bold text-xl",children:p[0]?.rating}),e.jsxs("span",{className:"text-gray-600 dark:text-white text-xs",children:[p[0]?.problemsSolved," solved"]})]})]}),p[2]&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full bg-orange-500 flex items-center justify-center text-xl md:text-2xl font-bold text-white shadow-md border-2 border-orange-400",children:p[2]?.avatar||p[2]?.odName?.[0]||"?"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-7 h-7 bg-orange-600 rounded-full flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"3"})})]}),e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold text-sm md:text-base text-center truncate max-w-[80px] md:max-w-[100px]",children:p[2]?.odName}),e.jsxs("p",{className:"text-gray-600 dark:text-white text-xs",children:["Level ",p[2]?.level]}),e.jsxs("div",{className:"mt-3 h-16 w-20 md:w-24 rounded-t-xl bg-orange-50 dark:bg-orange-900/30 border border-orange-200 dark:border-orange-700 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-[#00ADB5] font-bold text-lg",children:p[2]?.rating}),e.jsxs("span",{className:"text-gray-600 dark:text-white text-xs",children:[p[2]?.problemsSolved," solved"]})]})]})]})]}),L&&e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 border border-[#00ADB5]/30 dark:border-blue-700 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-xl font-bold text-white shadow-lg",children:L?.userName?.[0]||"Y"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-[#00ADB5] rounded-full flex items-center justify-center text-xs font-bold text-white border-2 border-white dark:border-gray-800",children:F?.rank||"?"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-semibold text-lg",children:L?.userName||"You"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-white",children:"Your Current Rank"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#00ADB5] font-bold text-xl",children:F?.rating||L?.coins||1e3}),e.jsx("p",{className:"text-xs text-gray-500",children:"Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-emerald-600 font-bold text-xl",children:F?.problemsSolved||0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:"Solved"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-purple-600 font-bold text-xl",children:F?.battlesWon||0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:"Wins"})]})]})]})}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 px-4 py-3 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"col-span-1 text-center",children:"#"}),e.jsx("div",{className:"col-span-5",children:"Player"}),e.jsx("div",{className:"col-span-2 text-center",children:"Rating"}),e.jsx("div",{className:"col-span-2 text-center hidden sm:block",children:"Solved"}),e.jsx("div",{className:"col-span-2 text-center hidden sm:block",children:"Wins"})]}),y?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(ae,{className:"w-8 h-8 text-[#00ADB5] animate-spin"})}):p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-500 dark:text-white",children:[e.jsx(Z,{className:"w-12 h-12 mb-3 opacity-30"}),e.jsx("p",{className:"text-lg font-medium",children:"No rankings yet"}),e.jsx("p",{className:"text-sm",children:"Start solving challenges to appear on the leaderboard!"})]}):e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:p.map((d,k)=>e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:k*.03},className:`grid grid-cols-12 gap-2 px-4 py-4 items-center hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${d.odId===t?.id?"bg-[#00ADB5]/10 dark:bg-[#00ADB5]/20 border-l-4 border-[#00ADB5]":""}`,children:[e.jsx("div",{className:"col-span-1 flex items-center justify-center",children:d.rank<=3?e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${d.rank===1?"bg-yellow-100":d.rank===2?"bg-gray-100":"bg-amber-100"}`,children:f(d.rank)}):e.jsx("span",{className:"text-gray-500 dark:text-white font-medium",children:d.rank})}),e.jsxs("div",{className:"col-span-5 flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold text-white flex-shrink-0 ${d.rank===1?"bg-amber-500":d.rank===2?"bg-gray-500":d.rank===3?"bg-orange-500":"bg-gray-400"}`,children:d.avatar||d.odName?.[0]||"?"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium truncate flex items-center gap-2",children:[d.odName,d.odId===t?.id&&e.jsx("span",{className:"text-xs bg-[#00ADB5]/20 dark:bg-blue-900/50 text-[#00ADB5] dark:text-[#00ADB5] px-2 py-0.5 rounded-full font-medium",children:"You"})]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-white flex items-center gap-1",children:[e.jsx(Fe,{className:"w-3 h-3 text-amber-500"}),"Level ",d.level]})]})]}),e.jsx("div",{className:"col-span-2 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Ue,{className:"w-4 h-4 text-[#00ADB5]"}),e.jsx("span",{className:"text-[#00ADB5] font-bold",children:d.rating})]})}),e.jsx("div",{className:"col-span-2 text-center hidden sm:block",children:e.jsx("span",{className:"text-green-600 font-medium",children:d.problemsSolved})}),e.jsx("div",{className:"col-span-2 text-center hidden sm:block",children:e.jsx("span",{className:"text-purple-600 font-medium",children:d.battlesWon})})]},d.odId||k))})]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5 text-amber-600"}),"Weekly Rewards"]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:[{rank:"1st Place",coins:100,icon:ye,bgColor:"bg-amber-50 dark:bg-amber-900/30",iconBg:"bg-amber-500",borderColor:"border-amber-200 dark:border-amber-700"},{rank:"2nd Place",coins:50,icon:Ee,bgColor:"bg-gray-50 dark:bg-gray-700",iconBg:"bg-gray-500",borderColor:"border-gray-200 dark:border-gray-600"},{rank:"3rd Place",coins:200,icon:Ee,bgColor:"bg-orange-50 dark:bg-orange-900/30",iconBg:"bg-orange-500",borderColor:"border-orange-200 dark:border-orange-700"}].map((d,k)=>e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6+k*.1},className:`flex items-center gap-4 p-4 rounded-lg border ${d.bgColor} ${d.borderColor} hover:shadow-md transition-all`,children:[e.jsx("div",{className:`p-3 rounded-lg ${d.iconBg} shadow-sm`,children:e.jsx(d.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:d.rank}),e.jsxs("p",{className:"text-amber-600 font-bold text-lg",children:[d.coins.toLocaleString()," coins"]})]})]},k))})]})]})})},vt=t=>Array.isArray(t)?t.map(a=>({input:a.input||"",expectedOutput:a.expectedOutput||a.expected_output||"",isHidden:a.isHidden||!1,points:a.points||0})):[],Un=()=>{const{challengeId:t}=Ve(),a=be(),n=ot(),[i,s]=r.useState(null),[m,h]=r.useState(!0),[p,b]=r.useState(""),[y,M]=r.useState("python"),[F,w]=r.useState(!1),[L,g]=r.useState(!1),[f,d]=r.useState(!1),[k,N]=r.useState(null),[T,O]=r.useState(null),[E,R]=r.useState(""),[j,S]=r.useState(!1),[W,c]=r.useState("description"),[u,C]=r.useState(!1),[B,D]=r.useState(!1),[A,$]=r.useState({}),_=zt();r.useEffect(()=>{(async()=>{if(t){h(!0);try{let x=n.state?.challenge;if(x&&!x.problemStatement){const J={easy:"Easy",Easy:"Easy",medium:"Medium",Medium:"Medium",hard:"Hard",Hard:"Hard",expert:"Hard"}[x.difficulty]||"Medium";x={id:x.id,title:x.title,description:x.description,difficulty:J,category:x.category||x.topic,points:100,coinReward:x.coinReward||10,timeLimit:5e3,memoryLimit:256,problemStatement:x.description,inputFormat:"Standard input",outputFormat:"Standard output",constraints:[x.constraints||"N/A"],examples:[],testCases:vt(x.testCases||x.test_cases||[]),hints:[],tags:[x.category||x.topic],isPremium:!1,isDaily:!1,totalSubmissions:0,successfulSubmissions:0,acceptanceRate:0,createdAt:new Date,updatedAt:new Date}}x||(x=await $t(t)),x&&(s(x),x.starterCode?.[y]?b(x.starterCode[y]||""):b(U(y))),h(!1)}catch(x){console.error("Error loading challenge:",x),h(!1)}}})()},[t,n]),r.useEffect(()=>{i?.starterCode?.[y]?b(i.starterCode[y]||""):b(U(y))},[y,i]);const U=o=>{const x={python:`# Write your solution here
def solve():
    # Read input
    n = int(input())
    
    # Your code here
    result = n
    
    # Print output
    print(result)

solve()`,cpp:`#include <bits/stdc++.h>
using namespace std;

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    
    // Read input
    int n;
    cin >> n;
    
    // Your code here
    int result = n;
    
    // Print output
    cout << result << endl;
    
    return 0;
}`,java:`import java.util.*;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        
        // Read input
        int n = sc.nextInt();
        
        // Your code here
        int result = n;
        
        // Print output
        System.out.println(result);
    }
}`,javascript:`// Read input from stdin
const readline = require('readline');
const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
});

let lines = [];
rl.on('line', (line) => {
    lines.push(line);
});

rl.on('close', () => {
    // Parse input
    const n = parseInt(lines[0]);
    
    // Your code here
    const result = n;
    
    // Print output
    console.log(result);
});`};return x[o]||x.python},q=async()=>{if(i){g(!0),O(null),N(null);try{const o=i.testCases.filter(J=>!J.isHidden),x=j?E:o[0]?.input||"",V=await zn(p,y,x);O(V)}catch(o){O({output:"",error:o?.message||"Failed to run code. Please try again.",time:null,memory:null,status:"Error"})}g(!1)}},H=async()=>{if(!(!i||!t)){d(!0),N(null),O(null);try{let o=i.testCases||[];if(o.length===0&&(o=vt(await On(t)||[])),o.length===0){N({success:!1,results:[],passedCount:0,totalCount:0,totalTime:0,totalMemory:0,compilationError:"No test cases available for this challenge."}),d(!1);return}const x=o.map(J=>({input:J.input||"",expectedOutput:J.expectedOutput||J.expected_output||""})),V=await it.submitChallenge(t,p,y,x,i.coinReward||10,i.title,i.difficulty);N({success:V.success,passedCount:V.passedCount,totalCount:V.totalCount,totalTime:0,totalMemory:0,results:V.testResults?.map((J,$e)=>({testCase:$e+1,passed:J.passed,input:J.input,expected:J.expected,output:J.output,error:J.error}))||[]}),V.success&&D(!0)}catch(o){console.error("Submission error:",o),N({success:!1,results:[],passedCount:0,totalCount:0,totalTime:0,totalMemory:0,compilationError:o?.message||"Submission failed. Please try again."})}d(!1)}},Y=o=>{switch(o){case"easy":return"text-green-400 bg-green-400/10 border-green-400/30";case"medium":return"text-yellow-400 bg-yellow-400/10 border-yellow-400/30";case"hard":return"text-red-400 bg-red-400/10 border-red-400/30";case"expert":return"text-purple-400 bg-purple-400/10 border-purple-400/30";default:return"text-gray-400 bg-gray-400/10 border-gray-400/30"}};if(m)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx(l.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full"})});if(!i)return e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Challenge Not Found"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"The challenge you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>a("/dashboard/codearena/practice"),className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors",children:"Back to Challenges"})]})});const K=i.testCases.filter(o=>!o.isHidden);return e.jsxs("div",{className:"h-screen bg-gray-900 flex flex-col overflow-hidden -mx-4 -mt-6",children:[e.jsxs("header",{className:"bg-gray-800/90 border-b border-gray-700 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/dashboard/codearena/practice"),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(kt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-bold text-white flex items-center gap-2",children:[i.title,B&&e.jsx(ee,{className:"w-5 h-5 text-green-400"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full border ${Y(i.difficulty)}`,children:i.difficulty?i.difficulty.charAt(0).toUpperCase()+i.difficulty.slice(1):"Unknown"}),e.jsx("span",{className:"text-gray-400",children:i.category}),e.jsxs("span",{className:"flex items-center gap-1 text-yellow-400",children:[e.jsx(X,{className:"w-4 h-4"}),i.coinReward]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>w(!F),className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[e.jsx(oe,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{className:"text-white capitalize",children:y}),e.jsx(lt,{className:"w-4 h-4 text-gray-400"})]}),e.jsx(le,{children:F&&e.jsx(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 top-full mt-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 overflow-hidden",children:_.filter(o=>["python","cpp","java","javascript"].includes(o.id)).map(o=>e.jsx("button",{onClick:()=>{M(o.id),w(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-700 transition-colors ${y===o.id?"text-cyan-400 bg-gray-700/50":"text-white"}`,children:o.name},o.id))})})]})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-1/2 border-r border-gray-700 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-700",children:[e.jsx("button",{onClick:()=>c("description"),className:`px-4 py-3 text-sm font-medium transition-colors ${W==="description"?"text-cyan-400 border-b-2 border-cyan-400":"text-gray-400 hover:text-white"}`,children:"Description"}),e.jsx("button",{onClick:()=>c("submissions"),className:`px-4 py-3 text-sm font-medium transition-colors ${W==="submissions"?"text-cyan-400 border-b-2 border-cyan-400":"text-gray-400 hover:text-white"}`,children:"Submissions"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:W==="description"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"prose prose-invert max-w-none problem-statement",dangerouslySetInnerHTML:{__html:i.problemStatement||""}}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Examples"}),(i.examples||[]).map((o,x)=>e.jsxs("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 divide-x divide-gray-700",children:[e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Input"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:o.input})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Output"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:o.output})]})]}),o.explanation&&e.jsxs("div",{className:"p-3 border-t border-gray-700 bg-gray-800/30",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Explanation"}),e.jsx("p",{className:"text-sm text-gray-300",children:o.explanation})]})]},x))]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Sample Test Cases (",K.length,")"]}),K.map((o,x)=>e.jsx("div",{className:"bg-gray-800/50 rounded-lg border border-gray-700 overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-2 divide-x divide-gray-700",children:[e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Input"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:o.input})]}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Expected Output"}),e.jsxs("button",{onClick:()=>$(V=>({...V,[x]:!V[x]})),className:"text-xs text-cyan-400 hover:text-cyan-300 flex items-center gap-1",children:[A[x]?e.jsx(da,{className:"w-3 h-3"}):e.jsx(Xt,{className:"w-3 h-3"}),A[x]?"Hide":"Show"]})]}),A[x]?e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:o.expectedOutput}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:'Click "Show" to reveal'})]})]})},x))]}),i.hints&&i.hints.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("button",{onClick:()=>C(!u),className:"flex items-center gap-2 text-yellow-400 hover:text-yellow-300 transition-colors",children:[e.jsx(Ct,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:u?"Hide Hints":"Show Hints"})]}),e.jsx(le,{children:u&&e.jsx(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 space-y-2",children:i.hints.map((o,x)=>e.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-xs text-yellow-400",children:["Hint ",x+1]}),e.jsxs("span",{className:"text-xs text-yellow-400/70",children:[typeof o=="object"?o.coinCost:5," coins"]})]}),e.jsx("p",{className:"text-sm text-gray-300",children:typeof o=="object"?o.text:o})]},x))})})]}),i.tags&&i.tags.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map((o,x)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-700 text-gray-300 rounded",children:o},x))})]})]}):e.jsxs("div",{className:"text-center py-10 text-gray-400",children:[e.jsx(Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Your submission history will appear here"})]})})]}),e.jsxs("div",{className:"w-1/2 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(dt,{height:"100%",language:y==="cpp"?"cpp":y,value:p,onChange:o=>b(o||""),theme:"vs-dark",options:{fontSize:14,fontFamily:"JetBrains Mono, Fira Code, Consolas, monospace",minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",glyphMargin:!1,folding:!0,lineDecorationsWidth:10,automaticLayout:!0,tabSize:4,wordWrap:"on",padding:{top:10}}})}),e.jsxs("div",{className:"border-t border-gray-700 px-4 py-2 flex items-center gap-4 bg-gray-800/50",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:o=>S(o.target.checked),className:"w-4 h-4 bg-gray-700 border-gray-600 rounded accent-cyan-500"}),"Custom Input"]}),j&&e.jsx("textarea",{value:E,onChange:o=>R(o.target.value),placeholder:"Enter custom input...",className:"flex-1 px-3 py-1 bg-gray-800 border border-gray-700 rounded text-sm text-white resize-none h-8"})]}),e.jsx("div",{className:"h-48 border-t border-gray-700 bg-gray-800/50 overflow-y-auto",children:k||T?e.jsxs("div",{className:"p-4",children:[T&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-medium ${T.error?"text-red-400":"text-green-400"}`,children:T.status}),T.time&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(ve,{className:"w-3 h-3"}),T.time,"s"]}),T.memory&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(Oe,{className:"w-3 h-3"}),(T.memory/1024).toFixed(2)," MB"]})]}),T.output&&e.jsxs("div",{className:"bg-gray-900 rounded p-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Output:"}),e.jsx("pre",{className:"text-sm text-white font-mono whitespace-pre-wrap",children:T.output})]}),T.error&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-3",children:[e.jsx("p",{className:"text-xs text-red-400 mb-1",children:"Error:"}),e.jsx("pre",{className:"text-sm text-red-300 font-mono whitespace-pre-wrap",children:T.error})]})]}),k&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${k.success?"bg-green-900/20 border border-green-500/30":"bg-red-900/20 border border-red-500/30"}`,children:[k.success?e.jsx(ee,{className:"w-6 h-6 text-green-400"}):e.jsx(je,{className:"w-6 h-6 text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${k.success?"text-green-400":"text-red-400"}`,children:k.success?"All Tests Passed!":"Some Tests Failed"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[k.passedCount," / ",k.totalCount," test cases passed"]})]}),k.success&&i&&e.jsxs("div",{className:"ml-auto flex items-center gap-2 text-yellow-400",children:[e.jsx(X,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-bold",children:["+",i.coinReward]})]})]}),k.compilationError&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded p-3",children:[e.jsx("p",{className:"text-xs text-red-400 mb-1",children:"Compilation Error:"}),e.jsx("pre",{className:"text-sm text-red-300 font-mono whitespace-pre-wrap",children:k.compilationError})]}),k.results&&k.results.length>0&&e.jsx("div",{className:"space-y-2",children:k.results.map((o,x)=>e.jsxs("div",{className:`p-2 rounded border ${o.passed?"bg-green-900/10 border-green-500/20":"bg-red-900/10 border-red-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[o.passed?e.jsx(ee,{className:"w-4 h-4 text-green-400"}):e.jsx(je,{className:"w-4 h-4 text-red-400"}),e.jsxs("span",{className:"text-sm text-white",children:["Test Case ",o.testCase]}),o.time&&e.jsxs("span",{className:"text-xs text-gray-400",children:[o.time,"s"]})]}),!o.passed&&o.actualOutput&&e.jsxs("div",{className:"mt-2 pl-6",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Your output:"}),e.jsx("pre",{className:"text-xs text-red-300 font-mono",children:o.actualOutput}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Expected:"}),e.jsx("pre",{className:"text-xs text-green-300 font-mono",children:o.expectedOutput})]})]},x))})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsx("p",{className:"text-sm",children:"Run or submit your code to see results"})})}),e.jsxs("div",{className:"border-t border-gray-700 p-4 flex items-center justify-between bg-gray-800",children:[e.jsxs("button",{onClick:()=>{i?.starterCode?.[y]?b(i.starterCode[y]||""):b(U(y))},className:"flex items-center gap-2 px-4 py-2 text-gray-400 hover:text-white transition-colors",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Reset Code"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:q,disabled:L||f,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[L?e.jsx(ae,{className:"w-4 h-4 animate-spin"}):e.jsx(Lt,{className:"w-4 h-4"}),"Run"]}),e.jsxs(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:H,disabled:L||f,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[f?e.jsx(ae,{className:"w-4 h-4 animate-spin"}):e.jsx(ct,{className:"w-4 h-4"}),"Submit"]})]})]})]})]}),e.jsx("style",{children:`
        .problem-statement {
          color: #e5e7eb;
        }
        .problem-statement .header {
          font-size: 1.25rem;
          font-weight: 600;
          margin-bottom: 1rem;
        }
        .problem-statement .time-limit,
        .problem-statement .memory-limit {
          color: #9ca3af;
          font-size: 0.875rem;
        }
        .problem-statement pre {
          background: #1f2937;
          padding: 0.75rem;
          border-radius: 0.5rem;
          overflow-x: auto;
        }
        .problem-statement code {
          background: #374151;
          padding: 0.125rem 0.375rem;
          border-radius: 0.25rem;
          font-size: 0.875rem;
        }
        .problem-statement .section-title {
          font-size: 1.125rem;
          font-weight: 600;
          margin-top: 1.5rem;
          margin-bottom: 0.5rem;
          color: #60a5fa;
        }
        .problem-statement ul {
          padding-left: 1.5rem;
          list-style-type: disc;
        }
        .problem-statement ol {
          padding-left: 1.5rem;
          list-style-type: decimal;
        }
        .problem-statement li {
          margin: 0.25rem 0;
        }
      `})]})},Gn=JSON.parse(`[{"id":"A001","title":"Maximum Subarray Sum","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Given an integer array nums, find the contiguous subarray (containing at least one number) which has the largest sum and return its sum.","inputFormat":"First line contains integer n (1 <= n <= 100000). Second line contains n integers (-10000 <= a_i <= 10000).","outputFormat":"Print a single integer - the maximum sum of contiguous subarray.","constraints":["1 <= n <= 100000","-10000 <= nums[i] <= 10000"],"tags":["array","dynamic-programming","kadane"],"testCases":[{"input":"9\\n-2 1 -3 4 -1 2 1 -5 4","output":"6","explanation":"Subarray [4,-1,2,1] has sum = 6"},{"input":"1\\n5","output":"5","explanation":"Single element"},{"input":"5\\n-1 -2 -3 -4 -5","output":"-1","explanation":"All negative"}]},{"id":"A002","title":"Rotate Array","difficulty":"Easy","timeLimit":"2s","memoryLimit":"256MB","description":"Given an array, rotate the array to the right by k steps, where k is non-negative.","inputFormat":"First line contains n and k (1 <= n <= 100000, 0 <= k <= 1000000000). Second line contains n integers.","outputFormat":"Print n integers - the rotated array.","constraints":["1 <= n <= 100000","0 <= k <= 1000000000"],"tags":["array","math"],"testCases":[{"input":"7 3\\n1 2 3 4 5 6 7","output":"5 6 7 1 2 3 4","explanation":"Rotate right by 3"},{"input":"3 2\\n-1 -100 3","output":"-100 3 -1","explanation":"Rotate right by 2"}]},{"id":"A003","title":"Find Missing Number","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Given an array nums containing n distinct numbers in the range [0, n], return the only number in the range that is missing from the array.","inputFormat":"First line contains integer n (1 <= n <= 10000). Second line contains n integers.","outputFormat":"Print a single integer - the missing number.","constraints":["1 <= n <= 10000","0 <= nums[i] <= n","All numbers distinct"],"tags":["array","math","bit-manipulation"],"testCases":[{"input":"3\\n3 0 1","output":"2","explanation":"Missing 2"},{"input":"2\\n0 1","output":"2","explanation":"Range [0,2]"}]},{"id":"A004","title":"Product of Array Except Self","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Return an array where answer[i] is equal to the product of all elements except nums[i]. Must be O(n) without division.","inputFormat":"First line contains n (2 <= n <= 100000). Second line contains n integers.","outputFormat":"Print n integers - the product array.","constraints":["2 <= n <= 100000","-30 <= nums[i] <= 30"],"tags":["array","prefix-sum"],"testCases":[{"input":"4\\n1 2 3 4","output":"24 12 8 6","explanation":"Products except self"},{"input":"5\\n-1 1 0 -3 3","output":"0 0 9 0 0","explanation":"With zero"}]},{"id":"A005","title":"Container With Most Water","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Find two lines that together with the x-axis form a container with maximum water.","inputFormat":"First line contains n (2 <= n <= 100000). Second line contains n integers (heights).","outputFormat":"Print maximum water area.","constraints":["2 <= n <= 100000","0 <= height[i] <= 10000"],"tags":["array","two-pointers","greedy"],"testCases":[{"input":"9\\n1 8 6 2 5 4 8 3 7","output":"49","explanation":"min(8,7) * 7 = 49"},{"input":"2\\n1 1","output":"1","explanation":"Two lines"}]},{"id":"A006","title":"Find All Duplicates","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Find all integers that appear twice in array where all integers are in range [1, n]. O(n) time, O(1) space.","inputFormat":"First line contains n (1 <= n <= 100000). Second line contains n integers.","outputFormat":"Print duplicates space-separated or empty line.","constraints":["1 <= n <= 100000","1 <= nums[i] <= n"],"tags":["array","hash-table"],"testCases":[{"input":"8\\n4 3 2 7 8 2 3 1","output":"2 3","explanation":"2 and 3 twice"},{"input":"1\\n1","output":"","explanation":"No duplicates"}]},{"id":"A007","title":"Two Sum","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Given an array and a target, return indices of two numbers that add up to target.","inputFormat":"First line contains n and target (2 <= n <= 10000). Second line contains n integers.","outputFormat":"Print two indices (0-indexed) space-separated.","constraints":["2 <= n <= 10000","Exactly one solution exists"],"tags":["array","hash-table"],"testCases":[{"input":"4 9\\n2 7 11 15","output":"0 1","explanation":"nums[0] + nums[1] = 9"},{"input":"3 6\\n3 2 4","output":"1 2","explanation":"nums[1] + nums[2] = 6"}]},{"id":"A008","title":"Three Sum","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find all unique triplets in array that sum to zero.","inputFormat":"First line contains n (3 <= n <= 3000). Second line contains n integers.","outputFormat":"Print each triplet on new line, sorted. Print triplets in sorted order.","constraints":["3 <= n <= 3000","-100000 <= nums[i] <= 100000"],"tags":["array","two-pointers","sorting"],"testCases":[{"input":"6\\n-1 0 1 2 -1 -4","output":"-1 -1 2\\n-1 0 1","explanation":"Two triplets"},{"input":"3\\n0 0 0","output":"0 0 0","explanation":"All zeros"}]},{"id":"A009","title":"Merge Intervals","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Given array of intervals, merge all overlapping intervals.","inputFormat":"First line contains n (1 <= n <= 10000). Next n lines contain two integers - start and end.","outputFormat":"Print merged intervals, one per line.","constraints":["1 <= n <= 10000","0 <= start <= end <= 10000"],"tags":["array","sorting"],"testCases":[{"input":"4\\n1 3\\n2 6\\n8 10\\n15 18","output":"1 6\\n8 10\\n15 18","explanation":"Merge [1,3] and [2,6]"},{"input":"2\\n1 4\\n4 5","output":"1 5","explanation":"Overlapping at 4"}]},{"id":"A010","title":"Move Zeroes","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Move all zeroes to end while maintaining relative order of non-zero elements.","inputFormat":"First line contains n (1 <= n <= 10000). Second line contains n integers.","outputFormat":"Print n integers - modified array.","constraints":["1 <= n <= 10000","Must modify in-place"],"tags":["array","two-pointers"],"testCases":[{"input":"5\\n0 1 0 3 12","output":"1 3 12 0 0","explanation":"Zeroes moved to end"},{"input":"1\\n0","output":"0","explanation":"Single zero"}]},{"id":"A011","title":"Best Time to Buy and Sell Stock","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Find maximum profit from one transaction. You can buy on one day and sell on a future day.","inputFormat":"First line contains n (1 <= n <= 100000). Second line contains n integers (prices).","outputFormat":"Print maximum profit. Print 0 if no profit possible.","constraints":["1 <= n <= 100000","0 <= prices[i] <= 10000"],"tags":["array","dynamic-programming"],"testCases":[{"input":"6\\n7 1 5 3 6 4","output":"5","explanation":"Buy at 1, sell at 6"},{"input":"5\\n7 6 4 3 1","output":"0","explanation":"No profit"}]},{"id":"A012","title":"Search in Rotated Sorted Array","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Search for target in rotated sorted array in O(log n) time.","inputFormat":"First line contains n and target (1 <= n <= 5000). Second line contains n distinct integers.","outputFormat":"Print index of target or -1 if not found.","constraints":["1 <= n <= 5000","All values distinct","O(log n) required"],"tags":["array","binary-search"],"testCases":[{"input":"7 0\\n4 5 6 7 0 1 2","output":"4","explanation":"Target at index 4"},{"input":"7 3\\n4 5 6 7 0 1 2","output":"-1","explanation":"Not found"}]},{"id":"A013","title":"Maximum Product Subarray","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Find contiguous subarray with largest product.","inputFormat":"First line contains n (1 <= n <= 20000). Second line contains n integers.","outputFormat":"Print maximum product.","constraints":["1 <= n <= 20000","-10 <= nums[i] <= 10"],"tags":["array","dynamic-programming"],"testCases":[{"input":"4\\n2 3 -2 4","output":"6","explanation":"Subarray [2,3] has product 6"},{"input":"3\\n-2 0 -1","output":"0","explanation":"Result is 0"}]},{"id":"A014","title":"Find Minimum in Rotated Sorted Array","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Find minimum element in rotated sorted array in O(log n).","inputFormat":"First line contains n (1 <= n <= 5000). Second line contains n unique integers.","outputFormat":"Print minimum element.","constraints":["1 <= n <= 5000","All elements unique"],"tags":["array","binary-search"],"testCases":[{"input":"5\\n3 4 5 1 2","output":"1","explanation":"Minimum is 1"},{"input":"7\\n4 5 6 7 0 1 2","output":"0","explanation":"Minimum is 0"}]},{"id":"A015","title":"Contains Duplicate","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Return true if any value appears at least twice in the array.","inputFormat":"First line contains n (1 <= n <= 100000). Second line contains n integers.","outputFormat":"Print YES or NO.","constraints":["1 <= n <= 100000"],"tags":["array","hash-table"],"testCases":[{"input":"4\\n1 2 3 1","output":"YES","explanation":"1 appears twice"},{"input":"4\\n1 2 3 4","output":"NO","explanation":"All distinct"}]},{"id":"A016","title":"Majority Element","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Find element that appears more than n/2 times. Always exists.","inputFormat":"First line contains n (1 <= n <= 50000). Second line contains n integers.","outputFormat":"Print the majority element.","constraints":["1 <= n <= 50000","Majority element always exists"],"tags":["array","divide-and-conquer","boyer-moore"],"testCases":[{"input":"7\\n3 2 3 3 4 3 3","output":"3","explanation":"3 appears 5 times"},{"input":"3\\n2 2 1","output":"2","explanation":"2 appears twice"}]},{"id":"A017","title":"Sort Colors","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Sort array with only 0s, 1s, and 2s in-place.","inputFormat":"First line contains n (1 <= n <= 300). Second line contains n integers (0, 1, or 2).","outputFormat":"Print sorted array.","constraints":["1 <= n <= 300","nums[i] is 0, 1, or 2","Must be in-place"],"tags":["array","two-pointers","sorting"],"testCases":[{"input":"6\\n2 0 2 1 1 0","output":"0 0 1 1 2 2","explanation":"Sorted"},{"input":"3\\n2 0 1","output":"0 1 2","explanation":"Sorted"}]},{"id":"A018","title":"4Sum","difficulty":"Medium","timeLimit":"3s","memoryLimit":"256MB","description":"Find all unique quadruplets that sum to target.","inputFormat":"First line contains n and target (4 <= n <= 200). Second line contains n integers.","outputFormat":"Print each quadruplet on new line in sorted order.","constraints":["4 <= n <= 200","-1000000000 <= nums[i] <= 1000000000"],"tags":["array","two-pointers","sorting"],"testCases":[{"input":"6 0\\n1 0 -1 0 -2 2","output":"-2 -1 1 2\\n-2 0 0 2\\n-1 0 0 1","explanation":"Three quadruplets"},{"input":"5 8\\n2 2 2 2 2","output":"2 2 2 2","explanation":"All same"}]},{"id":"A019","title":"Jump Game","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Determine if you can reach the last index. Each element represents max jump length.","inputFormat":"First line contains n (1 <= n <= 10000). Second line contains n integers.","outputFormat":"Print YES or NO.","constraints":["1 <= n <= 10000","0 <= nums[i] <= 100000"],"tags":["array","greedy","dynamic-programming"],"testCases":[{"input":"5\\n2 3 1 1 4","output":"YES","explanation":"Jump 1 step then 3 steps"},{"input":"5\\n3 2 1 0 4","output":"NO","explanation":"Stuck at index 3"}]},{"id":"A020","title":"Subarray Sum Equals K","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find total number of continuous subarrays whose sum equals k.","inputFormat":"First line contains n and k (1 <= n <= 20000). Second line contains n integers.","outputFormat":"Print count of subarrays.","constraints":["1 <= n <= 20000","-1000 <= nums[i] <= 1000"],"tags":["array","hash-table","prefix-sum"],"testCases":[{"input":"7 3\\n1 1 1 2 1 1 1","output":"4","explanation":"Four subarrays sum to 3"},{"input":"4 2\\n1 2 3 4","output":"1","explanation":"Only [2] sums to 2"}]},{"id":"A021","title":"Spiral Matrix","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Return all elements of matrix in spiral order.","inputFormat":"First line contains m and n (1 <= m,n <= 100). Next m lines contain n integers.","outputFormat":"Print elements in spiral order space-separated.","constraints":["1 <= m, n <= 100"],"tags":["array","matrix","simulation"],"testCases":[{"input":"3 3\\n1 2 3\\n4 5 6\\n7 8 9","output":"1 2 3 6 9 8 7 4 5","explanation":"Spiral traversal"},{"input":"3 4\\n1 2 3 4\\n5 6 7 8\\n9 10 11 12","output":"1 2 3 4 8 12 11 10 9 5 6 7","explanation":"Spiral"}]},{"id":"A022","title":"Rotate Image","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Rotate n x n matrix by 90 degrees clockwise in-place.","inputFormat":"First line contains n (1 <= n <= 20). Next n lines contain n integers.","outputFormat":"Print rotated matrix, n integers per line.","constraints":["1 <= n <= 20","Must rotate in-place"],"tags":["array","matrix"],"testCases":[{"input":"3\\n1 2 3\\n4 5 6\\n7 8 9","output":"7 4 1\\n8 5 2\\n9 6 3","explanation":"90Â° clockwise"},{"input":"2\\n1 2\\n3 4","output":"3 1\\n4 2","explanation":"Rotated"}]},{"id":"A023","title":"Set Matrix Zeroes","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"If element is 0, set its entire row and column to 0. Do it in-place.","inputFormat":"First line contains m and n (1 <= m,n <= 200). Next m lines contain n integers.","outputFormat":"Print modified matrix.","constraints":["1 <= m, n <= 200","In-place with O(1) space"],"tags":["array","matrix"],"testCases":[{"input":"3 3\\n1 1 1\\n1 0 1\\n1 1 1","output":"1 0 1\\n0 0 0\\n1 0 1","explanation":"Row 1 and col 1 zeroed"},{"input":"3 4\\n0 1 2 0\\n3 4 5 2\\n1 3 1 5","output":"0 0 0 0\\n0 4 5 0\\n0 3 1 0","explanation":"Zeroes propagated"}]},{"id":"A024","title":"Next Permutation","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Rearrange numbers into next lexicographically greater permutation. If not possible, return lowest order.","inputFormat":"First line contains n (1 <= n <= 100). Second line contains n integers.","outputFormat":"Print next permutation.","constraints":["1 <= n <= 100","Must be in-place"],"tags":["array","two-pointers"],"testCases":[{"input":"3\\n1 2 3","output":"1 3 2","explanation":"Next permutation"},{"input":"3\\n3 2 1","output":"1 2 3","explanation":"Wrap around"}]},{"id":"A025","title":"First Missing Positive","difficulty":"Hard","timeLimit":"1s","memoryLimit":"256MB","description":"Find smallest missing positive integer. Must be O(n) time and O(1) space.","inputFormat":"First line contains n (1 <= n <= 10000). Second line contains n integers.","outputFormat":"Print smallest missing positive.","constraints":["1 <= n <= 10000","O(n) time, O(1) space"],"tags":["array","hash-table"],"testCases":[{"input":"3\\n1 2 0","output":"3","explanation":"Missing 3"},{"input":"4\\n3 4 -1 1","output":"2","explanation":"Missing 2"}]},{"id":"A026","title":"Trapping Rain Water","difficulty":"Hard","timeLimit":"2s","memoryLimit":"256MB","description":"Compute how much water can be trapped after raining given elevation map.","inputFormat":"First line contains n (1 <= n <= 20000). Second line contains n integers (heights).","outputFormat":"Print total water trapped.","constraints":["1 <= n <= 20000","0 <= height[i] <= 100000"],"tags":["array","two-pointers","stack"],"testCases":[{"input":"12\\n0 1 0 2 1 0 1 3 2 1 2 1","output":"6","explanation":"6 units trapped"},{"input":"6\\n4 2 0 3 2 5","output":"9","explanation":"9 units"}]},{"id":"A027","title":"Longest Consecutive Sequence","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find length of longest consecutive elements sequence. Must be O(n).","inputFormat":"First line contains n (0 <= n <= 100000). Second line contains n integers.","outputFormat":"Print length of longest sequence.","constraints":["0 <= n <= 100000","Must be O(n)"],"tags":["array","hash-table","union-find"],"testCases":[{"input":"6\\n100 4 200 1 3 2","output":"4","explanation":"Sequence [1,2,3,4]"},{"input":"9\\n0 3 7 2 5 8 4 6 0 1","output":"9","explanation":"Sequence [0-8]"}]},{"id":"A028","title":"Sliding Window Maximum","difficulty":"Hard","timeLimit":"3s","memoryLimit":"256MB","description":"Find maximum in each sliding window of size k.","inputFormat":"First line contains n and k (1 <= k <= n <= 100000). Second line contains n integers.","outputFormat":"Print n-k+1 integers - max in each window.","constraints":["1 <= k <= n <= 100000"],"tags":["array","queue","sliding-window","heap"],"testCases":[{"input":"8 3\\n1 3 -1 -3 5 3 6 7","output":"3 3 5 5 6 7","explanation":"Max in each window of 3"},{"input":"1 1\\n1","output":"1","explanation":"Single element"}]},{"id":"A029","title":"Find Peak Element","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Find a peak element (greater than neighbors). Array may contain multiple peaks.","inputFormat":"First line contains n (1 <= n <= 1000). Second line contains n integers.","outputFormat":"Print index of any peak element.","constraints":["1 <= n <= 1000","nums[i] != nums[i+1]"],"tags":["array","binary-search"],"testCases":[{"input":"5\\n1 2 3 1 5","output":"2","explanation":"Index 2 is peak (3)"},{"input":"4\\n1 2 1 3","output":"1","explanation":"Index 1 is peak"}]},{"id":"A030","title":"Kth Largest Element","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find the kth largest element in unsorted array.","inputFormat":"First line contains n and k (1 <= k <= n <= 100000). Second line contains n integers.","outputFormat":"Print kth largest element.","constraints":["1 <= k <= n <= 100000"],"tags":["array","divide-and-conquer","heap","quickselect"],"testCases":[{"input":"6 2\\n3 2 1 5 6 4","output":"5","explanation":"2nd largest is 5"},{"input":"9 4\\n3 2 3 1 2 4 5 5 6","output":"4","explanation":"4th largest is 4"}]},{"id":"A031","title":"Find First and Last Position","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Find starting and ending position of target in sorted array. O(log n) required.","inputFormat":"First line contains n and target (0 <= n <= 100000). Second line contains n sorted integers.","outputFormat":"Print start and end indices or -1 -1.","constraints":["0 <= n <= 100000","Array sorted","O(log n)"],"tags":["array","binary-search"],"testCases":[{"input":"8 8\\n5 7 7 8 8 10 10 10","output":"3 4","explanation":"8 at indices 3-4"},{"input":"6 6\\n5 7 7 8 8 10","output":"-1 -1","explanation":"6 not found"}]},{"id":"A032","title":"Merge Sorted Array","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Merge two sorted arrays into first array which has enough space.","inputFormat":"First line contains m and n. Second line contains m+n integers (first m are valid). Third line contains n integers.","outputFormat":"Print merged sorted array.","constraints":["0 <= m, n <= 200","Must merge in-place"],"tags":["array","two-pointers","sorting"],"testCases":[{"input":"3 3\\n1 2 3 0 0 0\\n2 5 6","output":"1 2 2 3 5 6","explanation":"Merged"},{"input":"1 0\\n1","output":"1","explanation":"Nothing to merge"}]},{"id":"A033","title":"Pascal's Triangle","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Generate first numRows of Pascal's triangle.","inputFormat":"Single integer numRows (1 <= numRows <= 30).","outputFormat":"Print each row on new line, space-separated.","constraints":["1 <= numRows <= 30"],"tags":["array","dynamic-programming"],"testCases":[{"input":"5","output":"1\\n1 1\\n1 2 1\\n1 3 3 1\\n1 4 6 4 1","explanation":"First 5 rows"},{"input":"1","output":"1","explanation":"Single row"}]},{"id":"A034","title":"Insert Interval","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Insert new interval into sorted non-overlapping intervals and merge if necessary.","inputFormat":"First line contains n (0 <= n <= 10000). Next n lines contain intervals. Last line contains new interval.","outputFormat":"Print merged intervals.","constraints":["0 <= n <= 10000","Intervals initially non-overlapping"],"tags":["array","sorting"],"testCases":[{"input":"3\\n1 3\\n6 9\\n10 12\\n2 5","output":"1 5\\n6 9\\n10 12","explanation":"Merged [1,3] with [2,5]"},{"input":"5\\n1 2\\n3 5\\n6 7\\n8 10\\n12 16\\n4 8","output":"1 2\\n3 10\\n12 16","explanation":"Multiple merges"}]},{"id":"A035","title":"Plus One","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Add one to number represented as array of digits.","inputFormat":"First line contains n (1 <= n <= 100). Second line contains n digits.","outputFormat":"Print resulting array.","constraints":["1 <= n <= 100","No leading zeros except 0 itself"],"tags":["array","math"],"testCases":[{"input":"3\\n1 2 3","output":"1 2 4","explanation":"123 + 1 = 124"},{"input":"3\\n9 9 9","output":"1 0 0 0","explanation":"999 + 1 = 1000"}]},{"id":"A036","title":"Remove Duplicates from Sorted Array","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Remove duplicates in-place from sorted array, return new length.","inputFormat":"First line contains n (0 <= n <= 30000). Second line contains n sorted integers.","outputFormat":"Print length k, then first k elements.","constraints":["0 <= n <= 30000","Array sorted","In-place O(1) space"],"tags":["array","two-pointers"],"testCases":[{"input":"10\\n0 0 1 1 1 2 2 3 3 4","output":"5\\n0 1 2 3 4","explanation":"5 unique elements"},{"input":"2\\n1 1","output":"1\\n1","explanation":"One unique"}]},{"id":"A037","title":"Valid Mountain Array","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if array is valid mountain (strictly increasing then strictly decreasing).","inputFormat":"First line contains n (1 <= n <= 10000). Second line contains n integers.","outputFormat":"Print YES or NO.","constraints":["1 <= n <= 10000"],"tags":["array"],"testCases":[{"input":"4\\n0 3 2 1","output":"YES","explanation":"Valid mountain"},{"input":"3\\n0 1 2","output":"NO","explanation":"Only increasing"}]},{"id":"A038","title":"Find All Numbers Disappeared","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Find all numbers in [1,n] that don't appear in array. O(n) time, O(1) space.","inputFormat":"First line contains n (1 <= n <= 100000). Second line contains n integers.","outputFormat":"Print disappeared numbers space-separated.","constraints":["1 <= n <= 100000","1 <= nums[i] <= n"],"tags":["array","hash-table"],"testCases":[{"input":"8\\n4 3 2 7 8 2 3 1","output":"5 6","explanation":"5 and 6 missing"},{"input":"2\\n1 1","output":"2","explanation":"2 missing"}]},{"id":"A039","title":"Third Maximum Number","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Return third distinct maximum. If doesn't exist, return maximum.","inputFormat":"First line contains n (1 <= n <= 10000). Second line contains n integers.","outputFormat":"Print third maximum or maximum.","constraints":["1 <= n <= 10000"],"tags":["array","sorting"],"testCases":[{"input":"5\\n3 2 1 5 4","output":"3","explanation":"Third max is 3"},{"input":"2\\n1 2","output":"2","explanation":"Only 2 distinct"}]},{"id":"A040","title":"Find Pivot Index","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Find leftmost pivot index where left sum equals right sum.","inputFormat":"First line contains n (1 <= n <= 10000). Second line contains n integers.","outputFormat":"Print pivot index or -1.","constraints":["1 <= n <= 10000"],"tags":["array","prefix-sum"],"testCases":[{"input":"6\\n1 7 3 6 5 6","output":"3","explanation":"Left sum = right sum at index 3"},{"input":"3\\n1 2 3","output":"-1","explanation":"No pivot"}]},{"id":"A041","title":"Longest Subarray of 1s After Deleting One","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find length of longest subarray of 1s after deleting exactly one element.","inputFormat":"First line contains n (1 <= n <= 100000). Second line contains n binary integers.","outputFormat":"Print maximum length.","constraints":["1 <= n <= 100000","nums[i] is 0 or 1"],"tags":["array","sliding-window"],"testCases":[{"input":"9\\n1 1 0 1 1 1 0 1 1","output":"5","explanation":"Delete 0 at index 2"},{"input":"6\\n0 1 1 1 0 1","output":"4","explanation":"Delete first 0"}]},{"id":"A042","title":"Max Consecutive Ones III","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find max consecutive 1s if you can flip at most k 0s.","inputFormat":"First line contains n and k (1 <= n <= 100000, 0 <= k <= n). Second line contains n binary integers.","outputFormat":"Print maximum consecutive 1s.","constraints":["1 <= n <= 100000"],"tags":["array","sliding-window"],"testCases":[{"input":"11 2\\n1 1 1 0 0 0 1 1 1 1 0","output":"6","explanation":"Flip two 0s"},{"input":"19 3\\n0 0 1 1 0 0 1 1 1 0 1 1 0 0 0 1 1 1 1","output":"10","explanation":"Flip three 0s"}]},{"id":"A043","title":"Minimum Size Subarray Sum","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find minimal length of subarray with sum >= target.","inputFormat":"First line contains target and n (1 <= n <= 100000). Second line contains n positive integers.","outputFormat":"Print minimal length or 0 if impossible.","constraints":["1 <= target <= 1000000000","1 <= n <= 100000"],"tags":["array","sliding-window","binary-search"],"testCases":[{"input":"7 6\\n2 3 1 2 4 3","output":"2","explanation":"Subarray [4,3]"},{"input":"4 4\\n1 4 4 1","output":"1","explanation":"Single element 4"}]},{"id":"A044","title":"Longest Turbulent Subarray","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find length of longest turbulent subarray (alternating comparisons).","inputFormat":"First line contains n (1 <= n <= 40000). Second line contains n integers.","outputFormat":"Print maximum length.","constraints":["1 <= n <= 40000"],"tags":["array","sliding-window"],"testCases":[{"input":"9\\n9 4 2 10 7 8 8 1 9","output":"5","explanation":"Subarray [4,2,10,7,8]"},{"input":"4\\n4 8 12 16","output":"2","explanation":"Only pairs turbulent"}]},{"id":"A045","title":"Maximum Sum Circular Subarray","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find maximum sum of circular subarray.","inputFormat":"First line contains n (1 <= n <= 30000). Second line contains n integers.","outputFormat":"Print maximum circular subarray sum.","constraints":["1 <= n <= 30000","-30000 <= nums[i] <= 30000"],"tags":["array","dynamic-programming"],"testCases":[{"input":"5\\n1 -2 3 -2 5","output":"7","explanation":"Circular [5,1,3] = 7"},{"input":"3\\n5 -3 5","output":"10","explanation":"Circular [5,5] = 10"}]},{"id":"A046","title":"Maximum Absolute Sum","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Find maximum absolute value of sum of any subarray.","inputFormat":"First line contains n (1 <= n <= 100000). Second line contains n integers.","outputFormat":"Print maximum absolute sum.","constraints":["1 <= n <= 100000"],"tags":["array","dynamic-programming"],"testCases":[{"input":"4\\n1 -3 2 3","output":"5","explanation":"|2+3| = 5"},{"input":"5\\n2 -5 1 -4 3","output":"8","explanation":"|-5+1-4| = 8"}]},{"id":"A047","title":"Shortest Subarray with Sum at Least K","difficulty":"Hard","timeLimit":"3s","memoryLimit":"256MB","description":"Find length of shortest non-empty subarray with sum at least k.","inputFormat":"First line contains n and k (1 <= n <= 50000). Second line contains n integers.","outputFormat":"Print shortest length or -1.","constraints":["1 <= n <= 50000"],"tags":["array","sliding-window","heap","queue"],"testCases":[{"input":"5 7\\n1 2 3 4 5","output":"2","explanation":"[4,5] or [3,4]"},{"input":"3 81\\n2 -1 2","output":"-1","explanation":"Impossible"}]},{"id":"A048","title":"Number of Subarrays with Bounded Maximum","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Count subarrays where maximum is in range [left, right].","inputFormat":"First line contains n, left, right (1 <= n <= 50000). Second line contains n integers.","outputFormat":"Print count of valid subarrays.","constraints":["1 <= n <= 50000","0 <= left <= right <= 1000000"],"tags":["array","two-pointers"],"testCases":[{"input":"7 2 3\\n2 1 4 3 2 1 2","output":"13","explanation":"13 valid subarrays"},{"input":"3 0 0\\n1 2 3","output":"0","explanation":"No valid subarrays"}]},{"id":"A049","title":"Monotonic Array","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if array is monotonic (all increasing or all decreasing).","inputFormat":"First line contains n (1 <= n <= 50000). Second line contains n integers.","outputFormat":"Print YES or NO.","constraints":["1 <= n <= 50000"],"tags":["array"],"testCases":[{"input":"4\\n1 2 2 3","output":"YES","explanation":"Non-decreasing"},{"input":"4\\n1 3 2 4","output":"NO","explanation":"Not monotonic"}]},{"id":"A050","title":"Advantage Shuffle","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Permute nums1 to maximize number of positions where nums1[i] > nums2[i].","inputFormat":"First line contains n (1 <= n <= 10000). Next two lines contain n integers each.","outputFormat":"Print permuted nums1.","constraints":["1 <= n <= 10000"],"tags":["array","greedy","sorting"],"testCases":[{"input":"4\\n2 7 11 15\\n1 10 4 11","output":"2 11 7 15","explanation":"Maximize advantages"},{"input":"5\\n12 24 8 32 40\\n13 25 32 11 5","output":"24 32 8 12 40","explanation":"Greedy matching"}]},{"id":"A051","title":"Array Partition","difficulty":"Easy","timeLimit":"2s","memoryLimit":"256MB","description":"Partition 2n integers into n pairs to maximize sum of min of each pair.","inputFormat":"First line contains n (1 <= n <= 10000). Second line contains 2n integers.","outputFormat":"Print maximum sum.","constraints":["1 <= n <= 10000"],"tags":["array","greedy","sorting"],"testCases":[{"input":"2\\n1 4 3 2","output":"4","explanation":"Pairs (1,2) and (3,4)"},{"input":"3\\n6 2 6 5 1 2","output":"9","explanation":"Sum of minimums"}]},{"id":"A052","title":"Maximum Gap","difficulty":"Hard","timeLimit":"3s","memoryLimit":"256MB","description":"Find maximum difference between successive elements in sorted form. Must be linear time.","inputFormat":"First line contains n (1 <= n <= 100000). Second line contains n integers.","outputFormat":"Print maximum gap.","constraints":["1 <= n <= 100000","Must be O(n) time"],"tags":["array","sorting","bucket-sort"],"testCases":[{"input":"4\\n3 6 9 1","output":"3","explanation":"Sorted: 1,3,6,9. Max gap is 3"},{"input":"7\\n10 5 2 7 1 9 8","output":"2","explanation":"Max consecutive gap"}]},{"id":"A053","title":"Wiggle Sort","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Reorder array so nums[0] <= nums[1] >= nums[2] <= nums[3]...","inputFormat":"First line contains n (1 <= n <= 100000). Second line contains n integers.","outputFormat":"Print any valid wiggle sorted array.","constraints":["1 <= n <= 100000"],"tags":["array","greedy","sorting"],"testCases":[{"input":"6\\n3 5 2 1 6 4","output":"3 5 1 6 2 4","explanation":"Valid wiggle"},{"input":"4\\n1 2 3 4","output":"1 3 2 4","explanation":"Wiggle pattern"}]},{"id":"A054","title":"Wiggle Sort II","difficulty":"Medium","timeLimit":"3s","memoryLimit":"256MB","description":"Reorder so nums[0] < nums[1] > nums[2] < nums[3]... (strict inequalities).","inputFormat":"First line contains n (1 <= n <= 50000). Second line contains n integers.","outputFormat":"Print wiggle sorted array.","constraints":["1 <= n <= 50000","May assume valid arrangement exists"],"tags":["array","sorting","divide-and-conquer"],"testCases":[{"input":"6\\n1 5 1 1 6 4","output":"1 6 1 5 1 4","explanation":"Strict wiggle"},{"input":"5\\n1 3 2 2 3","output":"2 3 1 3 2","explanation":"Valid arrangement"}]},{"id":"A055","title":"Partition Array Into Three Parts","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if array can be partitioned into three non-empty parts with equal sum.","inputFormat":"First line contains n (3 <= n <= 50000). Second line contains n integers.","outputFormat":"Print YES or NO.","constraints":["3 <= n <= 50000"],"tags":["array","greedy"],"testCases":[{"input":"9\\n0 2 1 -6 6 -7 9 1 2","output":"YES","explanation":"Three parts sum to 0"},{"input":"6\\n0 2 1 -6 6 7","output":"NO","explanation":"Cannot partition"}]},{"id":"A056","title":"Check If N and Its Double Exist","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if there exist two indices where arr[i] = 2 * arr[j].","inputFormat":"First line contains n (2 <= n <= 500). Second line contains n integers.","outputFormat":"Print YES or NO.","constraints":["2 <= n <= 500"],"tags":["array","hash-table"],"testCases":[{"input":"5\\n10 2 5 3 7","output":"YES","explanation":"10 = 2 * 5"},{"input":"3\\n3 1 7","output":"NO","explanation":"No such pair"}]},{"id":"A057","title":"Replace Elements with Greatest on Right","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Replace every element with greatest element on right side. Last becomes -1.","inputFormat":"First line contains n (1 <= n <= 10000). Second line contains n integers.","outputFormat":"Print modified array.","constraints":["1 <= n <= 10000"],"tags":["array"],"testCases":[{"input":"5\\n17 18 5 4 6","output":"18 6 6 6 -1","explanation":"Greatest on right"},{"input":"1\\n400","output":"-1","explanation":"Single element"}]},{"id":"A058","title":"Height Checker","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Count students not standing in correct position (expected is sorted array).","inputFormat":"First line contains n (1 <= n <= 100). Second line contains n integers (heights).","outputFormat":"Print count of misplaced students.","constraints":["1 <= n <= 100","1 <= heights[i] <= 100"],"tags":["array","sorting"],"testCases":[{"input":"5\\n1 1 4 2 1","output":"3","explanation":"3 students misplaced"},{"input":"5\\n5 1 2 3 4","output":"5","explanation":"All misplaced"}]},{"id":"A059","title":"Relative Sort Array","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Sort arr1 so relative order matches arr2, then remaining in ascending order.","inputFormat":"First line contains n and m. Second line contains n integers (arr1). Third line contains m integers (arr2).","outputFormat":"Print sorted arr1.","constraints":["1 <= n <= 1000","All arr2 elements appear in arr1"],"tags":["array","sorting","hash-table"],"testCases":[{"input":"11 4\\n2 3 1 3 2 4 6 7 9 2 19\\n2 1 4 3","output":"2 2 2 1 4 3 3 6 7 9 19","explanation":"Follow arr2 order"},{"input":"4 3\\n2 21 43 38\\n2 38 43","output":"2 38 43 21","explanation":"21 at end"}]},{"id":"A060","title":"Sum of Even Numbers After Queries","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"After each query (add val to arr[index]), return sum of even numbers.","inputFormat":"First line contains n and q (1 <= n,q <= 10000). Second line contains n integers. Next q lines contain val and index.","outputFormat":"Print q integers - sum after each query.","constraints":["1 <= n, q <= 10000"],"tags":["array","simulation"],"testCases":[{"input":"4 4\\n1 2 3 4\\n1 0\\n-3 1\\n-4 0\\n2 3","output":"8 6 2 4","explanation":"Even sums after queries"},{"input":"3 2\\n1 3 5\\n2 0\\n4 2","output":"0 10","explanation":"Even sums"}]},{"id":"A061","title":"Queries on Number of Points Inside Circle","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Count points inside each circle query.","inputFormat":"First line contains n and q. Next n lines contain x,y coordinates. Next q lines contain cx,cy,radius.","outputFormat":"Print q integers - count for each query.","constraints":["1 <= n, q <= 500"],"tags":["array","math","geometry"],"testCases":[{"input":"3 2\\n1 3\\n3 3\\n5 3\\n2 3 1\\n4 3 1","output":"2 2","explanation":"Points in circles"},{"input":"2 3\\n1 1\\n2 2\\n0 0 1\\n1 1 1\\n2 2 1","output":"1 2 1","explanation":"Circle queries"}]},{"id":"A062","title":"Count Good Triplets","difficulty":"Easy","timeLimit":"2s","memoryLimit":"256MB","description":"Count triplets where |arr[i]-arr[j]|<=a, |arr[j]-arr[k]|<=b, |arr[i]-arr[k]|<=c.","inputFormat":"First line contains n,a,b,c (3 <= n <= 100). Second line contains n integers.","outputFormat":"Print count of good triplets.","constraints":["3 <= n <= 100","0 <= a,b,c <= 1000"],"tags":["array","enumeration"],"testCases":[{"input":"6 1 2 3\\n3 0 1 1 9 7\\n1 2 3","output":"4","explanation":"4 valid triplets"},{"input":"4 0 0 1\\n1 1 2 2\\n0 0 1","output":"0","explanation":"No valid triplets"}]},{"id":"A063","title":"Find Lucky Integer","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Find largest lucky integer (value equals frequency). Return -1 if none.","inputFormat":"First line contains n (1 <= n <= 500). Second line contains n integers.","outputFormat":"Print largest lucky integer or -1.","constraints":["1 <= n <= 500","1 <= arr[i] <= 500"],"tags":["array","hash-table"],"testCases":[{"input":"5\\n2 2 3 4 4","output":"2","explanation":"2 appears 2 times"},{"input":"7\\n1 2 2 3 3 3 4","output":"3","explanation":"3 appears 3 times"}]},{"id":"A064","title":"Count Negative Numbers in Sorted Matrix","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Count negative numbers in m x n matrix sorted descending row-wise and column-wise.","inputFormat":"First line contains m and n. Next m lines contain n integers each.","outputFormat":"Print count of negative numbers.","constraints":["1 <= m, n <= 100"],"tags":["array","binary-search","matrix"],"testCases":[{"input":"4 4\\n4 3 2 -1\\n3 2 1 -1\\n1 1 -1 -2\\n-1 -1 -2 -3","output":"8","explanation":"8 negatives"},{"input":"2 2\\n3 2\\n1 0","output":"0","explanation":"No negatives"}]},{"id":"A065","title":"Matrix Diagonal Sum","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Return sum of matrix diagonals. Count middle element once if n is odd.","inputFormat":"First line contains n. Next n lines contain n integers.","outputFormat":"Print diagonal sum.","constraints":["1 <= n <= 100"],"tags":["array","matrix"],"testCases":[{"input":"3\\n1 2 3\\n4 5 6\\n7 8 9","output":"25","explanation":"1+5+9+3+7 = 25"},{"input":"4\\n1 1 1 1\\n1 1 1 1\\n1 1 1 1\\n1 1 1 1","output":"8","explanation":"Sum is 8"}]},{"id":"A066","title":"Lucky Numbers in Matrix","difficulty":"Easy","timeLimit":"2s","memoryLimit":"256MB","description":"Find lucky numbers (minimum in row and maximum in column).","inputFormat":"First line contains m and n. Next m lines contain n integers.","outputFormat":"Print lucky numbers space-separated or empty line.","constraints":["1 <= m, n <= 50"],"tags":["array","matrix"],"testCases":[{"input":"3 3\\n3 7 8\\n9 11 13\\n15 16 17","output":"15","explanation":"15 is lucky"},{"input":"3 4\\n1 10 4 2\\n9 3 8 7\\n15 16 17 12","output":"12","explanation":"12 is lucky"}]},{"id":"A067","title":"Reshape the Matrix","difficulty":"Easy","timeLimit":"2s","memoryLimit":"256MB","description":"Reshape m x n matrix to r x c. Return original if impossible.","inputFormat":"First line contains m,n,r,c. Next m lines contain n integers.","outputFormat":"Print reshaped matrix or original.","constraints":["1 <= m, n <= 100"],"tags":["array","matrix","simulation"],"testCases":[{"input":"2 2 1 4\\n1 2\\n3 4","output":"1 2 3 4","explanation":"Reshaped to 1x4"},{"input":"2 2 2 4\\n1 2\\n3 4","output":"1 2\\n3 4","explanation":"Impossible, return original"}]},{"id":"A068","title":"Toeplitz Matrix","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if matrix is Toeplitz (every diagonal same values).","inputFormat":"First line contains m and n. Next m lines contain n integers.","outputFormat":"Print YES or NO.","constraints":["1 <= m, n <= 20"],"tags":["array","matrix"],"testCases":[{"input":"3 4\\n1 2 3 4\\n5 1 2 3\\n9 5 1 2","output":"YES","explanation":"Is Toeplitz"},{"input":"2 2\\n1 2\\n2 2","output":"NO","explanation":"Not Toeplitz"}]},{"id":"A069","title":"Flipping an Image","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Flip image horizontally then invert (0->1, 1->0).","inputFormat":"First line contains n. Next n lines contain n binary integers.","outputFormat":"Print modified image.","constraints":["1 <= n <= 20"],"tags":["array","matrix"],"testCases":[{"input":"3\\n1 1 0\\n1 0 1\\n0 0 0","output":"1 0 0\\n0 1 0\\n1 1 1","explanation":"Flipped and inverted"},{"input":"1\\n1","output":"0","explanation":"Single element"}]},{"id":"A070","title":"Transpose Matrix","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Return transpose of matrix.","inputFormat":"First line contains m and n. Next m lines contain n integers.","outputFormat":"Print transposed matrix (n x m).","constraints":["1 <= m, n <= 1000"],"tags":["array","matrix"],"testCases":[{"input":"2 3\\n1 2 3\\n4 5 6","output":"1 4\\n2 5\\n3 6","explanation":"Transposed"},{"input":"1 1\\n1","output":"1","explanation":"Single element"}]},{"id":"A071","title":"Valid Sudoku","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Determine if 9x9 Sudoku board is valid.","inputFormat":"9 lines with 9 characters each. '.' for empty, 1-9 for filled.","outputFormat":"Print YES or NO.","constraints":["Board is 9x9","Only digits 1-9 or '.'"],"tags":["array","hash-table","matrix"],"testCases":[{"input":"53..7....\\n6..195...\\n.98....6.\\n8...6...3\\n4..8.3..1\\n7...2...6\\n.6....28.\\n...419..5\\n....8..79","output":"YES","explanation":"Valid Sudoku"},{"input":"53..7....\\n6..195...\\n.98....6.\\n8...6...3\\n4..8.3..1\\n7...2...6\\n.6....28.\\n...419..5\\n....8.179","output":"NO","explanation":"Invalid - duplicate 7"}]},{"id":"A072","title":"Diagonal Traverse","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Return all elements in diagonal order.","inputFormat":"First line contains m and n. Next m lines contain n integers.","outputFormat":"Print elements in diagonal order.","constraints":["1 <= m, n <= 10000"],"tags":["array","matrix","simulation"],"testCases":[{"input":"3 3\\n1 2 3\\n4 5 6\\n7 8 9","output":"1 2 4 7 5 3 6 8 9","explanation":"Diagonal traversal"},{"input":"2 2\\n1 2\\n3 4","output":"1 2 3 4","explanation":"Diagonal order"}]},{"id":"A073","title":"Kth Smallest Element in Sorted Matrix","difficulty":"Medium","timeLimit":"3s","memoryLimit":"256MB","description":"Find kth smallest element in n x n matrix sorted row and column wise.","inputFormat":"First line contains n and k. Next n lines contain n integers.","outputFormat":"Print kth smallest element.","constraints":["1 <= n <= 300","1 <= k <= n*n"],"tags":["array","matrix","heap","binary-search"],"testCases":[{"input":"3 8\\n1 5 9\\n10 11 13\\n12 13 15","output":"13","explanation":"8th smallest is 13"},{"input":"2 3\\n1 2\\n1 3","output":"2","explanation":"3rd smallest"}]},{"id":"A074","title":"Search a 2D Matrix","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Search target in matrix sorted left-to-right and top-to-bottom. O(log(m*n)) required.","inputFormat":"First line contains m,n,target. Next m lines contain n sorted integers.","outputFormat":"Print YES or NO.","constraints":["1 <= m, n <= 100","Must be O(log(m*n))"],"tags":["array","binary-search","matrix"],"testCases":[{"input":"3 4 3\\n1 3 5 7\\n10 11 16 20\\n23 30 34 60","output":"YES","explanation":"3 exists"},{"input":"3 4 13\\n1 3 5 7\\n10 11 16 20\\n23 30 34 60","output":"NO","explanation":"13 doesn't exist"}]},{"id":"A075","title":"Game of Life","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Apply Game of Life rules to m x n grid. Update in-place.","inputFormat":"First line contains m and n. Next m lines contain n binary integers.","outputFormat":"Print next state of board.","constraints":["1 <= m, n <= 25","Must update in-place"],"tags":["array","matrix","simulation"],"testCases":[{"input":"4 3\\n0 1 0\\n0 0 1\\n1 1 1\\n0 0 0","output":"0 0 0\\n1 0 1\\n0 1 1\\n0 1 0","explanation":"Next generation"},{"input":"2 2\\n1 1\\n1 0","output":"1 1\\n1 1","explanation":"Stable state"}]},{"id":"A076","title":"Candy","difficulty":"Hard","timeLimit":"3s","memoryLimit":"256MB","description":"Give minimum candies where higher rated child gets more than neighbors.","inputFormat":"First line contains n (1 <= n <= 20000). Second line contains n integers (ratings).","outputFormat":"Print minimum candies needed.","constraints":["1 <= n <= 20000"],"tags":["array","greedy"],"testCases":[{"input":"3\\n1 0 2","output":"5","explanation":"Candies: [2,1,2]"},{"input":"3\\n1 2 2","output":"4","explanation":"Candies: [1,2,1]"}]},{"id":"A077","title":"Gas Station","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find starting gas station to complete circuit. Return -1 if impossible.","inputFormat":"First line contains n. Second line contains n integers (gas). Third line contains n integers (cost).","outputFormat":"Print starting index or -1.","constraints":["1 <= n <= 100000"],"tags":["array","greedy"],"testCases":[{"input":"5\\n1 2 3 4 5\\n3 4 5 1 2","output":"3","explanation":"Start at index 3"},{"input":"3\\n2 3 4\\n3 4 3","output":"-1","explanation":"Impossible"}]},{"id":"A078","title":"Queue Reconstruction by Height","difficulty":"Medium","timeLimit":"3s","memoryLimit":"256MB","description":"Reconstruct queue where [h,k] means height h with k people >= h in front.","inputFormat":"First line contains n. Next n lines contain two integers h and k.","outputFormat":"Print reconstructed queue, one pair per line.","constraints":["1 <= n <= 2000"],"tags":["array","greedy","sorting"],"testCases":[{"input":"6\\n7 0\\n4 4\\n7 1\\n5 0\\n6 1\\n5 2","output":"5 0\\n7 0\\n5 2\\n6 1\\n4 4\\n7 1","explanation":"Reconstructed queue"},{"input":"3\\n6 0\\n5 0\\n4 0","output":"4 0\\n5 0\\n6 0","explanation":"Sorted by height"}]},{"id":"A079","title":"Non-decreasing Array","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Check if array can become non-decreasing by modifying at most one element.","inputFormat":"First line contains n (1 <= n <= 10000). Second line contains n integers.","outputFormat":"Print YES or NO.","constraints":["1 <= n <= 10000"],"tags":["array"],"testCases":[{"input":"4\\n4 2 3 4","output":"YES","explanation":"Change 4 to 1"},{"input":"4\\n4 2 1 3","output":"NO","explanation":"Need 2+ changes"}]},{"id":"A080","title":"Largest Number","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Arrange numbers to form largest number.","inputFormat":"First line contains n (1 <= n <= 100). Second line contains n non-negative integers.","outputFormat":"Print largest number as string.","constraints":["1 <= n <= 100","0 <= nums[i] <= 1000000000"],"tags":["array","string","sorting"],"testCases":[{"input":"2\\n10 2","output":"210","explanation":"2 then 10"},{"input":"5\\n3 30 34 5 9","output":"9534330","explanation":"Optimal arrangement"}]},{"id":"A081","title":"Task Scheduler","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find minimum intervals to complete all tasks with n cooldown between same task.","inputFormat":"First line contains num tasks and n. Second line contains tasks (characters A-Z).","outputFormat":"Print minimum intervals.","constraints":["1 <= tasks.length <= 10000","0 <= n <= 100"],"tags":["array","greedy","heap"],"testCases":[{"input":"6 2\\nA A A B B B","output":"8","explanation":"A->B->idle->A->B->idle->A->B"},{"input":"6 0\\nA A A B B B","output":"6","explanation":"No cooldown"}]},{"id":"A082","title":"Subarray Product Less Than K","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Count subarrays where product of all elements is less than k.","inputFormat":"First line contains n and k (1 <= n <= 50000). Second line contains n positive integers.","outputFormat":"Print count of valid subarrays.","constraints":["1 <= n <= 50000","0 < k <= 1000000"],"tags":["array","sliding-window"],"testCases":[{"input":"4 100\\n10 5 2 6","output":"8","explanation":"8 valid subarrays"},{"input":"1 1\\n1","output":"0","explanation":"Product not less than 1"}]},{"id":"A083","title":"Max Chunks To Make Sorted","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Find max number of chunks to sort array (permutation of [0..n-1]).","inputFormat":"First line contains n (1 <= n <= 10). Second line contains n integers (permutation).","outputFormat":"Print maximum chunks.","constraints":["1 <= n <= 10","Array is permutation of [0..n-1]"],"tags":["array","greedy","sorting"],"testCases":[{"input":"5\\n4 3 2 1 0","output":"1","explanation":"Need one chunk"},{"input":"5\\n1 0 2 3 4","output":"4","explanation":"4 chunks possible"}]},{"id":"A084","title":"Max Chunks To Make Sorted II","difficulty":"Hard","timeLimit":"2s","memoryLimit":"256MB","description":"Find max chunks for arbitrary array (may have duplicates).","inputFormat":"First line contains n (1 <= n <= 2000). Second line contains n integers.","outputFormat":"Print maximum chunks.","constraints":["1 <= n <= 2000"],"tags":["array","greedy","sorting"],"testCases":[{"input":"5\\n5 4 3 2 1","output":"1","explanation":"One chunk"},{"input":"4\\n2 1 3 4","output":"3","explanation":"3 chunks: [2,1], [3], [4]"}]},{"id":"A085","title":"Partition Labels","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Partition string into max pieces where each letter appears in at most one part.","inputFormat":"Single line with string s (1 <= length <= 500, lowercase letters).","outputFormat":"Print sizes of partitions space-separated.","constraints":["1 <= s.length <= 500"],"tags":["array","string","greedy"],"testCases":[{"input":"ababcbacadefegdehijhklij","output":"9 7 8","explanation":"3 partitions"},{"input":"eccbbbbdec","output":"10","explanation":"Single partition"}]},{"id":"A086","title":"Minimum Domino Rotations","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find minimum rotations to make all tops or bottoms same value.","inputFormat":"First line contains n. Second line contains n integers (tops). Third line contains n integers (bottoms).","outputFormat":"Print minimum rotations or -1.","constraints":["2 <= n <= 20000","1 <= tops[i], bottoms[i] <= 6"],"tags":["array","greedy"],"testCases":[{"input":"6\\n2 1 2 4 2 2\\n5 2 6 2 3 2","output":"2","explanation":"Make all tops 2"},{"input":"3\\n3 5 1\\n1 3 2","output":"-1","explanation":"Impossible"}]},{"id":"A087","title":"Asteroid Collision","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find state of asteroids after collisions. Positive = right, negative = left.","inputFormat":"First line contains n (2 <= n <= 10000). Second line contains n non-zero integers.","outputFormat":"Print remaining asteroids space-separated or empty line.","constraints":["2 <= n <= 10000","|asteroids[i]| <= 1000"],"tags":["array","stack"],"testCases":[{"input":"5\\n5 10 -5 -10 15","output":"15","explanation":"After collisions"},{"input":"2\\n8 -8","output":"","explanation":"All destroyed"}]},{"id":"A088","title":"Daily Temperatures","difficulty":"Medium","timeLimit":"3s","memoryLimit":"256MB","description":"Find days until warmer temperature for each day.","inputFormat":"First line contains n (1 <= n <= 100000). Second line contains n integers (temperatures).","outputFormat":"Print n integers - days to wait.","constraints":["1 <= n <= 100000","30 <= temperatures[i] <= 100"],"tags":["array","stack","monotonic-stack"],"testCases":[{"input":"8\\n73 74 75 71 69 72 76 73","output":"1 1 4 2 1 1 0 0","explanation":"Days until warmer"},{"input":"4\\n30 40 50 60","output":"1 1 1 0","explanation":"Increasing temps"}]},{"id":"A089","title":"Next Greater Element I","difficulty":"Easy","timeLimit":"2s","memoryLimit":"256MB","description":"For each element in nums1, find next greater element in nums2.","inputFormat":"First line contains n and m. Second line contains n integers (nums1). Third line contains m integers (nums2).","outputFormat":"Print n integers - next greater or -1.","constraints":["1 <= n <= m <= 1000","All elements unique"],"tags":["array","stack","hash-table"],"testCases":[{"input":"4 4\\n4 1 2 3\\n1 3 4 2","output":"-1 3 -1 -1","explanation":"Next greater in nums2"},{"input":"2 4\\n2 4\\n1 2 3 4","output":"3 -1","explanation":"Next greater elements"}]},{"id":"A090","title":"Next Greater Element II","difficulty":"Medium","timeLimit":"3s","memoryLimit":"256MB","description":"Find next greater element in circular array.","inputFormat":"First line contains n (1 <= n <= 10000). Second line contains n integers.","outputFormat":"Print n integers - next greater or -1.","constraints":["1 <= n <= 10000"],"tags":["array","stack","monotonic-stack"],"testCases":[{"input":"5\\n1 2 1 3 4","output":"2 3 3 4 -1","explanation":"Circular next greater"},{"input":"4\\n1 2 3 4","output":"2 3 4 -1","explanation":"No wraparound needed"}]},{"id":"A091","title":"Online Stock Span","difficulty":"Medium","timeLimit":"3s","memoryLimit":"256MB","description":"For each price query, return span (max consecutive days with price <= today).","inputFormat":"First line contains n (queries). Next n lines contain single integer (price).","outputFormat":"Print n integers - span for each query.","constraints":["1 <= n <= 10000","1 <= price <= 100000"],"tags":["array","stack","monotonic-stack"],"testCases":[{"input":"7\\n100\\n80\\n60\\n70\\n60\\n75\\n85","output":"1 1 1 2 1 4 6","explanation":"Stock spans"},{"input":"5\\n10\\n20\\n30\\n40\\n50","output":"1 2 3 4 5","explanation":"Increasing prices"}]},{"id":"A092","title":"Remove K Digits","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Remove k digits from number string to get smallest possible number.","inputFormat":"First line contains string num. Second line contains k.","outputFormat":"Print smallest number as string.","constraints":["1 <= num.length <= 100000","0 <= k <= num.length"],"tags":["array","string","stack","greedy"],"testCases":[{"input":"1432219\\n3","output":"1219","explanation":"Remove 4, 3, 2"},{"input":"10200\\n1","output":"200","explanation":"Remove leading 1"}]},{"id":"A093","title":"Car Fleet","difficulty":"Medium","timeLimit":"3s","memoryLimit":"256MB","description":"Count car fleets arriving at target (cars catch up become fleet).","inputFormat":"First line contains n and target. Second line contains n positions. Third line contains n speeds.","outputFormat":"Print number of fleets.","constraints":["0 <= n <= 1000","0 < target <= 1000000"],"tags":["array","stack","sorting"],"testCases":[{"input":"5 12\\n10 8 0 5 3\\n2 4 1 1 3","output":"3","explanation":"3 fleets arrive"},{"input":"1 10\\n0\\n2","output":"1","explanation":"Single car"}]},{"id":"A094","title":"Largest Rectangle in Histogram","difficulty":"Hard","timeLimit":"3s","memoryLimit":"256MB","description":"Find area of largest rectangle in histogram.","inputFormat":"First line contains n (1 <= n <= 100000). Second line contains n integers (heights).","outputFormat":"Print largest rectangle area.","constraints":["1 <= n <= 100000","0 <= heights[i] <= 10000"],"tags":["array","stack","monotonic-stack"],"testCases":[{"input":"6\\n2 1 5 6 2 3","output":"10","explanation":"Rectangle 5x2=10"},{"input":"1\\n2","output":"2","explanation":"Single bar"}]},{"id":"A095","title":"Maximal Rectangle","difficulty":"Hard","timeLimit":"4s","memoryLimit":"256MB","description":"Find largest rectangle containing only 1s in binary matrix.","inputFormat":"First line contains m and n. Next m lines contain n binary integers.","outputFormat":"Print maximum rectangle area.","constraints":["1 <= m, n <= 200"],"tags":["array","matrix","stack","dynamic-programming"],"testCases":[{"input":"4 5\\n1 0 1 0 0\\n1 0 1 1 1\\n1 1 1 1 1\\n1 0 0 1 0","output":"6","explanation":"Rectangle 2x3=6"},{"input":"1 1\\n0","output":"0","explanation":"No 1s"}]},{"id":"S001","title":"Reverse String","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Write a function that reverses a string. The input string is given as an array of characters.","inputFormat":"First line contains n (1 <= n <= 10000). Second line contains n characters.","outputFormat":"Print reversed string.","constraints":["1 <= n <= 10000"],"tags":["string","two-pointers"],"testCases":[{"input":"5\\nhello","output":"olleh","explanation":"Reversed string"},{"input":"6\\nHannah","output":"hannaH","explanation":"Case sensitive"}]},{"id":"S002","title":"Valid Palindrome","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if string is palindrome considering only alphanumeric characters and ignoring cases.","inputFormat":"Single line containing string s (1 <= length <= 200000).","outputFormat":"Print YES or NO.","constraints":["1 <= s.length <= 200000"],"tags":["string","two-pointers"],"testCases":[{"input":"A man, a plan, a canal: Panama","output":"YES","explanation":"Valid palindrome"},{"input":"race a car","output":"NO","explanation":"Not palindrome"}]},{"id":"S003","title":"Valid Anagram","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if two strings are anagrams of each other.","inputFormat":"Two lines, each containing a string (1 <= length <= 50000).","outputFormat":"Print YES or NO.","constraints":["1 <= s.length, t.length <= 50000"],"tags":["string","hash-table","sorting"],"testCases":[{"input":"anagram\\nnagaram","output":"YES","explanation":"Are anagrams"},{"input":"rat\\ncar","output":"NO","explanation":"Not anagrams"}]},{"id":"S004","title":"First Unique Character","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Find the first non-repeating character in string and return its index. Return -1 if doesn't exist.","inputFormat":"Single line containing string s (1 <= length <= 100000).","outputFormat":"Print index or -1.","constraints":["1 <= s.length <= 100000","Only lowercase letters"],"tags":["string","hash-table"],"testCases":[{"input":"leetcode","output":"0","explanation":"l is first unique"},{"input":"loveleetcode","output":"2","explanation":"v is first unique"}]},{"id":"S005","title":"Longest Common Prefix","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Find the longest common prefix string amongst an array of strings.","inputFormat":"First line contains n (1 <= n <= 200). Next n lines contain strings.","outputFormat":"Print longest common prefix or empty string.","constraints":["1 <= n <= 200","0 <= strs[i].length <= 200"],"tags":["string"],"testCases":[{"input":"3\\nflower\\nflow\\nflight","output":"fl","explanation":"Common prefix is fl"},{"input":"3\\ndog\\nracecar\\ncar","output":"","explanation":"No common prefix"}]},{"id":"S006","title":"Implement strStr","difficulty":"Easy","timeLimit":"2s","memoryLimit":"256MB","description":"Return the index of the first occurrence of needle in haystack, or -1 if not part.","inputFormat":"Two lines, haystack and needle strings.","outputFormat":"Print index or -1.","constraints":["0 <= haystack.length, needle.length <= 50000"],"tags":["string","two-pointers"],"testCases":[{"input":"hello\\nll","output":"2","explanation":"ll at index 2"},{"input":"aaaaa\\nbba","output":"-1","explanation":"Not found"}]},{"id":"S007","title":"Count and Say","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Generate the nth term of count-and-say sequence.","inputFormat":"Single integer n (1 <= n <= 30).","outputFormat":"Print nth term.","constraints":["1 <= n <= 30"],"tags":["string"],"testCases":[{"input":"4","output":"1211","explanation":"4th term"},{"input":"1","output":"1","explanation":"Base case"}]},{"id":"S008","title":"Longest Substring Without Repeating Characters","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find length of longest substring without repeating characters.","inputFormat":"Single line containing string s (0 <= length <= 50000).","outputFormat":"Print length.","constraints":["0 <= s.length <= 50000"],"tags":["string","hash-table","sliding-window"],"testCases":[{"input":"abcabcbb","output":"3","explanation":"abc is longest"},{"input":"bbbbb","output":"1","explanation":"b is longest"}]},{"id":"S009","title":"Longest Palindromic Substring","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find the longest palindromic substring in s.","inputFormat":"Single line containing string s (1 <= length <= 1000).","outputFormat":"Print longest palindromic substring.","constraints":["1 <= s.length <= 1000"],"tags":["string","dynamic-programming"],"testCases":[{"input":"babad","output":"bab","explanation":"bab or aba"},{"input":"cbbd","output":"bb","explanation":"bb is longest"}]},{"id":"S010","title":"Zigzag Conversion","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Convert string to zigzag pattern on given number of rows.","inputFormat":"First line contains string s. Second line contains numRows.","outputFormat":"Print converted string.","constraints":["1 <= s.length <= 1000","1 <= numRows <= 1000"],"tags":["string"],"testCases":[{"input":"PAYPALISHIRING\\n3","output":"PAHNAPLSIIGYIR","explanation":"Zigzag pattern"},{"input":"PAYPALISHIRING\\n4","output":"PINALSIGYAHRPI","explanation":"4 rows"}]},{"id":"S011","title":"String to Integer (atoi)","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Implement atoi which converts string to integer.","inputFormat":"Single line containing string s.","outputFormat":"Print integer value.","constraints":["0 <= s.length <= 200"],"tags":["string"],"testCases":[{"input":"42","output":"42","explanation":"Simple conversion"},{"input":"   -42","output":"-42","explanation":"With spaces and sign"}]},{"id":"S012","title":"Regular Expression Matching","difficulty":"Hard","timeLimit":"2s","memoryLimit":"256MB","description":"Implement regex matching with '.' and '*'.","inputFormat":"Two lines: string s and pattern p.","outputFormat":"Print YES or NO.","constraints":["0 <= s.length <= 20","0 <= p.length <= 30"],"tags":["string","dynamic-programming","recursion"],"testCases":[{"input":"aa\\na","output":"NO","explanation":"Does not match"},{"input":"aa\\na*","output":"YES","explanation":"Matches"}]},{"id":"S013","title":"Wildcard Matching","difficulty":"Hard","timeLimit":"2s","memoryLimit":"256MB","description":"Implement wildcard pattern matching with '?' and '*'.","inputFormat":"Two lines: string s and pattern p.","outputFormat":"Print YES or NO.","constraints":["0 <= s.length, p.length <= 2000"],"tags":["string","dynamic-programming","greedy"],"testCases":[{"input":"aa\\na","output":"NO","explanation":"Does not match"},{"input":"aa\\n*","output":"YES","explanation":"* matches any"}]},{"id":"S014","title":"Group Anagrams","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Group strings that are anagrams of each other.","inputFormat":"First line contains n (1 <= n <= 10000). Next n lines contain strings.","outputFormat":"Print groups, one group per line, strings space-separated.","constraints":["1 <= n <= 10000","0 <= strs[i].length <= 100"],"tags":["string","hash-table"],"testCases":[{"input":"6\\neat\\ntea\\ntan\\nate\\nnat\\nbat","output":"eat tea ate\\ntan nat\\nbat","explanation":"Grouped anagrams"},{"input":"1\\n","output":"","explanation":"Empty string"}]},{"id":"S015","title":"Multiply Strings","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Multiply two non-negative integers represented as strings.","inputFormat":"Two lines, each containing a number string.","outputFormat":"Print product as string.","constraints":["1 <= num1.length, num2.length <= 200"],"tags":["string","math"],"testCases":[{"input":"2\\n3","output":"6","explanation":"2 * 3 = 6"},{"input":"123\\n456","output":"56088","explanation":"123 * 456"}]},{"id":"S016","title":"Generate Parentheses","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Generate all combinations of well-formed parentheses.","inputFormat":"Single integer n (1 <= n <= 8).","outputFormat":"Print each combination on new line.","constraints":["1 <= n <= 8"],"tags":["string","backtracking"],"testCases":[{"input":"3","output":"((()))\\n(()())\\n(())()\\n()(())\\n()()()","explanation":"All valid combinations"},{"input":"1","output":"()","explanation":"Single pair"}]},{"id":"S017","title":"Letter Combinations of Phone Number","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Return all possible letter combinations that number could represent (like old phone keyboards).","inputFormat":"Single line with digits string (0 <= length <= 4).","outputFormat":"Print combinations space-separated.","constraints":["0 <= digits.length <= 4","digits[i] is digit 2-9"],"tags":["string","backtracking"],"testCases":[{"input":"23","output":"ad ae af bd be bf cd ce cf","explanation":"All combinations"},{"input":"","output":"","explanation":"Empty input"}]},{"id":"S018","title":"Valid Parentheses","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if string with brackets is valid (properly opened and closed).","inputFormat":"Single line containing string s (1 <= length <= 10000).","outputFormat":"Print YES or NO.","constraints":["1 <= s.length <= 10000"],"tags":["string","stack"],"testCases":[{"input":"()","output":"YES","explanation":"Valid"},{"input":"()[]{}","output":"YES","explanation":"All valid"}]},{"id":"S019","title":"Longest Valid Parentheses","difficulty":"Hard","timeLimit":"2s","memoryLimit":"256MB","description":"Find length of longest valid parentheses substring.","inputFormat":"Single line containing string s (0 <= length <= 30000).","outputFormat":"Print maximum length.","constraints":["0 <= s.length <= 30000"],"tags":["string","dynamic-programming","stack"],"testCases":[{"input":"(()","output":"2","explanation":"() is longest"},{"input":")()())","output":"4","explanation":"()() is longest"}]},{"id":"S020","title":"Simplify Path","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Simplify Unix-style absolute path.","inputFormat":"Single line containing path string.","outputFormat":"Print simplified canonical path.","constraints":["1 <= path.length <= 3000"],"tags":["string","stack"],"testCases":[{"input":"/home/","output":"/home","explanation":"Remove trailing slash"},{"input":"/../","output":"/","explanation":"Cannot go above root"}]},{"id":"S021","title":"Minimum Window Substring","difficulty":"Hard","timeLimit":"3s","memoryLimit":"256MB","description":"Find minimum window in s containing all characters of t.","inputFormat":"Two lines: string s and string t.","outputFormat":"Print minimum window or empty string.","constraints":["1 <= s.length, t.length <= 100000"],"tags":["string","hash-table","sliding-window"],"testCases":[{"input":"ADOBECODEBANC\\nABC","output":"BANC","explanation":"Minimum window"},{"input":"a\\na","output":"a","explanation":"Single character"}]},{"id":"S022","title":"Word Break","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Determine if string can be segmented into space-separated sequence of dictionary words.","inputFormat":"First line: string s. Second line: n (dictionary size). Next n lines: dictionary words.","outputFormat":"Print YES or NO.","constraints":["1 <= s.length <= 300","1 <= wordDict.length <= 1000"],"tags":["string","dynamic-programming"],"testCases":[{"input":"leetcode\\n2\\nleet\\ncode","output":"YES","explanation":"Can be segmented"},{"input":"catsandog\\n5\\ncats\\ndog\\nsand\\nand\\ncat","output":"NO","explanation":"Cannot segment"}]},{"id":"S023","title":"Word Break II","difficulty":"Hard","timeLimit":"3s","memoryLimit":"256MB","description":"Return all possible sentences from word segmentation.","inputFormat":"First line: string s. Second line: n. Next n lines: dictionary words.","outputFormat":"Print each sentence on new line.","constraints":["1 <= s.length <= 20"],"tags":["string","dynamic-programming","backtracking"],"testCases":[{"input":"catsanddog\\n5\\ncat\\ncats\\nand\\nsand\\ndog","output":"cats and dog\\ncat sand dog","explanation":"All sentences"},{"input":"pineapplepenapple\\n5\\napple\\npen\\napplepen\\npine\\npineapple","output":"pine apple pen apple\\npineapple pen apple\\npine applepen apple","explanation":"Multiple segmentations"}]},{"id":"S024","title":"Decode Ways","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Count number of ways to decode string where A=1, B=2, ..., Z=26.","inputFormat":"Single line containing digit string s (1 <= length <= 100).","outputFormat":"Print number of ways.","constraints":["1 <= s.length <= 100"],"tags":["string","dynamic-programming"],"testCases":[{"input":"12","output":"2","explanation":"AB or L"},{"input":"226","output":"3","explanation":"BZ, VF, or BBF"}]},{"id":"S025","title":"Decode Ways II","difficulty":"Hard","timeLimit":"2s","memoryLimit":"256MB","description":"Count decode ways with '*' wildcard (can be any digit 1-9).","inputFormat":"Single line containing string s (1 <= length <= 100000).","outputFormat":"Print number of ways modulo 10^9+7.","constraints":["1 <= s.length <= 100000"],"tags":["string","dynamic-programming"],"testCases":[{"input":"*","output":"9","explanation":"Can be 1-9"},{"input":"1*","output":"18","explanation":"Multiple interpretations"}]},{"id":"S026","title":"Distinct Subsequences","difficulty":"Hard","timeLimit":"3s","memoryLimit":"256MB","description":"Count distinct subsequences of s which equals t.","inputFormat":"Two lines: string s and string t.","outputFormat":"Print count of subsequences.","constraints":["1 <= s.length, t.length <= 1000"],"tags":["string","dynamic-programming"],"testCases":[{"input":"rabbbit\\nrabbit","output":"3","explanation":"3 ways to form rabbit"},{"input":"babgbag\\nbag","output":"5","explanation":"5 subsequences"}]},{"id":"S027","title":"Edit Distance","difficulty":"Hard","timeLimit":"2s","memoryLimit":"256MB","description":"Find minimum number of operations to convert word1 to word2 (insert, delete, replace).","inputFormat":"Two lines: string word1 and word2.","outputFormat":"Print minimum operations.","constraints":["0 <= word1.length, word2.length <= 500"],"tags":["string","dynamic-programming"],"testCases":[{"input":"horse\\nros","output":"3","explanation":"3 operations"},{"input":"intention\\nexecution","output":"5","explanation":"5 operations"}]},{"id":"S028","title":"Palindrome Partitioning","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Partition string so every substring is palindrome. Return all possible partitions.","inputFormat":"Single line containing string s (1 <= length <= 16).","outputFormat":"Print each partition on new line, substrings space-separated.","constraints":["1 <= s.length <= 16"],"tags":["string","backtracking","dynamic-programming"],"testCases":[{"input":"aab","output":"a a b\\naa b","explanation":"Two partitions"},{"input":"a","output":"a","explanation":"Single character"}]},{"id":"S029","title":"Palindrome Partitioning II","difficulty":"Hard","timeLimit":"2s","memoryLimit":"256MB","description":"Return minimum cuts needed for palindrome partitioning.","inputFormat":"Single line containing string s (1 <= length <= 2000).","outputFormat":"Print minimum cuts.","constraints":["1 <= s.length <= 2000"],"tags":["string","dynamic-programming"],"testCases":[{"input":"aab","output":"1","explanation":"One cut: aa|b"},{"input":"a","output":"0","explanation":"No cuts needed"}]},{"id":"S030","title":"Interleaving String","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Check if s3 is formed by interleaving s1 and s2.","inputFormat":"Three lines: strings s1, s2, s3.","outputFormat":"Print YES or NO.","constraints":["0 <= s1.length, s2.length <= 100"],"tags":["string","dynamic-programming"],"testCases":[{"input":"aabcc\\ndbbca\\naadbbcbcac","output":"YES","explanation":"Valid interleaving"},{"input":"aabcc\\ndbbca\\naadbbbaccc","output":"NO","explanation":"Not interleaved"}]},{"id":"S031","title":"Scramble String","difficulty":"Hard","timeLimit":"3s","memoryLimit":"256MB","description":"Check if s2 is scrambled string of s1.","inputFormat":"Two lines: string s1 and s2.","outputFormat":"Print YES or NO.","constraints":["1 <= s1.length, s2.length <= 30"],"tags":["string","dynamic-programming"],"testCases":[{"input":"great\\nrgeat","output":"YES","explanation":"Is scrambled"},{"input":"abcde\\ncaebd","output":"NO","explanation":"Not scrambled"}]},{"id":"S032","title":"Longest Repeating Character Replacement","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find length of longest substring with same characters after replacing at most k characters.","inputFormat":"First line: string s. Second line: integer k.","outputFormat":"Print maximum length.","constraints":["1 <= s.length <= 100000","0 <= k <= s.length"],"tags":["string","sliding-window"],"testCases":[{"input":"ABAB\\n2","output":"4","explanation":"Replace both A or B"},{"input":"AABABBA\\n1","output":"4","explanation":"Replace one B"}]},{"id":"S033","title":"Permutation in String","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Check if s2 contains permutation of s1.","inputFormat":"Two lines: string s1 and s2.","outputFormat":"Print YES or NO.","constraints":["1 <= s1.length, s2.length <= 10000"],"tags":["string","sliding-window"],"testCases":[{"input":"ab\\neidbaooo","output":"YES","explanation":"Contains ba"},{"input":"ab\\neidboaoo","output":"NO","explanation":"No permutation"}]},{"id":"S034","title":"Find All Anagrams in String","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find all start indices of anagrams of p in s.","inputFormat":"Two lines: string s and p.","outputFormat":"Print indices space-separated.","constraints":["1 <= s.length, p.length <= 30000"],"tags":["string","hash-table","sliding-window"],"testCases":[{"input":"cbaebabacd\\nabc","output":"0 6","explanation":"Anagrams at 0 and 6"},{"input":"abab\\nab","output":"0 1 2","explanation":"Three anagrams"}]},{"id":"S035","title":"String Compression","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Compress string using counts of repeated characters. Modify in-place.","inputFormat":"Single line with characters space-separated.","outputFormat":"Print compressed string and new length.","constraints":["1 <= chars.length <= 2000"],"tags":["string","two-pointers"],"testCases":[{"input":"a a b b c c c","output":"a2b2c3 6","explanation":"Compressed"},{"input":"a","output":"a 1","explanation":"Single character"}]},{"id":"S036","title":"Add Binary","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Add two binary strings and return sum as binary string.","inputFormat":"Two lines, each containing binary string.","outputFormat":"Print sum as binary string.","constraints":["1 <= a.length, b.length <= 10000"],"tags":["string","math"],"testCases":[{"input":"11\\n1","output":"100","explanation":"3 + 1 = 4"},{"input":"1010\\n1011","output":"10101","explanation":"Binary addition"}]},{"id":"S037","title":"Add Strings","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Add two non-negative integers represented as strings without converting to int.","inputFormat":"Two lines containing number strings.","outputFormat":"Print sum as string.","constraints":["1 <= num1.length, num2.length <= 10000"],"tags":["string","math"],"testCases":[{"input":"11\\n123","output":"134","explanation":"11 + 123 = 134"},{"input":"456\\n77","output":"533","explanation":"Addition"}]},{"id":"S038","title":"Compare Version Numbers","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Compare two version numbers. Return -1, 0, or 1.","inputFormat":"Two lines containing version strings.","outputFormat":"Print -1, 0, or 1.","constraints":["1 <= version1.length, version2.length <= 500"],"tags":["string"],"testCases":[{"input":"1.01\\n1.001","output":"0","explanation":"Equal versions"},{"input":"1.0\\n1.0.0","output":"0","explanation":"Trailing zeros ignored"}]},{"id":"S039","title":"Integer to Roman","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Convert integer to Roman numeral.","inputFormat":"Single integer num (1 <= num <= 3999).","outputFormat":"Print Roman numeral.","constraints":["1 <= num <= 3999"],"tags":["string","math"],"testCases":[{"input":"3","output":"III","explanation":"3 = III"},{"input":"58","output":"LVIII","explanation":"L=50, V=5, III=3"}]},{"id":"S040","title":"Roman to Integer","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Convert Roman numeral to integer.","inputFormat":"Single line containing Roman numeral string.","outputFormat":"Print integer value.","constraints":["1 <= s.length <= 15","Valid Roman numeral"],"tags":["string","math"],"testCases":[{"input":"III","output":"3","explanation":"III = 3"},{"input":"LVIII","output":"58","explanation":"L=50, V=5, III=3"}]},{"id":"S041","title":"Integer to English Words","difficulty":"Hard","timeLimit":"1s","memoryLimit":"256MB","description":"Convert non-negative integer to English words representation.","inputFormat":"Single integer num (0 <= num < 2^31).","outputFormat":"Print English words.","constraints":["0 <= num < 2^31"],"tags":["string","math","recursion"],"testCases":[{"input":"123","output":"One Hundred Twenty Three","explanation":"Number to words"},{"input":"12345","output":"Twelve Thousand Three Hundred Forty Five","explanation":"With thousands"}]},{"id":"S042","title":"Excel Sheet Column Title","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Convert column number to Excel column title (A=1, B=2, ..., Z=26, AA=27).","inputFormat":"Single integer columnNumber (1 <= n <= 2^31-1).","outputFormat":"Print column title.","constraints":["1 <= columnNumber <= 2^31 - 1"],"tags":["string","math"],"testCases":[{"input":"1","output":"A","explanation":"Column A"},{"input":"28","output":"AB","explanation":"Column AB"}]},{"id":"S043","title":"Excel Sheet Column Number","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Convert Excel column title to number.","inputFormat":"Single line containing column title string.","outputFormat":"Print column number.","constraints":["1 <= columnTitle.length <= 7"],"tags":["string","math"],"testCases":[{"input":"A","output":"1","explanation":"Column 1"},{"input":"AB","output":"28","explanation":"Column 28"}]},{"id":"S044","title":"Reverse Words in String","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Reverse order of words in string. Words separated by spaces.","inputFormat":"Single line containing string s.","outputFormat":"Print reversed string.","constraints":["1 <= s.length <= 10000"],"tags":["string","two-pointers"],"testCases":[{"input":"the sky is blue","output":"blue is sky the","explanation":"Words reversed"},{"input":"  hello world  ","output":"world hello","explanation":"Trim spaces"}]},{"id":"S045","title":"Reverse Words in String III","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Reverse characters in each word while preserving word order and spaces.","inputFormat":"Single line containing string s.","outputFormat":"Print modified string.","constraints":["1 <= s.length <= 50000"],"tags":["string","two-pointers"],"testCases":[{"input":"Let's take LeetCode contest","output":"s'teL ekat edoCteeL tsetnoc","explanation":"Each word reversed"},{"input":"God Ding","output":"doG gniD","explanation":"Words reversed individually"}]},{"id":"S046","title":"Length of Last Word","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Return length of last word in string. Word is maximal substring of non-space characters.","inputFormat":"Single line containing string s.","outputFormat":"Print length.","constraints":["1 <= s.length <= 10000"],"tags":["string"],"testCases":[{"input":"Hello World","output":"5","explanation":"World has 5 chars"},{"input":"   fly me   to   the moon  ","output":"4","explanation":"moon has 4 chars"}]},{"id":"S047","title":"Detect Capital","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if usage of capitals in word is correct (all caps, all lower, or first cap).","inputFormat":"Single line containing word string.","outputFormat":"Print YES or NO.","constraints":["1 <= word.length <= 100"],"tags":["string"],"testCases":[{"input":"USA","output":"YES","explanation":"All capitals"},{"input":"FlaG","output":"NO","explanation":"Invalid capitals"}]},{"id":"S048","title":"Ransom Note","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if ransomNote can be constructed from magazine letters.","inputFormat":"Two lines: ransomNote and magazine strings.","outputFormat":"Print YES or NO.","constraints":["1 <= ransomNote.length, magazine.length <= 100000"],"tags":["string","hash-table"],"testCases":[{"input":"a\\nb","output":"NO","explanation":"b doesn't have a"},{"input":"aa\\naab","output":"YES","explanation":"Can construct aa"}]},{"id":"S049","title":"Isomorphic Strings","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if two strings are isomorphic (can replace chars to get other).","inputFormat":"Two lines containing strings s and t.","outputFormat":"Print YES or NO.","constraints":["1 <= s.length <= 50000","s.length == t.length"],"tags":["string","hash-table"],"testCases":[{"input":"egg\\nadd","output":"YES","explanation":"e->a, g->d"},{"input":"foo\\nbar","output":"NO","explanation":"o can't map to two"}]},{"id":"S050","title":"Word Pattern","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if string follows pattern (bijection between pattern char and word).","inputFormat":"Two lines: pattern string and s string.","outputFormat":"Print YES or NO.","constraints":["1 <= pattern.length <= 300"],"tags":["string","hash-table"],"testCases":[{"input":"abba\\ndog cat cat dog","output":"YES","explanation":"Follows pattern"},{"input":"abba\\ndog cat cat fish","output":"NO","explanation":"Doesn't match"}]},{"id":"S051","title":"Repeated Substring Pattern","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if string can be constructed by repeating substring multiple times.","inputFormat":"Single line containing string s.","outputFormat":"Print YES or NO.","constraints":["1 <= s.length <= 10000"],"tags":["string"],"testCases":[{"input":"abab","output":"YES","explanation":"ab repeated twice"},{"input":"aba","output":"NO","explanation":"Cannot be formed"}]},{"id":"S052","title":"Rotate String","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if s can become goal after rotations (moving leftmost to right).","inputFormat":"Two lines: string s and goal.","outputFormat":"Print YES or NO.","constraints":["1 <= s.length, goal.length <= 100"],"tags":["string"],"testCases":[{"input":"abcde\\ncdeab","output":"YES","explanation":"Can rotate"},{"input":"abcde\\nabced","output":"NO","explanation":"Cannot match"}]},{"id":"S053","title":"Buddy Strings","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if you can swap two letters in s to get goal.","inputFormat":"Two lines: string s and goal.","outputFormat":"Print YES or NO.","constraints":["1 <= s.length, goal.length <= 20000"],"tags":["string","hash-table"],"testCases":[{"input":"ab\\nba","output":"YES","explanation":"Swap a and b"},{"input":"ab\\nab","output":"NO","explanation":"No duplicates to swap"}]},{"id":"S054","title":"Backspace String Compare","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if two strings are equal when typed into text editor with # as backspace.","inputFormat":"Two lines: string s and t.","outputFormat":"Print YES or NO.","constraints":["1 <= s.length, t.length <= 200"],"tags":["string","two-pointers","stack"],"testCases":[{"input":"ab#c\\nad#c","output":"YES","explanation":"Both become ac"},{"input":"ab##\\nc#d#","output":"YES","explanation":"Both become empty"}]},{"id":"S055","title":"Goat Latin","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Convert sentence to Goat Latin (move consonant to end + ma, vowel + ma, add a's).","inputFormat":"Single line containing sentence string.","outputFormat":"Print Goat Latin sentence.","constraints":["1 <= sentence.length <= 150"],"tags":["string"],"testCases":[{"input":"I speak Goat Latin","output":"Imaa peaksma oatGmaa atinLmaaa","explanation":"Goat Latin conversion"},{"input":"The quick brown fox","output":"heTmaa uickqmaaa rownbmaaaa oxfmaaaaa","explanation":"With consonants"}]},{"id":"S056","title":"License Key Formatting","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Reformat license key: remove dashes, divide into groups of K chars (first group can be shorter), uppercase.","inputFormat":"First line: string s. Second line: integer K.","outputFormat":"Print reformatted string.","constraints":["1 <= s.length <= 100000","1 <= K <= 10000"],"tags":["string"],"testCases":[{"input":"5F3Z-2e-9-w\\n4","output":"5F3Z-2E9W","explanation":"Reformatted"},{"input":"2-5g-3-J\\n2","output":"2-5G-3J","explanation":"Groups of 2"}]},{"id":"S057","title":"Most Common Word","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Find most frequent word not in banned list.","inputFormat":"First line: paragraph string. Second line: n (banned count). Next n lines: banned words.","outputFormat":"Print most common word.","constraints":["1 <= paragraph.length <= 1000"],"tags":["string","hash-table"],"testCases":[{"input":"Bob hit a ball, the hit BALL flew far after it was hit.\\n1\\nhit","output":"ball","explanation":"ball appears most"},{"input":"a.\\n0","output":"a","explanation":"Single word"}]},{"id":"S058","title":"Reorder Data in Log Files","difficulty":"Easy","timeLimit":"2s","memoryLimit":"256MB","description":"Reorder logs: letter-logs before digit-logs, letter-logs sorted by content then identifier.","inputFormat":"First line: n. Next n lines: log strings.","outputFormat":"Print reordered logs, one per line.","constraints":["1 <= logs.length <= 100"],"tags":["string","sorting"],"testCases":[{"input":"4\\ndig1 8 1 5 1\\nlet1 art can\\ndig2 3 6\\nlet2 own kit dig","output":"let1 art can\\nlet2 own kit dig\\ndig1 8 1 5 1\\ndig2 3 6","explanation":"Letter logs first"},{"input":"3\\na1 9 2 3 1\\ng1 act car\\nzo4 4 7","output":"g1 act car\\na1 9 2 3 1\\nzo4 4 7","explanation":"Sorted"}]},{"id":"S059","title":"Unique Email Addresses","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Count unique emails (ignore . in local, ignore after + in local).","inputFormat":"First line: n. Next n lines: email strings.","outputFormat":"Print count of unique addresses.","constraints":["1 <= emails.length <= 100"],"tags":["string","hash-table"],"testCases":[{"input":"3\\ntest.email+alex@leetcode.com\\ntest.e.mail+bob.cathy@leetcode.com\\ntestemail+david@lee.tcode.com","output":"2","explanation":"First two are same"},{"input":"2\\na@leetcode.com\\nb@leetcode.com","output":"2","explanation":"Both unique"}]},{"id":"S060","title":"Longest Uncommon Subsequence I","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Find longest uncommon subsequence between two strings.","inputFormat":"Two lines: string a and b.","outputFormat":"Print length or -1.","constraints":["1 <= a.length, b.length <= 100"],"tags":["string"],"testCases":[{"input":"aba\\ncdc","output":"3","explanation":"Either string"},{"input":"aaa\\naaa","output":"-1","explanation":"Same strings"}]},{"id":"S061","title":"Longest Uncommon Subsequence II","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find longest uncommon subsequence among array of strings.","inputFormat":"First line: n. Next n lines: strings.","outputFormat":"Print length or -1.","constraints":["2 <= strs.length <= 50"],"tags":["string","sorting"],"testCases":[{"input":"3\\naba\\ncdc\\neae","output":"3","explanation":"All are uncommon"},{"input":"2\\naaa\\naaa","output":"-1","explanation":"No uncommon"}]},{"id":"S062","title":"Student Attendance Record I","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Check if student could be rewarded (< 2 absences and no 3 consecutive lates).","inputFormat":"Single line containing record string (A=absent, L=late, P=present).","outputFormat":"Print YES or NO.","constraints":["1 <= s.length <= 1000"],"tags":["string"],"testCases":[{"input":"PPALLP","output":"YES","explanation":"Qualifies"},{"input":"PPALLL","output":"NO","explanation":"3 consecutive lates"}]},{"id":"S063","title":"Student Attendance Record II","difficulty":"Hard","timeLimit":"3s","memoryLimit":"256MB","description":"Count rewardable n-day attendance records (< 2 A's, no 3+ consecutive L's).","inputFormat":"Single integer n (1 <= n <= 100000).","outputFormat":"Print count modulo 10^9+7.","constraints":["1 <= n <= 100000"],"tags":["string","dynamic-programming"],"testCases":[{"input":"2","output":"8","explanation":"8 valid records"},{"input":"1","output":"3","explanation":"A, L, P"}]},{"id":"S064","title":"Shortest Palindrome","difficulty":"Hard","timeLimit":"2s","memoryLimit":"256MB","description":"Find shortest palindrome by adding characters in front.","inputFormat":"Single line containing string s.","outputFormat":"Print shortest palindrome.","constraints":["0 <= s.length <= 50000"],"tags":["string","kmp"],"testCases":[{"input":"aacecaaa","output":"aaacecaaa","explanation":"Add one a"},{"input":"abcd","output":"dcbabcd","explanation":"Add dcb"}]},{"id":"S065","title":"Count Binary Substrings","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Count binary substrings with same number of 0's and 1's and all 0's and 1's grouped.","inputFormat":"Single line containing binary string s.","outputFormat":"Print count.","constraints":["1 <= s.length <= 50000"],"tags":["string"],"testCases":[{"input":"00110011","output":"6","explanation":"6 valid substrings"},{"input":"10101","output":"4","explanation":"4 substrings"}]},{"id":"S066","title":"Repeated String Match","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find minimum times to repeat a to make b substring. Return -1 if impossible.","inputFormat":"Two lines: string a and b.","outputFormat":"Print minimum times or -1.","constraints":["1 <= a.length, b.length <= 10000"],"tags":["string"],"testCases":[{"input":"abcd\\ncdabcdab","output":"3","explanation":"Repeat 3 times"},{"input":"a\\naa","output":"2","explanation":"Repeat twice"}]},{"id":"S067","title":"Expressive Words","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Count stretchy words (can extend groups of same chars to 3+).","inputFormat":"First line: string s. Second line: n. Next n lines: words.","outputFormat":"Print count of stretchy words.","constraints":["1 <= s.length, words[i].length <= 50"],"tags":["string"],"testCases":[{"input":"heeellooo\\n3\\nhello\\nhi\\nhelo","output":"1","explanation":"hello is stretchy"},{"input":"zzzzzyyyyy\\n3\\nzzyy\\nzy\\nzyy","output":"3","explanation":"All stretchy"}]},{"id":"S068","title":"Find and Replace Pattern","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Return words that match pattern (bijection).","inputFormat":"First line: n. Next n lines: words. Last line: pattern.","outputFormat":"Print matching words space-separated.","constraints":["1 <= words.length <= 50"],"tags":["string","hash-table"],"testCases":[{"input":"3\\nabc\\ndeq\\nmee\\nabb","output":"mee","explanation":"Matches pattern"},{"input":"3\\na\\nb\\nc\\na","output":"a b c","explanation":"All match"}]},{"id":"S069","title":"Camelcase Matching","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Check if queries match pattern (can insert lowercase letters).","inputFormat":"First line: n. Next n lines: query strings. Last line: pattern.","outputFormat":"Print YES or NO for each query, space-separated.","constraints":["1 <= queries.length <= 100"],"tags":["string","two-pointers"],"testCases":[{"input":"5\\nFooBar\\nFooBarTest\\nFootBall\\nFrameBuffer\\nForceFeedBack\\nFB","output":"YES YES YES YES NO","explanation":"Pattern matching"},{"input":"2\\nFooBar\\nFoobar\\nFooBar","output":"YES NO","explanation":"Case sensitive"}]},{"id":"S070","title":"Check If Word Is Valid After Substitutions","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Check if string is valid (starts with abc and can repeatedly insert abc).","inputFormat":"Single line containing string s.","outputFormat":"Print YES or NO.","constraints":["1 <= s.length <= 20000"],"tags":["string","stack"],"testCases":[{"input":"aabcbc","output":"YES","explanation":"Valid: a -> aabc -> aabcbc"},{"input":"abcabcababcc","output":"YES","explanation":"Can be formed"}]},{"id":"S071","title":"Number of Matching Subsequences","difficulty":"Medium","timeLimit":"3s","memoryLimit":"256MB","description":"Count words that are subsequence of s.","inputFormat":"First line: string s. Second line: n. Next n lines: words.","outputFormat":"Print count.","constraints":["1 <= s.length <= 50000","1 <= words.length <= 5000"],"tags":["string","hash-table"],"testCases":[{"input":"abcde\\n5\\na\\nbb\\nacd\\nace\\nace","output":"4","explanation":"4 are subsequences"},{"input":"dsahjpjauf\\n3\\nahjpjau\\nja\\nahbwzgqnuk","output":"2","explanation":"2 subsequences"}]},{"id":"S072","title":"Custom Sort String","difficulty":"Medium","timeLimit":"1s","memoryLimit":"256MB","description":"Sort s according to order defined in order string.","inputFormat":"Two lines: order string and s string.","outputFormat":"Print sorted s.","constraints":["1 <= order.length <= 26","1 <= s.length <= 200"],"tags":["string","hash-table","sorting"],"testCases":[{"input":"cba\\nabcd","output":"cbad","explanation":"Sorted by cba order"},{"input":"cbafg\\nabcd","output":"cbad","explanation":"Extra chars at end"}]},{"id":"S073","title":"Shifting Letters","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Shift first i+1 letters by shifts[i]. Return final string.","inputFormat":"First line: string s. Second line: n. Next line: n integers (shifts).","outputFormat":"Print shifted string.","constraints":["1 <= s.length <= 100000"],"tags":["string"],"testCases":[{"input":"abc\\n3\\n3 5 9","output":"rpl","explanation":"Apply shifts"},{"input":"aaa\\n3\\n1 2 3","output":"gfd","explanation":"Cumulative shifts"}]},{"id":"S074","title":"Positions of Large Groups","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Find start and end positions of each large group (3+ same consecutive chars).","inputFormat":"Single line containing string s.","outputFormat":"Print each interval on new line.","constraints":["1 <= s.length <= 1000"],"tags":["string"],"testCases":[{"input":"abbxxxxzzy","output":"3 6","explanation":"xxxx is large group"},{"input":"abc","output":"","explanation":"No large groups"}]},{"id":"S075","title":"Flip String to Monotone Increasing","difficulty":"Medium","timeLimit":"2s","memoryLimit":"256MB","description":"Find minimum flips to make binary string monotone increasing.","inputFormat":"Single line containing binary string s.","outputFormat":"Print minimum flips.","constraints":["1 <= s.length <= 100000"],"tags":["string","dynamic-programming"],"testCases":[{"input":"00110","output":"1","explanation":"Flip last 0"},{"input":"010110","output":"2","explanation":"Two flips needed"}]},{"id":"S076","title":"Substrings With Only One Distinct Letter","difficulty":"Easy","timeLimit":"1s","memoryLimit":"256MB","description":"Count substrings with only one distinct letter.","inputFormat":"Single line containing string s.","outputFormat":"Print count.","constraints":["1 <= s.length <= 1000"],"tags":["string"],"testCases":[{"input":"aaaba","output":"8","explanation":"8 valid substrings"},{"input":"aaaaaaaaaa","output":"55","explanation":"All same"}]}]`),Kn={problems:Gn},Jn="/questions.json";let Be=null,at=0;const Qn=36e5,st=async()=>{if(Be&&Date.now()-at<Qn)return console.log("âœ“ Using cached questions:",Be.length),Be;try{console.log("ðŸ“¥ Attempting to fetch from local /questions.json...");const t=await fetch(Jn);if(t.ok){const a=await t.json(),n=jt(a);if(n.length>0)return console.log(`âœ“ Loaded ${n.length} questions from local file`),Be=n,at=Date.now(),n}}catch{console.warn("âš ï¸ Local file fetch failed, using bundled data...")}try{const a=jt(Kn);if(a.length>0)return console.log(`âœ“ Loaded ${a.length} questions from bundled data`),Be=a,at=Date.now(),a}catch(t){console.error("âŒ Failed to load bundled questions:",t)}return console.error("âŒ All question sources failed"),[]};function jt(t){if(!t)return[];let a=[];if(Array.isArray(t))a=t;else{const n=t;if(Array.isArray(n.problems))a=n.problems;else if(Array.isArray(n.questions))a=n.questions;else return[]}return a.map(n=>{const i=n,s=String(i.difficulty??i.level??"").trim().toLowerCase();let m="medium";s.startsWith("e")?m="easy":s.startsWith("m")?m="medium":s.startsWith("h")&&(m="hard");const h=i.id??i._id??"",p=i.title??i.name??"Untitled",b=i.description??i.prompt??"";let y="General";typeof i.category=="string"?y=String(i.category):Array.isArray(i.tags)&&i.tags.length>0?y=String(i.tags[0]):typeof i.topic=="string"&&(y=String(i.topic));const M=Number(i.coinReward??i.coins??i.reward??0)||0,F=Array.isArray(i.testCases)?i.testCases:Array.isArray(i.test_cases)?i.test_cases:[],w=L=>{const g=L,f=String(g.input??g.stdin??""),d=String(g.output??g.expected_output??g.expectedOutput??""),k=!!(g.isHidden??g.hidden??!1),N=typeof g.points=="number"?g.points:void 0;return{input:f,expectedOutput:d,expected_output:d,isHidden:k,points:N}};return{id:String(h),title:String(p),description:String(b),category:y,difficulty:m,coinReward:M,coins:M,constraints:String(i.constraints??i.limits??""),solution_hint:String(i.solution_hint??i.hint??""),testCases:F.map(w),test_cases:F.map(L=>{const g=w(L);return{input:g.input,expected_output:g.expected_output}})}})}const Zn=async()=>{const t=await st(),a=new Set(t.map(n=>n.category));return Array.from(a).sort()},Xn=()=>{const t=be(),{user:a}=ge(),{getUserProgress:n}=xe(),[i,s]=r.useState([]),[m,h]=r.useState([]),[p,b]=r.useState(!0),[y,M]=r.useState(""),[F,w]=r.useState("all"),[L,g]=r.useState("all"),[f,d]=r.useState([]),[k,N]=r.useState(1),[T,O]=r.useState(new Set),E=20,R=[{id:"all",label:"All",color:"bg-gray-100 text-gray-700 border-gray-200"},{id:"easy",label:"Easy",color:"bg-green-50 text-green-700 border-green-200"},{id:"medium",label:"Medium",color:"bg-yellow-50 text-yellow-700 border-yellow-200"},{id:"hard",label:"Hard",color:"bg-red-50 text-red-700 border-red-200"}];r.useEffect(()=>{(async()=>{if(a?.id)try{const u=await n(a.id);if(u?.solvedChallenges){const C=new Set(u.solvedChallenges.map(B=>B.challengeId?.toString()||B.challengeId));O(C)}}catch(u){console.error("Error fetching solved challenges:",u)}})()},[a?.id,n]),r.useEffect(()=>{(async()=>{b(!0);try{const u=await st();console.log("Questions loaded:",u.length);const C=await Zn();console.log("Topics:",C.length);const B=u.map(D=>({id:D.id,title:D.title,description:D.description,difficulty:D.difficulty,topic:D.category,tags:[D.category],coinReward:D.coins,acceptanceRate:75,category:D.category,isDaily:!1,isPremium:!1,testCases:D.test_cases,sampleCode:"",examples:"",constraints:D.constraints,solution_hint:D.solution_hint}));console.log("Challenges prepared:",B.length),s(B),h(B.slice(0,E)),d(C),b(!1)}catch(u){console.error("Error loading questions:",u),b(!1)}})()},[]),r.useEffect(()=>{let c=[...i];if(F!=="all"&&(c=c.filter(B=>B.difficulty===F)),L!=="all"&&(c=c.filter(B=>B.topic===L)),y){const B=y.toLowerCase();c=c.filter(D=>D.title.toLowerCase().includes(B)||D.description.toLowerCase().includes(B)||D.tags.some(A=>A.toLowerCase().includes(B)))}console.log("Filtered challenges:",c.length,"from",i.length);const u=(k-1)*E,C=c.slice(u,u+E);console.log("Paginated challenges:",C.length),h(C)},[i,F,L,y,k]);const j=async()=>{b(!0);try{const u=(await st()).map(C=>({id:C.id,title:C.title,description:C.description,difficulty:C.difficulty,topic:C.category,tags:[C.category],coinReward:C.coins,acceptanceRate:75,category:C.category,isDaily:!1,isPremium:!1,testCases:C.test_cases,sampleCode:"",solution_hint:C.solution_hint}));s(u),N(1)}catch(c){console.error("Error refreshing questions:",c)}b(!1)},S=c=>{t(`/dashboard/codearena/challenge/${c.id}`,{state:{challenge:c}})},W=[{label:"Total",value:i.length.toLocaleString(),icon:oe,color:"text-[#00ADB5] bg-[#00ADB5]/10"},{label:"Solved",value:T.size,icon:ee,color:"text-emerald-600 bg-emerald-50"},{label:"Easy",value:i.filter(c=>c.difficulty==="easy").length,icon:Oe,color:"text-green-600 bg-green-50"},{label:"Medium",value:i.filter(c=>c.difficulty==="medium").length,icon:pe,color:"text-yellow-600 bg-yellow-50"},{label:"Hard",value:i.filter(c=>c.difficulty==="hard").length,icon:Fe,color:"text-red-600 bg-red-50"}];return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"space-y-6 pb-20 md:pb-6",children:[e.jsx(l.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:e.jsx(pe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"âš¡ Practice Challenges"}),e.jsx("p",{className:"text-gray-500 dark:text-white text-sm",children:"Solve coding challenges from 3000+ questions and earn coins"})]})]}),e.jsxs(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:j,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-[#00ADB5] hover:bg-[#00ADB5]/80 text-white font-medium rounded-lg transition-all disabled:opacity-50",children:[e.jsx(Ce,{className:`w-4 h-4 ${p?"animate-spin":""}`}),"Refresh"]})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:W.map((c,u)=>e.jsxs(l.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:u*.1},whileHover:{y:-2,scale:1.02},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-all group",children:[e.jsx("div",{className:`inline-flex p-2 rounded-lg ${c.color} dark:bg-opacity-20 mb-3 group-hover:scale-110 transition-transform`,children:e.jsx(c.icon,{className:"w-4 h-4"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.value}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-white",children:c.label})]},c.label))}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(St,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search challenges...",value:y,onChange:c=>{M(c.target.value),N(1)},className:"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-[#00ADB5] transition-all"})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:R.map(c=>e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{w(c.id),N(1)},className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${F===c.id?c.color:"bg-gray-50 dark:bg-gray-900 text-gray-600 dark:text-white border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:c.label},c.id))}),f.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{g("all"),N(1)},className:`px-4 py-2 rounded-full text-xs font-medium transition-all ${L==="all"?"bg-[#00ADB5] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"All Topics"}),f.slice(0,10).map(c=>e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{g(c),N(1)},className:`px-4 py-2 rounded-full text-xs font-medium transition-all ${L===c?"bg-[#00ADB5] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:c},c)),f.length>10&&e.jsxs("span",{className:"px-4 py-2 text-xs text-gray-500 dark:text-white",children:["+",f.length-10," more"]})]})]}),p?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs(l.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8",children:[e.jsx(l.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-[#00ADB5] border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Loading 3000+ questions from GitHub..."})]})}):m.length===0?e.jsxs(l.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-20 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(Qt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg",children:"No challenges found"}),e.jsx("p",{className:"text-gray-500 dark:text-white text-sm mt-2",children:"Try adjusting your filters"})]}):e.jsx("div",{className:"space-y-3",children:m.map((c,u)=>{const C=T.has(c.id?.toString()||c.id);return e.jsx(l.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:u*.05,duration:.4},whileHover:{y:-2,scale:1.02},className:`bg-white dark:bg-gray-800 border rounded-xl p-6 hover:shadow-lg transition-all group ${C?"border-green-300 dark:border-green-600 bg-green-50/50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg group-hover:text-[#00ADB5] dark:group-hover:text-[#00ADB5] transition-colors",children:c.title}),C&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-400 text-xs font-semibold rounded-full border border-green-200 dark:border-green-700",children:[e.jsx(ee,{className:"w-3 h-3"}),"SOLVED"]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-3 group-hover:text-gray-700 dark:group-hover:text-gray-300 transition-colors line-clamp-2",children:c.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm mb-3",children:[e.jsx(l.span,{whileHover:{scale:1.05},className:`px-3 py-1 rounded-full text-xs font-semibold ${c.difficulty==="easy"?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 border border-green-200 dark:border-green-700":c.difficulty==="medium"?"bg-yellow-50 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 border border-yellow-200 dark:border-yellow-700":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-200 dark:border-red-700"}`,children:c.difficulty?c.difficulty.charAt(0).toUpperCase()+c.difficulty.slice(1):"Unknown"}),e.jsx("span",{className:"text-gray-600 dark:text-white text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:c.category}),e.jsxs("span",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400 text-xs font-medium",children:[e.jsx(X,{className:"w-3 h-3"}),c.coinReward||c.coins||0]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-6",children:e.jsxs(l.button,{whileHover:{scale:1.05,boxShadow:"0 10px 30px rgba(59, 130, 246, 0.3)"},whileTap:{scale:.95},onClick:()=>S(c),className:`flex items-center gap-2 px-6 py-3 text-white text-sm font-semibold rounded-lg transition-all ${C?"bg-green-500 hover:bg-green-600":"bg-[#00ADB5] hover:bg-[#00ADB5]/80"}`,children:[e.jsx("span",{className:"relative",children:C?"Solve Again":"Solve"}),e.jsx(Ge,{className:"w-4 h-4 relative"})]})})]})},c.id)})}),!p&&m.length>0&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-center gap-3",children:[e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>N(c=>Math.max(1,c-1)),disabled:k===1,className:"px-6 py-3 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all font-medium shadow-sm",children:"Previous"}),e.jsxs("span",{className:"px-4 py-3 text-gray-700 dark:text-gray-300 text-sm bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:["Page ",k]}),e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>N(c=>c+1),disabled:m.length<E,className:"px-6 py-3 bg-[#00ADB5] hover:bg-[#00ADB5]/80 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all font-medium shadow-sm",children:"Next"})]})]})})},ei=()=>{const[t,a]=r.useState(!1),[n,i]=r.useState(!1),[s,m]=r.useState(null),[h,p]=r.useState(null),b=async()=>{try{const w=(await z("/challenges")).challenges?.length||0;return p(w),w}catch(F){return console.error("Error checking challenges:",F),0}},y=async()=>{a(!0),m(null);try{let F=0;for(const w of tt)await z("/challenges",{method:"POST",body:JSON.stringify({...w,createdAt:new Date,updatedAt:new Date})}),F++;m({type:"success",text:`Successfully added ${F} challenges to backend!`}),await b()}catch(F){console.error("Error seeding challenges:",F),m({type:"error",text:`Error: ${F.message||"Failed to seed challenges"}`})}a(!1)},M=async()=>{if(confirm("Are you sure you want to delete ALL challenges? This cannot be undone.")){i(!0),m(null);try{const w=(await z("/challenges")).challenges||[];let L=0;for(const g of w)await z(`/challenges/${g.id}`,{method:"DELETE"}),L++;m({type:"info",text:`Deleted ${L} challenges from backend.`}),p(0)}catch(F){console.error("Error deleting challenges:",F),m({type:"error",text:`Error: ${F.message||"Failed to delete challenges"}`})}i(!1)}};return r.useEffect(()=>{b()},[]),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-lg p-8 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex p-3 bg-[#00ADB5]/20 dark:bg-blue-900/50 rounded-full mb-4",children:e.jsx(la,{className:"w-8 h-8 text-[#00ADB5] dark:text-[#00ADB5]"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"CodeArena Seed Tool"}),e.jsx("p",{className:"text-gray-500 dark:text-white",children:"Add sample challenges to your backend database"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-white",children:"Challenges to add:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:tt.length})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-white",children:"Existing in backend:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:h!==null?h:e.jsx(Ce,{className:"w-4 h-4 animate-spin text-gray-400"})})]})]}),s&&e.jsxs(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:`mb-6 p-4 rounded-lg flex items-start gap-3 ${s.type==="success"?"bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700":s.type==="error"?"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700":"bg-[#00ADB5]/10 dark:bg-[#00ADB5]/20 border border-[#00ADB5]/30 dark:border-blue-700"}`,children:[s.type==="success"?e.jsx(ee,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}):s.type==="error"?e.jsx(ut,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}):e.jsx(ut,{className:"w-5 h-5 text-[#00ADB5] dark:text-[#00ADB5] flex-shrink-0 mt-0.5"}),e.jsx("p",{className:`text-sm ${s.type==="success"?"text-green-700 dark:text-green-400":s.type==="error"?"text-red-700 dark:text-red-400":"text-blue-700 dark:text-[#00ADB5]"}`,children:s.text})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:y,disabled:t||n,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-[#00ADB5] text-white font-medium rounded-lg hover:bg-[#00ADB5]/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[t?e.jsx(ae,{className:"w-5 h-5 animate-spin"}):e.jsx(ea,{className:"w-5 h-5"}),t?"Adding Challenges...":"Seed Challenges"]}),e.jsxs("button",{onClick:()=>b(),disabled:t||n,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Ce,{className:"w-5 h-5"}),"Refresh Count"]}),e.jsxs("button",{onClick:M,disabled:t||n||h===0,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 font-medium rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors border border-red-200 dark:border-red-700",children:[n?e.jsx(ae,{className:"w-5 h-5 animate-spin"}):e.jsx(ta,{className:"w-5 h-5"}),n?"Deleting...":"Delete All Challenges"]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Challenges to be added:"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:tt.map((F,w)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:F.title}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${F.difficulty==="easy"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-400":F.difficulty==="medium"?"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-400"}`,children:F.difficulty})]},w))})]})]})})},ti=({wallet:t,onClose:a})=>{const{user:n}=ge(),{fetchUserTransactions:i,getUserProgress:s}=xe(),[m,h]=r.useState([]),[p,b]=r.useState(!0),[y,M]=r.useState("overview"),[F,w]=r.useState({problemsSolved:0,battlesWon:0,currentStreak:0});r.useEffect(()=>{(async()=>{if(n)try{const k=(await s?.(n.id))?.solvedChallenges?.length||t?.achievements?.problemsSolved||0;let N=0,T=0;try{N=t?.achievements?.battlesWon||0,T=t?.streak?.current||0}catch(O){console.error("Error fetching battles for wallet:",O),N=t?.achievements?.battlesWon||0,T=t?.streak?.current||0}w({problemsSolved:k,battlesWon:N,currentStreak:T})}catch(d){console.error("Error fetching real stats:",d),w({problemsSolved:t?.achievements?.problemsSolved||0,battlesWon:t?.achievements?.battlesWon||0,currentStreak:t?.streak?.current||0})}})()},[n,t,s]),r.useEffect(()=>{(async()=>{if(n)try{const d=await i(n.id);h(d||[])}catch(d){console.error("Error loading transactions:",d),h([])}finally{b(!1)}})()},[n,i]);const L=(f,d)=>{if(f==="earn")switch(d){case"challenge":return pe;case"battle":return te;case"tournament":return Z;default:return mt}else switch(d){case"hint":return Fe;case"entry_fee":return te;default:return X}},g=f=>f?(f.toDate?f.toDate():new Date(f)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-end",onClick:a,children:e.jsxs(l.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},onClick:f=>f.stopPropagation(),className:"h-full w-full max-w-sm bg-gray-900 border-l border-gray-700/50 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:e.jsx(ya,{className:"w-5 h-5 text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"My Wallet"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Manage your coins & rewards"})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-700/50 rounded-lg transition-colors",children:e.jsx(rt,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/20 via-amber-500/20 to-orange-500/20 border border-yellow-500/30 rounded-2xl p-6",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Total Balance"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"â‚¿"})}),e.jsx("span",{className:"text-4xl font-bold text-white",children:t?.coins?.toLocaleString()||0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-400 mb-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Earned"})]}),e.jsx("p",{className:"text-white font-bold",children:t?.totalEarned?.toLocaleString()||0})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-400 mb-1",children:[e.jsx(Mt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Spent"})]}),e.jsx("p",{className:"text-white font-bold",children:t?.totalSpent?.toLocaleString()||0})]})]})]})}),e.jsx("div",{className:"flex gap-2 px-4",children:[{id:"overview",label:"Overview"},{id:"history",label:"History"}].map(f=>e.jsx("button",{onClick:()=>M(f.id),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${y===f.id?"bg-cyan-500/20 text-cyan-400":"bg-gray-800/50 text-gray-400 hover:text-white"}`,children:f.label},f.id))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:y==="overview"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 text-purple-400"}),e.jsxs("span",{className:"text-white font-medium",children:["Level ",t?.level||1]})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[t?.experience||0," / ",(t?.level||1)*100," XP"]})]}),e.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${(t?.experience||0)/((t?.level||1)*100)*100}%`},className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsx(pe,{className:"w-5 h-5 text-green-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:F.problemsSolved}),e.jsx("p",{className:"text-sm text-gray-400",children:"Problems Solved"})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsx(te,{className:"w-5 h-5 text-[#00ADB5] mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:F.battlesWon}),e.jsx("p",{className:"text-sm text-gray-400",children:"Battles Won"})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsx(Z,{className:"w-5 h-5 text-yellow-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t?.achievements?.tournamentsWon||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"Tournaments"})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsx(Oe,{className:"w-5 h-5 text-orange-400 mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:F.currentStreak}),e.jsx("p",{className:"text-sm text-gray-400",children:"Win Streak"})]})]}),t?.badges&&t.badges.length>0&&e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-white font-medium mb-3 flex items-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5 text-pink-400"}),"Badges"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.badges.map((f,d)=>e.jsxs("div",{className:"px-3 py-1.5 bg-gray-700/50 rounded-lg text-sm text-white flex items-center gap-2",title:f.description,children:[e.jsx("span",{children:f.icon}),e.jsx("span",{children:f.name})]},d))})]})]}):e.jsx("div",{className:"space-y-3",children:p?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(l.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full"})}):m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(nt,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:"No transactions yet"})]}):m.map((f,d)=>{const k=L(f.type,f.category),N=f.type==="earn";return e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:d*.05},className:"flex items-center justify-between p-3 bg-gray-800/50 border border-gray-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${N?"bg-green-500/20":"bg-red-500/20"}`,children:e.jsx(k,{className:`w-4 h-4 ${N?"text-green-400":"text-red-400"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:f.description}),e.jsx("p",{className:"text-xs text-gray-400",children:g(f.createdAt)})]})]}),e.jsxs("div",{className:`flex items-center gap-1 font-bold ${N?"text-green-400":"text-red-400"}`,children:[N?e.jsx(sa,{className:"w-4 h-4"}):e.jsx(na,{className:"w-4 h-4"}),e.jsxs("span",{children:[N?"+":"-",f.amount]})]})]},f.id||d)})})})]})})};class ai extends r.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,n){console.error("CodeArena Error:",a,n)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-red-200 dark:border-red-800 p-8 max-w-md w-full text-center",children:[e.jsx(Ft,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-4",children:"There was an error loading CodeArena. Please refresh the page or try again later."}),e.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 p-3 rounded-lg mb-4 text-left",children:e.jsx("pre",{className:"text-xs text-red-700 dark:text-red-400 whitespace-pre-wrap",children:this.state.error?.message||"Unknown error"})}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-[#00ADB5] text-white rounded-lg hover:bg-[#00ADB5]/80 transition-colors",children:"Refresh Page"})]})}):this.props.children}}const ni=()=>{const t=be(),a=ot(),{user:n}=ge(),{getUserWallet:i,initializeWallet:s,subscribeToWallet:m,fetchGlobalLeaderboard:h,getUserProgress:p}=xe(),[b,y]=r.useState("home"),[M,F]=r.useState(null),[w,L]=r.useState({problemsSolved:0,battlesWon:0,currentStreak:0,globalRank:"-"}),[g,f]=r.useState(!0),[d,k]=r.useState(!1),[N,T]=r.useState(null),O=async(j,S)=>{try{const[W,c,u]=await Promise.all([z(`/battles/user-stats/${j}`).catch(()=>null),p?.(j).catch(()=>null),h?.().catch(()=>null)]),C=c?.solvedChallenges?.length||S?.achievements?.problemsSolved||0,B=W?.battlesWon||S?.achievements?.battlesWon||0,D=W?.currentStreak||S?.streak?.current||0;let A="-";if(u){const $=u.find(_=>_.odId===j);$&&(A=$.rank)}L({problemsSolved:C,battlesWon:B,currentStreak:D,globalRank:A})}catch(W){console.error("Error fetching user stats:",W),L({problemsSolved:0,battlesWon:0,currentStreak:0,globalRank:"-"})}};r.useEffect(()=>{(async()=>{if(n&&n.id)try{f(!1),O(n.id,null),await i(n.id)||await s(n.id);const W=m(n.id,async c=>{F(c)});return()=>W()}catch(S){console.error("Error initializing wallet:",S),T("Failed to initialize wallet. Please check your connection and try again."),f(!1)}else console.log("No user or user.id, skipping wallet init"),f(!1)})()},[n?.id]),r.useEffect(()=>{const j=a.pathname;j.includes("/battle/history")?y("history"):j.includes("/battle")?y("battle"):j.includes("/practice")?y("practice"):j.includes("/leaderboard")?y("leaderboard"):y("home")},[a]);const E=[{label:"Problems Solved",value:w.problemsSolved,icon:oe,color:"text-emerald-600 bg-emerald-50"},{label:"Battles Won",value:w.battlesWon,icon:te,color:"text-[#00ADB5] bg-[#00ADB5]/10"},{label:"Current Streak",value:w.currentStreak,icon:Fe,color:"text-orange-600 bg-orange-50"},{label:"Global Rank",value:w.globalRank,icon:Z,color:"text-amber-600 bg-amber-50"}],R=[{title:"Quick Battle",description:"Compete in a 1v1 coding duel",icon:te,color:"bg-red-500",path:"battle"},{title:"Practice Mode",description:"Solve problems from Codeforces",icon:pe,color:"bg-[#00ADB5]",path:"practice"},{title:"Leaderboard",description:"View global rankings",icon:Z,color:"bg-amber-500",path:"leaderboard"}];return g?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ae,{className:"w-8 h-8 text-[#00ADB5] animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Loading CodeArena..."})]})}):N?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-red-200 dark:border-red-700 p-8 max-w-md w-full text-center",children:[e.jsx(Ft,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Error Loading CodeArena"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-4",children:N}),e.jsx("button",{onClick:()=>{T(null),f(!0),window.location.reload()},className:"px-4 py-2 bg-[#00ADB5] text-white rounded-lg hover:bg-[#00ADB5]/80 transition-colors",children:"Try Again"})]})}):n?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-[#00ADB5] rounded-lg",children:e.jsx(oe,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"CodeArena"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:"Battle. Code. Win."})]})]}),e.jsx("nav",{className:"hidden md:flex items-center gap-1",children:[{id:"home",label:"Home",icon:oe,path:""},{id:"battle",label:"Battle",icon:te,path:"battle"},{id:"history",label:"History",icon:nt,path:"battle/history"},{id:"practice",label:"Practice",icon:pe,path:"practice"},{id:"leaderboard",label:"Ranks",icon:Z,path:"leaderboard"}].map(j=>e.jsxs("button",{onClick:()=>t(`/dashboard/codearena/${j.path}`),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${b===j.id?"bg-[#00ADB5]/10 dark:bg-[#00ADB5]/20 text-[#00ADB5] dark:text-[#00ADB5]":"text-gray-600 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(j.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:j.label})]},j.id))}),e.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-4 py-2 bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700 rounded-lg hover:bg-amber-100 dark:hover:bg-amber-900/50 transition-all",children:[e.jsx(X,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),e.jsx("span",{className:"text-amber-700 dark:text-amber-300 font-semibold",children:M?.coins?.toLocaleString()||0})]})]})})}),e.jsx("main",{className:"max-w-6xl mx-auto px-4 py-6",children:e.jsxs(Zt,{children:[e.jsx(re,{path:"/",element:e.jsx(ii,{stats:E,quickActions:R,navigate:t})}),e.jsx(re,{path:"/battle",element:e.jsx(Na,{wallet:M})}),e.jsx(re,{path:"/battle/history",element:e.jsx(fa,{})}),e.jsx(re,{path:"/battle/:battleId",element:e.jsx(qn,{})}),e.jsx(re,{path:"/battle/results/:battleId",element:e.jsx(ka,{})}),e.jsx(re,{path:"/practice",element:e.jsx(Xn,{})}),e.jsx(re,{path:"/practice/:challengeId",element:e.jsx(_n,{})}),e.jsx(re,{path:"/challenge/:challengeId",element:e.jsx(Un,{})}),e.jsx(re,{path:"/leaderboard",element:e.jsx(Vn,{})}),e.jsx(re,{path:"/seed",element:e.jsx(ei,{})})]})}),e.jsx(le,{children:d&&e.jsx(ti,{wallet:M,onClose:()=>k(!1)})}),e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-4 py-2 z-50",children:e.jsx("div",{className:"flex justify-around",children:[{id:"home",label:"Home",icon:oe,path:""},{id:"battle",label:"Battle",icon:te,path:"battle"},{id:"history",label:"History",icon:nt,path:"battle/history"},{id:"leaderboard",label:"Ranks",icon:Z,path:"leaderboard"}].map(j=>e.jsxs("button",{onClick:()=>t(`/dashboard/codearena/${j.path}`),className:`flex flex-col items-center gap-1 p-2 ${b===j.id?"text-[#00ADB5]":"text-gray-400"}`,children:[e.jsx(j.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs",children:j.label})]},j.id))})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-8 max-w-md w-full text-center",children:[e.jsx(oe,{className:"w-12 h-12 text-[#00ADB5] mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Login Required"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-4",children:"Please log in to access CodeArena."}),e.jsx("button",{onClick:()=>t("/login"),className:"px-4 py-2 bg-[#00ADB5] text-white rounded-lg hover:bg-[#00ADB5]/80 transition-colors",children:"Go to Login"})]})})},ii=({stats:t,quickActions:a,navigate:n})=>{const{fetchGlobalLeaderboard:i}=xe(),[s,m]=r.useState([]),[h,p]=r.useState([]),[b,y]=r.useState(!0),[M,F]=r.useState(!0);return r.useEffect(()=>{const w=async()=>{try{const d=await z("/battles?status=active"),k=await z("/battles?status=waiting"),N=await z("/battles?status=countdown"),T=d.battles||[],O=k.battles||[],E=N.battles||[],R=[...T,...E,...O].slice(0,5).map(j=>({id:j.id||j._id,status:j.status,difficulty:j.difficulty,entryFee:j.entryFee,prize:j.prize,participants:j.participants?.length>0?j.participants.map(S=>({odId:S.odId||S.userId,userName:S.userName||S.odName||"Player",userAvatar:S.userAvatar||S.odProfilePic})):[{odId:j.creatorId,userName:j.creatorName||"Player",userAvatar:j.creatorProfilePic}]}));m(R)}catch(d){console.error("Error loading battles:",d),m([])}finally{y(!1)}},L=async()=>{try{if(i){const d=await i();p(d?.slice(0,3)||[])}}catch(d){console.error("Error loading top players:",d),p([])}finally{F(!1)}};w(),L();const g=setInterval(w,3e4),f=setInterval(L,6e4);return()=>{clearInterval(g),clearInterval(f)}},[]),e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6 pb-20 md:pb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome Back! ðŸ‘‹"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:"Ready to test your coding skills? Battle other developers or practice with Codeforces problems."}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>n("/dashboard/codearena/battle"),className:"flex items-center gap-2 px-5 py-2.5 bg-[#00ADB5] text-white font-medium rounded-lg hover:bg-[#00ADB5]/80 transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),"Find Match"]}),e.jsxs("button",{onClick:()=>n("/dashboard/codearena/practice"),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(pe,{className:"w-4 h-4"}),"Practice"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map((w,L)=>e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:L*.05},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("div",{className:`inline-flex p-2 rounded-lg ${w.color} mb-3`,children:e.jsx(w.icon,{className:"w-4 h-4"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:w.value}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-white",children:w.label})]},w.label))}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:a.map((w,L)=>e.jsxs(l.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1+L*.05},onClick:()=>n(`/dashboard/codearena/${w.path}`),className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5 text-left hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-sm transition-all group",children:[e.jsx("div",{className:`inline-flex p-3 rounded-lg ${w.color} mb-4`,children:e.jsx(w.icon,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:w.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-white mb-4",children:w.description}),e.jsxs("div",{className:"flex items-center gap-1 text-[#00ADB5] dark:text-[#00ADB5] text-sm font-medium group-hover:gap-2 transition-all",children:[e.jsx("span",{children:"Get Started"}),e.jsx(Ge,{className:"w-4 h-4"})]})]},w.title))}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-green-600"}),"Live Battles"]}),e.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600 bg-green-50 dark:bg-green-900/30 px-2 py-1 rounded-full",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Live"]})]}),b?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ae,{className:"w-5 h-5 text-gray-400 animate-spin"})}):s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-white",children:[e.jsx(Ye,{className:"w-8 h-8 mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No active battles"}),e.jsx("button",{onClick:()=>n("/dashboard/codearena/battle"),className:"mt-2 text-xs text-[#00ADB5] hover:underline",children:"Start a battle"})]}):e.jsx("div",{className:"space-y-3",children:s.map((w,L)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex -space-x-2",children:w.participants?.slice(0,2).map((g,f)=>e.jsx("div",{className:`w-7 h-7 rounded-full border-2 border-white dark:border-gray-800 flex items-center justify-center text-xs font-bold text-white ${f===0?"bg-[#00ADB5]":"bg-purple-500"}`,children:g.userName?.[0]||"?"},f))}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[w.participants?.[0]?.userName||"Player"," vs ",w.participants?.[1]?.userName||"Waiting..."]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white capitalize",children:w.difficulty||"Medium"})]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${w.status==="waiting"?"text-[#00ADB5] bg-[#00ADB5]/10 dark:bg-[#00ADB5]/20":"text-orange-600 bg-orange-50 dark:bg-orange-900/30"}`,children:w.status==="waiting"?"Waiting":"In Progress"})]},w.id||L))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4 text-amber-500"}),"Top Players"]}),e.jsx("button",{onClick:()=>n("/dashboard/codearena/leaderboard"),className:"text-sm text-[#00ADB5] dark:text-[#00ADB5] hover:underline",children:"View All"})]}),M?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ae,{className:"w-5 h-5 text-gray-400 animate-spin"})}):h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-white",children:[e.jsx(ye,{className:"w-8 h-8 mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"No rankings yet"}),e.jsx("button",{onClick:()=>n("/dashboard/codearena/practice"),className:"mt-2 text-xs text-[#00ADB5] hover:underline",children:"Start solving challenges"})]}):e.jsx("div",{className:"space-y-3",children:h.map(w=>{const L=["text-amber-500 bg-amber-50 dark:bg-amber-900/30","text-gray-400 bg-gray-100 dark:bg-gray-700","text-orange-500 bg-orange-50 dark:bg-orange-900/30"];return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold ${L[w.rank-1]||"text-gray-600 dark:text-white bg-gray-50 dark:bg-gray-700"}`,children:w.rank}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:w.odName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:[w.problemsSolved," solved"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-[#00ADB5] dark:text-[#00ADB5]",children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsx("span",{className:"text-sm font-medium",children:w.rating})]})]},w.odId)})})]})]})]})},yi=()=>e.jsx(ai,{children:e.jsx(ni,{})});export{yi as default};
