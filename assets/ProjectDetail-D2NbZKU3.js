import{c as de,r as c,j as e,I as f,V as X,X as Q,J as v,S as A,C as N,t as ce,l as oe,n as xe,u as me,H as o,D as he,E as ge,e as z,K as pe,T as be}from"./index-CETrkkYC.js";import{C as ue,c as ye}from"./ChatWindow-CxF8d8Jv.js";import{i as je,c as fe,d as we,e as Ne,f as ke,h as ve,m as Ce,j as Se,k as Pe}from"./marketplaceServiceNew-n9NKbbAZ.js";import{C as De,L as F}from"./marketplace-Deg-FW8s.js";import{C as q}from"./chevron-right-_J-7X1TA.js";import{S as I,P as C}from"./shopping-cart-CK6V0_NG.js";import{E as Ae}from"./eye-DuldV51e.js";import{G as Re}from"./github-BbDkusPy.js";import{S as J}from"./shield-BA-2l4LI.js";import{F as Ve}from"./file-text-CI-SAPCg.js";import{P as D}from"./play-KHNIFZId.js";import"./send-Cw1o22Jv.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],K=de("chevron-left",Ee);function Fe({images:a,alt:l}){const[r,p]=c.useState(0),[u,t]=c.useState(!1);if(!a||a.length===0)return e.jsx("div",{className:"w-full h-96 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:e.jsx("div",{className:"text-white text-6xl font-bold",children:l.charAt(0)})});const i=()=>{p(n=>n===0?a.length-1:n-1)},x=()=>{p(n=>n===a.length-1?0:n+1)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative rounded-xl overflow-hidden bg-gray-100 dark:bg-gray-800 group cursor-pointer",children:[e.jsx(f.img,{src:a[r],alt:`${l} - Image ${r+1}`,className:"w-full h-96 object-cover",onClick:()=>t(!0),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}},r),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),i()},className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(K,{className:"w-6 h-6"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),x()},className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(q,{className:"w-6 h-6"})})]}),a.length>1&&e.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:[r+1," / ",a.length]})]}),a.length>1&&e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:a.map((n,h)=>e.jsx(f.button,{onClick:()=>p(h),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all ${r===h?"scale-105":"border-gray-300 dark:border-gray-600 hover:border-[#00ADB5]/50"}`,style:r===h?{borderColor:"#00ADB5"}:{},whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx("img",{src:n,alt:`Thumbnail ${h+1}`,className:"w-full h-full object-cover"})},h))}),e.jsx(X,{children:u&&e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>t(!1),className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",children:[e.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-white hover:text-gray-300 p-2 rounded-full bg-black/50 hover:bg-black/70 transition-colors",children:e.jsx(Q,{className:"w-6 h-6"})}),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),i()},className:"absolute left-4 text-white hover:text-gray-300 p-2 rounded-full bg-black/50 hover:bg-black/70 transition-colors",children:e.jsx(K,{className:"w-8 h-8"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),x()},className:"absolute right-4 text-white hover:text-gray-300 p-2 rounded-full bg-black/50 hover:bg-black/70 transition-colors",children:e.jsx(q,{className:"w-8 h-8"})})]}),e.jsx(f.img,{src:a[r],alt:`${l} - Full size`,className:"max-w-full max-h-full object-contain",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2},onClick:n=>n.stopPropagation()},r),e.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/70 text-white px-4 py-2 rounded-full",children:[r+1," / ",a.length]})]})})]})}function Ie({isOpen:a,onClose:l,project:r,onConfirm:p,isPurchasing:u}){return e.jsx(X,{children:a&&e.jsxs(e.Fragment,{children:[e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40"}),e.jsxs(f.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl z-50 w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Confirm Purchase"}),e.jsx("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 dark:text-white dark:hover:text-gray-200 p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(Q,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-4",children:[r.images&&r.images.length>0?e.jsx("img",{src:r.images[0],alt:r.title,className:"w-24 h-24 rounded-lg object-cover"}):e.jsx("div",{className:"w-24 h-24 rounded-lg flex items-center justify-center text-white text-3xl font-bold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:r.title.charAt(0)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:r.title}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-white mb-2",children:["by ",r.sellerName]}),e.jsx("div",{className:"flex items-center gap-2",children:r.techStack.slice(0,2).map((t,i)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-white rounded text-xs",children:t},i))})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"What you'll get:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-white",children:[e.jsx(v,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{children:"Full source code access"})]}),r.links.github&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-white",children:[e.jsx(v,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{children:"GitHub repository"})]}),r.links.liveDemo&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-white",children:[e.jsx(v,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{children:"Live demo access"})]}),r.links.documentation&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-white",children:[e.jsx(v,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{children:"Documentation"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-white",children:[e.jsx(v,{className:"w-5 h-5 text-green-500"}),e.jsxs("span",{children:[r.licenseType," license"]})]})]})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700 dark:text-white",children:"Total Price:"}),e.jsx("span",{className:"text-3xl font-bold",style:{color:"#00ADB5"},children:r.isFree?"FREE":`$${r.price}`})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:l,className:"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white rounded-lg font-semibold hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",disabled:u,children:"Cancel"}),e.jsx("button",{onClick:p,disabled:u,className:"flex-1 px-4 py-3 text-white rounded-lg font-semibold transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{children:r.isFree?"Get Free":"Purchase Now"})]})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white text-center mt-4",children:"By purchasing, you agree to our Terms of Service"})]})]})})}function Be({reviews:a,averageRating:l,totalReviews:r}){const p=i=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(i),t=(()=>{const i=[0,0,0,0,0];return a.forEach(x=>{i[x.rating-1]++}),i.reverse()})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Customer Reviews"}),e.jsxs("div",{className:"flex items-start gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl font-bold text-gray-900 dark:text-white mb-2",children:l.toFixed(1)}),e.jsx("div",{className:"flex items-center justify-center gap-1 mb-2",children:[...Array(5)].map((i,x)=>e.jsx(A,{className:`w-5 h-5 ${x<Math.floor(l)?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600"}`},x))}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-white",children:[r," review",r!==1?"s":""]})]}),e.jsx("div",{className:"flex-1 space-y-2",children:[5,4,3,2,1].map((i,x)=>{const n=t[x],h=r>0?n/r*100:0;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-white w-8",children:[i,"â˜…"]}),e.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-400 transition-all duration-500",style:{width:`${h}%`}})}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-white w-12 text-right",children:n})]},i)})})]})]}),e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 border border-gray-200 dark:border-gray-700 text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-white",children:"No reviews yet. Be the first to review!"})}):a.map((i,x)=>e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:i.buyerAvatar||"https://via.placeholder.com/40",alt:i.buyerName,className:"w-12 h-12 rounded-full border-2",style:{borderColor:"#00ADB5"}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:i.buyerName}),i.isVerifiedWatcher&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-semibold rounded-full",children:[e.jsx(N,{className:"w-3 h-3"}),"Verified Watcher"]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white",children:p(i.createdAt)})]}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((n,h)=>e.jsx(A,{className:`w-4 h-4 ${h<i.rating?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600"}`},h))})]}),e.jsx("p",{className:"text-gray-700 dark:text-white leading-relaxed",children:i.comment})]})]})},i.id))})]})}function qe(){const{projectId:a}=ce(),{user:l}=oe(),{userprofile:r,avatrUrl:p}=xe(),u=me(),[t,i]=c.useState(null),[x,n]=c.useState([]),[h,B]=c.useState(!0),[m,W]=c.useState(!1),[Z,R]=c.useState(!1),[ee,L]=c.useState(!1),[$,te]=c.useState(null),[se,T]=c.useState(!1),[re,V]=c.useState(!1),[y,M]=c.useState(5),[S,G]=c.useState(""),[_,O]=c.useState(!1),[d,U]=c.useState({demo:!1,explanation:!1}),[P,Y]=c.useState(!1),[j,ae]=c.useState(null);c.useEffect(()=>{a&&(E(),je(a))},[a]);const E=async()=>{if(a)try{B(!0);const[s,g]=await Promise.all([fe(a),we(a)]);if(s){i(s),n(g);try{const w=await Ne(s.sellerId);ae(w)}catch(w){console.error("Error loading seller achievements:",w)}if(l?.id){const w=await ke(l.id,a);if(W(w),w)try{const k=await ve(a,l.id);k&&(U(k.videoWatched),Y(k.canReview))}catch(k){console.error("Error loading video status:",k)}}}else o.error("Project not found"),u("/dashboard/marketplace")}catch(s){console.error("Error loading project:",s);const g=s?.code==="permission-denied"?"Access denied. Please make sure Firestore rules are deployed.":"Failed to load project. Please try again.";o.error(g),u("/dashboard/marketplace")}finally{B(!1)}},H=async s=>{if(!(!a||!l?.id))try{const g=await Ce(a,s,l.id);U(g.videoWatched),Y(g.canReview),g.canReview?o.success("ðŸŽ‰ You can now leave a review!",{duration:4e3}):o.success(g.message)}catch(g){console.error("Error marking video as watched:",g),o.error("Failed to update watch status")}},le=async()=>{if(!(!l||!t)){L(!0);try{await Se(t.id,t,l.id,r?.name||"User"),o.success(t.isFree?"Project added to your library!":"Purchase successful!"),W(!0),R(!1),E()}catch(s){console.error("Error purchasing:",s),o.error("Purchase failed. Please try again.")}finally{L(!1)}}},ie=async()=>{if(!(!l||!t))try{const s=await ye(l.id,r?.name||"User",p||"",t.sellerId,t.sellerName,t.sellerAvatar,t.id,t.title);if(s.status==="pending"){s.isNew?o.success("Chat request sent! Waiting for seller to accept."):o("Your chat request is pending. Waiting for seller to accept.",{icon:"â³"});return}if(s.status==="rejected"){o.error("Your chat request was declined by the seller.");return}te({id:s.chatId,participants:[l.id,t.sellerId],participantNames:{[l.id]:r?.name||"User",[t.sellerId]:t.sellerName},participantAvatars:{[l.id]:p||"",[t.sellerId]:t.sellerAvatar},projectId:t.id,projectTitle:t.title,status:s.status,requesterId:l.id,sellerId:t.sellerId,lastMessage:"",lastMessageTime:new Date,unreadCount:{[l.id]:0,[t.sellerId]:0}}),T(!0)}catch(s){console.error("Error creating chat:",s),o.error("Failed to start chat")}},ne=async()=>{if(!l||!t||!S.trim()){o.error("Please write a review");return}O(!0);try{await Pe(t.id,l.id,r?.name||"User",p||"",y,S),o.success("Review submitted!"),V(!1),G(""),M(5),E()}catch(s){console.error("Error submitting review:",s),o.error("Failed to submit review")}finally{O(!1)}};if(h)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent rounded-full animate-spin",style:{borderColor:"#00ADB5",borderTopColor:"transparent"}})});if(!t)return null;const b=l?.id===t.sellerId;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("button",{onClick:()=>u("/dashboard/marketplace"),className:"mb-6 flex items-center gap-2 text-gray-600 dark:text-white transition-colors",onMouseEnter:s=>s.currentTarget.style.color="#00ADB5",onMouseLeave:s=>s.currentTarget.style.color="",children:[e.jsx(he,{className:"w-5 h-5"}),"Back to Marketplace"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(Fe,{images:t.images,alt:t.title}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-white",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"font-semibold",children:t.rating}),e.jsxs("span",{children:["(",t.reviewCount," reviews)"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.views," views"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.purchases," sales"]})]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-700 dark:text-white leading-relaxed whitespace-pre-wrap",children:t.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Tech Stack"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.techStack.map((s,g)=>e.jsx("span",{className:"px-3 py-1.5 rounded-lg text-sm font-medium",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:s},g))})]}),(t.links.github||t.links.liveDemo||t.links.documentation||t.links.video)&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Project Links"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.links.github&&e.jsxs("a",{href:m||b?t.links.github:"#",target:m||b?"_blank":void 0,rel:"noopener noreferrer",onClick:s=>{!m&&!b&&(s.preventDefault(),o.error("Purchase to access"))},className:"flex items-center gap-2 px-4 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{children:"GitHub Repository"}),!m&&!b&&e.jsx(J,{className:"w-4 h-4 ml-auto"})]}),t.links.liveDemo&&e.jsxs("a",{href:t.links.liveDemo,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"Live Demo"})]}),t.links.documentation&&e.jsxs("a",{href:m||b?t.links.documentation:"#",target:m||b?"_blank":void 0,rel:"noopener noreferrer",onClick:s=>{!m&&!b&&(s.preventDefault(),o.error("Purchase to access"))},className:"flex items-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{children:"Documentation"}),!m&&!b&&e.jsx(J,{className:"w-4 h-4 ml-auto"})]}),t.links.video&&e.jsxs("a",{href:t.links.video,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:"Video Demo"})]})]})]}),(t.links.demoVideo||t.links.explanationVideo)&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:["ðŸ“¹ Project Videos",e.jsx("span",{className:"text-xs bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400 px-2 py-1 rounded-full",children:"Watch & Review to support the creator!"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[t.links.demoVideo&&e.jsxs("div",{className:`bg-gradient-to-br rounded-xl p-4 border ${d.demo?"from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-300 dark:border-green-700":"from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 border-purple-200 dark:border-purple-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${d.demo?"bg-green-500":"bg-purple-500"}`,children:d.demo?e.jsx(N,{className:"w-4 h-4 text-white"}):e.jsx(D,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:["ðŸŽ¬ Demo Video",d.demo&&e.jsx("span",{className:"text-xs bg-green-500 text-white px-2 py-0.5 rounded-full",children:"âœ“ Watched"})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"See the project in action"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("a",{href:t.links.demoVideo,target:"_blank",rel:"noopener noreferrer",className:"block w-full px-4 py-3 bg-purple-600 text-white text-center rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Watch Demo Video â†’"}),m&&!d.demo&&e.jsxs("button",{onClick:()=>H("demo"),className:"w-full px-4 py-2 bg-green-600 text-white text-center rounded-lg hover:bg-green-700 transition-colors font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"I watched this video"]})]})]}),t.links.explanationVideo&&e.jsxs("div",{className:`bg-gradient-to-br rounded-xl p-4 border ${d.explanation?"from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-300 dark:border-green-700":"from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${d.explanation?"bg-green-500":"bg-blue-500"}`,children:d.explanation?e.jsx(N,{className:"w-4 h-4 text-white"}):e.jsx(D,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:["ðŸ’¡ Explanation Video",d.explanation&&e.jsx("span",{className:"text-xs bg-green-500 text-white px-2 py-0.5 rounded-full",children:"âœ“ Watched"})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Learn about the concept & idea"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("a",{href:t.links.explanationVideo,target:"_blank",rel:"noopener noreferrer",className:"block w-full px-4 py-3 bg-blue-600 text-white text-center rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Watch Explanation Video â†’"}),m&&!d.explanation&&e.jsxs("button",{onClick:()=>H("explanation"),className:"w-full px-4 py-2 bg-green-600 text-white text-center rounded-lg hover:bg-green-700 transition-colors font-medium text-sm flex items-center justify-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"I watched this video"]})]})]})]}),m&&(t.links.demoVideo||t.links.explanationVideo)&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Video Watch Progress:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded ${d.demo?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-200 text-gray-500 dark:bg-gray-600 dark:text-gray-400"}`,children:["Demo ",d.demo?"âœ“":"â—‹"]}),e.jsxs("span",{className:`px-2 py-1 rounded ${d.explanation?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-200 text-gray-500 dark:bg-gray-600 dark:text-gray-400"}`,children:["Explanation ",d.explanation?"âœ“":"â—‹"]})]})]}),P?e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2 text-center",children:"âœ… You can now write a verified review!"}):e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2 text-center",children:"âš ï¸ Watch both videos to write a verified review"})]}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-3 text-center",children:"ðŸª™ Rate this project above 3.5 stars to reward the creator with coins!"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-1",children:"Category"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:De[t.category]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-1",children:"License"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:F[t.licenseType]})]})]})]}),e.jsx(Be,{reviews:x,averageRating:t.rating,totalReviews:t.reviewCount}),m&&!b&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:!P&&(t.links.demoVideo||t.links.explanationVideo)?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full mb-4",children:e.jsx(D,{className:"w-8 h-8 text-amber-600 dark:text-amber-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Watch Videos to Review"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"Watch both the demo and explanation videos to unlock the ability to write a verified review."}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full ${d.demo?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-gray-400"}`,children:[d.demo?"âœ“":"â—‹"," Demo Video"]}),e.jsxs("span",{className:`px-3 py-1 rounded-full ${d.explanation?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-gray-400"}`,children:[d.explanation?"âœ“":"â—‹"," Explanation Video"]})]})]}):re?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:["Write Your Review",P&&e.jsx("span",{className:"text-xs bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 px-2 py-1 rounded-full",children:"âœ“ Verified Watcher"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white mb-2",children:"Rating"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(s=>e.jsx("button",{onClick:()=>M(s),className:"focus:outline-none",children:e.jsx(A,{className:`w-8 h-8 ${s<=y?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600"}`})},s))}),e.jsxs("div",{className:"mt-2 text-xs",children:[y>=5&&e.jsxs("p",{className:"text-green-600 dark:text-green-400",children:["ðŸª™ 5â­ = Seller earns ",e.jsx("strong",{children:"20 coins"})," (Excellent!)"]}),y===4&&e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["ðŸª™ 4â­ = Seller earns ",e.jsx("strong",{children:"15 coins"})," (Great!)"]}),y>=3.5&&y<4&&e.jsxs("p",{className:"text-amber-600 dark:text-amber-400",children:["ðŸª™ 3.5â­ = Seller earns ",e.jsx("strong",{children:"10 coins"})," (Good!)"]}),y>0&&y<3.5&&e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ratings below 3.5 don't earn coins for the seller"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white mb-2",children:"Review"}),e.jsx("textarea",{value:S,onChange:s=>G(s.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-[#00ADB5]",placeholder:"Share your experience with this project..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>V(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ne,disabled:_||!S.trim(),className:"flex-1 px-4 py-2 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90",style:{backgroundColor:"#00ADB5"},children:_?"Submitting...":"Submit Review"})]})]}):e.jsxs("div",{children:[P&&e.jsx("div",{className:"mb-3 p-2 bg-green-100 dark:bg-green-900/30 rounded-lg text-center",children:e.jsxs("span",{className:"text-sm text-green-700 dark:text-green-400",children:[e.jsx(N,{className:"w-4 h-4 inline mr-1"}),'Your review will be marked as "Verified Watcher"']})}),e.jsx("button",{onClick:()=>V(!0),className:"w-full px-4 py-3 text-white rounded-lg transition-colors font-semibold hover:opacity-90",style:{backgroundColor:"#00ADB5"},children:"Write a Review"})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 sticky top-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-4xl font-bold mb-2",style:{color:"#00ADB5"},children:t.isFree?"FREE":`$${t.price}`}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white",children:F[t.licenseType]})]}),b?e.jsx(z,{to:"/dashboard/marketplace/my-listings",className:"block w-full px-4 py-3 bg-gray-600 text-white rounded-lg text-center font-semibold hover:bg-gray-700 transition-colors mb-3",children:"View in My Listings"}):m?e.jsx("div",{className:"text-center py-3 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg font-semibold mb-3",children:"âœ“ Already Purchased"}):e.jsxs("button",{onClick:()=>R(!0),className:"w-full px-4 py-3 text-white rounded-lg font-semibold transition-all flex items-center justify-center gap-2 mb-3 hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(I,{className:"w-5 h-5"}),t.isFree?"Get for Free":"Buy Now"]}),!b&&e.jsxs("button",{onClick:ie,className:"w-full px-4 py-3 border-2 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 hover:bg-[#00ADB5]/10",style:{borderColor:"#00ADB5",color:"#00ADB5"},children:[e.jsx(pe,{className:"w-5 h-5"}),"Contact Seller"]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-3",children:"Sold by"}),e.jsxs(z,{to:`/dashboard/marketplace/seller/${t.sellerId}`,className:"flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 p-2 rounded-lg transition-colors",children:[e.jsx("img",{src:t.sellerAvatar||"https://via.placeholder.com/40",alt:t.sellerName,className:"w-12 h-12 rounded-full border-2",style:{borderColor:"#00ADB5"}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.sellerName}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white",children:"View Profile"})]})]}),j&&j.badges.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-br from-amber-50 to-yellow-100 dark:from-amber-900/20 dark:to-yellow-900/20 rounded-lg border border-amber-200 dark:border-amber-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(be,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"text-sm font-semibold text-amber-700 dark:text-amber-400",children:"Seller Achievements"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.badges.map(s=>e.jsxs("div",{className:"group relative px-2 py-1 bg-white dark:bg-gray-800 rounded-full border border-amber-300 dark:border-amber-600 cursor-help",children:[e.jsxs("span",{className:"text-sm",children:[s.emoji," ",s.name]}),e.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:[s.description,e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]},s.id))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"ðŸ’°"}),e.jsxs("span",{children:[j.stats.totalSales," sales"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"â­"}),e.jsxs("span",{children:[j.stats.avgRating.toFixed(1)," avg rating"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"ðŸ‘ï¸"}),e.jsxs("span",{children:[j.stats.totalViews," views"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"ðŸª™"}),e.jsxs("span",{children:[j.stats.totalCoinsEarned," coins earned"]})]})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"What's Included"}),e.jsxs("ul",{className:"space-y-3 text-sm text-gray-700 dark:text-white",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Full source code"})]}),t.links.github&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"GitHub repository access"})]}),t.links.documentation&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Complete documentation"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:F[t.licenseType]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"Lifetime access"})]})]})]})]})]})]}),e.jsx(Ie,{isOpen:Z,onClose:()=>R(!1),project:t,onConfirm:le,isPurchasing:ee}),$&&e.jsx(ue,{chat:$,isOpen:se,onClose:()=>T(!1)})]})}export{qe as default};
