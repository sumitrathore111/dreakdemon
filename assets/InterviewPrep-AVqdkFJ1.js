import{t as V,z as F,r as s,j as a,I as i,e as G,D as J,h as K,V as U}from"./index-Cx0yxhaY.js";import{C as S}from"./CustomSelect-D5z_Ei2C.js";import{g as W,f as X}from"./roadmapService-D3g2643b.js";import{C as P}from"./circle-question-mark-BliAgViB.js";import{B as Y}from"./building-_dUvwIOr.js";import{C as Z}from"./chevron-down-C-2Wyi4P.js";import{C as A}from"./chevron-right-DeS7ndF0.js";const q=[{value:"all",label:"All Difficulties"},{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}];function ne(){const{slug:g}=V(),[x]=F(),[Q,E]=s.useState([]),[o,y]=s.useState(null),[h,D]=s.useState([]),[L,b]=s.useState(!0),[R,f]=s.useState(!1),[m,_]=s.useState(""),[d,B]=s.useState(x.get("difficulty")||"all"),[c,j]=s.useState(x.get("category")||"all"),[p,$]=s.useState(x.get("company")||""),[I,M]=s.useState([]),[k,O]=s.useState([]),[z,v]=s.useState(new Set),[r,n]=s.useState({page:1,limit:20,total:0,totalPages:0}),N=s.useCallback(async()=>{try{b(!0);const e=await W();if(E(e),g){const t=e.find(l=>l.slug===g);t&&y(t)}else e.length>0&&y(e[0])}catch(e){console.error("Error loading roadmaps:",e)}finally{b(!1)}},[g]),w=s.useCallback(async()=>{if(o)try{f(!0);const e=await X(o._id,{difficulty:d!=="all"?d:void 0,category:c!=="all"?c:void 0,company:p||void 0,page:r.page,limit:r.limit});D(e.questions),M(e.filters.categories),O(e.filters.companies),n(t=>({...t,total:e.pagination.total,totalPages:e.pagination.totalPages}))}catch(e){console.error("Error loading questions:",e)}finally{f(!1)}},[o,d,c,p,r.page,r.limit]);s.useEffect(()=>{N()},[N]),s.useEffect(()=>{o&&w()},[o,w]);const H=e=>{v(t=>{const l=new Set(t);return l.has(e)?l.delete(e):l.add(e),l})},u=h.filter(e=>{if(!m)return!0;const t=m.toLowerCase();return e.question.toLowerCase().includes(t)||e.answer.toLowerCase().includes(t)||e.tags.some(l=>l.toLowerCase().includes(t))}),T=[{value:"all",label:"All Categories"},...I.map(e=>({value:e,label:e}))];return L?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-6",children:a.jsxs("div",{className:"max-w-5xl mx-auto animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-8"}),a.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded mb-6"}),a.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>a.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded-xl"},e))})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-6",children:a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[a.jsxs(G,{to:"/dashboard/roadmaps",className:"inline-flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-[#00ADB5] mb-4 transition-colors",children:[a.jsx(J,{className:"w-4 h-4"}),"Back to Roadmaps"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center",children:a.jsx(P,{className:"w-7 h-7 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:"Interview Preparation"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Practice questions from top companies"})]})]})]}),a.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 border border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:Q.map(e=>a.jsxs("button",{onClick:()=>{y(e),n(t=>({...t,page:1})),j("all")},className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${o?._id===e._id?"bg-[#00ADB5] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[a.jsx("span",{children:e.icon}),a.jsx("span",{className:"font-medium",children:e.title}),a.jsxs("span",{className:"text-xs opacity-75",children:["(",e.totalQuestions,")"]})]},e._id))})}),a.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search questions...",value:m,onChange:e=>_(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-[#00ADB5] focus:border-transparent"})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx(S,{value:d,onChange:e=>{B(e),n(t=>({...t,page:1}))},options:q,placeholder:"Difficulty"}),a.jsx(S,{value:c,onChange:e=>{j(e),n(t=>({...t,page:1}))},options:T,placeholder:"Category"}),k.length>0&&a.jsxs("div",{className:"relative",children:[a.jsx(Y,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:p,onChange:e=>{$(e.target.value),n(t=>({...t,page:1}))},className:"pl-9 pr-8 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white appearance-none cursor-pointer",children:[a.jsx("option",{value:"",children:"All Companies"}),k.map(e=>a.jsx("option",{value:e,children:e},e))]})]})]})]})}),a.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"flex items-center justify-between mb-4",children:[a.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Showing ",u.length," of ",r.total," questions"]}),a.jsx("button",{onClick:()=>v(new Set(h.map(e=>e._id))),className:"text-sm text-[#00ADB5] hover:underline",children:"Expand All"})]}),R?a.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>a.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded-xl animate-pulse"},e))}):u.length===0?a.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[a.jsx(P,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No questions found"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your filters or search query"})]}):a.jsx("div",{className:"space-y-3",children:u.map((e,t)=>{const l=z.has(e._id);return a.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.03*t},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsxs("button",{onClick:()=>H(e._id),className:"w-full p-4 flex items-start gap-4 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a.jsx("span",{className:`inline-block px-2.5 py-1 text-xs font-medium rounded-full ${e.difficulty==="easy"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":e.difficulty==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:e.difficulty})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.question}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded",children:e.category}),e.company&&a.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-2 py-0.5 rounded",children:e.company}),e.tags.slice(0,3).map(C=>a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["#",C]},C))]})]}),a.jsx(Z,{className:`w-5 h-5 text-gray-400 flex-shrink-0 transition-transform ${l?"rotate-180":""}`})]}),a.jsx(U,{children:l&&a.jsx(i.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"border-t border-gray-100 dark:border-gray-700",children:a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Answer:"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 whitespace-pre-wrap",children:e.answer})]})})})]},e._id)})}),r.totalPages>1&&a.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"flex items-center justify-center gap-2 mt-8",children:[a.jsx("button",{onClick:()=>n(e=>({...e,page:e.page-1})),disabled:r.page===1,className:"p-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700",children:a.jsx(A,{className:"w-5 h-5 rotate-180"})}),a.jsxs("span",{className:"px-4 py-2 text-gray-600 dark:text-gray-400",children:["Page ",r.page," of ",r.totalPages]}),a.jsx("button",{onClick:()=>n(e=>({...e,page:e.page+1})),disabled:r.page===r.totalPages,className:"p-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700",children:a.jsx(A,{className:"w-5 h-5"})})]})]})})}export{ne as default};
