import{c as Ve,q as j,i as Qe,k as Xe,r as x,J as b,j as e,K as p,o as ue,g as Ze,B as Ae,d as Z,n as Me,v as J,N as er,X as Be,Z as rr}from"./index-DdMfi3-U.js";import{C as Te}from"./CustomSelect-D1fxksEg.js";import{i as he,g as A}from"./socketService-sRVYVZ_Z.js";import{C as pe}from"./circle-alert-BD7p7N9V.js";import{S as Re}from"./send-DJ9wiIUx.js";import{P as ee}from"./plus-Dmc_B6eH.js";import{T as tr}from"./trash-2-uqlsjZbx.js";import"./chevron-down-BzUXJE80.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ar=Ve("user-minus",sr),nr=async a=>{try{const i=new URLSearchParams;return a&&Object.entries(a).forEach(([M,L])=>{L!==void 0&&i.append(M,L.toString())}),(await j(`/study-groups?${i.toString()}`)).groups}catch(i){return console.error("Error getting study groups:",i),[]}},z=nr,or=async a=>{try{return(await j("/study-groups",{method:"POST",body:JSON.stringify(a)})).group}catch(i){throw console.error("Error creating study group:",i),i}},lr=async a=>{try{await j(`/study-groups/${a}`,{method:"DELETE"})}catch(i){throw console.error("Error deleting study group:",i),i}},dr=async(a,i,y)=>{try{return await j(`/study-groups/${a}/join`,{method:"POST",body:JSON.stringify({userName:i,userAvatar:y})})}catch(M){throw console.error("Error requesting to join study group:",M),M}},ir=async(a,i)=>{try{return(await j(`/study-groups/${a}/approve/${i}`,{method:"POST"})).group}catch(y){throw console.error("Error approving join request:",y),y}},cr=async(a,i)=>{try{return(await j(`/study-groups/${a}/reject/${i}`,{method:"POST"})).group}catch(y){throw console.error("Error rejecting join request:",y),y}},gr=async(a,i)=>{try{return(await j(`/study-groups/${a}/members/${i}`,{method:"DELETE"})).group}catch(y){throw console.error("Error removing member:",y),y}},ye=a=>{if(!a)return"Unknown date";try{if(a?.toDate&&typeof a.toDate=="function")return a.toDate().toLocaleDateString();if(a?.seconds)return new Date(a.seconds*1e3).toLocaleDateString();const i=new Date(a);return isNaN(i.getTime())?"Unknown date":i.toLocaleDateString()}catch{return"Unknown date"}};function jr(){const{user:a}=Qe(),{userprofile:i}=Xe(),[y,M]=x.useState("directory"),[L,$e]=x.useState(""),[G,K]=x.useState([]),[re,Ee]=x.useState(""),[w,be]=x.useState(null),[S,fe]=x.useState(null),[T,U]=x.useState([]),[B,te]=x.useState(""),[Le,V]=x.useState(!1),[R,je]=x.useState([]),[Ge,we]=x.useState(!0),[Ne,se]=x.useState(null),[ae,ne]=x.useState([]),[oe,Ue]=x.useState(12),[ke,N]=x.useState([]),[$,ve]=x.useState(""),[Oe,Q]=x.useState(!1),[k,O]=x.useState({name:"",description:"",topic:"",level:"Beginner",maxMembers:10}),[E,le]=x.useState([]),[qe,de]=x.useState(!1),[q,ie]=x.useState(null),[I,X]=x.useState({skill:"",message:""}),[g,v]=x.useState(null),[Y,W]=x.useState(""),[Se,D]=x.useState([]),De=x.useRef(null),H=x.useRef(null),[C,ce]=x.useState(!1),[Ce,ge]=x.useState(null),[F,Fe]=x.useState({}),[Pe,me]=x.useState({}),[_,xe]=x.useState(new Set),Je=()=>{De.current?.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{Je()},[T]),x.useEffect(()=>{he();const r=A();if(r){ce(r.connected);const l=()=>{console.log("ðŸŸ¢ Socket connected"),ce(!0),a?.id&&r.emit("userOnline",{userId:a.id})},d=()=>{console.log("ðŸ”´ Socket disconnected"),ce(!1)},t=o=>{console.log("ðŸ‘¥ Online users:",o),xe(new Set(o))},c=o=>{console.log("ðŸŸ¢ User online:",o.userId),xe(m=>new Set([...m,o.userId]))},h=o=>{console.log("ðŸ”´ User offline:",o.userId),xe(m=>{const f=new Set(m);return f.delete(o.userId),f})},s=o=>{o.chatId===S&&o.userId!==a?.id&&(ge(o.userName),H.current&&clearTimeout(H.current),H.current=setTimeout(()=>ge(null),3e3))},u=o=>{o.chatId===S&&o.userId!==a?.id&&ge(null)},n=o=>{o.readBy!==a?.id&&me(m=>({...m,[o.messageId]:"read"}))};return r.on("connect",l),r.on("disconnect",d),r.on("userTyping",s),r.on("userStopTyping",u),r.on("messageRead",n),r.on("onlineUsers",t),r.on("userOnline",c),r.on("userOffline",h),r.emit("getOnlineUsers"),()=>{r.off("connect",l),r.off("disconnect",d),r.off("userTyping",s),r.off("userStopTyping",u),r.off("messageRead",n),r.off("onlineUsers",t),r.off("userOnline",c),r.off("userOffline",h),H.current&&clearTimeout(H.current)}}},[S,a?.id]),x.useEffect(()=>{(async()=>{try{we(!0),se(null);const l=await j("/developers/init/page-data");console.log("Developer Connect data loaded:",l),je(l.developers||[]),N(l.studyGroups||[]),le(l.endorsements||[]),(!l.developers||l.developers.length===0)&&se("No developers found. The community is waiting for you!")}catch(l){console.error("Error loading Developer Connect data:",l);try{const[d,t,c]=await Promise.all([j("/developers").catch(()=>[]),j("/study-groups").catch(()=>({groups:[]})),j("/developers/endorsements/me").catch(()=>({endorsements:[]}))]);je(d||[]),N(t.groups||[]),le(c.endorsements||[])}catch{se("Failed to load developers: "+(l instanceof Error?l.message:String(l)))}}finally{we(!1)}})()},[]),x.useEffect(()=>{if(!w||!a){U([]),fe(null);return}let r=!0,l=null;return(async()=>{console.log("Setting up chat for:",a.id,w),V(!0);try{const t=R.find(s=>s.userId===w);if(!t){console.error("Selected developer not found"),V(!1);return}const c=await j("/chats",{method:"POST",body:JSON.stringify({participantIds:[a.id,w],participantNames:[i?.displayName||a.name||"User",t.name],participantAvatars:[i?.avatrUrl||"",t.avatar]})});if(!r)return;fe(c.id),l=c.id,console.log("Chat ID obtained:",c.id);const h=await j(`/chats/${c.id}/messages`);r&&U(h),V(!1);try{he();const s=A();if(s){s.emit("join-chat",c.id),console.log("ðŸ“¡ Joined chat room:",c.id);const u=n=>{console.log("ðŸ“© Received new message:",n),n.chatId===c.id&&r&&U(o=>o.some(f=>f.id===n.id)?o:[...o,n])};s.on("newMessage",u),s._chatMessageHandler=u}}catch(s){console.warn("Socket init failed, falling back to polling:",s)}}catch(t){console.error("Error setting up chat:",t),r&&V(!1)}})(),()=>{r=!1;try{const t=A();if(t&&t.connected&&l){t.emit("leave-chat",l);const c=t._chatMessageHandler;c&&t.off("newMessage",c),delete t._chatMessageHandler}}catch{}}},[w,a?.id,R,i]),x.useEffect(()=>{if(!a||y!=="messages"){ne([]);return}(async()=>{try{const d=(await j("/chats")||[]).map(t=>({participantId:t.participantId,participantName:t.participantName,participantAvatar:t.participantAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.participantName?.replace(/\s+/g,"")}`,lastMessage:t.lastMessage,lastMessageAt:t.lastMessageAt}));ne(d)}catch(l){console.warn("Could not load conversations yet:",l),ne([])}})()},[a?.id,y]),x.useEffect(()=>{if(a)try{he();const r=A();if(!r)return;r.emit("join-user",a.id);const l=n=>{console.log("New join request:",n),g&&g.id===n.groupId&&v(o=>{if(!o)return o;const m=o.joinRequests||[];return m.some(f=>f.userId===n.request.userId)?o:{...o,joinRequests:[...m,n.request]}}),b.success(`${n.request.userName} requested to join your group!`)},d=n=>{console.log("Request approved:",n),b.success(`You've been approved to join ${n.groupName}!`),n.group&&(N(o=>o.map(m=>m.id===n.groupId?n.group:m)),g&&g.id===n.groupId&&v(n.group))},t=n=>{console.log("Request rejected:",n),b.error(`Your request to join ${n.groupName} was rejected.`),g&&g.id===n.groupId&&v(o=>o&&{...o,joinRequests:o.joinRequests?.filter(m=>m.userId!==a.id)||[]})},c=n=>{console.log("Member joined:",n),b.success(`${n.member.name} has joined the group!`),n.group&&(N(o=>o.map(m=>m.id===n.groupId?n.group:m)),g&&g.id===n.groupId&&v(n.group))},h=n=>{console.log("Removed from group:",n),b.error(`You've been removed from ${n.groupName}`),g&&g.id===n.groupId&&v(null),N(o=>o.filter(m=>m.id!==n.groupId))},s=n=>{console.log("Member removed:",n),n.group&&(N(o=>o.map(m=>m.id===n.groupId?n.group:m)),g&&g.id===n.groupId&&v(n.group))},u=n=>{console.log("Group updated:",n),n.group&&(N(o=>o.map(m=>m.id===n.groupId?n.group:m)),g&&g.id===n.groupId&&v(n.group))};return r.on("joinRequest",l),r.on("requestApproved",d),r.on("requestRejected",t),r.on("memberJoined",c),r.on("removedFromGroup",h),r.on("memberRemoved",s),r.on("groupUpdated",u),()=>{r.emit("leave-user",a.id),r.off("joinRequest",l),r.off("requestApproved",d),r.off("requestRejected",t),r.off("memberJoined",c),r.off("removedFromGroup",h),r.off("memberRemoved",s),r.off("groupUpdated",u)}}catch(r){console.warn("Socket initialization failed for study groups:",r)}},[a?.id,g?.id]),x.useEffect(()=>{if(!(!g||!a))try{const r=A();return r&&r.emit("join-group",g.id),()=>{r&&r.emit("leave-group",g.id)}}catch(r){console.warn("Could not join group socket room:",r)}},[g?.id,a]),x.useEffect(()=>{if(!g||!a){D([]);return}(async()=>{try{const l=await j(`/study-groups/${g.id}/messages`);D(l.messages||[])}catch(l){console.warn("Could not load group messages:",l),D([])}})();try{const l=A();if(l){const d=t=>{t.groupId===g.id&&t.message&&D(c=>c.some(h=>h.id===t.message.id)?c:[...c,t.message])};return l.on("newGroupMessage",d),()=>{l.off("newGroupMessage",d)}}}catch(l){console.warn("Socket not available for group messages:",l)}},[g?.id,a]);const P=R.filter(r=>{const l=r.skills||[],d=r.lookingFor||"",t=(r.name||"").toLowerCase().includes(L.toLowerCase())||l.some(s=>s.toLowerCase().includes(L.toLowerCase())),c=G.length===0||G.some(s=>l.includes(s)),h=!re||d.includes(re);return t&&c&&h}),Ie=P.slice(0,oe),Ye=P.length>oe,We=["React","Node.js","Python","Java","MongoDB","TypeScript","AWS","Machine Learning"],He=()=>Ge?e.jsx("div",{className:"space-y-6",children:[1,2,3,4,5,6].map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-700 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded mb-2 w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-1/3"})]})]}),e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded flex-1"}),e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded flex-1"})]})]},r))}):Ne?e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-8 border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(pe,{className:"w-6 h-6 text-red-600 dark:text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-300 mb-2",children:"Unable to Load Developers"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:Ne}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})]})}):R.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(ue,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Developers Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:"Developers who complete their profiles will appear here. Invite your friends!"}),e.jsx("button",{className:"px-6 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Invite Friends"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("input",{type:"text",placeholder:"Search developers by name or skills...",value:L,onChange:r=>$e(r.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#00ADB5] focus:bg-white dark:focus:bg-gray-600 transition-all"})]}),e.jsx(Te,{value:G.length>0?G[0]:"",onChange:r=>{K(r===""?[]:l=>l.includes(r)?l.filter(d=>d!==r):[r])},options:[{value:"",label:"All Skills"},...We.map(r=>({value:r,label:r}))],className:"w-full sm:min-w-[180px] sm:w-auto"}),e.jsx(Te,{value:re,onChange:r=>Ee(r),options:[{value:"",label:"Looking For"},{value:"Teammates",label:"Teammates"},{value:"Mentoring",label:"Mentoring"},{value:"Both",label:"Both"}],className:"w-full sm:min-w-[180px] sm:w-auto"})]}),G.length>0&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[G.map(r=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium text-white",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[r,e.jsx("button",{onClick:()=>K(l=>l.filter(d=>d!==r)),className:"ml-1 hover:bg-white/20 rounded-full p-0.5",children:"Ã—"})]},r)),e.jsx("button",{onClick:()=>K([]),className:"px-3 py-1 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white",children:"Clear all"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-white",children:[e.jsxs("p",{children:["Showing ",Ie.length," of ",P.length," developers"]}),P.length!==R.length&&e.jsxs("p",{children:[R.length," total in directory"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ie.map((r,l)=>e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("img",{src:r.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${r.name}`,alt:r.name||"Developer",className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.name||"Unknown"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:[r.institute||r.college||"Not specified"," â€¢ ",r.yearOfStudy?r.yearOfStudy===1?"1st Year":r.yearOfStudy===2?"2nd Year":r.yearOfStudy===3?"3rd Year":r.yearOfStudy===4?"4th Year":`${r.yearOfStudy} Year`:r.year||"Student"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",style:{color:"#00ADB5"},children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:E.filter(d=>d.recipientId===r.userId).length})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-4 line-clamp-2",children:r.bio||"No bio available"}),e.jsx("div",{className:"rounded-lg p-3 mb-4",style:{background:"rgba(0, 173, 181, 0.1)"},children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Problems Solved"}),e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:r.challenges_solved||r.codeArenaStats?.problemsSolved||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Rank"}),e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:["#",r.marathon_rank||r.codeArenaStats?.rank||"N/A"]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(r.skills||[]).length>0?e.jsxs(e.Fragment,{children:[(r.skills||[]).slice(0,3).map(d=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:d},d)),(r.skills||[]).length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded-full",children:["+",(r.skills||[]).length-3]})]}):e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No skills added"})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-green-700 dark:text-green-400 mb-1",children:r.lookingFor||"Open to opportunities"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 line-clamp-2",children:r.lookingForDetails||"Looking to connect with other developers"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{onClick:()=>{be(r.userId),M("messages")},className:"flex-1 px-3 py-2 text-white text-sm font-semibold rounded-lg transition-all shadow-md hover:opacity-90 flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(J,{className:"w-4 h-4"}),"Message"]}),e.jsxs("button",{onClick:()=>{ie(r),de(!0)},className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white text-sm font-semibold rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"}),"Endorse"]})]})]},r.userId))}),Ye&&e.jsx("div",{className:"text-center mt-8",children:e.jsxs("button",{onClick:()=>Ue(r=>r+12),className:"px-8 py-3 text-white rounded-lg transition-all shadow-lg hover:opacity-90 font-semibold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:["Load More (",P.length-oe," remaining)"]})}),P.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ue,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No developers found"}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Try adjusting your filters"})]})]}),_e=()=>{const r=w?R.find(s=>s.userId===w):null,l=()=>{const s=A();s&&S&&a&&s.emit("typing",{chatId:S,userId:a.id,userName:i?.displayName||a.name||"User"})},d=()=>{const s=A();s&&S&&a&&s.emit("stopTyping",{chatId:S,userId:a.id})},t=()=>{const s=A();s&&S&&a&&(T.filter(n=>n.senderId!==a.id&&!n.isRead).forEach(n=>{s.emit("markAsRead",{messageId:n.id,chatId:S,readBy:a.id})}),w&&Fe(n=>({...n,[w]:0})))};w&&T.length>0&&S&&setTimeout(()=>t(),100);const c=async()=>{if(!B.trim()||!a||!S)return;d();const s=B,u=`temp-${Date.now()}`;te(""),me(o=>({...o,[u]:"sent"}));const n={id:u,senderId:a.id,senderName:i?.displayName||i?.name||a.name||"User",senderAvatar:i?.avatar||i?.avatrUrl||"",message:s,text:s,createdAt:new Date().toISOString(),timestamp:new Date,isRead:!1};U(o=>[...o,n]);try{const o=await j(`/chats/${S}/messages`,{method:"POST",body:JSON.stringify({senderId:a.id,senderName:i?.displayName||i?.name||a.name||"User",senderAvatar:i?.avatar||i?.avatrUrl||"",message:s})});o?.id&&(U(m=>m.map(f=>f.id===u?{...f,id:o.id}:f)),me(m=>{const f={...m};return delete f[u],f[o.id]="delivered",f}))}catch(o){console.error("Error sending message:",o),te(s),U(m=>m.filter(f=>f.id!==u)),b.error("Failed to send message. Please try again.")}},h=s=>{te(s.target.value),s.target.value.trim()?l():d()};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 h-[650px]",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col shadow-lg",children:[e.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 bg-gradient-to-r from-cyan-50/50 via-white to-cyan-50/50 dark:from-gray-800 dark:via-gray-800 dark:to-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2 text-base",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:e.jsx(J,{className:"w-4 h-4 text-white"})}),"Chats"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-10",children:[ae.length," active"]})]}),e.jsxs(p.div,{initial:{scale:.9},animate:{scale:1},className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-[11px] font-semibold ${C?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400"}`,children:[e.jsx(p.div,{animate:{scale:C?[1,1.4,1]:1},transition:{repeat:1/0,duration:1.5},className:`w-2 h-2 rounded-full ${C?"bg-emerald-500":"bg-amber-500"}`}),C?"Live":"Offline"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:ae.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-[#00ADB5]/10 to-[#00ADB5]/5 dark:from-[#00ADB5]/20 dark:to-[#00ADB5]/10 border border-[#00ADB5]/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(J,{className:"w-8 h-8 text-[#00ADB5]"})}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"No conversations yet"}),e.jsx("p",{className:"text-xs mt-2 text-gray-500 dark:text-gray-400",children:"Visit Developer Directory to start chatting"})]}):ae.map(s=>e.jsxs(p.button,{whileHover:{x:4,backgroundColor:"rgba(0,173,181,0.05)"},whileTap:{scale:.99},onClick:()=>be(s.participantId),className:`w-full p-4 transition-all text-left relative overflow-hidden ${w===s.participantId?"bg-gradient-to-r from-[#00ADB5]/10 to-transparent dark:from-[#00ADB5]/15 dark:to-transparent":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[w===s.participantId&&e.jsx(p.div,{layoutId:"selectedConv",className:"absolute left-0 top-0 bottom-0 w-1 rounded-r-full",style:{background:"linear-gradient(180deg, #00ADB5 0%, #00d4ff 100%)"}}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.participantAvatar,alt:s.participantName,className:`w-12 h-12 rounded-full shadow-md transition-all ${w===s.participantId?"ring-2 ring-[#00ADB5] ring-offset-2 dark:ring-offset-gray-800":"ring-1 ring-gray-200 dark:ring-gray-600"}`}),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white dark:border-gray-800 ${_.has(s.participantId)?"bg-emerald-500":"bg-gray-400 dark:bg-gray-500"}`}),F[s.participantId]>0&&e.jsx(p.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -left-1 w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-lg",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:F[s.participantId]>9?"9+":F[s.participantId]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsx("p",{className:`font-semibold truncate text-sm ${F[s.participantId]>0?"text-gray-900 dark:text-white font-bold":w===s.participantId?"text-[#00ADB5]":"text-gray-900 dark:text-white"}`,children:s.participantName}),s.lastMessageAt&&e.jsx("span",{className:`text-[10px] flex-shrink-0 ml-2 ${F[s.participantId]>0?"text-[#00ADB5] font-semibold":"text-gray-400 dark:text-gray-500"}`,children:new Date(s.lastMessageAt).toLocaleDateString([],{month:"short",day:"numeric"})})]}),e.jsx("p",{className:`text-xs truncate flex items-center gap-1 ${F[s.participantId]>0?"text-gray-700 dark:text-gray-200 font-medium":"text-gray-500 dark:text-gray-400"}`,children:s.lastMessage||e.jsx("span",{className:"italic text-gray-400",children:"Start a conversation..."})})]})]})]},s.participantId))})]}),e.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 flex flex-col shadow-lg overflow-hidden",children:!w||!r?e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-br from-cyan-50/30 via-white to-cyan-50/30 dark:from-gray-800 dark:via-gray-800 dark:to-gray-800",children:e.jsxs(p.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,type:"spring"},className:"text-center p-8 max-w-md",children:[e.jsx(p.div,{animate:{y:[0,-8,0]},transition:{repeat:1/0,duration:3,ease:"easeInOut"},className:"w-28 h-28 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 50%, #00ADB5 100%)",backgroundSize:"200% 200%"},children:e.jsx(J,{className:"w-14 h-14 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Start a Conversation"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 leading-relaxed",children:"Select a developer from the list to connect and collaborate in real-time"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-gray-400 dark:text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"Real-time chat"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 bg-[#00ADB5] rounded-full"}),"Instant delivery"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.avatar,alt:r.name,className:"w-11 h-11 rounded-full ring-2 ring-[#00ADB5] ring-offset-2 dark:ring-offset-gray-800 shadow-md"}),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white dark:border-gray-800 ${_.has(r.userId)?"bg-emerald-500":"bg-gray-400 dark:bg-gray-500"}`})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-base",children:r.name}),Ce?e.jsxs(p.p,{initial:{opacity:0},animate:{opacity:1},className:"text-xs text-[#00ADB5] font-medium flex items-center gap-1",children:[e.jsxs("span",{className:"flex gap-0.5",children:[e.jsx(p.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:0},className:"w-1 h-1 bg-[#00ADB5] rounded-full"}),e.jsx(p.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:.2},className:"w-1 h-1 bg-[#00ADB5] rounded-full"}),e.jsx(p.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:.4},className:"w-1 h-1 bg-[#00ADB5] rounded-full"})]}),"typing..."]}):e.jsxs("p",{className:`text-xs flex items-center gap-1 ${_.has(r.userId)?"text-emerald-600 dark:text-emerald-400":"text-gray-500 dark:text-gray-400"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${_.has(r.userId)?"bg-emerald-500":"bg-gray-400"}`}),_.has(r.userId)?"Online":"Offline"]})]})]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-sm ${C?"bg-emerald-50/80 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-700":"bg-amber-50/80 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700"}`,children:[e.jsx(p.div,{animate:{scale:C?[1,1.3,1]:1},transition:{repeat:1/0,duration:2},className:`w-2 h-2 rounded-full ${C?"bg-emerald-500":"bg-amber-500"}`}),e.jsx("span",{className:`${C?"text-emerald-700 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:C?"Live":"Connecting"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5 space-y-4 bg-gray-50 dark:bg-gray-900",children:Le?e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 dark:border-gray-700",style:{borderTopColor:"#00ADB5"}}),e.jsx(J,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-5 h-5 text-cyan-500"})]}),e.jsx("div",{className:"text-gray-500 text-sm mt-4",children:"Loading messages..."})]}):T.length===0?e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center h-full",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-[#00ADB5]/20 to-[#00ADB5]/10 dark:from-[#00ADB5]/20 dark:to-[#00ADB5]/10 flex items-center justify-center mb-4 border border-[#00ADB5]/20",children:e.jsx("span",{className:"text-4xl",children:"ðŸ‘‹"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:"Start the conversation!"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:["Say hello to ",r?.name||"your new connection"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"px-3 py-1 bg-white dark:bg-gray-800 rounded-full text-xs text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-700 shadow-sm",children:T[0]?.createdAt?new Date(T[0].createdAt).toLocaleDateString([],{weekday:"short",month:"short",day:"numeric"}):"Today"})}),T.map(s=>{const u=s.senderId===a?.id||s.senderId===a?.id?.toString()||s.userId===a?.id,n=Pe[s.id]||(s.isRead?"read":"delivered");return e.jsxs(p.div,{initial:{opacity:0,y:15,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.25,type:"spring",stiffness:400,damping:25},className:`flex w-full ${u?"justify-end":"justify-start"}`,children:[!u&&e.jsx("img",{src:s.senderAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s.senderName?.replace(/\s+/g,"")||"User"}`,alt:s.senderName||"User",className:"w-8 h-8 rounded-full flex-shrink-0 mr-2 shadow-md ring-2 ring-white dark:ring-gray-800"}),e.jsx("div",{className:`max-w-[70%] ${u?"mr-2":""}`,children:e.jsxs(p.div,{whileHover:{scale:1.01,y:-1},className:`px-4 py-2.5 relative group ${u?"rounded-2xl rounded-tr-md text-white":"rounded-2xl rounded-tl-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-100 dark:border-gray-600"}`,style:u?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",boxShadow:"0 4px 20px rgba(0, 173, 181, 0.25)"}:{boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)"},children:[e.jsx("p",{className:"text-sm leading-relaxed",children:s.message||s.content||s.text}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${u?"justify-end":""}`,children:[e.jsx("p",{className:`text-[10px] ${u?"text-cyan-100":"text-gray-400"}`,children:s.createdAt?new Date(s.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),u&&e.jsx("span",{className:"text-[10px] text-cyan-100 ml-1",children:n==="read"?e.jsx("span",{title:"Read",children:"âœ“âœ“"}):n==="delivered"?e.jsx("span",{title:"Delivered",className:"opacity-70",children:"âœ“âœ“"}):e.jsx("span",{title:"Sent",className:"opacity-50",children:"âœ“"})})]})]})}),u&&e.jsx("img",{src:i?.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a?.name?.replace(/\s+/g,"")||"Me"}`,alt:"Me",className:"w-8 h-8 rounded-full flex-shrink-0 ml-2 shadow-md ring-2 ring-white dark:ring-gray-800"})]},s.id)}),e.jsx("div",{ref:De}),Ce&&e.jsx(p.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center gap-2 pl-10",children:e.jsx("div",{className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl rounded-tl-md shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:0},className:"w-2 h-2 bg-[#00ADB5] rounded-full"}),e.jsx(p.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:.2},className:"w-2 h-2 bg-[#00ADB5] rounded-full"}),e.jsx(p.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:.4},className:"w-2 h-2 bg-[#00ADB5] rounded-full"})]})})})]})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[B.trim()&&e.jsx(p.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"text-[11px] text-[#00ADB5] mb-2 ml-2",children:"Press Enter to send"}),e.jsxs("div",{className:"flex gap-3 items-center bg-gray-50 dark:bg-gray-900 rounded-2xl p-2 shadow-sm border border-gray-200 dark:border-gray-700 transition-all focus-within:border-[#00ADB5] focus-within:ring-2 focus-within:ring-[#00ADB5]/20",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("input",{type:"text",placeholder:"Type a message...",value:B,onChange:h,onKeyPress:s=>{s.key==="Enter"&&B.trim()&&c()},onBlur:()=>d(),className:"flex-1 px-2 py-2 bg-transparent text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none text-sm"}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),e.jsx(p.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,disabled:!B.trim(),className:`p-2.5 rounded-xl transition-all ${B.trim()?"text-white shadow-lg":"text-gray-400 bg-gray-100 dark:bg-gray-800"}`,style:B.trim()?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",boxShadow:"0 4px 12px rgba(0, 173, 181, 0.4)"}:{},children:e.jsx(Re,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex items-center justify-center gap-2 mt-2",children:C?e.jsxs("p",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),"Real-time messaging active"]}):e.jsxs("p",{className:"text-[10px] text-amber-500 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),"Connecting to real-time..."]})})]})]})})]})},ze=()=>{if(g){const r=g.members?.some(t=>t.userId===a?.id),l=g.members?.some(t=>t.userId===a?.id&&(t.role==="admin"||t.role==="creator")),d=g.joinRequests?.some(t=>t.userId===a?.id&&t.status==="pending");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("button",{onClick:()=>v(null),className:"font-semibold flex items-center gap-2 transition-colors",style:{color:"#00ADB5"},onMouseEnter:t=>t.currentTarget.style.opacity="0.8",onMouseLeave:t=>t.currentTarget.style.opacity="1",children:"â† Back to Groups"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:g.name}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:g.description})]}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${g.level==="Beginner"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":g.level==="Intermediate"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:g.level})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("span",{className:"text-sm px-3 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:g.topic}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-white",children:[g.members?.length||0," / ",g.maxMembers," members"]})]}),l&&g.joinRequests?.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-3 flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5"}),"Pending Join Requests (",g.joinRequests.length,")"]}),e.jsx("div",{className:"space-y-3",children:g.joinRequests.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("img",{src:t.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${t.userName}`,alt:t.userName,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.userName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Requested ",new Date(t.requestedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{try{const c=await ir(g.id,t.userId);v(c);const h=await z();N(h),b.success(`${t.userName} has been approved!`)}catch(c){b.error(c?.message||"Failed to approve request")}},className:"p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:"Approve",children:e.jsx(er,{className:"w-4 h-4"})}),e.jsx("button",{onClick:async()=>{try{const c=await cr(g.id,t.userId);v(c),b.success(`Request from ${t.userName} has been rejected`)}catch(c){b.error(c?.message||"Failed to reject request")}},className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",title:"Reject",children:e.jsx(Be,{className:"w-4 h-4"})})]})]},t.userId))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Members"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:g.members?.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("img",{src:t.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${t.name}`,alt:t.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:t.role==="creator"?"ðŸ‘‘ Creator":t.role==="admin"?"â­ Admin":"Member"})]}),l&&t.role!=="creator"&&t.userId!==a?.id&&e.jsx("button",{onClick:async()=>{if(window.confirm(`Remove ${t.name} from the group?`))try{const c=await gr(g.id,t.userId);v(c);const h=await z();N(h),b.success(`${t.name} has been removed from the group`)}catch(c){b.error(c?.message||"Failed to remove member")}},className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Remove member",children:e.jsx(ar,{className:"w-4 h-4"})})]},t.userId))})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"Group Discussion"]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mb-4 h-64 overflow-y-auto",children:Se.length===0?e.jsx("p",{className:"text-gray-500 text-center text-sm py-8",children:"No messages yet. Start the conversation!"}):e.jsx("div",{className:"space-y-3",children:Se.map((t,c)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{src:t.avatar||t.senderAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.name||t.senderName}`,alt:t.name||t.senderName,className:"w-8 h-8 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:t.name||t.senderName}),e.jsx("span",{className:"text-xs text-gray-400",children:t.timestamp?new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"now"})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-white",children:t.message})]})]},t.id||c))})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:Y,onChange:t=>W(t.target.value),onKeyPress:async t=>{if(t.key==="Enter"&&Y.trim()){const c=Y.trim(),h=i?.displayName||i?.name||a?.name||"User",s=i?.avatar||i?.avatrUrl||"",u=`temp-${Date.now()}`,n={id:u,name:h,senderName:h,avatar:s,senderAvatar:s,message:c,timestamp:new Date().toISOString()};D(o=>[...o,n]),W("");try{const o=await j(`/study-groups/${g.id}/messages`,{method:"POST",body:JSON.stringify({message:c,senderName:h,senderAvatar:s})});o.message&&D(m=>m.map(f=>f.id===u?o.message:f))}catch(o){console.error("Error sending group message:",o),D(m=>m.filter(f=>f.id!==u)),W(c),b.error("Failed to send message")}}},placeholder:"Type a message...",className:"flex-1 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none"}),e.jsx("button",{onClick:async()=>{if(Y.trim()){const t=Y.trim(),c=i?.displayName||i?.name||a?.name||"User",h=i?.avatar||i?.avatrUrl||"",s=`temp-${Date.now()}`,u={id:s,name:c,senderName:c,avatar:h,senderAvatar:h,message:t,timestamp:new Date().toISOString()};D(n=>[...n,u]),W("");try{const n=await j(`/study-groups/${g.id}/messages`,{method:"POST",body:JSON.stringify({message:t,senderName:c,senderAvatar:h})});n.message&&D(o=>o.map(m=>m.id===s?n.message:m))}catch(n){console.error("Error sending group message:",n),D(o=>o.filter(m=>m.id!==s)),W(t),b.error("Failed to send message")}}},className:"px-4 py-2 text-white rounded-lg transition-all shadow-md hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:e.jsx(Re,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Resources & Schedule"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:t=>{t.currentTarget.style.borderColor="#00ADB5",t.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",t.currentTarget.style.color="#00ADB5"},onMouseLeave:t=>{t.currentTarget.style.borderColor="",t.currentTarget.style.backgroundColor="",t.currentTarget.style.color=""},children:[e.jsx(ee,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Share Resource"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:t=>{t.currentTarget.style.borderColor="#00ADB5",t.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",t.currentTarget.style.color="#00ADB5"},onMouseLeave:t=>{t.currentTarget.style.borderColor="",t.currentTarget.style.backgroundColor="",t.currentTarget.style.color=""},children:[e.jsx(ee,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Schedule Session"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:t=>{t.currentTarget.style.borderColor="#00ADB5",t.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",t.currentTarget.style.color="#00ADB5"},onMouseLeave:t=>{t.currentTarget.style.borderColor="",t.currentTarget.style.backgroundColor="",t.currentTarget.style.color=""},children:[e.jsx(ee,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Set Goal"})]})]})]})]}):e.jsx("div",{className:"text-center py-8 border-t border-gray-200 dark:border-gray-700",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:e.jsx(pe,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-2 font-semibold",children:"Request Pending"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Waiting for the group owner to approve your request"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 dark:text-white mb-4",children:"Request to join this group and get approval from the owner"}),e.jsx("button",{onClick:async()=>{if(a)try{const t=i?.displayName||a.name||"User",c=i?.avatrUrl||"",h=await dr(g.id,t,c);if(h.group){v(h.group);const s=await z();N(s)}b.success(h.message||"Join request sent! Waiting for approval.")}catch(t){console.error("Error requesting to join group:",t),b.error(t?.message||"Failed to send join request. Please try again.")}},disabled:g.members?.length>=g.maxMembers,className:"px-6 py-2 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Request to Join"})]})})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Study Groups"}),e.jsxs("div",{className:"relative flex-1 max-w-md mx-0 sm:mx-4",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:$,onChange:r=>ve(r.target.value),placeholder:"Search groups...",className:"w-full pl-10 pr-10 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"}),$&&e.jsx("button",{onClick:()=>ve(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Be,{className:"w-4 h-4"})})]}),e.jsxs("button",{onClick:()=>Q(!0),className:"px-4 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90 flex items-center gap-2 whitespace-nowrap",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(ee,{className:"w-5 h-5"}),"Create Group"]})]}),Oe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Create Study Group"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Group Name"}),e.jsx("input",{type:"text",value:k.name,onChange:r=>O({...k,name:r.target.value}),placeholder:"DSA Interview Prep",className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Description"}),e.jsx("textarea",{value:k.description,onChange:r=>O({...k,description:r.target.value}),placeholder:"Daily DSA practice and mock interviews",rows:3,className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Topic"}),e.jsxs("select",{value:k.topic,onChange:r=>O({...k,topic:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Topic"}),e.jsx("option",{value:"DSA",children:"Data Structures & Algorithms"}),e.jsx("option",{value:"Web Dev",children:"Web Development"}),e.jsx("option",{value:"Mobile",children:"Mobile Development"}),e.jsx("option",{value:"AI/ML",children:"AI & Machine Learning"}),e.jsx("option",{value:"System Design",children:"System Design"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Level"}),e.jsxs("select",{value:k.level,onChange:r=>O({...k,level:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"Beginner",children:"Beginner"}),e.jsx("option",{value:"Intermediate",children:"Intermediate"}),e.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Max Members"}),e.jsx("input",{type:"number",value:k.maxMembers,onChange:r=>O({...k,maxMembers:parseInt(r.target.value)}),min:"2",max:"50",className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:async()=>{if(k.name&&k.topic&&a)try{const r=await or({...k,creatorId:a.id,creatorName:i?.displayName||i?.name||a.name||"User",creatorAvatar:i?.avatar||i?.avatrUrl||"",members:[{userId:a.id,name:i?.displayName||i?.name||a.name||"User",avatar:i?.avatar||i?.avatrUrl||"",joinedAt:new Date,role:"creator"}]});r&&N(d=>[r,...d]);const l=await z();l&&l.length>0&&N(l),Q(!1),O({name:"",description:"",topic:"",level:"Beginner",maxMembers:10}),b.success("Study group created successfully!")}catch(r){console.error("Error creating group:",r),b.error("Failed to create group. Please try again.")}},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Create Group"}),e.jsx("button",{onClick:()=>Q(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})}),(()=>{const r=$.trim().toLowerCase(),l=r?ke.filter(d=>(d.name||"").toLowerCase().includes(r)||(d.topic||"").toLowerCase().includes(r)||(d.description||"").toLowerCase().includes(r)||(d.creatorName||"").toLowerCase().includes(r)):ke;return l.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(Ae,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:$?"No Groups Found":"No Study Groups Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:$?`No groups matching "${$}"`:"Create or join a study group to learn together"}),!$&&e.jsx("button",{onClick:()=>Q(!0),className:"px-6 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Create First Group"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:l.map(d=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-1",children:d.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:["by ",d.creatorName]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${d.level==="Beginner"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":d.level==="Intermediate"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:d.level}),d.creatorId===a?.id&&e.jsx("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this study group?"))try{await lr(d.id);const t=await z();N(t)}catch(t){console.error("Error deleting group:",t),alert("Failed to delete group. Please try again.")}},className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete group",children:e.jsx(tr,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-4 line-clamp-2",children:d.description}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:d.topic})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:["Members (",d.members?.length||0,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[d.members?.slice(0,5).map((t,c)=>e.jsx("img",{src:t.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${t.name}`,alt:t.name,className:"w-8 h-8 rounded-full border-2 border-white dark:border-gray-800",title:t.name,style:{marginLeft:c>0?"-8px":"0"}},t.userId)),(d.members?.length||0)>5&&e.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-600 dark:text-white",style:{marginLeft:"-8px"},children:["+",(d.members?.length||0)-5]}),(!d.members||d.members.length===0)&&e.jsx("p",{className:"text-xs text-gray-500",children:"No members yet"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-white mb-4",children:[e.jsxs("span",{children:[d.members?.length||0," / ",d.maxMembers," members"]}),e.jsxs("span",{className:"text-gray-400",children:["Created ",ye(d.createdAt)]})]}),e.jsx("button",{onClick:()=>v(d),className:"w-full px-4 py-2 text-white rounded-lg transition-all text-sm font-semibold shadow-md hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"View Details"})]},d.id))})})()]})},Ke=()=>e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Skill Endorsements"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5",style:{color:"#00ADB5"}}),"Endorsements Received (",E.filter(r=>r.recipientId===a?.id).length,")"]}),E.filter(r=>r.recipientId===a?.id).length===0?e.jsx("p",{className:"text-gray-500 dark:text-white text-center py-8",children:"No endorsements yet. Keep collaborating!"}):e.jsx("div",{className:"space-y-4",children:E.filter(r=>r.recipientId===a?.id).map(r=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("img",{src:r.endorserAvatar,alt:r.endorserName,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:r.endorserName}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:r.skill})]}),r.message&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-white",children:r.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ye(r.timestamp)})]})]},r.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(rr,{className:"w-5 h-5 text-yellow-500"}),"Endorsements Given (",E.filter(r=>r.endorserId===a?.id).length,")"]}),E.filter(r=>r.endorserId===a?.id).length===0?e.jsx("p",{className:"text-gray-500 dark:text-white text-center py-8",children:"You haven't endorsed anyone yet. Go to the directory to endorse developers!"}):e.jsx("div",{className:"space-y-4",children:E.filter(r=>r.endorserId===a?.id).map(r=>e.jsx("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:["To: ",r.recipientName]}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:r.skill})]}),r.message&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-white",children:r.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ye(r.timestamp)})]})},r.id))})]})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(p.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Developer Connect ðŸ¤"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-white",children:"Find teammates, build together, grow your network"})]})})}),e.jsx("div",{className:"flex gap-1 sm:gap-2 mb-6 sm:mb-8 border-b border-gray-200 dark:border-gray-700 overflow-x-auto scrollbar-hide",children:[{id:"directory",label:"Developer Directory",icon:ue},{id:"messages",label:"Messages",icon:Ze},{id:"groups",label:"Study Groups",icon:Ae},{id:"endorsements",label:"Endorsements",icon:Z}].map(r=>{const l=r.icon;return e.jsxs("button",{onClick:()=>M(r.id),className:`px-2 sm:px-4 py-2 sm:py-3 font-semibold flex items-center gap-1 sm:gap-2 border-b-2 transition-colors whitespace-nowrap text-xs sm:text-base ${y===r.id?"border-transparent":"border-transparent text-gray-600 dark:text-white hover:text-gray-900 dark:hover:text-white"}`,style:y===r.id?{borderBottomColor:"#00ADB5",color:"#00ADB5"}:{},children:[e.jsx(l,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:r.label}),e.jsx("span",{className:"sm:hidden",children:r.id==="directory"?"Directory":r.id==="messages"?"Messages":r.id==="groups"?"Groups":"Endorsements"})]},r.id)})}),y==="directory"&&He(),y==="messages"&&_e(),y==="groups"&&ze(),y==="endorsements"&&Ke()]}),qe&&q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-4",children:["Endorse ",q.name]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Select Skill"}),e.jsxs("select",{value:I.skill,onChange:r=>X({...I,skill:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Choose a skill"}),q.skills.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Message (Optional)"}),e.jsx("textarea",{value:I.message,onChange:r=>X({...I,message:r.target.value}),placeholder:"Great team player with excellent React skills...",rows:3,className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:async()=>{if(!I.skill){b.error("Please select a skill to endorse");return}if(!a){b.error("You must be logged in to endorse");return}try{const r=await j(`/developers/${q.userId}/endorse`,{method:"POST",body:JSON.stringify({skill:I.skill,message:I.message,endorserName:i?.displayName||a.name||"User",endorserAvatar:i?.avatrUrl||"https://api.dicebear.com/9.x/adventurer/svg?seed=User",recipientName:q.name})});r.endorsement&&le(l=>[...l,r.endorsement]),de(!1),ie(null),X({skill:"",message:""}),b.success(`âœ… Successfully endorsed ${q.name} for ${I.skill}!`,{duration:4e3,position:"top-center"})}catch(r){console.error("Error saving endorsement:",r);const l=r?.message||"Failed to save endorsement. Please try again.";b.error(l)}},disabled:!I.skill,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Send Endorsement"}),e.jsx("button",{onClick:()=>{de(!1),ie(null),X({skill:"",message:""})},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})})]})}export{jr as default};
