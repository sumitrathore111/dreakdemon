import{q as c,i as Se,k as Ce,r as o,j as e,J as de,o as V,g as De,B as oe,d as U,K as b,n as Ae,v as E,Z as Me}from"./index-Do6L6L7r.js";import{C as ne}from"./CustomSelect-C-QnIHHl.js";import{C as Ee}from"./circle-alert-BwK7_eww.js";import{S as ie}from"./send-DG_CacyJ.js";import{P as $}from"./plus-C-5GXOn_.js";import{T as Te}from"./trash-2-DtG7D2H5.js";import"./chevron-down-DuNN5z-J.js";const Be=async a=>{try{const l=new URLSearchParams;return a&&Object.entries(a).forEach(([u,N])=>{N!==void 0&&l.append(u,N.toString())}),(await c(`/study-groups?${l.toString()}`)).groups}catch(l){return console.error("Error getting study groups:",l),[]}},ce=Be,Ie=async a=>{try{return(await c("/study-groups",{method:"POST",body:JSON.stringify(a)})).group}catch(l){throw console.error("Error creating study group:",l),l}},Le=async(a,l,g)=>{try{return(await c(`/study-groups/${a}/join`,{method:"POST",body:JSON.stringify({userName:l,userAvatar:g})})).group}catch(u){throw console.error("Error joining study group:",u),u}},Ge=async a=>{try{await c(`/study-groups/${a}`,{method:"DELETE"})}catch(l){throw console.error("Error deleting study group:",l),l}},X=a=>{if(!a)return"Unknown date";try{if(a?.toDate&&typeof a.toDate=="function")return a.toDate().toLocaleDateString();if(a?.seconds)return new Date(a.seconds*1e3).toLocaleDateString();const l=new Date(a);return isNaN(l.getTime())?"Unknown date":l.toLocaleDateString()}catch{return"Unknown date"}};function Ye(){const{user:a}=Se(),{userprofile:l}=Ce(),[g,u]=o.useState("directory"),[N,xe]=o.useState(""),[k,T]=o.useState([]),[O,ge]=o.useState(""),[p,F]=o.useState(null),[P,H]=o.useState(null),[ee,w]=o.useState([]),[D,R]=o.useState(""),[me,B]=o.useState(!1),[f,he]=o.useState([]),[pe,re]=o.useState(!0),[se,J]=o.useState(null),[Y,W]=o.useState([]),[K,ye]=o.useState(12),[q,I]=o.useState([]),[ue,L]=o.useState(!1),[x,v]=o.useState({name:"",description:"",topic:"",level:"Beginner",maxMembers:10}),[j,te]=o.useState([]),[be,z]=o.useState(!1),[S,Q]=o.useState(null),[y,G]=o.useState({skill:"",message:""}),[n,Z]=o.useState(null),[A,_]=o.useState(""),[ae,M]=o.useState([]);o.useEffect(()=>{(async()=>{try{re(!0),J(null);const s=await c("/developers");console.log("All users from backend:",s),he(s),s.length===0&&J("No developers found. The community is waiting for you!")}catch(s){console.error("Error loading users:",s),J("Failed to load developers: "+(s instanceof Error?s.message:String(s)))}finally{re(!1)}})()},[]),o.useEffect(()=>{(async()=>{try{const s=await c("/study-groups");I(s.groups||[])}catch(s){console.error("Error loading study groups:",s)}})()},[]),o.useEffect(()=>{(async()=>{if(a)try{const s=await c("/developers/endorsements/me");te(s.endorsements||[])}catch(s){console.error("Error loading endorsements:",s)}})()},[a]),o.useEffect(()=>{if(!p||!a){w([]),H(null);return}let r=!0,s;return(async()=>{console.log("Setting up chat for:",a.id,p),B(!0);try{const d=f.find(h=>h.userId===p);if(!d){console.error("Selected developer not found"),B(!1);return}const i=await c("/chats",{method:"POST",body:JSON.stringify({participantIds:[a.id,p],participantNames:[l?.displayName||a.name||"User",d.name],participantAvatars:[l?.avatrUrl||"",d.avatar]})});if(!r)return;H(i.id),console.log("Chat ID obtained:",i.id);const m=async()=>{try{const h=await c(`/chats/${i.id}/messages`);r&&w(h)}catch(h){console.error("Error fetching messages:",h)}};await m(),B(!1),s=setInterval(m,15e3)}catch(d){console.error("Error setting up chat:",d),r&&B(!1)}})(),()=>{r=!1,s&&clearInterval(s)}},[p,a?.id,f,l]),o.useEffect(()=>{if(!a||g!=="messages"){W([]);return}(async()=>{try{const t=(await c("/chats")||[]).map(d=>({participantId:d.participantId,participantName:d.participantName,participantAvatar:d.participantAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${d.participantName?.replace(/\s+/g,"")}`,lastMessage:d.lastMessage,lastMessageAt:d.lastMessageAt}));W(t)}catch(s){console.warn("Could not load conversations yet:",s),W([])}})()},[a?.id,g]),o.useEffect(()=>{if(!n||!a){M([]);return}const r=async()=>{try{const t=await c(`/study-groups/${n.id}/messages`);M(t.messages||[])}catch(t){console.warn("Could not load group messages:",t),M([])}};r();const s=setInterval(r,5e3);return()=>clearInterval(s)},[n?.id,a]);const C=f.filter(r=>{const s=r.skills||[],t=r.lookingFor||"",d=(r.name||"").toLowerCase().includes(N.toLowerCase())||s.some(h=>h.toLowerCase().includes(N.toLowerCase())),i=k.length===0||k.some(h=>s.includes(h)),m=!O||t.includes(O);return d&&i&&m}),le=C.slice(0,K),fe=C.length>K,je=["React","Node.js","Python","Java","MongoDB","TypeScript","AWS","Machine Learning"],Ne=()=>pe?e.jsx("div",{className:"space-y-6",children:[1,2,3,4,5,6].map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-700 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded mb-2 w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-1/3"})]})]}),e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded flex-1"}),e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded flex-1"})]})]},r))}):se?e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-8 border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Ee,{className:"w-6 h-6 text-red-600 dark:text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-300 mb-2",children:"Unable to Load Developers"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:se}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})]})}):f.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(V,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Developers Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:"Developers who complete their profiles will appear here. Invite your friends!"}),e.jsx("button",{className:"px-6 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Invite Friends"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("input",{type:"text",placeholder:"Search developers by name or skills...",value:N,onChange:r=>xe(r.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#00ADB5] focus:bg-white dark:focus:bg-gray-600 transition-all"})]}),e.jsx(ne,{value:k.length>0?k[0]:"",onChange:r=>{T(r===""?[]:s=>s.includes(r)?s.filter(t=>t!==r):[r])},options:[{value:"",label:"All Skills"},...je.map(r=>({value:r,label:r}))],className:"w-full sm:min-w-[180px] sm:w-auto"}),e.jsx(ne,{value:O,onChange:r=>ge(r),options:[{value:"",label:"Looking For"},{value:"Teammates",label:"Teammates"},{value:"Mentoring",label:"Mentoring"},{value:"Both",label:"Both"}],className:"w-full sm:min-w-[180px] sm:w-auto"})]}),k.length>0&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[k.map(r=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium text-white",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[r,e.jsx("button",{onClick:()=>T(s=>s.filter(t=>t!==r)),className:"ml-1 hover:bg-white/20 rounded-full p-0.5",children:"Ã—"})]},r)),e.jsx("button",{onClick:()=>T([]),className:"px-3 py-1 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white",children:"Clear all"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-white",children:[e.jsxs("p",{children:["Showing ",le.length," of ",C.length," developers"]}),C.length!==f.length&&e.jsxs("p",{children:[f.length," total in directory"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:le.map((r,s)=>e.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("img",{src:r.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${r.name}`,alt:r.name||"Developer",className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.name||"Unknown"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:[r.institute||r.college||"Not specified"," â€¢ ",r.yearOfStudy?r.yearOfStudy===1?"1st Year":r.yearOfStudy===2?"2nd Year":r.yearOfStudy===3?"3rd Year":r.yearOfStudy===4?"4th Year":`${r.yearOfStudy} Year`:r.year||"Student"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",style:{color:"#00ADB5"},children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:j.filter(t=>t.recipientId===r.userId).length})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-4 line-clamp-2",children:r.bio||"No bio available"}),e.jsx("div",{className:"rounded-lg p-3 mb-4",style:{background:"rgba(0, 173, 181, 0.1)"},children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Problems Solved"}),e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:r.challenges_solved||r.codeArenaStats?.problemsSolved||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Rank"}),e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:["#",r.marathon_rank||r.codeArenaStats?.rank||"N/A"]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(r.skills||[]).length>0?e.jsxs(e.Fragment,{children:[(r.skills||[]).slice(0,3).map(t=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:t},t)),(r.skills||[]).length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded-full",children:["+",(r.skills||[]).length-3]})]}):e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No skills added"})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-green-700 dark:text-green-400 mb-1",children:r.lookingFor||"Open to opportunities"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 line-clamp-2",children:r.lookingForDetails||"Looking to connect with other developers"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{onClick:()=>{F(r.userId),u("messages")},className:"flex-1 px-3 py-2 text-white text-sm font-semibold rounded-lg transition-all shadow-md hover:opacity-90 flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(E,{className:"w-4 h-4"}),"Message"]}),e.jsxs("button",{onClick:()=>{Q(r),z(!0)},className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white text-sm font-semibold rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Endorse"]})]})]},r.userId))}),fe&&e.jsx("div",{className:"text-center mt-8",children:e.jsxs("button",{onClick:()=>ye(r=>r+12),className:"px-8 py-3 text-white rounded-lg transition-all shadow-lg hover:opacity-90 font-semibold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:["Load More (",C.length-K," remaining)"]})}),C.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(V,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No developers found"}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Try adjusting your filters"})]})]}),ke=()=>{if(!p)return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[600px]",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Messages"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white mt-1",children:[Y.length," conversations"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:Y.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(E,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No conversations yet"}),e.jsx("p",{className:"text-xs mt-2",children:"Go to Developer Directory and send a message to start chatting"})]}):Y.map(t=>e.jsx("button",{onClick:()=>F(t.participantId),className:`w-full p-4 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left ${p===t.participantId,""}`,style:p===t.participantId?{backgroundColor:"rgba(0, 173, 181, 0.1)",borderLeft:"3px solid #00ADB5"}:{},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.participantAvatar,alt:t.participantName,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white truncate text-sm",children:t.participantName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white truncate",children:t.lastMessage||"No messages yet"})]})]})},t.participantId))})]}),e.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 flex items-center justify-center min-h-[300px] lg:min-h-0",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(E,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Select a Conversation"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-white",children:"Click on a conversation to view messages"})]})})]});const r=f.find(t=>t.userId===p);if(!r||!a)return null;const s=async()=>{if(!D.trim()||!a||!P)return;const t=D;R("");const d={id:`temp-${Date.now()}`,senderId:a.id,senderName:l?.displayName||a.name||"User",senderAvatar:l?.avatrUrl||"",message:t,timestamp:new Date,isRead:!1};w(i=>[...i,d]);try{await c(`/chats/${P}/messages`,{method:"POST",body:JSON.stringify({senderId:a.id,senderName:l?.displayName||a.name||"User",senderAvatar:l?.avatrUrl||"",message:t})});const i=await c(`/chats/${P}/messages`);w(i)}catch(i){console.error("Error sending message:",i),R(t),w(m=>m.filter(h=>h.id!==d.id))}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 min-h-[500px] lg:h-[600px]",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col max-h-[250px] lg:max-h-none",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>{F(null),w([])},className:"text-sm font-semibold mb-3 transition-colors",style:{color:"#00ADB5"},onMouseEnter:t=>t.currentTarget.style.opacity="0.8",onMouseLeave:t=>t.currentTarget.style.opacity="1",children:"â† Back"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white mt-1",children:r.college})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:r.avatar,alt:r.name,className:"w-16 h-16 rounded-full mx-auto mb-3"}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r.college," â€¢ ",r.year]}),r.skills.length>0&&e.jsxs("div",{className:"mt-4 text-left",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:r.skills.slice(0,4).map(t=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:t},t))})]})]})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 flex flex-col min-h-[400px]",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Chat with ",r.name]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:"Direct messaging"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 flex flex-col",children:me?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mb-4",style:{borderColor:"#00ADB5"}}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading messages..."}),e.jsx("div",{className:"text-gray-400 text-xs mt-2",children:"If this takes long, the server may be starting up"})]}):ee.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx(E,{className:"w-12 h-12 text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No messages yet. Start the conversation!"})]}):ee.map(t=>{const d=t.senderId===a.id;return e.jsxs("div",{className:`flex mb-3 ${d?"justify-end":"justify-start"}`,children:[!d&&e.jsx("img",{src:t.senderAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.senderName?.replace(/\s+/g,"")||"User"}`,alt:t.senderName||"User",className:"w-8 h-8 rounded-full flex-shrink-0 mr-2 mt-1"}),e.jsxs("div",{className:`relative max-w-[70%] ${d?"mr-2":"ml-0"}`,children:[!d&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 ml-1",children:t.senderName||"User"}),e.jsxs("div",{className:`relative px-4 py-2.5 shadow-sm ${d?"rounded-tl-2xl rounded-tr-sm rounded-bl-2xl rounded-br-2xl text-white":"rounded-tl-sm rounded-tr-2xl rounded-bl-2xl rounded-br-2xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600"}`,style:d?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",boxShadow:"0 2px 8px rgba(0, 173, 181, 0.3)"}:{boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:`absolute top-0 w-3 h-3 ${d?"right-[-6px]":"left-[-6px]"}`,style:{clipPath:d?"polygon(0 0, 100% 0, 0 100%)":"polygon(100% 0, 0 0, 100% 100%)",background:d?"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)":"white",borderLeft:d?"none":"1px solid #e5e7eb",borderTop:d?"none":"1px solid #e5e7eb"}}),e.jsx("p",{className:"text-sm leading-relaxed break-words",children:t.message||t.content||t.text}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${d?"justify-end":"justify-start"}`,children:[e.jsx("p",{className:`text-[10px] ${d?"text-cyan-100":"text-gray-400 dark:text-gray-500"}`,children:t.timestamp instanceof Date?t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.createdAt?new Date(t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),d&&e.jsx("svg",{className:"w-3.5 h-3.5 text-cyan-100",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})]})]})]}),d&&e.jsx("img",{src:l?.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.name?.replace(/\s+/g,"")||"Me"}`,alt:"Me",className:"w-8 h-8 rounded-full flex-shrink-0 ml-2 mt-1"})]},t.id)})}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Type your message...",value:D,onChange:t=>R(t.target.value),onKeyPress:t=>{t.key==="Enter"&&D.trim()&&s()},className:"flex-1 px-4 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2",style:{"--tw-ring-color":"#00ADB5"}}),e.jsxs("button",{onClick:s,disabled:!D.trim(),className:"px-4 py-2 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all font-semibold flex items-center gap-2 shadow-md hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(ie,{className:"w-4 h-4"}),"Send"]})]})})]})]})},we=()=>{if(n){const r=n.members?.some(s=>s.userId===a?.id);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("button",{onClick:()=>Z(null),className:"font-semibold flex items-center gap-2 transition-colors",style:{color:"#00ADB5"},onMouseEnter:s=>s.currentTarget.style.opacity="0.8",onMouseLeave:s=>s.currentTarget.style.opacity="1",children:"â† Back to Groups"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:n.name}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:n.description})]}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${n.level==="Beginner"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":n.level==="Intermediate"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:n.level})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("span",{className:"text-sm px-3 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:n.topic}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-white",children:[n.members?.length||0," / ",n.maxMembers," members"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Members"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.members?.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("img",{src:s.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${s.name}`,alt:s.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:s.role==="creator"?"ðŸ‘‘ Creator":"Member"})]})]},s.userId))})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5"}),"Group Discussion"]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mb-4 h-64 overflow-y-auto",children:ae.length===0?e.jsx("p",{className:"text-gray-500 text-center text-sm py-8",children:"No messages yet. Start the conversation!"}):e.jsx("div",{className:"space-y-3",children:ae.map((s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{src:s.avatar,alt:s.name,className:"w-8 h-8 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:s.name}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.timestamp).toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-white",children:s.message})]})]},t))})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:A,onChange:s=>_(s.target.value),onKeyPress:async s=>{if(s.key==="Enter"&&A.trim())try{const t=l?.displayName||l?.name||a?.name||"User",d=l?.avatar||l?.avatrUrl||"",i=await c(`/study-groups/${n.id}/messages`,{method:"POST",body:JSON.stringify({message:A.trim(),senderName:t,senderAvatar:d})});i.message&&M(m=>[...m,i.message]),_("")}catch(t){console.error("Error sending group message:",t),b.error("Failed to send message")}},placeholder:"Type a message...",className:"flex-1 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"}),e.jsx("button",{onClick:async()=>{if(A.trim())try{const s=l?.displayName||l?.name||a?.name||"User",t=l?.avatar||l?.avatrUrl||"",d=await c(`/study-groups/${n.id}/messages`,{method:"POST",body:JSON.stringify({message:A.trim(),senderName:s,senderAvatar:t})});d.message&&M(i=>[...i,d.message]),_("")}catch(s){console.error("Error sending group message:",s),b.error("Failed to send message")}},className:"px-4 py-2 text-white rounded-lg transition-all shadow-md hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:e.jsx(ie,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Resources & Schedule"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:s=>{s.currentTarget.style.borderColor="#00ADB5",s.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",s.currentTarget.style.color="#00ADB5"},onMouseLeave:s=>{s.currentTarget.style.borderColor="",s.currentTarget.style.backgroundColor="",s.currentTarget.style.color=""},children:[e.jsx($,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Share Resource"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:s=>{s.currentTarget.style.borderColor="#00ADB5",s.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",s.currentTarget.style.color="#00ADB5"},onMouseLeave:s=>{s.currentTarget.style.borderColor="",s.currentTarget.style.backgroundColor="",s.currentTarget.style.color=""},children:[e.jsx($,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Schedule Session"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:s=>{s.currentTarget.style.borderColor="#00ADB5",s.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",s.currentTarget.style.color="#00ADB5"},onMouseLeave:s=>{s.currentTarget.style.borderColor="",s.currentTarget.style.backgroundColor="",s.currentTarget.style.color=""},children:[e.jsx($,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Set Goal"})]})]})]})]}):e.jsxs("div",{className:"text-center py-8 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-gray-600 dark:text-white mb-4",children:"Join this group to access discussions and resources"}),e.jsx("button",{onClick:async()=>{if(a)try{const s=l?.displayName||a.name||"User",t=l?.avatrUrl||"",d=await Le(n.id,s,t),i=q.map(m=>m.id===n.id?d:m);Z(d),I(i),b.success("Successfully joined the group!")}catch(s){console.error("Error joining group:",s),b.error(s?.message||"Failed to join group. Please try again.")}},disabled:n.members?.length>=n.maxMembers,className:"px-6 py-2 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Join Group"})]})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Study Groups"}),e.jsxs("button",{onClick:()=>L(!0),className:"px-4 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90 flex items-center gap-2",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx($,{className:"w-5 h-5"}),"Create Group"]})]}),ue&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Create Study Group"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Group Name"}),e.jsx("input",{type:"text",value:x.name,onChange:r=>v({...x,name:r.target.value}),placeholder:"DSA Interview Prep",className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:r=>v({...x,description:r.target.value}),placeholder:"Daily DSA practice and mock interviews",rows:3,className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Topic"}),e.jsxs("select",{value:x.topic,onChange:r=>v({...x,topic:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Topic"}),e.jsx("option",{value:"DSA",children:"Data Structures & Algorithms"}),e.jsx("option",{value:"Web Dev",children:"Web Development"}),e.jsx("option",{value:"Mobile",children:"Mobile Development"}),e.jsx("option",{value:"AI/ML",children:"AI & Machine Learning"}),e.jsx("option",{value:"System Design",children:"System Design"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Level"}),e.jsxs("select",{value:x.level,onChange:r=>v({...x,level:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"Beginner",children:"Beginner"}),e.jsx("option",{value:"Intermediate",children:"Intermediate"}),e.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Max Members"}),e.jsx("input",{type:"number",value:x.maxMembers,onChange:r=>v({...x,maxMembers:parseInt(r.target.value)}),min:"2",max:"50",className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:async()=>{if(x.name&&x.topic&&a)try{await Ie({...x,creatorId:a.id,creatorName:l?.displayName||a.name||"User",creatorAvatar:l?.avatrUrl||"",members:[{userId:a.id,name:l?.displayName||a.name||"User",avatar:l?.avatrUrl||"",joinedAt:new Date,role:"creator"}]});const r=await ce();I(r),L(!1),v({name:"",description:"",topic:"",level:"Beginner",maxMembers:10})}catch(r){console.error("Error creating group:",r),alert("Failed to create group. Please try again.")}},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Create Group"}),e.jsx("button",{onClick:()=>L(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})}),q.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(oe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Study Groups Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:"Create or join a study group to learn together"}),e.jsx("button",{onClick:()=>L(!0),className:"px-6 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Create First Group"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:q.map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-1",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:["by ",r.creatorName]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${r.level==="Beginner"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":r.level==="Intermediate"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:r.level}),r.creatorId===a?.id&&e.jsx("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this study group?"))try{await Ge(r.id);const s=await ce();I(s)}catch(s){console.error("Error deleting group:",s),alert("Failed to delete group. Please try again.")}},className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete group",children:e.jsx(Te,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-4 line-clamp-2",children:r.description}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:r.topic})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:["Members (",r.members?.length||0,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[r.members?.slice(0,5).map((s,t)=>e.jsx("img",{src:s.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${s.name}`,alt:s.name,className:"w-8 h-8 rounded-full border-2 border-white dark:border-gray-800",title:s.name,style:{marginLeft:t>0?"-8px":"0"}},s.userId)),(r.members?.length||0)>5&&e.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-600 dark:text-white",style:{marginLeft:"-8px"},children:["+",(r.members?.length||0)-5]}),(!r.members||r.members.length===0)&&e.jsx("p",{className:"text-xs text-gray-500",children:"No members yet"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-white mb-4",children:[e.jsxs("span",{children:[r.members?.length||0," / ",r.maxMembers," members"]}),e.jsxs("span",{className:"text-gray-400",children:["Created ",X(r.createdAt)]})]}),e.jsx("button",{onClick:()=>Z(r),className:"w-full px-4 py-2 text-white rounded-lg transition-all text-sm font-semibold shadow-md hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"View Details"})]},r.id))})]})},ve=()=>e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Skill Endorsements"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5",style:{color:"#00ADB5"}}),"Endorsements Received (",j.filter(r=>r.recipientId===a?.id).length,")"]}),j.filter(r=>r.recipientId===a?.id).length===0?e.jsx("p",{className:"text-gray-500 dark:text-white text-center py-8",children:"No endorsements yet. Keep collaborating!"}):e.jsx("div",{className:"space-y-4",children:j.filter(r=>r.recipientId===a?.id).map(r=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("img",{src:r.endorserAvatar,alt:r.endorserName,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:r.endorserName}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:r.skill})]}),r.message&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-white",children:r.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:X(r.timestamp)})]})]},r.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-yellow-500"}),"Endorsements Given (",j.filter(r=>r.endorserId===a?.id).length,")"]}),j.filter(r=>r.endorserId===a?.id).length===0?e.jsx("p",{className:"text-gray-500 dark:text-white text-center py-8",children:"You haven't endorsed anyone yet. Go to the directory to endorse developers!"}):e.jsx("div",{className:"space-y-4",children:j.filter(r=>r.endorserId===a?.id).map(r=>e.jsx("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:["To: ",r.recipientName]}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:r.skill})]}),r.message&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-white",children:r.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:X(r.timestamp)})]})},r.id))})]})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(de.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Developer Connect ðŸ¤"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-white",children:"Find teammates, build together, grow your network"})]})})}),e.jsx("div",{className:"flex gap-1 sm:gap-2 mb-6 sm:mb-8 border-b border-gray-200 dark:border-gray-700 overflow-x-auto scrollbar-hide",children:[{id:"directory",label:"Developer Directory",icon:V},{id:"messages",label:"Messages",icon:De},{id:"groups",label:"Study Groups",icon:oe},{id:"endorsements",label:"Endorsements",icon:U}].map(r=>{const s=r.icon;return e.jsxs("button",{onClick:()=>u(r.id),className:`px-2 sm:px-4 py-2 sm:py-3 font-semibold flex items-center gap-1 sm:gap-2 border-b-2 transition-colors whitespace-nowrap text-xs sm:text-base ${g===r.id?"border-transparent":"border-transparent text-gray-600 dark:text-white hover:text-gray-900 dark:hover:text-white"}`,style:g===r.id?{borderBottomColor:"#00ADB5",color:"#00ADB5"}:{},children:[e.jsx(s,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:r.label}),e.jsx("span",{className:"sm:hidden",children:r.id==="directory"?"Directory":r.id==="messages"?"Messages":r.id==="groups"?"Groups":"Endorsements"})]},r.id)})}),g==="directory"&&Ne(),g==="messages"&&ke(),g==="groups"&&we(),g==="endorsements"&&ve()]}),be&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-4",children:["Endorse ",S.name]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Select Skill"}),e.jsxs("select",{value:y.skill,onChange:r=>G({...y,skill:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Choose a skill"}),S.skills.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Message (Optional)"}),e.jsx("textarea",{value:y.message,onChange:r=>G({...y,message:r.target.value}),placeholder:"Great team player with excellent React skills...",rows:3,className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:async()=>{if(!y.skill){b.error("Please select a skill to endorse");return}if(!a){b.error("You must be logged in to endorse");return}try{const r=await c(`/developers/${S.userId}/endorse`,{method:"POST",body:JSON.stringify({skill:y.skill,message:y.message,endorserName:l?.displayName||a.name||"User",endorserAvatar:l?.avatrUrl||"https://api.dicebear.com/9.x/adventurer/svg?seed=User",recipientName:S.name})});r.endorsement&&te(s=>[...s,r.endorsement]),z(!1),Q(null),G({skill:"",message:""}),b.success(`âœ… Successfully endorsed ${S.name} for ${y.skill}!`,{duration:4e3,position:"top-center"})}catch(r){console.error("Error saving endorsement:",r);const s=r?.message||"Failed to save endorsement. Please try again.";b.error(s)}},disabled:!y.skill,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Send Endorsement"}),e.jsx("button",{onClick:()=>{z(!1),Q(null),G({skill:"",message:""})},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})})]})}export{Ye as default};
