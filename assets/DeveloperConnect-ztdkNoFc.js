import{c as ar,q as f,l as Tr,n as $r,r as g,H as h,j as e,I as b,p as fe,M as Lr,B as tr,S as W,X as Z,h as ce,v as ee,J as Er,K as ge,E as Or,N as qr}from"./index-BMGnK_ag.js";import{C as sr}from"./CustomSelect-B_eiJE5v.js";import{i as Pe,g as E}from"./socketService-BG6E60ON.js";import{S as Ge}from"./send-BwmIWyrN.js";import{C as Fe}from"./circle-alert-ByKxQe33.js";import{U as Ur}from"./user-minus-C5NBwCEU.js";import{P as re}from"./plus-X_QdJai2.js";import{T as Je}from"./trash-2-mQyV1b1T.js";import{T as Pr}from"./trending-up-CMzk1dMt.js";import"./chevron-down-BAPy0FL3.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],Fr=ar("bookmark-plus",Gr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Hr=ar("heart",Jr),Wr=async s=>{try{const i=new URLSearchParams;return s&&Object.entries(s).forEach(([k,I])=>{I!==void 0&&i.append(k,I.toString())}),(await f(`/study-groups?${i.toString()}`)).groups}catch(i){return console.error("Error getting study groups:",i),[]}},me=Wr,Yr=async s=>{try{return(await f("/study-groups",{method:"POST",body:JSON.stringify(s)})).group}catch(i){throw console.error("Error creating study group:",i),i}},_r=async s=>{try{await f(`/study-groups/${s}`,{method:"DELETE"})}catch(i){throw console.error("Error deleting study group:",i),i}},zr=async(s,i,j)=>{try{return await f(`/study-groups/${s}/join`,{method:"POST",body:JSON.stringify({userName:i,userAvatar:j})})}catch(k){throw console.error("Error requesting to join study group:",k),k}},Vr=async(s,i)=>{try{return(await f(`/study-groups/${s}/approve/${i}`,{method:"POST"})).group}catch(j){throw console.error("Error approving join request:",j),j}},Kr=async(s,i)=>{try{return(await f(`/study-groups/${s}/reject/${i}`,{method:"POST"})).group}catch(j){throw console.error("Error rejecting join request:",j),j}},Xr=async(s,i)=>{try{return(await f(`/study-groups/${s}/members/${i}`,{method:"DELETE"})).group}catch(j){throw console.error("Error removing member:",j),j}},we=s=>{if(!s)return"Unknown date";try{if(s?.toDate&&typeof s.toDate=="function")return s.toDate().toLocaleDateString();if(s?.seconds)return new Date(s.seconds*1e3).toLocaleDateString();const i=new Date(s);return isNaN(i.getTime())?"Unknown date":i.toLocaleDateString()}catch{return"Unknown date"}},He=(s,i)=>s?.avatar&&s.avatar.trim()!==""?s.avatar:s?.avatrUrl&&s.avatrUrl.trim()!==""?s.avatrUrl:s?.profilePic&&s.profilePic.trim()!==""?s.profilePic:`https://api.dicebear.com/9.x/adventurer/svg?seed=${i||"default"}`,Qr=(s,i=!1)=>{if(!s)return null;const j=/(https?:\/\/[^\s]+)/g;return s.split(j).map((I,Y)=>I.match(j)?e.jsx("a",{href:I,target:"_blank",rel:"noopener noreferrer",className:`underline hover:opacity-80 ${i?"text-cyan-100":"text-[#00ADB5]"}`,onClick:O=>O.stopPropagation(),children:I},Y):e.jsx("span",{children:I},Y))};function dt(){const{user:s}=Tr(),{userprofile:i}=$r(),[j,k]=g.useState("directory"),[I,Y]=g.useState(""),[O,xe]=g.useState([]),[je,lr]=g.useState(""),[v,Ne]=g.useState(null),[A,We]=g.useState(null),[P,_]=g.useState([]),[q,ve]=g.useState(""),[or,he]=g.useState(!1),[T,Ye]=g.useState([]),[nr,_e]=g.useState(!0),[ze,ke]=g.useState(null),[Se,De]=g.useState([]),[Ce,ir]=g.useState(12),[Ve,S]=g.useState([]),[G,Ke]=g.useState(""),[dr,ue]=g.useState(!1),[D,z]=g.useState({name:"",description:"",topic:"",level:"Beginner",maxMembers:10}),[Ae,F]=g.useState([]),[cr,V]=g.useState([]),[gr,te]=g.useState(!1),[mr,se]=g.useState(!1),[K,Ie]=g.useState("reviews"),[J,xr]=g.useState(""),[w,$]=g.useState({website:"",url:"",category:"",rating:5,title:"",content:"",pros:"",cons:""}),[R,pe]=g.useState({title:"",description:"",tags:""}),[hr,U]=g.useState(!1),[y,L]=g.useState(null),[ye,H]=g.useState(""),[ur,Re]=g.useState(!1),[ae,Be]=g.useState(null),[le,Me]=g.useState(""),[be,Xe]=g.useState(null),pr=["Coding Practice","Web Development","Mobile Development","Data Science","DevOps","UI/UX","Algorithms","System Design","Interview Prep","Other"],[m,C]=g.useState(null),[oe,ne]=g.useState(""),[Qe,B]=g.useState([]),Ze=g.useRef(null),ie=g.useRef(null),[M,Te]=g.useState(!1),[er,$e]=g.useState(null),[X,yr]=g.useState({}),[br,Le]=g.useState({}),[de,Ee]=g.useState(new Set),fr=()=>{Ze.current?.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{fr()},[P]),g.useEffect(()=>{const r=new URLSearchParams(window.location.search),a=r.get("tab"),l=r.get("reviewId");a==="reviews"&&(k("reviews"),Ie("reviews"),l&&(Xe(l),window.history.replaceState({},"",window.location.pathname)))},[]),g.useEffect(()=>{be&&Ae.length>0&&(setTimeout(()=>{const r=document.getElementById(`review-${be}`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},300),setTimeout(()=>Xe(null),3e3))},[be,Ae]),g.useEffect(()=>{Pe();const r=E();if(r){Te(r.connected);const a=()=>{console.log("ðŸŸ¢ Socket connected"),Te(!0),s?.id&&r.emit("userOnline",{userId:s.id})},l=()=>{console.log("ðŸ”´ Socket disconnected"),Te(!1)},t=d=>{console.log("ðŸ‘¥ Online users:",d),Ee(new Set(d))},c=d=>{console.log("ðŸŸ¢ User online:",d.userId),Ee(x=>new Set([...x,d.userId]))},p=d=>{console.log("ðŸ”´ User offline:",d.userId),Ee(x=>{const N=new Set(x);return N.delete(d.userId),N})},o=d=>{d.chatId===A&&d.userId!==s?.id&&($e(d.userName),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>$e(null),3e3))},u=d=>{d.chatId===A&&d.userId!==s?.id&&$e(null)},n=d=>{d.readBy!==s?.id&&Le(x=>({...x,[d.messageId]:"read"}))};return r.on("connect",a),r.on("disconnect",l),r.on("userTyping",o),r.on("userStopTyping",u),r.on("messageRead",n),r.on("onlineUsers",t),r.on("userOnline",c),r.on("userOffline",p),r.emit("getOnlineUsers"),()=>{r.off("connect",a),r.off("disconnect",l),r.off("userTyping",o),r.off("userStopTyping",u),r.off("messageRead",n),r.off("onlineUsers",t),r.off("userOnline",c),r.off("userOffline",p),ie.current&&clearTimeout(ie.current)}}},[A,s?.id]),g.useEffect(()=>{(async()=>{try{_e(!0),ke(null);const a=await f("/developers/init/page-data");console.log("Developer Connect data loaded:",a),Ye(a.developers||[]),S(a.studyGroups||[]),F(a.techReviews||[]),V(a.helpRequests||[]),(!a.developers||a.developers.length===0)&&ke("No developers found. The community is waiting for you!")}catch(a){console.error("Error loading Developer Connect data:",a);try{const[l,t,c,p]=await Promise.all([f("/developers").catch(()=>[]),f("/study-groups").catch(()=>({groups:[]})),f("/developers/tech-reviews").catch(()=>({reviews:[]})),f("/developers/help-requests").catch(()=>({requests:[]}))]);Ye(l||[]),S(t.groups||[]),F(c.reviews||[]),V(p.requests||[])}catch{ke("Failed to load developers: "+(a instanceof Error?a.message:String(a)))}}finally{_e(!1)}})()},[]),g.useEffect(()=>{if(!v||!s){_([]),We(null);return}let r=!0,a=null;return(async()=>{console.log("Setting up chat for:",s.id,v),he(!0);try{const t=T.find(o=>o.userId===v);if(!t){console.error("Selected developer not found"),he(!1);return}const c=await f("/chats",{method:"POST",body:JSON.stringify({participantIds:[s.id,v],participantNames:[i?.displayName||s.name||"User",t.name],participantAvatars:[i?.avatrUrl||"",t.avatar]})});if(!r)return;We(c.id),a=c.id,console.log("Chat ID obtained:",c.id);const p=await f(`/chats/${c.id}/messages`);r&&_(p),he(!1);try{Pe();const o=E();if(o){o.emit("join-chat",c.id),console.log("ðŸ“¡ Joined chat room:",c.id);const u=n=>{console.log("ðŸ“© Received new message:",n),n.chatId===c.id&&r&&_(d=>d.some(N=>N.id===n.id)?d:[...d,n])};o.on("newMessage",u),o._chatMessageHandler=u}}catch(o){console.warn("Socket init failed, falling back to polling:",o)}}catch(t){console.error("Error setting up chat:",t),r&&he(!1)}})(),()=>{r=!1;try{const t=E();if(t&&t.connected&&a){t.emit("leave-chat",a);const c=t._chatMessageHandler;c&&t.off("newMessage",c),delete t._chatMessageHandler}}catch{}}},[v,s?.id,T,i]),g.useEffect(()=>{if(!s||j!=="messages"){De([]);return}(async()=>{try{const l=(await f("/chats")||[]).map(t=>({participantId:t.participantId,participantName:t.participantName,participantAvatar:t.participantAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.participantName?.replace(/\s+/g,"")}`,lastMessage:t.lastMessage,lastMessageAt:t.lastMessageAt}));De(l)}catch(a){console.warn("Could not load conversations yet:",a),De([])}})()},[s?.id,j]),g.useEffect(()=>{if(s)try{Pe();const r=E();if(!r)return;r.emit("join-user",s.id);const a=n=>{console.log("New join request:",n),m&&m.id===n.groupId&&C(d=>{if(!d)return d;const x=d.joinRequests||[];return x.some(N=>N.userId===n.request.userId)?d:{...d,joinRequests:[...x,n.request]}}),h.success(`${n.request.userName} requested to join your group!`)},l=n=>{console.log("Request approved:",n),h.success(`You've been approved to join ${n.groupName}!`),n.group&&(S(d=>d.map(x=>x.id===n.groupId?n.group:x)),m&&m.id===n.groupId&&C(n.group))},t=n=>{console.log("Request rejected:",n),h.error(`Your request to join ${n.groupName} was rejected.`),m&&m.id===n.groupId&&C(d=>d&&{...d,joinRequests:d.joinRequests?.filter(x=>x.userId!==s.id)||[]})},c=n=>{console.log("Member joined:",n),h.success(`${n.member.name} has joined the group!`),n.group&&(S(d=>d.map(x=>x.id===n.groupId?n.group:x)),m&&m.id===n.groupId&&C(n.group))},p=n=>{console.log("Removed from group:",n),h.error(`You've been removed from ${n.groupName}`),m&&m.id===n.groupId&&C(null),S(d=>d.filter(x=>x.id!==n.groupId))},o=n=>{console.log("Member removed:",n),n.group&&(S(d=>d.map(x=>x.id===n.groupId?n.group:x)),m&&m.id===n.groupId&&C(n.group))},u=n=>{console.log("Group updated:",n),n.group&&(S(d=>d.map(x=>x.id===n.groupId?n.group:x)),m&&m.id===n.groupId&&C(n.group))};return r.on("joinRequest",a),r.on("requestApproved",l),r.on("requestRejected",t),r.on("memberJoined",c),r.on("removedFromGroup",p),r.on("memberRemoved",o),r.on("groupUpdated",u),()=>{r.emit("leave-user",s.id),r.off("joinRequest",a),r.off("requestApproved",l),r.off("requestRejected",t),r.off("memberJoined",c),r.off("removedFromGroup",p),r.off("memberRemoved",o),r.off("groupUpdated",u)}}catch(r){console.warn("Socket initialization failed for study groups:",r)}},[s?.id,m?.id]),g.useEffect(()=>{if(!(!m||!s))try{const r=E();return r&&r.emit("join-group",m.id),()=>{r&&r.emit("leave-group",m.id)}}catch(r){console.warn("Could not join group socket room:",r)}},[m?.id,s]),g.useEffect(()=>{if(!m||!s){B([]);return}(async()=>{try{const a=await f(`/study-groups/${m.id}/messages`);B(a.messages||[])}catch(a){console.warn("Could not load group messages:",a),B([])}})();try{const a=E();if(a){const l=t=>{t.groupId===m.id&&t.message&&B(c=>c.some(p=>p.id===t.message.id)?c:[...c,t.message])};return a.on("newGroupMessage",l),()=>{a.off("newGroupMessage",l)}}}catch(a){console.warn("Socket not available for group messages:",a)}},[m?.id,s]);const Q=T.filter(r=>{const a=r.skills||[],l=r.lookingFor||"",t=(r.name||"").toLowerCase().includes(I.toLowerCase())||a.some(o=>o.toLowerCase().includes(I.toLowerCase())),c=O.length===0||O.some(o=>a.includes(o)),p=!je||l.includes(je);return t&&c&&p}),rr=Q.slice(0,Ce),wr=Q.length>Ce,jr=["React","Node.js","Python","Java","MongoDB","TypeScript","AWS","Machine Learning"],Nr=()=>nr?e.jsx("div",{className:"space-y-6",children:[1,2,3,4,5,6].map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-700 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded mb-2 w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-1/3"})]})]}),e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded flex-1"}),e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded flex-1"})]})]},r))}):ze?e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-8 border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Fe,{className:"w-6 h-6 text-red-600 dark:text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-300 mb-2",children:"Unable to Load Developers"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:ze}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})]})}):T.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(fe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Developers Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:"Developers who complete their profiles will appear here. Invite your friends!"}),e.jsx("button",{className:"px-6 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Invite Friends"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("input",{type:"text",placeholder:"Search developers by name or skills...",value:I,onChange:r=>Y(r.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#00ADB5] focus:bg-white dark:focus:bg-gray-600 transition-all"})]}),e.jsx(sr,{value:O.length>0?O[0]:"",onChange:r=>{xe(r===""?[]:a=>a.includes(r)?a.filter(l=>l!==r):[r])},options:[{value:"",label:"All Skills"},...jr.map(r=>({value:r,label:r}))],className:"w-full sm:min-w-[180px] sm:w-auto"}),e.jsx(sr,{value:je,onChange:r=>lr(r),options:[{value:"",label:"Looking For"},{value:"Teammates",label:"Teammates"},{value:"Mentoring",label:"Mentoring"},{value:"Both",label:"Both"}],className:"w-full sm:min-w-[180px] sm:w-auto"})]}),O.length>0&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[O.map(r=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium text-white",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[r,e.jsx("button",{onClick:()=>xe(a=>a.filter(l=>l!==r)),className:"ml-1 hover:bg-white/20 rounded-full p-0.5",children:"Ã—"})]},r)),e.jsx("button",{onClick:()=>xe([]),className:"px-3 py-1 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white",children:"Clear all"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-white",children:[e.jsxs("p",{children:["Showing ",rr.length," of ",Q.length," developers"]}),Q.length!==T.length&&e.jsxs("p",{children:[T.length," total in directory"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:rr.map((r,a)=>e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("img",{src:r.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${r.name}`,alt:r.name||"Developer",className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.name||"Unknown"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:[r.institute||r.college||"Not specified"," â€¢ ",r.yearOfStudy?r.yearOfStudy===1?"1st Year":r.yearOfStudy===2?"2nd Year":r.yearOfStudy===3?"3rd Year":r.yearOfStudy===4?"4th Year":`${r.yearOfStudy} Year`:r.year||"Student"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",style:{color:"#00ADB5"},children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:r.challenges_solved||r.codeArenaStats?.problemsSolved||0})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-4 line-clamp-2",children:r.bio||"No bio available"}),e.jsx("div",{className:"rounded-lg p-3 mb-4",style:{background:"rgba(0, 173, 181, 0.1)"},children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Problems Solved"}),e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:r.challenges_solved||r.codeArenaStats?.problemsSolved||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Rank"}),e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:["#",r.marathon_rank||r.codeArenaStats?.rank||"N/A"]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(r.skills||[]).length>0?e.jsxs(e.Fragment,{children:[(r.skills||[]).slice(0,3).map(l=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:l},l)),(r.skills||[]).length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded-full",children:["+",(r.skills||[]).length-3]})]}):e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No skills added"})})]}),r.badges&&r.badges.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:"Badges"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.badges.slice(0,4).map((l,t)=>e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 border border-purple-200 dark:border-purple-800",title:l.description,children:[l.icon," ",l.name]},t)),r.badges.length>4&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full",children:["+",r.badges.length-4," more"]})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-green-700 dark:text-green-400 mb-1",children:r.lookingFor||"Open to opportunities"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 line-clamp-2",children:r.lookingForDetails||"Looking to connect with other developers"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{onClick:()=>{Ne(r.userId),k("messages")},className:"flex-1 px-3 py-2 text-white text-sm font-semibold rounded-lg transition-all shadow-md hover:opacity-90 flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(ee,{className:"w-4 h-4"}),"Message"]}),e.jsxs("button",{onClick:()=>{k("reviews"),h.success("Check out reviews shared by the community!")},className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white text-sm font-semibold rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),"Reviews"]})]})]},r.userId))}),wr&&e.jsx("div",{className:"text-center mt-8",children:e.jsxs("button",{onClick:()=>ir(r=>r+12),className:"px-8 py-3 text-white rounded-lg transition-all shadow-lg hover:opacity-90 font-semibold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:["Load More (",Q.length-Ce," remaining)"]})}),Q.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No developers found"}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Try adjusting your filters"})]})]}),vr=()=>{const r=v?T.find(o=>o.userId===v):null,a=()=>{const o=E();o&&A&&s&&o.emit("typing",{chatId:A,userId:s.id,userName:i?.displayName||s.name||"User"})},l=()=>{const o=E();o&&A&&s&&o.emit("stopTyping",{chatId:A,userId:s.id})},t=()=>{const o=E();o&&A&&s&&(P.filter(n=>n.senderId!==s.id&&!n.isRead).forEach(n=>{o.emit("markAsRead",{messageId:n.id,chatId:A,readBy:s.id})}),v&&yr(n=>({...n,[v]:0})))};v&&P.length>0&&A&&setTimeout(()=>t(),100);const c=async()=>{if(!q.trim()||!s||!A)return;l();const o=q,u=`temp-${Date.now()}`;ve(""),Le(d=>({...d,[u]:"sent"}));const n={id:u,senderId:s.id,senderName:i?.displayName||i?.name||s.name||"User",senderAvatar:i?.avatar||i?.avatrUrl||"",message:o,text:o,createdAt:new Date().toISOString(),timestamp:new Date,isRead:!1};_(d=>[...d,n]);try{const d=await f(`/chats/${A}/messages`,{method:"POST",body:JSON.stringify({senderId:s.id,senderName:i?.displayName||i?.name||s.name||"User",senderAvatar:i?.avatar||i?.avatrUrl||"",message:o})});d?.id&&(_(x=>x.map(N=>N.id===u?{...N,id:d.id}:N)),Le(x=>{const N={...x};return delete N[u],N[d.id]="delivered",N}))}catch(d){console.error("Error sending message:",d),ve(o),_(x=>x.filter(N=>N.id!==u)),h.error("Failed to send message. Please try again.")}},p=o=>{ve(o.target.value),o.target.value.trim()?a():l()};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 h-[600px] lg:h-[650px]",children:[e.jsxs("div",{className:`lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col shadow-lg ${v?"hidden lg:flex":"flex"}`,children:[e.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 bg-gradient-to-r from-cyan-50/50 via-white to-cyan-50/50 dark:from-gray-800 dark:via-gray-800 dark:to-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2 text-base",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:e.jsx(ee,{className:"w-4 h-4 text-white"})}),"Chats"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-10",children:[Se.length," active"]})]}),e.jsxs(b.div,{initial:{scale:.9},animate:{scale:1},className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-[11px] font-semibold ${M?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400"}`,children:[e.jsx(b.div,{animate:{scale:M?[1,1.4,1]:1},transition:{repeat:1/0,duration:1.5},className:`w-2 h-2 rounded-full ${M?"bg-emerald-500":"bg-amber-500"}`}),M?"Live":"Offline"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:Se.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-[#00ADB5]/10 to-[#00ADB5]/5 dark:from-[#00ADB5]/20 dark:to-[#00ADB5]/10 border border-[#00ADB5]/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(ee,{className:"w-8 h-8 text-[#00ADB5]"})}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"No conversations yet"}),e.jsx("p",{className:"text-xs mt-2 text-gray-500 dark:text-gray-400",children:"Visit Developer Directory to start chatting"})]}):Se.map(o=>e.jsxs(b.button,{whileHover:{x:4,backgroundColor:"rgba(0,173,181,0.05)"},whileTap:{scale:.99},onClick:()=>Ne(o.participantId),className:`w-full p-4 transition-all text-left relative overflow-hidden ${v===o.participantId?"bg-gradient-to-r from-[#00ADB5]/10 to-transparent dark:from-[#00ADB5]/15 dark:to-transparent":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[v===o.participantId&&e.jsx(b.div,{layoutId:"selectedConv",className:"absolute left-0 top-0 bottom-0 w-1 rounded-r-full",style:{background:"linear-gradient(180deg, #00ADB5 0%, #00d4ff 100%)"}}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o.participantAvatar,alt:o.participantName,className:`w-12 h-12 rounded-full shadow-md transition-all ${v===o.participantId?"ring-2 ring-[#00ADB5] ring-offset-2 dark:ring-offset-gray-800":"ring-1 ring-gray-200 dark:ring-gray-600"}`}),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white dark:border-gray-800 ${de.has(o.participantId)?"bg-emerald-500":"bg-gray-400 dark:bg-gray-500"}`}),X[o.participantId]>0&&e.jsx(b.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -left-1 w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-lg",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:X[o.participantId]>9?"9+":X[o.participantId]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsx("p",{className:`font-semibold truncate text-sm ${X[o.participantId]>0?"text-gray-900 dark:text-white font-bold":v===o.participantId?"text-[#00ADB5]":"text-gray-900 dark:text-white"}`,children:o.participantName}),o.lastMessageAt&&e.jsx("span",{className:`text-[10px] flex-shrink-0 ml-2 ${X[o.participantId]>0?"text-[#00ADB5] font-semibold":"text-gray-400 dark:text-gray-500"}`,children:new Date(o.lastMessageAt).toLocaleDateString([],{month:"short",day:"numeric"})})]}),e.jsx("p",{className:`text-xs truncate flex items-center gap-1 ${X[o.participantId]>0?"text-gray-700 dark:text-gray-200 font-medium":"text-gray-500 dark:text-gray-400"}`,children:o.lastMessage||e.jsx("span",{className:"italic text-gray-400",children:"Start a conversation..."})})]})]})]},o.participantId))})]}),e.jsx("div",{className:`lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 flex flex-col shadow-lg overflow-hidden ${v?"flex":"hidden lg:flex"}`,children:!v||!r?e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-br from-cyan-50/30 via-white to-cyan-50/30 dark:from-gray-800 dark:via-gray-800 dark:to-gray-800",children:e.jsxs(b.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,type:"spring"},className:"text-center p-8 max-w-md",children:[e.jsx(b.div,{animate:{y:[0,-8,0]},transition:{repeat:1/0,duration:3,ease:"easeInOut"},className:"w-28 h-28 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 50%, #00ADB5 100%)",backgroundSize:"200% 200%"},children:e.jsx(ee,{className:"w-14 h-14 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Start a Conversation"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 leading-relaxed",children:"Select a developer from the list to connect and collaborate in real-time"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-gray-400 dark:text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"Real-time chat"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 bg-[#00ADB5] rounded-full"}),"Instant delivery"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>Ne(null),className:"lg:hidden p-2 -ml-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.avatar,alt:r.name,className:"w-10 h-10 lg:w-11 lg:h-11 rounded-full ring-2 ring-[#00ADB5] ring-offset-2 dark:ring-offset-gray-800 shadow-md"}),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white dark:border-gray-800 ${de.has(r.userId)?"bg-emerald-500":"bg-gray-400 dark:bg-gray-500"}`})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-base",children:r.name}),er?e.jsxs(b.p,{initial:{opacity:0},animate:{opacity:1},className:"text-xs text-[#00ADB5] font-medium flex items-center gap-1",children:[e.jsxs("span",{className:"flex gap-0.5",children:[e.jsx(b.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:0},className:"w-1 h-1 bg-[#00ADB5] rounded-full"}),e.jsx(b.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:.2},className:"w-1 h-1 bg-[#00ADB5] rounded-full"}),e.jsx(b.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:.4},className:"w-1 h-1 bg-[#00ADB5] rounded-full"})]}),"typing..."]}):e.jsxs("p",{className:`text-xs flex items-center gap-1 ${de.has(r.userId)?"text-emerald-600 dark:text-emerald-400":"text-gray-500 dark:text-gray-400"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${de.has(r.userId)?"bg-emerald-500":"bg-gray-400"}`}),de.has(r.userId)?"Online":"Offline"]})]})]}),e.jsxs("div",{className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-sm ${M?"bg-emerald-50/80 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-700":"bg-amber-50/80 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700"}`,children:[e.jsx(b.div,{animate:{scale:M?[1,1.3,1]:1},transition:{repeat:1/0,duration:2},className:`w-2 h-2 rounded-full ${M?"bg-emerald-500":"bg-amber-500"}`}),e.jsx("span",{className:`${M?"text-emerald-700 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:M?"Live":"Connecting"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-5 space-y-3 sm:space-y-4 bg-gray-50 dark:bg-gray-900",children:or?e.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 dark:border-gray-700",style:{borderTopColor:"#00ADB5"}}),e.jsx(ee,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-5 h-5 text-cyan-500"})]}),e.jsx("div",{className:"text-gray-500 text-sm mt-4",children:"Loading messages..."})]}):P.length===0?e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center h-full",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-[#00ADB5]/20 to-[#00ADB5]/10 dark:from-[#00ADB5]/20 dark:to-[#00ADB5]/10 flex items-center justify-center mb-4 border border-[#00ADB5]/20",children:e.jsx("span",{className:"text-4xl",children:"ðŸ‘‹"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:"Start the conversation!"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:["Say hello to ",r?.name||"your new connection"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"px-3 py-1 bg-white dark:bg-gray-800 rounded-full text-xs text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-700 shadow-sm",children:P[0]?.createdAt?new Date(P[0].createdAt).toLocaleDateString([],{weekday:"short",month:"short",day:"numeric"}):"Today"})}),P.map(o=>{const u=o.senderId===s?.id||o.senderId===s?.id?.toString()||o.userId===s?.id,n=br[o.id]||(o.isRead?"read":"delivered");return e.jsxs(b.div,{initial:{opacity:0,y:15,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.25,type:"spring",stiffness:400,damping:25},className:`flex w-full ${u?"justify-end":"justify-start"}`,children:[!u&&e.jsx("img",{src:o.senderAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${o.senderName?.replace(/\s+/g,"")||"User"}`,alt:o.senderName||"User",className:"w-8 h-8 rounded-full flex-shrink-0 mr-2 shadow-md ring-2 ring-white dark:ring-gray-800"}),e.jsx("div",{className:`max-w-[70%] ${u?"mr-2":""}`,children:e.jsxs(b.div,{whileHover:{scale:1.01,y:-1},className:`px-4 py-2.5 relative group ${u?"rounded-2xl rounded-tr-md text-white":"rounded-2xl rounded-tl-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-100 dark:border-gray-600"}`,style:u?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",boxShadow:"0 4px 20px rgba(0, 173, 181, 0.25)"}:{boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)"},children:[e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:Qr(o.message||o.content||o.text,u)}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${u?"justify-end":""}`,children:[e.jsx("p",{className:`text-[10px] ${u?"text-cyan-100":"text-gray-400"}`,children:o.createdAt?new Date(o.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(o.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),u&&e.jsx("span",{className:"text-[10px] text-cyan-100 ml-1",children:n==="read"?e.jsx("span",{title:"Read",children:"âœ“âœ“"}):n==="delivered"?e.jsx("span",{title:"Delivered",className:"opacity-70",children:"âœ“âœ“"}):e.jsx("span",{title:"Sent",className:"opacity-50",children:"âœ“"})})]})]})}),u&&e.jsx("img",{src:i?.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s?.name?.replace(/\s+/g,"")||"Me"}`,alt:"Me",className:"w-8 h-8 rounded-full flex-shrink-0 ml-2 shadow-md ring-2 ring-white dark:ring-gray-800"})]},o.id)}),e.jsx("div",{ref:Ze}),er&&e.jsx(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center gap-2 pl-10",children:e.jsx("div",{className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl rounded-tl-md shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:0},className:"w-2 h-2 bg-[#00ADB5] rounded-full"}),e.jsx(b.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:.2},className:"w-2 h-2 bg-[#00ADB5] rounded-full"}),e.jsx(b.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:.4},className:"w-2 h-2 bg-[#00ADB5] rounded-full"})]})})})]})}),e.jsxs("div",{className:"p-3 sm:p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[q.trim()&&e.jsx(b.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"text-[11px] text-[#00ADB5] mb-2 ml-2 hidden sm:block",children:"Press Enter to send"}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 items-center bg-gray-50 dark:bg-gray-900 rounded-2xl p-1.5 sm:p-2 shadow-sm border border-gray-200 dark:border-gray-700 transition-all focus-within:border-[#00ADB5] focus-within:ring-2 focus-within:ring-[#00ADB5]/20",children:[e.jsx("button",{className:"hidden sm:flex p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("input",{type:"text",placeholder:"Type a message...",value:q,onChange:p,onKeyPress:o=>{o.key==="Enter"&&q.trim()&&c()},onBlur:()=>l(),className:"flex-1 px-2 py-2 bg-transparent text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none text-sm"}),e.jsx("button",{className:"hidden sm:flex p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),e.jsx(b.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,disabled:!q.trim(),className:`p-2.5 rounded-xl transition-all ${q.trim()?"text-white shadow-lg":"text-gray-400 bg-gray-100 dark:bg-gray-800"}`,style:q.trim()?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",boxShadow:"0 4px 12px rgba(0, 173, 181, 0.4)"}:{},children:e.jsx(Ge,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"hidden sm:flex items-center justify-center gap-2 mt-2",children:M?e.jsxs("p",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),"Real-time messaging active"]}):e.jsxs("p",{className:"text-[10px] text-amber-500 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),"Connecting to real-time..."]})})]})]})})]})},kr=()=>{if(m){const r=m.members?.some(t=>t.userId===s?.id),a=m.members?.some(t=>t.userId===s?.id&&(t.role==="admin"||t.role==="creator")),l=m.joinRequests?.some(t=>t.userId===s?.id&&t.status==="pending");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("button",{onClick:()=>C(null),className:"font-semibold flex items-center gap-2 transition-colors",style:{color:"#00ADB5"},onMouseEnter:t=>t.currentTarget.style.opacity="0.8",onMouseLeave:t=>t.currentTarget.style.opacity="1",children:"â† Back to Groups"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:m.name}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:m.description})]}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${m.level==="Beginner"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":m.level==="Intermediate"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:m.level})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("span",{className:"text-sm px-3 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:m.topic}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-white",children:[m.members?.length||0," / ",m.maxMembers," members"]})]}),a&&m.joinRequests?.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-3 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5"}),"Pending Join Requests (",m.joinRequests.length,")"]}),e.jsx("div",{className:"space-y-3",children:m.joinRequests.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("img",{src:t.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${t.userName}`,alt:t.userName,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.userName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Requested ",new Date(t.requestedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{try{const c=await Vr(m.id,t.userId);C(c);const p=await me();S(p),h.success(`${t.userName} has been approved!`)}catch(c){h.error(c?.message||"Failed to approve request")}},className:"p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:"Approve",children:e.jsx(Er,{className:"w-4 h-4"})}),e.jsx("button",{onClick:async()=>{try{const c=await Kr(m.id,t.userId);C(c),h.success(`Request from ${t.userName} has been rejected`)}catch(c){h.error(c?.message||"Failed to reject request")}},className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",title:"Reject",children:e.jsx(Z,{className:"w-4 h-4"})})]})]},t.userId))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Members"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:m.members?.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("img",{src:t.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${t.name}`,alt:t.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:t.role==="creator"?"ðŸ‘‘ Creator":t.role==="admin"?"â­ Admin":"Member"})]}),a&&t.role!=="creator"&&t.userId!==s?.id&&e.jsx("button",{onClick:async()=>{if(window.confirm(`Remove ${t.name} from the group?`))try{const c=await Xr(m.id,t.userId);C(c);const p=await me();S(p),h.success(`${t.name} has been removed from the group`)}catch(c){h.error(c?.message||"Failed to remove member")}},className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Remove member",children:e.jsx(Ur,{className:"w-4 h-4"})})]},t.userId))})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5"}),"Group Discussion"]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mb-4 h-64 overflow-y-auto",children:Qe.length===0?e.jsx("p",{className:"text-gray-500 text-center text-sm py-8",children:"No messages yet. Start the conversation!"}):e.jsx("div",{className:"space-y-3",children:Qe.map((t,c)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{src:t.avatar||t.senderAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.name||t.senderName}`,alt:t.name||t.senderName,className:"w-8 h-8 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:t.name||t.senderName}),e.jsx("span",{className:"text-xs text-gray-400",children:t.timestamp?new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"now"})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-white",children:t.message})]})]},t.id||c))})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:oe,onChange:t=>ne(t.target.value),onKeyPress:async t=>{if(t.key==="Enter"&&oe.trim()){const c=oe.trim(),p=i?.displayName||i?.name||s?.name||"User",o=i?.avatar||i?.avatrUrl||"",u=`temp-${Date.now()}`,n={id:u,name:p,senderName:p,avatar:o,senderAvatar:o,message:c,timestamp:new Date().toISOString()};B(d=>[...d,n]),ne("");try{const d=await f(`/study-groups/${m.id}/messages`,{method:"POST",body:JSON.stringify({message:c,senderName:p,senderAvatar:o})});d.message&&B(x=>x.map(N=>N.id===u?d.message:N))}catch(d){console.error("Error sending group message:",d),B(x=>x.filter(N=>N.id!==u)),ne(c),h.error("Failed to send message")}}},placeholder:"Type a message...",className:"flex-1 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none"}),e.jsx("button",{onClick:async()=>{if(oe.trim()){const t=oe.trim(),c=i?.displayName||i?.name||s?.name||"User",p=i?.avatar||i?.avatrUrl||"",o=`temp-${Date.now()}`,u={id:o,name:c,senderName:c,avatar:p,senderAvatar:p,message:t,timestamp:new Date().toISOString()};B(n=>[...n,u]),ne("");try{const n=await f(`/study-groups/${m.id}/messages`,{method:"POST",body:JSON.stringify({message:t,senderName:c,senderAvatar:p})});n.message&&B(d=>d.map(x=>x.id===o?n.message:x))}catch(n){console.error("Error sending group message:",n),B(d=>d.filter(x=>x.id!==o)),ne(t),h.error("Failed to send message")}}},className:"px-4 py-2 text-white rounded-lg transition-all shadow-md hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:e.jsx(Ge,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Resources & Schedule"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:t=>{t.currentTarget.style.borderColor="#00ADB5",t.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",t.currentTarget.style.color="#00ADB5"},onMouseLeave:t=>{t.currentTarget.style.borderColor="",t.currentTarget.style.backgroundColor="",t.currentTarget.style.color=""},children:[e.jsx(re,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Share Resource"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:t=>{t.currentTarget.style.borderColor="#00ADB5",t.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",t.currentTarget.style.color="#00ADB5"},onMouseLeave:t=>{t.currentTarget.style.borderColor="",t.currentTarget.style.backgroundColor="",t.currentTarget.style.color=""},children:[e.jsx(re,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Schedule Session"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:t=>{t.currentTarget.style.borderColor="#00ADB5",t.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",t.currentTarget.style.color="#00ADB5"},onMouseLeave:t=>{t.currentTarget.style.borderColor="",t.currentTarget.style.backgroundColor="",t.currentTarget.style.color=""},children:[e.jsx(re,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Set Goal"})]})]})]})]}):e.jsx("div",{className:"text-center py-8 border-t border-gray-200 dark:border-gray-700",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:e.jsx(Fe,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-2 font-semibold",children:"Request Pending"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Waiting for the group owner to approve your request"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 dark:text-white mb-4",children:"Request to join this group and get approval from the owner"}),e.jsx("button",{onClick:async()=>{if(s)try{const t=i?.displayName||s.name||"User",c=i?.avatrUrl||"",p=await zr(m.id,t,c);if(p.group){C(p.group);const o=await me();S(o)}h.success(p.message||"Join request sent! Waiting for approval.")}catch(t){console.error("Error requesting to join group:",t),h.error(t?.message||"Failed to send join request. Please try again.")}},disabled:m.members?.length>=m.maxMembers,className:"px-6 py-2 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Request to Join"})]})})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Study Groups"}),e.jsxs("div",{className:"relative flex-1 max-w-md mx-0 sm:mx-4",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:G,onChange:r=>Ke(r.target.value),placeholder:"Search groups...",className:"w-full pl-10 pr-10 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"}),G&&e.jsx("button",{onClick:()=>Ke(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Z,{className:"w-4 h-4"})})]}),e.jsxs("button",{onClick:()=>ue(!0),className:"px-4 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90 flex items-center gap-2 whitespace-nowrap",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(re,{className:"w-5 h-5"}),"Create Group"]})]}),dr&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Create Study Group"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Group Name"}),e.jsx("input",{type:"text",value:D.name,onChange:r=>z({...D,name:r.target.value}),placeholder:"DSA Interview Prep",className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Description"}),e.jsx("textarea",{value:D.description,onChange:r=>z({...D,description:r.target.value}),placeholder:"Daily DSA practice and mock interviews",rows:3,className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Topic"}),e.jsxs("select",{value:D.topic,onChange:r=>z({...D,topic:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Topic"}),e.jsx("option",{value:"DSA",children:"Data Structures & Algorithms"}),e.jsx("option",{value:"Web Dev",children:"Web Development"}),e.jsx("option",{value:"Mobile",children:"Mobile Development"}),e.jsx("option",{value:"AI/ML",children:"AI & Machine Learning"}),e.jsx("option",{value:"System Design",children:"System Design"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Level"}),e.jsxs("select",{value:D.level,onChange:r=>z({...D,level:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"Beginner",children:"Beginner"}),e.jsx("option",{value:"Intermediate",children:"Intermediate"}),e.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Max Members"}),e.jsx("input",{type:"number",value:D.maxMembers,onChange:r=>z({...D,maxMembers:parseInt(r.target.value)}),min:"2",max:"50",className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:async()=>{if(D.name&&D.topic&&s)try{const r=await Yr({...D,creatorId:s.id,creatorName:i?.displayName||i?.name||s.name||"User",creatorAvatar:i?.avatar||i?.avatrUrl||"",members:[{userId:s.id,name:i?.displayName||i?.name||s.name||"User",avatar:i?.avatar||i?.avatrUrl||"",joinedAt:new Date,role:"creator"}]});r&&S(l=>[r,...l]);const a=await me();a&&a.length>0&&S(a),ue(!1),z({name:"",description:"",topic:"",level:"Beginner",maxMembers:10}),h.success("Study group created successfully!")}catch(r){console.error("Error creating group:",r),h.error("Failed to create group. Please try again.")}},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Create Group"}),e.jsx("button",{onClick:()=>ue(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})}),(()=>{const r=G.trim().toLowerCase(),a=r?Ve.filter(l=>(l.name||"").toLowerCase().includes(r)||(l.topic||"").toLowerCase().includes(r)||(l.description||"").toLowerCase().includes(r)||(l.creatorName||"").toLowerCase().includes(r)):Ve;return a.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(tr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:G?"No Groups Found":"No Study Groups Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:G?`No groups matching "${G}"`:"Create or join a study group to learn together"}),!G&&e.jsx("button",{onClick:()=>ue(!0),className:"px-6 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Create First Group"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:a.map(l=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-1",children:l.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:["by ",l.creatorName]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${l.level==="Beginner"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":l.level==="Intermediate"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:l.level}),l.creatorId===s?.id&&e.jsx("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this study group?"))try{await _r(l.id);const t=await me();S(t)}catch(t){console.error("Error deleting group:",t),alert("Failed to delete group. Please try again.")}},className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete group",children:e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-4 line-clamp-2",children:l.description}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:l.topic})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:["Members (",l.members?.length||0,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[l.members?.slice(0,5).map((t,c)=>e.jsx("img",{src:t.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${t.name}`,alt:t.name,className:"w-8 h-8 rounded-full border-2 border-white dark:border-gray-800",title:t.name,style:{marginLeft:c>0?"-8px":"0"}},t.userId)),(l.members?.length||0)>5&&e.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-600 dark:text-white",style:{marginLeft:"-8px"},children:["+",(l.members?.length||0)-5]}),(!l.members||l.members.length===0)&&e.jsx("p",{className:"text-xs text-gray-500",children:"No members yet"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-white mb-4",children:[e.jsxs("span",{children:[l.members?.length||0," / ",l.maxMembers," members"]}),e.jsxs("span",{className:"text-gray-400",children:["Created ",we(l.createdAt)]})]}),e.jsx("button",{onClick:()=>C(l),className:"w-full px-4 py-2 text-white rounded-lg transition-all text-sm font-semibold shadow-md hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"View Details"})]},l.id))})})()]})},Sr=async()=>{if(!w.website||!w.title||!w.content){h.error("Please fill in required fields (Website, Title, Review)");return}try{const r=He(i,s?.id),a={userId:s?.id,userName:i?.displayName||s?.name||"Anonymous",userAvatar:r,userLevel:i?.level||"Student",website:w.website,url:w.url,category:w.category,rating:w.rating,title:w.title,content:w.content,pros:w.pros.split(",").map(t=>t.trim()).filter(Boolean),cons:w.cons.split(",").map(t=>t.trim()).filter(Boolean),timestamp:new Date().toISOString(),likes:0,helpful:0},l=await f("/developers/tech-reviews",{method:"POST",body:JSON.stringify(a)});l.review?F(t=>[l.review,...t]):F(t=>[{...a,id:`temp-${Date.now()}`},...t]),te(!1),$({website:"",url:"",category:"",rating:5,title:"",content:"",pros:"",cons:""}),h.success("Review posted successfully!")}catch(r){console.error("Error posting review:",r),h.error("Failed to post review. Please try again.")}},Dr=async()=>{if(!R.title||!R.description){h.error("Please fill in title and description");return}try{const r={userId:s?.id,userName:i?.displayName||s?.name||"Anonymous",userAvatar:He(i,s?.id),title:R.title,description:R.description,tags:R.tags.split(",").map(l=>l.trim()).filter(Boolean),timestamp:new Date().toISOString(),responses:0},a=await f("/developers/help-requests",{method:"POST",body:JSON.stringify(r)});a.request?V(l=>[a.request,...l]):V(l=>[{...r,id:`temp-${Date.now()}`},...l]),se(!1),pe({title:"",description:"",tags:""}),h.success("Help request posted successfully!")}catch(r){console.error("Error posting request:",r),h.error("Failed to post request. Please try again.")}},Cr=async r=>{try{await f(`/developers/tech-reviews/${r}/like`,{method:"POST"}),F(a=>a.map(l=>l.id===r?{...l,likes:(l.likes||0)+1}:l))}catch(a){console.error("Error liking review:",a)}},Ar=async r=>{try{await f(`/developers/tech-reviews/${r}/helpful`,{method:"POST"}),F(a=>a.map(l=>l.id===r?{...l,helpful:(l.helpful||0)+1}:l)),h.success("Marked as helpful!")}catch(a){console.error("Error marking helpful:",a)}},Ir=async r=>{if(window.confirm("Are you sure you want to delete this review?"))try{await f(`/developers/tech-reviews/${r}`,{method:"DELETE"}),F(a=>a.filter(l=>l.id!==r)),h.success("Review deleted successfully")}catch(a){console.error("Error deleting review:",a),h.error("Failed to delete review")}},Rr=async r=>{if(window.confirm("Are you sure you want to delete this request?"))try{await f(`/developers/help-requests/${r}`,{method:"DELETE"}),V(a=>a.filter(l=>l.id!==r)),h.success("Request deleted successfully")}catch(a){console.error("Error deleting request:",a),h.error("Failed to delete request")}},Br=async()=>{if(!ye.trim()||!y){h.error("Please enter your reply");return}try{const r={content:ye,userName:i?.displayName||s?.name||"Anonymous",userAvatar:He(i,s?.id)},a=await f(`/developers/help-requests/${y.id}/respond`,{method:"POST",body:JSON.stringify(r)});V(l=>l.map(t=>t.id===y.id?{...t,responses:a.responses||(t.responses||0)+1,replies:a.replies||[...t.replies||[],a.reply]}:t)),L(l=>l?{...l,responses:a.responses||(l.responses||0)+1,replies:a.replies||[...l.replies||[],a.reply]}:null),H(""),h.success("Reply sent successfully!")}catch(r){console.error("Error submitting reply:",r),h.error("Failed to send reply")}},Oe=async r=>{try{return(await f(`/developers/help-requests/${r}/replies`)).replies||[]}catch(a){return console.error("Error fetching replies:",a),[]}},qe=Ae.filter(r=>r.website?.toLowerCase().includes(J.toLowerCase())||r.title?.toLowerCase().includes(J.toLowerCase())||r.category?.toLowerCase().includes(J.toLowerCase())),Ue=cr.filter(r=>r.title?.toLowerCase().includes(J.toLowerCase())||r.description?.toLowerCase().includes(J.toLowerCase())||r.tags?.some(a=>a.toLowerCase().includes(J.toLowerCase()))),Mr=()=>e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:e.jsx(Fr,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Tech Reviews"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Share & discover the best learning resources"})]})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>te(!0),className:"flex-1 sm:flex-none px-4 py-2 text-white rounded-lg flex items-center justify-center gap-2 hover:opacity-90 transition-opacity font-semibold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(re,{className:"w-4 h-4"}),"Post Review"]}),e.jsxs("button",{onClick:()=>se(!0),className:"flex-1 sm:flex-none px-4 py-2 border-2 rounded-lg flex items-center justify-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors font-semibold",style:{borderColor:"#00ADB5",color:"#00ADB5"},children:[e.jsx(re,{className:"w-4 h-4"}),"Ask for Help"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search reviews, websites, categories...",value:J,onChange:r=>xr(r.target.value),className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-1 flex gap-2",children:[e.jsxs("button",{onClick:()=>Ie("reviews"),className:`flex-1 py-2 px-4 rounded-md transition-colors font-semibold ${K==="reviews"?"text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,style:K==="reviews"?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"}:{},children:[e.jsx(W,{className:"w-4 h-4 inline mr-2"}),"Reviews (",qe.length,")"]}),e.jsxs("button",{onClick:()=>Ie("requests"),className:`flex-1 py-2 px-4 rounded-md transition-colors font-semibold ${K==="requests"?"text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,style:K==="requests"?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"}:{},children:[e.jsx(ge,{className:"w-4 h-4 inline mr-2"}),"Help Requests (",Ue.length,")"]})]}),K==="reviews"&&e.jsx("div",{className:"space-y-4",children:qe.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center border border-gray-200 dark:border-gray-700",children:[e.jsx(W,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No reviews yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Be the first to share a learning resource!"}),e.jsx("button",{onClick:()=>te(!0),className:"px-6 py-2 text-white rounded-lg font-semibold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Post First Review"})]}):qe.map(r=>e.jsx(b.div,{id:`review-${r.id}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white dark:bg-gray-800 rounded-xl p-6 border hover:shadow-lg transition-all ${be===r.id?"border-[#00ADB5] ring-2 ring-[#00ADB5] shadow-lg shadow-[#00ADB5]/20":"border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:r.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${r.userId}`,alt:r.userName,className:"w-12 h-12 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:r.userName}),e.jsx("span",{className:"text-xs px-2 py-1 rounded",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:r.userLevel||"Student"}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsx("span",{className:"text-sm text-gray-500",children:we(r.timestamp)})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx("h4",{className:"text-lg font-bold",style:{color:"#00ADB5"},children:r.website}),r.url&&e.jsx("a",{href:r.url.startsWith("http")?r.url:`https://${r.url}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-500",children:e.jsx(Or,{className:"w-4 h-4"})}),r.category&&e.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded ml-auto",children:r.category})]}),e.jsx("div",{className:"flex gap-1 mb-2",children:[...Array(5)].map((a,l)=>e.jsx(W,{className:`w-4 h-4 ${l<(r.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},l))}),e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:r.title}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:r.content}),(r.pros&&r.pros.length>0||r.cons&&r.cons.length>0)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[r.pros&&r.pros.length>0&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[e.jsx("h6",{className:"text-sm font-semibold text-green-800 dark:text-green-400 mb-2",children:"Pros"}),e.jsx("ul",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:r.pros.map((a,l)=>e.jsxs("li",{children:["âœ“ ",a]},l))})]}),r.cons&&r.cons.length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[e.jsx("h6",{className:"text-sm font-semibold text-red-800 dark:text-red-400 mb-2",children:"Cons"}),e.jsx("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1",children:r.cons.map((a,l)=>e.jsxs("li",{children:["âœ— ",a]},l))})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-gray-500 pt-3 border-t border-gray-100 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>Cr(r.id),className:"flex items-center gap-2 hover:text-red-500 transition-colors",children:[e.jsx(Hr,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:r.likes||0})]}),e.jsxs("button",{onClick:()=>Ar(r.id),className:"flex items-center gap-2 hover:text-green-500 transition-colors",children:[e.jsx(Pr,{className:"w-5 h-5"}),e.jsxs("span",{className:"text-sm",children:[r.helpful||0," helpful"]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("button",{onClick:()=>{Be(r),Re(!0)},className:"flex items-center gap-2 hover:text-purple-500 transition-colors",title:"Share to message",children:e.jsx(qr,{className:"w-5 h-5"})}),r.userId===s?.id&&e.jsx("button",{onClick:()=>Ir(r.id),className:"flex items-center gap-2 hover:text-red-500 transition-colors",title:"Delete your review",children:e.jsx(Je,{className:"w-5 h-5"})})]})]})]})]})]})},r.id))}),K==="requests"&&e.jsx("div",{className:"space-y-4",children:Ue.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center border border-gray-200 dark:border-gray-700",children:[e.jsx(ge,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No help requests yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Need recommendations? Ask the community!"}),e.jsx("button",{onClick:()=>se(!0),className:"px-6 py-2 text-white rounded-lg font-semibold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Ask for Help"})]}):Ue.map(r=>e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:r.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${r.userId}`,alt:r.userName,className:"w-12 h-12 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:r.userName}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsx("span",{className:"text-sm text-gray-500",children:we(r.timestamp)})]}),e.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white mb-2",children:r.title}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:r.description}),r.tags&&r.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.tags.map((a,l)=>e.jsx("span",{className:"text-xs px-3 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:a},l))}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("button",{onClick:async()=>{const a=await Oe(r.id);L({...r,replies:a}),U(!0)},className:"flex items-center gap-2 font-medium hover:opacity-80 transition-opacity",style:{color:"#00ADB5"},children:[e.jsx(ge,{className:"w-4 h-4"}),r.responses||0," responses"]}),e.jsx("button",{onClick:async()=>{if(r.userId===s?.id){const l=await Oe(r.id);L({...r,replies:l}),U(!0);return}const a=await Oe(r.id);L({...r,replies:a}),U(!0)},className:"text-gray-600 dark:text-gray-400 hover:text-blue-500 transition-colors",children:r.userId===s?.id?"View Replies":"Help Answer"}),r.userId===s?.id&&e.jsxs("button",{onClick:()=>Rr(r.id),className:"flex items-center gap-2 text-gray-500 hover:text-red-500 transition-colors ml-auto",title:"Delete your request",children:[e.jsx(Je,{className:"w-4 h-4"}),"Delete"]})]})]})]})},r.id))}),gr&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Post a Review"}),e.jsx("button",{onClick:()=>te(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Website Name *"}),e.jsx("input",{type:"text",value:w.website,onChange:r=>$({...w,website:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"e.g., LeetCode, freeCodeCamp",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Website URL"}),e.jsx("input",{type:"text",value:w.url,onChange:r=>$({...w,url:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"e.g., leetcode.com",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Category"}),e.jsxs("select",{value:w.category,onChange:r=>$({...w,category:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",style:{"--tw-ring-color":"#00ADB5"},children:[e.jsx("option",{value:"",children:"Select category"}),pr.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Rating"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(r=>e.jsx(W,{className:`w-8 h-8 cursor-pointer transition-colors ${r<=w.rating?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-200"}`,onClick:()=>$({...w,rating:r})},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Review Title *"}),e.jsx("input",{type:"text",value:w.title,onChange:r=>$({...w,title:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"Summarize your experience",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Detailed Review *"}),e.jsx("textarea",{value:w.content,onChange:r=>$({...w,content:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white h-32 focus:outline-none focus:ring-2",placeholder:"Share your experience, tips, and insights...",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Pros (comma separated)"}),e.jsx("input",{type:"text",value:w.pros,onChange:r=>$({...w,pros:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"Great UI, Free resources, Active community",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Cons (comma separated)"}),e.jsx("input",{type:"text",value:w.cons,onChange:r=>$({...w,cons:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"Expensive, Limited content, Slow support",style:{"--tw-ring-color":"#00ADB5"}})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:Sr,className:"flex-1 py-2 text-white rounded-lg font-semibold hover:opacity-90 transition-opacity",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Post Review"}),e.jsx("button",{onClick:()=>te(!1),className:"flex-1 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})}),mr&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Ask for Help"}),e.jsx("button",{onClick:()=>se(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"What are you looking for? *"}),e.jsx("input",{type:"text",value:R.title,onChange:r=>pe({...R,title:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"e.g., Best resources to learn React",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Description *"}),e.jsx("textarea",{value:R.description,onChange:r=>pe({...R,description:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white h-24 focus:outline-none focus:ring-2",placeholder:"Describe what you're looking for, your current level, specific requirements...",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Tags (comma separated)"}),e.jsx("input",{type:"text",value:R.tags,onChange:r=>pe({...R,tags:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"React, Frontend, Beginner",style:{"--tw-ring-color":"#00ADB5"}})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:Dr,className:"flex-1 py-2 text-white rounded-lg font-semibold hover:opacity-90 transition-opacity",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Post Request"}),e.jsx("button",{onClick:()=>se(!1),className:"flex-1 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})}),hr&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:y.userId===s?.id?"View Replies":"Reply to Request"}),e.jsx("button",{onClick:()=>{U(!1),H(""),L(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("button",{onClick:()=>{y.userId!==s?.id&&(Y(y.userName||""),k("directory"),U(!1),L(null),H(""))},className:`flex items-center gap-2 ${y.userId!==s?.id?"hover:opacity-80 transition-opacity cursor-pointer group":"cursor-default"}`,title:y.userId!==s?.id?`View ${y.userName}'s profile`:"Your profile",disabled:y.userId===s?.id,children:[e.jsx("img",{src:y.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${y.userId}`,alt:y.userName,className:`w-8 h-8 rounded-full ${y.userId!==s?.id?"ring-2 ring-transparent group-hover:ring-[#00ADB5] transition-all":""}`}),e.jsx("span",{className:`font-semibold text-gray-900 dark:text-white ${y.userId!==s?.id?"group-hover:text-[#00ADB5] transition-colors":""}`,children:y.userName})]}),y.userId===s?.id&&e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2 py-0.5 rounded-full",children:"Your Request"})]}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-1",children:y.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.description})]}),y.replies&&y.replies.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),y.replies.length," ",y.replies.length===1?"Reply":"Replies"]}),e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:y.replies.map((r,a)=>e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>{Y(r.userName||""),k("directory"),U(!1),L(null),H("")},className:"flex items-center gap-2 hover:opacity-80 transition-opacity cursor-pointer group",title:`View ${r.userName}'s profile`,children:[e.jsx("img",{src:r.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${r.userId}`,alt:r.userName,className:"w-6 h-6 rounded-full ring-2 ring-transparent group-hover:ring-[#00ADB5] transition-all"}),e.jsx("span",{className:"font-medium text-sm text-gray-900 dark:text-white group-hover:text-[#00ADB5] transition-colors",children:r.userName})]}),e.jsx("span",{className:"text-xs text-gray-500",children:we(r.createdAt)})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:r.content})]},r.id||a))})]}),y.userId===s?.id&&(!y.replies||y.replies.length===0)&&e.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[e.jsx(ge,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No replies yet. Check back later!"})]}),y.userId!==s?.id&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Your Reply *"}),e.jsx("textarea",{value:ye,onChange:r=>H(r.target.value),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white h-24 focus:outline-none focus:ring-2",placeholder:"Share your recommendation, resources, or advice...",style:{"--tw-ring-color":"#00ADB5"}})]})}),e.jsx("div",{className:"flex gap-3 mt-6",children:y.userId!==s?.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Br,disabled:!ye.trim(),className:"flex-1 py-2 text-white rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Send Reply"}),e.jsx("button",{onClick:()=>{U(!1),H(""),L(null)},className:"flex-1 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]}):e.jsx("button",{onClick:()=>{U(!1),H(""),L(null)},className:"w-full py-2 text-white rounded-lg font-semibold hover:opacity-90 transition-opacity",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Close"})})]})})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Developer Connect ðŸ¤"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-white",children:"Find teammates, build together, grow your network"})]})})}),e.jsx("div",{className:"flex gap-1 sm:gap-2 mb-6 sm:mb-8 border-b border-gray-200 dark:border-gray-700 overflow-x-auto scrollbar-hide",children:[{id:"directory",label:"Developer Directory",icon:fe},{id:"messages",label:"Messages",icon:Lr},{id:"groups",label:"Study Groups",icon:tr},{id:"reviews",label:"Tech Reviews",icon:W}].map(r=>{const a=r.icon;return e.jsxs("button",{onClick:()=>k(r.id),className:`px-2 sm:px-4 py-2 sm:py-3 font-semibold flex items-center gap-1 sm:gap-2 border-b-2 transition-colors whitespace-nowrap text-xs sm:text-base ${j===r.id?"border-transparent":"border-transparent text-gray-600 dark:text-white hover:text-gray-900 dark:hover:text-white"}`,style:j===r.id?{borderBottomColor:"#00ADB5",color:"#00ADB5"}:{},children:[e.jsx(a,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:r.label}),e.jsx("span",{className:"sm:hidden",children:r.id==="directory"?"Directory":r.id==="messages"?"Messages":r.id==="groups"?"Groups":"Reviews"})]},r.id)})}),j==="directory"&&Nr(),j==="messages"&&vr(),j==="groups"&&kr(),j==="reviews"&&Mr()]}),ur&&ae&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Share Review"}),e.jsx("button",{onClick:()=>{Re(!1),Be(null),Me("")},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Sharing:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:ae.website}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300 truncate",children:ae.title})]})]}),e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search developers to share with...",value:le,onChange:r=>Me(r.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 text-sm",style:{"--tw-ring-color":"#00ADB5"}})]})}),e.jsxs("div",{className:"overflow-y-auto max-h-[300px]",children:[T.filter(r=>r.userId!==s?.id&&(r.name?.toLowerCase().includes(le.toLowerCase())||r.skills?.some(a=>a.toLowerCase().includes(le.toLowerCase())))).slice(0,20).map(r=>e.jsxs("button",{onClick:async()=>{try{const a=await f("/chats",{method:"POST",body:JSON.stringify({participantIds:[s?.id,r.userId]})}),l=a?.id||a?.chat?.id;if(!l)throw new Error("Failed to create chat");const t=`${window.location.origin}/dashboard/developer-connect?tab=reviews&reviewId=${ae.id}`,c=`ðŸ“š Check out this review: ${ae.website}
ðŸ”— ${t}`;await f(`/chats/${l}/messages`,{method:"POST",body:JSON.stringify({senderId:s?.id,senderName:i?.displayName||i?.name||s?.name||"User",senderAvatar:i?.avatar||i?.avatrUrl||"",message:c})}),h.success(`Review shared with ${r.name}!`),Re(!1),Be(null),Me("")}catch(a){console.error("Error sharing review:",a),h.error("Failed to share review")}},className:"w-full p-3 flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:[e.jsx("img",{src:r.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${r.userId}`,alt:r.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.bio?.substring(0,30)||"Developer"})]}),e.jsx(Ge,{className:"w-4 h-4 text-gray-400"})]},r.userId)),T.filter(r=>r.userId!==s?.id&&(r.name?.toLowerCase().includes(le.toLowerCase())||r.skills?.some(a=>a.toLowerCase().includes(le.toLowerCase())))).length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(ce,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No developers found"})]})]})]})})]})}export{dt as default};
