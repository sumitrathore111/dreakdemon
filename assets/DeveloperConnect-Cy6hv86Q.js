import{g as _e,q as y,l as Or,n as Pr,r as g,K as u,j as e,N as f,p as ve,M as qr,B as lr,S as z,X as re,h as ue,v as te,x as Ur,w as Ne,E as Fr,O as Gr}from"./index-Dt41-Cvb.js";import{C as or}from"./CustomSelect-6JEyRvbh.js";import{i as Ge,g as P}from"./socketService-Bb3-UrQE.js";import{S as Je}from"./send-lBCyvB2O.js";import{C as He}from"./circle-alert-Dfey5_Y8.js";import{P as se}from"./plus-BifSPq8V.js";import{T as We}from"./trash-2-CLOvfNSR.js";import{T as Jr}from"./trending-up-BzpWWDL-.js";import"./chevron-down-C3ctp4yY.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],Wr=_e("bookmark-plus",Hr);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Yr=_e("heart",_r);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Vr=_e("user-minus",zr),Kr=async s=>{try{const i=new URLSearchParams;return s&&Object.entries(s).forEach(([N,S])=>{S!==void 0&&i.append(N,S.toString())}),(await y(`/study-groups?${i.toString()}`)).groups}catch(i){return console.error("Error getting study groups:",i),[]}},pe=Kr,Xr=async s=>{try{return(await y("/study-groups",{method:"POST",body:JSON.stringify(s)})).group}catch(i){throw console.error("Error creating study group:",i),i}},Qr=async s=>{try{await y(`/study-groups/${s}`,{method:"DELETE"})}catch(i){throw console.error("Error deleting study group:",i),i}},Zr=async(s,i,w)=>{try{return await y(`/study-groups/${s}/join`,{method:"POST",body:JSON.stringify({userName:i,userAvatar:w})})}catch(N){throw console.error("Error requesting to join study group:",N),N}},et=async(s,i)=>{try{return(await y(`/study-groups/${s}/approve/${i}`,{method:"POST"})).group}catch(w){throw console.error("Error approving join request:",w),w}},rt=async(s,i)=>{try{return(await y(`/study-groups/${s}/reject/${i}`,{method:"POST"})).group}catch(w){throw console.error("Error rejecting join request:",w),w}},tt=async(s,i)=>{try{return(await y(`/study-groups/${s}/members/${i}`,{method:"DELETE"})).group}catch(w){throw console.error("Error removing member:",w),w}},ke=s=>{if(!s)return"Unknown date";try{if(s?.toDate&&typeof s.toDate=="function")return s.toDate().toLocaleDateString();if(s?.seconds)return new Date(s.seconds*1e3).toLocaleDateString();const i=new Date(s);return isNaN(i.getTime())?"Unknown date":i.toLocaleDateString()}catch{return"Unknown date"}},st=s=>{if(!s)return"";try{let i;if(s?.toDate&&typeof s.toDate=="function"?i=s.toDate():s?.seconds?i=new Date(s.seconds*1e3):i=new Date(s),isNaN(i.getTime()))return"";const N=new Date().getTime()-i.getTime(),S=Math.floor(N/1e3),D=Math.floor(S/60),B=Math.floor(D/60),q=Math.floor(B/24),F=Math.floor(q/7);return S<60?"now":D<60?`${D}m`:B<24?`${B}h`:q<7?`${q}d`:F<52?`${F}w`:`${Math.floor(F/52)}y`}catch{return""}},ae=(s,i)=>s?.avatar&&s.avatar.trim()!==""?s.avatar:s?.avatrUrl&&s.avatrUrl.trim()!==""?s.avatrUrl:s?.profilePic&&s.profilePic.trim()!==""?s.profilePic:`https://api.dicebear.com/9.x/adventurer/svg?seed=${i||"default"}`,at=(s,i=!1)=>{if(!s)return null;const w=/(https?:\/\/[^\s]+)/g;return s.split(w).map((S,D)=>S.match(w)?e.jsx("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:`underline hover:opacity-80 ${i?"text-cyan-100":"text-[#00ADB5]"}`,onClick:B=>B.stopPropagation(),children:S},D):e.jsx("span",{children:S},D))};function ht(){const{user:s}=Or(),{userprofile:i}=Pr(),[w,N]=g.useState("directory"),[S,D]=g.useState(""),[B,q]=g.useState([]),[F,nr]=g.useState(""),[k,Se]=g.useState(null),[R,Ye]=g.useState(null),[G,V]=g.useState([]),[U,De]=g.useState(""),[ir,ye]=g.useState(!1),[E,ze]=g.useState([]),[dr,Ve]=g.useState(!0),[Ke,Ce]=g.useState(null),[Ae,Ie]=g.useState([]),[Be,cr]=g.useState(12),[Xe,C]=g.useState([]),[J,Qe]=g.useState(""),[gr,be]=g.useState(!1),[A,K]=g.useState({name:"",description:"",topic:"",level:"Beginner",maxMembers:10}),[Re,H]=g.useState([]),[mr,$]=g.useState([]),[xr,le]=g.useState(!1),[hr,oe]=g.useState(!1),[X,Me]=g.useState("reviews"),[W,ur]=g.useState(""),[j,O]=g.useState({website:"",url:"",category:"",rating:5,title:"",content:"",pros:"",cons:""}),[M,fe]=g.useState({title:"",description:"",tags:""}),[pr,ne]=g.useState(!1),[b,Q]=g.useState(null),[we,_]=g.useState(""),[yr,Ze]=g.useState(new Set),[br,$e]=g.useState(!1),[ie,Te]=g.useState(null),[de,Le]=g.useState(""),[je,er]=g.useState(null),fr=["Coding Practice","Web Development","Mobile Development","Data Science","DevOps","UI/UX","Algorithms","System Design","Interview Prep","Other"],[h,I]=g.useState(null),[ce,ge]=g.useState(""),[rr,T]=g.useState([]),tr=g.useRef(null),me=g.useRef(null),[L,Ee]=g.useState(!1),[sr,Oe]=g.useState(null),[Z,wr]=g.useState({}),[jr,Pe]=g.useState({}),[xe,qe]=g.useState(new Set),vr=()=>{tr.current?.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{vr()},[G]),g.useEffect(()=>{const r=new URLSearchParams(window.location.search),a=r.get("tab"),o=r.get("reviewId");a==="reviews"&&(N("reviews"),Me("reviews"),o&&(er(o),window.history.replaceState({},"",window.location.pathname)))},[]),g.useEffect(()=>{je&&Re.length>0&&(setTimeout(()=>{const r=document.getElementById(`review-${je}`);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},300),setTimeout(()=>er(null),3e3))},[je,Re]),g.useEffect(()=>{Ge();const r=P();if(r){Ee(r.connected);const a=()=>{console.log("ðŸŸ¢ Socket connected"),Ee(!0),s?.id&&r.emit("userOnline",{userId:s.id})},o=()=>{console.log("ðŸ”´ Socket disconnected"),Ee(!1)},t=d=>{console.log("ðŸ‘¥ Online users:",d),qe(new Set(d))},c=d=>{console.log("ðŸŸ¢ User online:",d.userId),qe(m=>new Set([...m,d.userId]))},p=d=>{console.log("ðŸ”´ User offline:",d.userId),qe(m=>{const v=new Set(m);return v.delete(d.userId),v})},l=d=>{d.chatId===R&&d.userId!==s?.id&&(Oe(d.userName),me.current&&clearTimeout(me.current),me.current=setTimeout(()=>Oe(null),3e3))},x=d=>{d.chatId===R&&d.userId!==s?.id&&Oe(null)},n=d=>{d.readBy!==s?.id&&Pe(m=>({...m,[d.messageId]:"read"}))};return r.on("connect",a),r.on("disconnect",o),r.on("userTyping",l),r.on("userStopTyping",x),r.on("messageRead",n),r.on("onlineUsers",t),r.on("userOnline",c),r.on("userOffline",p),r.emit("getOnlineUsers"),()=>{r.off("connect",a),r.off("disconnect",o),r.off("userTyping",l),r.off("userStopTyping",x),r.off("messageRead",n),r.off("onlineUsers",t),r.off("userOnline",c),r.off("userOffline",p),me.current&&clearTimeout(me.current)}}},[R,s?.id]),g.useEffect(()=>{(async()=>{try{Ve(!0),Ce(null);const a=await y("/developers/init/page-data");console.log("Developer Connect data loaded:",a),ze(a.developers||[]),C(a.studyGroups||[]),H(a.techReviews||[]),$(a.helpRequests||[]),(!a.developers||a.developers.length===0)&&Ce("No developers found. The community is waiting for you!")}catch(a){console.error("Error loading Developer Connect data:",a);try{const[o,t,c,p]=await Promise.all([y("/developers").catch(()=>[]),y("/study-groups").catch(()=>({groups:[]})),y("/developers/tech-reviews").catch(()=>({reviews:[]})),y("/developers/help-requests").catch(()=>({requests:[]}))]);ze(o||[]),C(t.groups||[]),H(c.reviews||[]),$(p.requests||[])}catch{Ce("Failed to load developers: "+(a instanceof Error?a.message:String(a)))}}finally{Ve(!1)}})()},[]),g.useEffect(()=>{if(!k||!s){V([]),Ye(null);return}let r=!0,a=null;return(async()=>{console.log("Setting up chat for:",s.id,k),ye(!0);try{const t=E.find(l=>l.userId===k);if(!t){console.error("Selected developer not found"),ye(!1);return}const c=await y("/chats",{method:"POST",body:JSON.stringify({participantIds:[s.id,k],participantNames:[i?.displayName||s.name||"User",t.name],participantAvatars:[i?.avatrUrl||"",t.avatar]})});if(!r)return;Ye(c.id),a=c.id,console.log("Chat ID obtained:",c.id);const p=await y(`/chats/${c.id}/messages`);r&&V(p),ye(!1);try{Ge();const l=P();if(l){l.emit("join-chat",c.id),console.log("ðŸ“¡ Joined chat room:",c.id);const x=n=>{console.log("ðŸ“© Received new message:",n),n.chatId===c.id&&r&&V(d=>d.some(v=>v.id===n.id)?d:[...d,n])};l.on("newMessage",x),l._chatMessageHandler=x}}catch(l){console.warn("Socket init failed, falling back to polling:",l)}}catch(t){console.error("Error setting up chat:",t),r&&ye(!1)}})(),()=>{r=!1;try{const t=P();if(t&&t.connected&&a){t.emit("leave-chat",a);const c=t._chatMessageHandler;c&&t.off("newMessage",c),delete t._chatMessageHandler}}catch{}}},[k,s?.id,E,i]),g.useEffect(()=>{if(!s||w!=="messages"){Ie([]);return}(async()=>{try{const o=(await y("/chats")||[]).map(t=>({participantId:t.participantId,participantName:t.participantName,participantAvatar:t.participantAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.participantName?.replace(/\s+/g,"")}`,lastMessage:t.lastMessage,lastMessageAt:t.lastMessageAt}));Ie(o)}catch(a){console.warn("Could not load conversations yet:",a),Ie([])}})()},[s?.id,w]),g.useEffect(()=>{if(s)try{Ge();const r=P();if(!r)return;r.emit("join-user",s.id);const a=n=>{console.log("New join request:",n),h&&h.id===n.groupId&&I(d=>{if(!d)return d;const m=d.joinRequests||[];return m.some(v=>v.userId===n.request.userId)?d:{...d,joinRequests:[...m,n.request]}}),u.success(`${n.request.userName} requested to join your group!`)},o=n=>{console.log("Request approved:",n),u.success(`You've been approved to join ${n.groupName}!`),n.group&&(C(d=>d.map(m=>m.id===n.groupId?n.group:m)),h&&h.id===n.groupId&&I(n.group))},t=n=>{console.log("Request rejected:",n),u.error(`Your request to join ${n.groupName} was rejected.`),h&&h.id===n.groupId&&I(d=>d&&{...d,joinRequests:d.joinRequests?.filter(m=>m.userId!==s.id)||[]})},c=n=>{console.log("Member joined:",n),u.success(`${n.member.name} has joined the group!`),n.group&&(C(d=>d.map(m=>m.id===n.groupId?n.group:m)),h&&h.id===n.groupId&&I(n.group))},p=n=>{console.log("Removed from group:",n),u.error(`You've been removed from ${n.groupName}`),h&&h.id===n.groupId&&I(null),C(d=>d.filter(m=>m.id!==n.groupId))},l=n=>{console.log("Member removed:",n),n.group&&(C(d=>d.map(m=>m.id===n.groupId?n.group:m)),h&&h.id===n.groupId&&I(n.group))},x=n=>{console.log("Group updated:",n),n.group&&(C(d=>d.map(m=>m.id===n.groupId?n.group:m)),h&&h.id===n.groupId&&I(n.group))};return r.on("joinRequest",a),r.on("requestApproved",o),r.on("requestRejected",t),r.on("memberJoined",c),r.on("removedFromGroup",p),r.on("memberRemoved",l),r.on("groupUpdated",x),()=>{r.emit("leave-user",s.id),r.off("joinRequest",a),r.off("requestApproved",o),r.off("requestRejected",t),r.off("memberJoined",c),r.off("removedFromGroup",p),r.off("memberRemoved",l),r.off("groupUpdated",x)}}catch(r){console.warn("Socket initialization failed for study groups:",r)}},[s?.id,h?.id]),g.useEffect(()=>{if(!(!h||!s))try{const r=P();return r&&r.emit("join-group",h.id),()=>{r&&r.emit("leave-group",h.id)}}catch(r){console.warn("Could not join group socket room:",r)}},[h?.id,s]),g.useEffect(()=>{if(!h||!s){T([]);return}(async()=>{try{const a=await y(`/study-groups/${h.id}/messages`);T(a.messages||[])}catch(a){console.warn("Could not load group messages:",a),T([])}})();try{const a=P();if(a){const o=t=>{t.groupId===h.id&&t.message&&T(c=>c.some(p=>p.id===t.message.id)?c:[...c,t.message])};return a.on("newGroupMessage",o),()=>{a.off("newGroupMessage",o)}}}catch(a){console.warn("Socket not available for group messages:",a)}},[h?.id,s]);const ee=E.filter(r=>{const a=r.skills||[],o=r.lookingFor||"",t=(r.name||"").toLowerCase().includes(S.toLowerCase())||a.some(l=>l.toLowerCase().includes(S.toLowerCase())),c=B.length===0||B.some(l=>a.includes(l)),p=!F||o.includes(F);return t&&c&&p}),ar=ee.slice(0,Be),Nr=ee.length>Be,kr=["React","Node.js","Python","Java","MongoDB","TypeScript","AWS","Machine Learning"],Sr=()=>dr?e.jsx("div",{className:"space-y-6",children:[1,2,3,4,5,6].map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-700 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded mb-2 w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-1/3"})]})]}),e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded flex-1"}),e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded flex-1"})]})]},r))}):Ke?e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-8 border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(He,{className:"w-6 h-6 text-red-600 dark:text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-300 mb-2",children:"Unable to Load Developers"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:Ke}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})]})}):E.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(ve,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Developers Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:"Developers who complete their profiles will appear here. Invite your friends!"}),e.jsx("button",{className:"px-6 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Invite Friends"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("input",{type:"text",placeholder:"Search developers by name or skills...",value:S,onChange:r=>D(r.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#00ADB5] focus:bg-white dark:focus:bg-gray-600 transition-all"})]}),e.jsx(or,{value:B.length>0?B[0]:"",onChange:r=>{q(r===""?[]:a=>a.includes(r)?a.filter(o=>o!==r):[r])},options:[{value:"",label:"All Skills"},...kr.map(r=>({value:r,label:r}))],className:"w-full sm:min-w-[180px] sm:w-auto"}),e.jsx(or,{value:F,onChange:r=>nr(r),options:[{value:"",label:"Looking For"},{value:"Teammates",label:"Teammates"},{value:"Mentoring",label:"Mentoring"},{value:"Both",label:"Both"}],className:"w-full sm:min-w-[180px] sm:w-auto"})]}),B.length>0&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[B.map(r=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium text-white",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[r,e.jsx("button",{onClick:()=>q(a=>a.filter(o=>o!==r)),className:"ml-1 hover:bg-white/20 rounded-full p-0.5",children:"Ã—"})]},r)),e.jsx("button",{onClick:()=>q([]),className:"px-3 py-1 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white",children:"Clear all"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-white",children:[e.jsxs("p",{children:["Showing ",ar.length," of ",ee.length," developers"]}),ee.length!==E.length&&e.jsxs("p",{children:[E.length," total in directory"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ar.map((r,a)=>e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("img",{src:r.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${r.name}`,alt:r.name||"Developer",className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.name||"Unknown"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:[r.institute||r.college||"Not specified"," â€¢ ",r.yearOfStudy?r.yearOfStudy===1?"1st Year":r.yearOfStudy===2?"2nd Year":r.yearOfStudy===3?"3rd Year":r.yearOfStudy===4?"4th Year":`${r.yearOfStudy} Year`:r.year||"Student"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",style:{color:"#00ADB5"},children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:r.challenges_solved||r.codeArenaStats?.problemsSolved||0})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-4 line-clamp-2",children:r.bio||"No bio available"}),e.jsx("div",{className:"rounded-lg p-3 mb-4",style:{background:"rgba(0, 173, 181, 0.1)"},children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Problems Solved"}),e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:r.challenges_solved||r.codeArenaStats?.problemsSolved||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Rank"}),e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:["#",r.marathon_rank||r.codeArenaStats?.rank||"N/A"]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(r.skills||[]).length>0?e.jsxs(e.Fragment,{children:[(r.skills||[]).slice(0,3).map(o=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:o},o)),(r.skills||[]).length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded-full",children:["+",(r.skills||[]).length-3]})]}):e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No skills added"})})]}),r.badges&&r.badges.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:"Badges"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.badges.slice(0,4).map((o,t)=>e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 border border-purple-200 dark:border-purple-800",title:o.description,children:[o.icon," ",o.name]},t)),r.badges.length>4&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full",children:["+",r.badges.length-4," more"]})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-green-700 dark:text-green-400 mb-1",children:r.lookingFor||"Open to opportunities"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 line-clamp-2",children:r.lookingForDetails||"Looking to connect with other developers"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{onClick:()=>{Se(r.userId),N("messages")},className:"flex-1 px-3 py-2 text-white text-sm font-semibold rounded-lg transition-all shadow-md hover:opacity-90 flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(te,{className:"w-4 h-4"}),"Message"]}),e.jsxs("button",{onClick:()=>{N("reviews"),u.success("Check out reviews shared by the community!")},className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white text-sm font-semibold rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Reviews"]})]})]},r.userId))}),Nr&&e.jsx("div",{className:"text-center mt-8",children:e.jsxs("button",{onClick:()=>cr(r=>r+12),className:"px-8 py-3 text-white rounded-lg transition-all shadow-lg hover:opacity-90 font-semibold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:["Load More (",ee.length-Be," remaining)"]})}),ee.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ve,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No developers found"}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Try adjusting your filters"})]})]}),Dr=()=>{const r=k?E.find(l=>l.userId===k):null,a=()=>{const l=P();l&&R&&s&&l.emit("typing",{chatId:R,userId:s.id,userName:i?.displayName||s.name||"User"})},o=()=>{const l=P();l&&R&&s&&l.emit("stopTyping",{chatId:R,userId:s.id})},t=()=>{const l=P();l&&R&&s&&(G.filter(n=>n.senderId!==s.id&&!n.isRead).forEach(n=>{l.emit("markAsRead",{messageId:n.id,chatId:R,readBy:s.id})}),k&&wr(n=>({...n,[k]:0})))};k&&G.length>0&&R&&setTimeout(()=>t(),100);const c=async()=>{if(!U.trim()||!s||!R)return;o();const l=U,x=`temp-${Date.now()}`;De(""),Pe(d=>({...d,[x]:"sent"}));const n={id:x,senderId:s.id,senderName:i?.displayName||i?.name||s.name||"User",senderAvatar:i?.avatar||i?.avatrUrl||"",message:l,text:l,createdAt:new Date().toISOString(),timestamp:new Date,isRead:!1};V(d=>[...d,n]);try{const d=await y(`/chats/${R}/messages`,{method:"POST",body:JSON.stringify({senderId:s.id,senderName:i?.displayName||i?.name||s.name||"User",senderAvatar:i?.avatar||i?.avatrUrl||"",message:l})});d?.id&&(V(m=>m.map(v=>v.id===x?{...v,id:d.id}:v)),Pe(m=>{const v={...m};return delete v[x],v[d.id]="delivered",v}))}catch(d){console.error("Error sending message:",d),De(l),V(m=>m.filter(v=>v.id!==x)),u.error("Failed to send message. Please try again.")}},p=l=>{De(l.target.value),l.target.value.trim()?a():o()};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 h-[600px] lg:h-[650px]",children:[e.jsxs("div",{className:`lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col shadow-lg ${k?"hidden lg:flex":"flex"}`,children:[e.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 bg-gradient-to-r from-cyan-50/50 via-white to-cyan-50/50 dark:from-gray-800 dark:via-gray-800 dark:to-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2 text-base",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:e.jsx(te,{className:"w-4 h-4 text-white"})}),"Chats"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-10",children:[Ae.length," active"]})]}),e.jsxs(f.div,{initial:{scale:.9},animate:{scale:1},className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-[11px] font-semibold ${L?"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400":"bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400"}`,children:[e.jsx(f.div,{animate:{scale:L?[1,1.4,1]:1},transition:{repeat:1/0,duration:1.5},className:`w-2 h-2 rounded-full ${L?"bg-emerald-500":"bg-amber-500"}`}),L?"Live":"Offline"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:Ae.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-[#00ADB5]/10 to-[#00ADB5]/5 dark:from-[#00ADB5]/20 dark:to-[#00ADB5]/10 border border-[#00ADB5]/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(te,{className:"w-8 h-8 text-[#00ADB5]"})}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"No conversations yet"}),e.jsx("p",{className:"text-xs mt-2 text-gray-500 dark:text-gray-400",children:"Visit Developer Directory to start chatting"})]}):Ae.map(l=>e.jsxs(f.button,{whileHover:{x:4,backgroundColor:"rgba(0,173,181,0.05)"},whileTap:{scale:.99},onClick:()=>Se(l.participantId),className:`w-full p-4 transition-all text-left relative overflow-hidden ${k===l.participantId?"bg-gradient-to-r from-[#00ADB5]/10 to-transparent dark:from-[#00ADB5]/15 dark:to-transparent":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[k===l.participantId&&e.jsx(f.div,{layoutId:"selectedConv",className:"absolute left-0 top-0 bottom-0 w-1 rounded-r-full",style:{background:"linear-gradient(180deg, #00ADB5 0%, #00d4ff 100%)"}}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:l.participantAvatar,alt:l.participantName,className:`w-12 h-12 rounded-full shadow-md transition-all ${k===l.participantId?"ring-2 ring-[#00ADB5] ring-offset-2 dark:ring-offset-gray-800":"ring-1 ring-gray-200 dark:ring-gray-600"}`}),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white dark:border-gray-800 ${xe.has(l.participantId)?"bg-emerald-500":"bg-gray-400 dark:bg-gray-500"}`}),Z[l.participantId]>0&&e.jsx(f.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -left-1 w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-lg",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:Z[l.participantId]>9?"9+":Z[l.participantId]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsx("p",{className:`font-semibold truncate text-sm ${Z[l.participantId]>0?"text-gray-900 dark:text-white font-bold":k===l.participantId?"text-[#00ADB5]":"text-gray-900 dark:text-white"}`,children:l.participantName}),l.lastMessageAt&&e.jsx("span",{className:`text-[10px] flex-shrink-0 ml-2 ${Z[l.participantId]>0?"text-[#00ADB5] font-semibold":"text-gray-400 dark:text-gray-500"}`,children:new Date(l.lastMessageAt).toLocaleDateString([],{month:"short",day:"numeric"})})]}),e.jsx("p",{className:`text-xs truncate flex items-center gap-1 ${Z[l.participantId]>0?"text-gray-700 dark:text-gray-200 font-medium":"text-gray-500 dark:text-gray-400"}`,children:l.lastMessage||e.jsx("span",{className:"italic text-gray-400",children:"Start a conversation..."})})]})]})]},l.participantId))})]}),e.jsx("div",{className:`lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 flex flex-col shadow-lg overflow-hidden ${k?"flex":"hidden lg:flex"}`,children:!k||!r?e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-br from-cyan-50/30 via-white to-cyan-50/30 dark:from-gray-800 dark:via-gray-800 dark:to-gray-800",children:e.jsxs(f.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,type:"spring"},className:"text-center p-8 max-w-md",children:[e.jsx(f.div,{animate:{y:[0,-8,0]},transition:{repeat:1/0,duration:3,ease:"easeInOut"},className:"w-28 h-28 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 50%, #00ADB5 100%)",backgroundSize:"200% 200%"},children:e.jsx(te,{className:"w-14 h-14 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Start a Conversation"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 leading-relaxed",children:"Select a developer from the list to connect and collaborate in real-time"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-gray-400 dark:text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"Real-time chat"]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 bg-[#00ADB5] rounded-full"}),"Instant delivery"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>Se(null),className:"lg:hidden p-2 -ml-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.avatar,alt:r.name,className:"w-10 h-10 lg:w-11 lg:h-11 rounded-full ring-2 ring-[#00ADB5] ring-offset-2 dark:ring-offset-gray-800 shadow-md"}),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-white dark:border-gray-800 ${xe.has(r.userId)?"bg-emerald-500":"bg-gray-400 dark:bg-gray-500"}`})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white text-base",children:r.name}),sr?e.jsxs(f.p,{initial:{opacity:0},animate:{opacity:1},className:"text-xs text-[#00ADB5] font-medium flex items-center gap-1",children:[e.jsxs("span",{className:"flex gap-0.5",children:[e.jsx(f.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:0},className:"w-1 h-1 bg-[#00ADB5] rounded-full"}),e.jsx(f.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:.2},className:"w-1 h-1 bg-[#00ADB5] rounded-full"}),e.jsx(f.span,{animate:{y:[0,-3,0]},transition:{repeat:1/0,duration:.6,delay:.4},className:"w-1 h-1 bg-[#00ADB5] rounded-full"})]}),"typing..."]}):e.jsxs("p",{className:`text-xs flex items-center gap-1 ${xe.has(r.userId)?"text-emerald-600 dark:text-emerald-400":"text-gray-500 dark:text-gray-400"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${xe.has(r.userId)?"bg-emerald-500":"bg-gray-400"}`}),xe.has(r.userId)?"Online":"Offline"]})]})]}),e.jsxs("div",{className:`hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-sm ${L?"bg-emerald-50/80 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-700":"bg-amber-50/80 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-700"}`,children:[e.jsx(f.div,{animate:{scale:L?[1,1.3,1]:1},transition:{repeat:1/0,duration:2},className:`w-2 h-2 rounded-full ${L?"bg-emerald-500":"bg-amber-500"}`}),e.jsx("span",{className:`${L?"text-emerald-700 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:L?"Live":"Connecting"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-5 space-y-3 sm:space-y-4 bg-gray-50 dark:bg-gray-900",children:ir?e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 dark:border-gray-700",style:{borderTopColor:"#00ADB5"}}),e.jsx(te,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-5 h-5 text-cyan-500"})]}),e.jsx("div",{className:"text-gray-500 text-sm mt-4",children:"Loading messages..."})]}):G.length===0?e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center h-full",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-[#00ADB5]/20 to-[#00ADB5]/10 dark:from-[#00ADB5]/20 dark:to-[#00ADB5]/10 flex items-center justify-center mb-4 border border-[#00ADB5]/20",children:e.jsx("span",{className:"text-4xl",children:"ðŸ‘‹"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:"Start the conversation!"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:["Say hello to ",r?.name||"your new connection"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"px-3 py-1 bg-white dark:bg-gray-800 rounded-full text-xs text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-700 shadow-sm",children:G[0]?.createdAt?new Date(G[0].createdAt).toLocaleDateString([],{weekday:"short",month:"short",day:"numeric"}):"Today"})}),G.map(l=>{const x=l.senderId===s?.id||l.senderId===s?.id?.toString()||l.userId===s?.id,n=jr[l.id]||(l.isRead?"read":"delivered");return e.jsxs(f.div,{initial:{opacity:0,y:15,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.25,type:"spring",stiffness:400,damping:25},className:`flex w-full ${x?"justify-end":"justify-start"}`,children:[!x&&e.jsx("img",{src:l.senderAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${l.senderName?.replace(/\s+/g,"")||"User"}`,alt:l.senderName||"User",className:"w-8 h-8 rounded-full flex-shrink-0 mr-2 shadow-md ring-2 ring-white dark:ring-gray-800"}),e.jsx("div",{className:`max-w-[70%] ${x?"mr-2":""}`,children:e.jsxs(f.div,{whileHover:{scale:1.01,y:-1},className:`px-4 py-2.5 relative group ${x?"rounded-2xl rounded-tr-md text-white":"rounded-2xl rounded-tl-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-100 dark:border-gray-600"}`,style:x?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",boxShadow:"0 4px 20px rgba(0, 173, 181, 0.25)"}:{boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)"},children:[e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:at(l.message||l.content||l.text,x)}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${x?"justify-end":""}`,children:[e.jsx("p",{className:`text-[10px] ${x?"text-cyan-100":"text-gray-400"}`,children:l.createdAt?new Date(l.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(l.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),x&&e.jsx("span",{className:"text-[10px] text-cyan-100 ml-1",children:n==="read"?e.jsx("span",{title:"Read",children:"âœ“âœ“"}):n==="delivered"?e.jsx("span",{title:"Delivered",className:"opacity-70",children:"âœ“âœ“"}):e.jsx("span",{title:"Sent",className:"opacity-50",children:"âœ“"})})]})]})}),x&&e.jsx("img",{src:i?.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s?.name?.replace(/\s+/g,"")||"Me"}`,alt:"Me",className:"w-8 h-8 rounded-full flex-shrink-0 ml-2 shadow-md ring-2 ring-white dark:ring-gray-800"})]},l.id)}),e.jsx("div",{ref:tr}),sr&&e.jsx(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center gap-2 pl-10",children:e.jsx("div",{className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl rounded-tl-md shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:0},className:"w-2 h-2 bg-[#00ADB5] rounded-full"}),e.jsx(f.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:.2},className:"w-2 h-2 bg-[#00ADB5] rounded-full"}),e.jsx(f.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:.6,delay:.4},className:"w-2 h-2 bg-[#00ADB5] rounded-full"})]})})})]})}),e.jsxs("div",{className:"p-3 sm:p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[U.trim()&&e.jsx(f.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"text-[11px] text-[#00ADB5] mb-2 ml-2 hidden sm:block",children:"Press Enter to send"}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 items-center bg-gray-50 dark:bg-gray-900 rounded-2xl p-1.5 sm:p-2 shadow-sm border border-gray-200 dark:border-gray-700 transition-all focus-within:border-[#00ADB5] focus-within:ring-2 focus-within:ring-[#00ADB5]/20",children:[e.jsx("button",{className:"hidden sm:flex p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("input",{type:"text",placeholder:"Type a message...",value:U,onChange:p,onKeyPress:l=>{l.key==="Enter"&&U.trim()&&c()},onBlur:()=>o(),className:"flex-1 px-2 py-2 bg-transparent text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none text-sm"}),e.jsx("button",{className:"hidden sm:flex p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),e.jsx(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,disabled:!U.trim(),className:`p-2.5 rounded-xl transition-all ${U.trim()?"text-white shadow-lg":"text-gray-400 bg-gray-100 dark:bg-gray-800"}`,style:U.trim()?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",boxShadow:"0 4px 12px rgba(0, 173, 181, 0.4)"}:{},children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"hidden sm:flex items-center justify-center gap-2 mt-2",children:L?e.jsxs("p",{className:"text-[10px] text-gray-400 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),"Real-time messaging active"]}):e.jsxs("p",{className:"text-[10px] text-amber-500 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),"Connecting to real-time..."]})})]})]})})]})},Cr=()=>{if(h){const r=h.members?.some(t=>t.userId===s?.id),a=h.members?.some(t=>t.userId===s?.id&&(t.role==="admin"||t.role==="creator")),o=h.joinRequests?.some(t=>t.userId===s?.id&&t.status==="pending");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("button",{onClick:()=>I(null),className:"font-semibold flex items-center gap-2 transition-colors",style:{color:"#00ADB5"},onMouseEnter:t=>t.currentTarget.style.opacity="0.8",onMouseLeave:t=>t.currentTarget.style.opacity="1",children:"â† Back to Groups"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:h.name}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:h.description})]}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${h.level==="Beginner"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":h.level==="Intermediate"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:h.level})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("span",{className:"text-sm px-3 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:h.topic}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-white",children:[h.members?.length||0," / ",h.maxMembers," members"]})]}),a&&h.joinRequests?.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-3 flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5"}),"Pending Join Requests (",h.joinRequests.length,")"]}),e.jsx("div",{className:"space-y-3",children:h.joinRequests.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("img",{src:t.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${t.userName}`,alt:t.userName,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.userName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Requested ",new Date(t.requestedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{try{const c=await et(h.id,t.userId);I(c);const p=await pe();C(p),u.success(`${t.userName} has been approved!`)}catch(c){u.error(c?.message||"Failed to approve request")}},className:"p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:"Approve",children:e.jsx(Ur,{className:"w-4 h-4"})}),e.jsx("button",{onClick:async()=>{try{const c=await rt(h.id,t.userId);I(c),u.success(`Request from ${t.userName} has been rejected`)}catch(c){u.error(c?.message||"Failed to reject request")}},className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",title:"Reject",children:e.jsx(re,{className:"w-4 h-4"})})]})]},t.userId))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Members"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:h.members?.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("img",{src:t.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${t.name}`,alt:t.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:t.role==="creator"?"ðŸ‘‘ Creator":t.role==="admin"?"â­ Admin":"Member"})]}),a&&t.role!=="creator"&&t.userId!==s?.id&&e.jsx("button",{onClick:async()=>{if(window.confirm(`Remove ${t.name} from the group?`))try{const c=await tt(h.id,t.userId);I(c);const p=await pe();C(p),u.success(`${t.name} has been removed from the group`)}catch(c){u.error(c?.message||"Failed to remove member")}},className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Remove member",children:e.jsx(Vr,{className:"w-4 h-4"})})]},t.userId))})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),"Group Discussion"]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mb-4 h-64 overflow-y-auto",children:rr.length===0?e.jsx("p",{className:"text-gray-500 text-center text-sm py-8",children:"No messages yet. Start the conversation!"}):e.jsx("div",{className:"space-y-3",children:rr.map((t,c)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{src:t.avatar||t.senderAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.name||t.senderName}`,alt:t.name||t.senderName,className:"w-8 h-8 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:t.name||t.senderName}),e.jsx("span",{className:"text-xs text-gray-400",children:t.timestamp?new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"now"})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-white",children:t.message})]})]},t.id||c))})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:ce,onChange:t=>ge(t.target.value),onKeyPress:async t=>{if(t.key==="Enter"&&ce.trim()){const c=ce.trim(),p=i?.displayName||i?.name||s?.name||"User",l=i?.avatar||i?.avatrUrl||"",x=`temp-${Date.now()}`,n={id:x,name:p,senderName:p,avatar:l,senderAvatar:l,message:c,timestamp:new Date().toISOString()};T(d=>[...d,n]),ge("");try{const d=await y(`/study-groups/${h.id}/messages`,{method:"POST",body:JSON.stringify({message:c,senderName:p,senderAvatar:l})});d.message&&T(m=>m.map(v=>v.id===x?d.message:v))}catch(d){console.error("Error sending group message:",d),T(m=>m.filter(v=>v.id!==x)),ge(c),u.error("Failed to send message")}}},placeholder:"Type a message...",className:"flex-1 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none"}),e.jsx("button",{onClick:async()=>{if(ce.trim()){const t=ce.trim(),c=i?.displayName||i?.name||s?.name||"User",p=i?.avatar||i?.avatrUrl||"",l=`temp-${Date.now()}`,x={id:l,name:c,senderName:c,avatar:p,senderAvatar:p,message:t,timestamp:new Date().toISOString()};T(n=>[...n,x]),ge("");try{const n=await y(`/study-groups/${h.id}/messages`,{method:"POST",body:JSON.stringify({message:t,senderName:c,senderAvatar:p})});n.message&&T(d=>d.map(m=>m.id===l?n.message:m))}catch(n){console.error("Error sending group message:",n),T(d=>d.filter(m=>m.id!==l)),ge(t),u.error("Failed to send message")}}},className:"px-4 py-2 text-white rounded-lg transition-all shadow-md hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:e.jsx(Je,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Resources & Schedule"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:t=>{t.currentTarget.style.borderColor="#00ADB5",t.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",t.currentTarget.style.color="#00ADB5"},onMouseLeave:t=>{t.currentTarget.style.borderColor="",t.currentTarget.style.backgroundColor="",t.currentTarget.style.color=""},children:[e.jsx(se,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Share Resource"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:t=>{t.currentTarget.style.borderColor="#00ADB5",t.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",t.currentTarget.style.color="#00ADB5"},onMouseLeave:t=>{t.currentTarget.style.borderColor="",t.currentTarget.style.backgroundColor="",t.currentTarget.style.color=""},children:[e.jsx(se,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Schedule Session"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:t=>{t.currentTarget.style.borderColor="#00ADB5",t.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",t.currentTarget.style.color="#00ADB5"},onMouseLeave:t=>{t.currentTarget.style.borderColor="",t.currentTarget.style.backgroundColor="",t.currentTarget.style.color=""},children:[e.jsx(se,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Set Goal"})]})]})]})]}):e.jsx("div",{className:"text-center py-8 border-t border-gray-200 dark:border-gray-700",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:e.jsx(He,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-2 font-semibold",children:"Request Pending"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Waiting for the group owner to approve your request"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 dark:text-white mb-4",children:"Request to join this group and get approval from the owner"}),e.jsx("button",{onClick:async()=>{if(s)try{const t=i?.displayName||s.name||"User",c=i?.avatrUrl||"",p=await Zr(h.id,t,c);if(p.group){I(p.group);const l=await pe();C(l)}u.success(p.message||"Join request sent! Waiting for approval.")}catch(t){console.error("Error requesting to join group:",t),u.error(t?.message||"Failed to send join request. Please try again.")}},disabled:h.members?.length>=h.maxMembers,className:"px-6 py-2 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Request to Join"})]})})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Study Groups"}),e.jsxs("div",{className:"relative flex-1 max-w-md mx-0 sm:mx-4",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:J,onChange:r=>Qe(r.target.value),placeholder:"Search groups...",className:"w-full pl-10 pr-10 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"}),J&&e.jsx("button",{onClick:()=>Qe(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(re,{className:"w-4 h-4"})})]}),e.jsxs("button",{onClick:()=>be(!0),className:"px-4 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90 flex items-center gap-2 whitespace-nowrap",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(se,{className:"w-5 h-5"}),"Create Group"]})]}),gr&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Create Study Group"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Group Name"}),e.jsx("input",{type:"text",value:A.name,onChange:r=>K({...A,name:r.target.value}),placeholder:"DSA Interview Prep",className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Description"}),e.jsx("textarea",{value:A.description,onChange:r=>K({...A,description:r.target.value}),placeholder:"Daily DSA practice and mock interviews",rows:3,className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Topic"}),e.jsxs("select",{value:A.topic,onChange:r=>K({...A,topic:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Topic"}),e.jsx("option",{value:"DSA",children:"Data Structures & Algorithms"}),e.jsx("option",{value:"Web Dev",children:"Web Development"}),e.jsx("option",{value:"Mobile",children:"Mobile Development"}),e.jsx("option",{value:"AI/ML",children:"AI & Machine Learning"}),e.jsx("option",{value:"System Design",children:"System Design"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Level"}),e.jsxs("select",{value:A.level,onChange:r=>K({...A,level:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"Beginner",children:"Beginner"}),e.jsx("option",{value:"Intermediate",children:"Intermediate"}),e.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Max Members"}),e.jsx("input",{type:"number",value:A.maxMembers,onChange:r=>K({...A,maxMembers:parseInt(r.target.value)}),min:"2",max:"50",className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:async()=>{if(A.name&&A.topic&&s)try{const r=await Xr({...A,creatorId:s.id,creatorName:i?.displayName||i?.name||s.name||"User",creatorAvatar:i?.avatar||i?.avatrUrl||"",members:[{userId:s.id,name:i?.displayName||i?.name||s.name||"User",avatar:i?.avatar||i?.avatrUrl||"",joinedAt:new Date,role:"creator"}]});r&&C(o=>[r,...o]);const a=await pe();a&&a.length>0&&C(a),be(!1),K({name:"",description:"",topic:"",level:"Beginner",maxMembers:10}),u.success("Study group created successfully!")}catch(r){console.error("Error creating group:",r),u.error("Failed to create group. Please try again.")}},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Create Group"}),e.jsx("button",{onClick:()=>be(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})}),(()=>{const r=J.trim().toLowerCase(),a=r?Xe.filter(o=>(o.name||"").toLowerCase().includes(r)||(o.topic||"").toLowerCase().includes(r)||(o.description||"").toLowerCase().includes(r)||(o.creatorName||"").toLowerCase().includes(r)):Xe;return a.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(lr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:J?"No Groups Found":"No Study Groups Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:J?`No groups matching "${J}"`:"Create or join a study group to learn together"}),!J&&e.jsx("button",{onClick:()=>be(!0),className:"px-6 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Create First Group"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:a.map(o=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-1",children:o.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:["by ",o.creatorName]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${o.level==="Beginner"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":o.level==="Intermediate"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:o.level}),o.creatorId===s?.id&&e.jsx("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this study group?"))try{await Qr(o.id);const t=await pe();C(t)}catch(t){console.error("Error deleting group:",t),alert("Failed to delete group. Please try again.")}},className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete group",children:e.jsx(We,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-4 line-clamp-2",children:o.description}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:o.topic})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:["Members (",o.members?.length||0,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[o.members?.slice(0,5).map((t,c)=>e.jsx("img",{src:t.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${t.name}`,alt:t.name,className:"w-8 h-8 rounded-full border-2 border-white dark:border-gray-800",title:t.name,style:{marginLeft:c>0?"-8px":"0"}},t.userId)),(o.members?.length||0)>5&&e.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-600 dark:text-white",style:{marginLeft:"-8px"},children:["+",(o.members?.length||0)-5]}),(!o.members||o.members.length===0)&&e.jsx("p",{className:"text-xs text-gray-500",children:"No members yet"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-white mb-4",children:[e.jsxs("span",{children:[o.members?.length||0," / ",o.maxMembers," members"]}),e.jsxs("span",{className:"text-gray-400",children:["Created ",ke(o.createdAt)]})]}),e.jsx("button",{onClick:()=>I(o),className:"w-full px-4 py-2 text-white rounded-lg transition-all text-sm font-semibold shadow-md hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"View Details"})]},o.id))})})()]})},Ar=async()=>{if(!j.website||!j.title||!j.content){u.error("Please fill in required fields (Website, Title, Review)");return}try{const r=ae(i,s?.id),a={userId:s?.id,userName:i?.displayName||s?.name||"Anonymous",userAvatar:r,userLevel:i?.level||"Student",website:j.website,url:j.url,category:j.category,rating:j.rating,title:j.title,content:j.content,pros:j.pros.split(",").map(t=>t.trim()).filter(Boolean),cons:j.cons.split(",").map(t=>t.trim()).filter(Boolean),timestamp:new Date().toISOString(),likes:0,helpful:0},o=await y("/developers/tech-reviews",{method:"POST",body:JSON.stringify(a)});o.review?H(t=>[o.review,...t]):H(t=>[{...a,id:`temp-${Date.now()}`},...t]),le(!1),O({website:"",url:"",category:"",rating:5,title:"",content:"",pros:"",cons:""}),u.success("Review posted successfully!")}catch(r){console.error("Error posting review:",r),u.error("Failed to post review. Please try again.")}},Ir=async()=>{if(!M.title||!M.description){u.error("Please fill in title and description");return}try{const r={userId:s?.id,userName:i?.displayName||s?.name||"Anonymous",userAvatar:ae(i,s?.id),title:M.title,description:M.description,tags:M.tags.split(",").map(o=>o.trim()).filter(Boolean),timestamp:new Date().toISOString(),responses:0},a=await y("/developers/help-requests",{method:"POST",body:JSON.stringify(r)});a.request?$(o=>[a.request,...o]):$(o=>[{...r,id:`temp-${Date.now()}`},...o]),oe(!1),fe({title:"",description:"",tags:""}),u.success("Help request posted successfully!")}catch(r){console.error("Error posting request:",r),u.error("Failed to post request. Please try again.")}},Br=async r=>{try{const a=await y(`/developers/tech-reviews/${r}/like`,{method:"POST"});H(o=>o.map(t=>t.id===r?{...t,likes:a.likes,likedBy:a.liked?[...t.likedBy||[],s?.id]:(t.likedBy||[]).filter(c=>c!==s?.id)}:t))}catch(a){console.error("Error liking review:",a)}},Rr=async r=>{try{await y(`/developers/tech-reviews/${r}/helpful`,{method:"POST"}),H(a=>a.map(o=>o.id===r?{...o,helpful:(o.helpful||0)+1}:o)),u.success("Marked as helpful!")}catch(a){console.error("Error marking helpful:",a)}},Mr=async r=>{if(window.confirm("Are you sure you want to delete this review?"))try{await y(`/developers/tech-reviews/${r}`,{method:"DELETE"}),H(a=>a.filter(o=>o.id!==r)),u.success("Review deleted successfully")}catch(a){console.error("Error deleting review:",a),u.error("Failed to delete review")}},$r=async r=>{if(window.confirm("Are you sure you want to delete this request?"))try{await y(`/developers/help-requests/${r}`,{method:"DELETE"}),$(a=>a.filter(o=>o.id!==r)),u.success("Request deleted successfully")}catch(a){console.error("Error deleting request:",a),u.error("Failed to delete request")}},Tr=async()=>{if(!we.trim()||!b){u.error("Please enter your reply");return}try{const r={content:we,userName:i?.displayName||s?.name||"Anonymous",userAvatar:ae(i,s?.id)},a=await y(`/developers/help-requests/${b.id}/respond`,{method:"POST",body:JSON.stringify(r)});$(o=>o.map(t=>t.id===b.id?{...t,responses:a.responses||(t.responses||0)+1,replies:a.replies||[...t.replies||[],a.reply]}:t)),Q(o=>o?{...o,responses:a.responses||(o.responses||0)+1,replies:a.replies||[...o.replies||[],a.reply]}:null),_(""),u.success("Reply sent successfully!")}catch(r){console.error("Error submitting reply:",r),u.error("Failed to send reply")}},Lr=async r=>{try{return(await y(`/developers/help-requests/${r}/replies`)).replies||[]}catch(a){return console.error("Error fetching replies:",a),[]}},Ue=Re.filter(r=>r.website?.toLowerCase().includes(W.toLowerCase())||r.title?.toLowerCase().includes(W.toLowerCase())||r.category?.toLowerCase().includes(W.toLowerCase())),Fe=mr.filter(r=>r.title?.toLowerCase().includes(W.toLowerCase())||r.description?.toLowerCase().includes(W.toLowerCase())||r.tags?.some(a=>a.toLowerCase().includes(W.toLowerCase()))),Er=()=>e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:e.jsx(Wr,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Tech Reviews"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Share & discover the best learning resources"})]})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>le(!0),className:"flex-1 sm:flex-none px-4 py-2 text-white rounded-lg flex items-center justify-center gap-2 hover:opacity-90 transition-opacity font-semibold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(se,{className:"w-4 h-4"}),"Post Review"]}),e.jsxs("button",{onClick:()=>oe(!0),className:"flex-1 sm:flex-none px-4 py-2 border-2 rounded-lg flex items-center justify-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors font-semibold",style:{borderColor:"#00ADB5",color:"#00ADB5"},children:[e.jsx(se,{className:"w-4 h-4"}),"Ask for Help"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search reviews, websites, categories...",value:W,onChange:r=>ur(r.target.value),className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-1 flex gap-2",children:[e.jsxs("button",{onClick:()=>Me("reviews"),className:`flex-1 py-2 px-4 rounded-md transition-colors font-semibold ${X==="reviews"?"text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,style:X==="reviews"?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"}:{},children:[e.jsx(z,{className:"w-4 h-4 inline mr-2"}),"Reviews (",Ue.length,")"]}),e.jsxs("button",{onClick:()=>Me("requests"),className:`flex-1 py-2 px-4 rounded-md transition-colors font-semibold ${X==="requests"?"text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,style:X==="requests"?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"}:{},children:[e.jsx(Ne,{className:"w-4 h-4 inline mr-2"}),"Help Requests (",Fe.length,")"]})]}),X==="reviews"&&e.jsx("div",{className:"space-y-4",children:Ue.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center border border-gray-200 dark:border-gray-700",children:[e.jsx(z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No reviews yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Be the first to share a learning resource!"}),e.jsx("button",{onClick:()=>le(!0),className:"px-6 py-2 text-white rounded-lg font-semibold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Post First Review"})]}):Ue.map(r=>e.jsx(f.div,{id:`review-${r.id}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white dark:bg-gray-800 rounded-xl p-6 border hover:shadow-lg transition-all ${je===r.id?"border-[#00ADB5] ring-2 ring-[#00ADB5] shadow-lg shadow-[#00ADB5]/20":"border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:r.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${r.userId}`,alt:r.userName,className:"w-12 h-12 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:r.userName}),e.jsx("span",{className:"text-xs px-2 py-1 rounded",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:r.userLevel||"Student"}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsx("span",{className:"text-sm text-gray-500",children:ke(r.timestamp)})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx("h4",{className:"text-lg font-bold",style:{color:"#00ADB5"},children:r.website}),r.url&&e.jsx("a",{href:r.url.startsWith("http")?r.url:`https://${r.url}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-500",children:e.jsx(Fr,{className:"w-4 h-4"})}),r.category&&e.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded ml-auto",children:r.category})]}),e.jsx("div",{className:"flex gap-1 mb-2",children:[...Array(5)].map((a,o)=>e.jsx(z,{className:`w-4 h-4 ${o<(r.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},o))}),e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:r.title}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:r.content}),(r.pros&&r.pros.length>0||r.cons&&r.cons.length>0)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[r.pros&&r.pros.length>0&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[e.jsx("h6",{className:"text-sm font-semibold text-green-800 dark:text-green-400 mb-2",children:"Pros"}),e.jsx("ul",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:r.pros.map((a,o)=>e.jsxs("li",{children:["âœ“ ",a]},o))})]}),r.cons&&r.cons.length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[e.jsx("h6",{className:"text-sm font-semibold text-red-800 dark:text-red-400 mb-2",children:"Cons"}),e.jsx("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1",children:r.cons.map((a,o)=>e.jsxs("li",{children:["âœ— ",a]},o))})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-gray-500 pt-3 border-t border-gray-100 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>Br(r.id),className:`flex items-center gap-2 transition-colors ${(r.likedBy||[]).includes(s?.id)?"text-red-500":"hover:text-red-500"}`,children:[e.jsx(Yr,{className:`w-5 h-5 ${(r.likedBy||[]).includes(s?.id)?"fill-red-500":""}`}),e.jsx("span",{className:"text-sm",children:r.likes||0})]}),e.jsxs("button",{onClick:()=>Rr(r.id),className:"flex items-center gap-2 hover:text-green-500 transition-colors",children:[e.jsx(Jr,{className:"w-5 h-5"}),e.jsxs("span",{className:"text-sm",children:[r.helpful||0," helpful"]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("button",{onClick:()=>{Te(r),$e(!0)},className:"flex items-center gap-2 hover:text-purple-500 transition-colors",title:"Share to message",children:e.jsx(Gr,{className:"w-5 h-5"})}),r.userId===s?.id&&e.jsx("button",{onClick:()=>Mr(r.id),className:"flex items-center gap-2 hover:text-red-500 transition-colors",title:"Delete your review",children:e.jsx(We,{className:"w-5 h-5"})})]})]})]})]})]})},r.id))}),X==="requests"&&e.jsx("div",{className:"space-y-4",children:Fe.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center border border-gray-200 dark:border-gray-700",children:[e.jsx(Ne,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No help requests yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Need recommendations? Ask the community!"}),e.jsx("button",{onClick:()=>oe(!0),className:"px-6 py-2 text-white rounded-lg font-semibold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Ask for Help"})]}):Fe.map(r=>{const a=r.replies||[],o=yr.has(r.id),t=o?a:[],c=a.length||r.responses||0,p=c>0;return e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow overflow-hidden",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{onClick:()=>{D(r.userName||""),N("directory")},className:"flex-shrink-0 group",title:`View ${r.userName}'s profile`,children:e.jsx("img",{src:r.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${r.userId}`,alt:r.userName,className:"w-12 h-12 rounded-full ring-2 ring-transparent group-hover:ring-[#00ADB5] transition-all cursor-pointer"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("button",{onClick:()=>{D(r.userName||""),N("directory")},className:"font-semibold text-gray-900 dark:text-white hover:text-[#00ADB5] dark:hover:text-[#00ADB5] transition-colors cursor-pointer",title:`View ${r.userName}'s profile`,children:r.userName}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsx("span",{className:"text-sm text-gray-500",children:ke(r.timestamp)})]}),e.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white mb-2",children:r.title}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:r.description}),r.tags&&r.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.tags.map((l,x)=>e.jsx("span",{className:"text-xs px-3 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:l},x))}),e.jsx("div",{className:"flex items-center gap-4 text-sm",children:r.userId===s?.id&&e.jsxs("button",{onClick:()=>$r(r.id),className:"flex items-center gap-2 text-gray-500 hover:text-red-500 transition-colors ml-auto",title:"Delete your request",children:[e.jsx(We,{className:"w-4 h-4"}),"Delete"]})})]})]})}),e.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700/50",children:[c>0&&e.jsx("div",{className:"px-4 pb-2",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[c," ",c===1?"response":"responses"]})}),p&&!o&&e.jsxs("button",{onClick:async()=>{const l=await Lr(r.id);$(x=>x.map(n=>n.id===r.id?{...n,replies:l}:n)),Ze(x=>new Set([...x,r.id]))},className:"px-4 py-1.5 text-sm text-gray-500 dark:text-gray-400 hover:text-[#00ADB5] transition-colors",children:["View all ",c," responses"]}),t.length>0&&e.jsx("div",{className:"px-4 py-2 space-y-3",children:t.map((l,x)=>e.jsxs("div",{className:"group flex items-start gap-3 animate-in fade-in slide-in-from-bottom-2 duration-300",style:{animationDelay:`${x*50}ms`},children:[e.jsxs("button",{onClick:()=>{D(l.userName||""),N("directory")},className:"flex-shrink-0 relative",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-tr from-[#00ADB5] to-cyan-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("img",{src:l.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${l.userId}`,alt:l.userName,className:"relative w-9 h-9 rounded-full ring-2 ring-white dark:ring-gray-800"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"bg-gray-100/80 dark:bg-gray-700/50 rounded-2xl px-4 py-2.5 inline-block max-w-full",children:[e.jsx("button",{onClick:()=>{D(l.userName||""),N("directory")},className:"font-semibold text-sm text-gray-900 dark:text-white hover:text-[#00ADB5] dark:hover:text-[#00ADB5] transition-colors",children:l.userName}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-0.5 leading-relaxed break-words",children:l.content})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5 ml-1",children:[e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:st(l.timestamp||l.createdAt)}),l.userId===s?.id&&e.jsx("button",{onClick:async()=>{if(window.confirm("Delete this comment?"))try{await y(`/developers/help-requests/${r.id}/replies/${l.id}`,{method:"DELETE"}),$(n=>n.map(d=>d.id===r.id?{...d,responses:Math.max((d.responses||1)-1,0),replies:(d.replies||[]).filter(m=>m.id!==l.id)}:d)),u.success("Comment deleted")}catch(n){console.error("Error deleting comment:",n),u.error("Failed to delete comment")}},className:"text-xs font-semibold text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all",children:"Delete"})]})]})]},l.id||x))}),o&&p&&e.jsx("button",{onClick:()=>{Ze(l=>{const x=new Set(l);return x.delete(r.id),x})},className:"px-4 py-2 text-xs font-medium text-gray-400 hover:text-[#00ADB5] transition-colors",children:"â”€â”€ Hide comments â”€â”€"}),r.userId!==s?.id&&e.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 dark:border-gray-700/30 flex items-center gap-3 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-tr from-[#00ADB5] to-cyan-400 rounded-full opacity-60"}),e.jsx("img",{src:ae(i,s?.id),alt:"You",className:"relative w-9 h-9 rounded-full ring-2 ring-white dark:ring-gray-800 flex-shrink-0"})]}),e.jsxs("div",{className:"flex-1 flex items-center gap-2 bg-gray-100/80 dark:bg-gray-700/50 rounded-full px-4 py-2 focus-within:ring-2 focus-within:ring-[#00ADB5]/50 transition-all",children:[e.jsx("input",{type:"text",placeholder:"Add a comment...",className:"flex-1 text-sm bg-transparent border-none outline-none text-gray-900 dark:text-white placeholder-gray-400",onKeyDown:async l=>{if(l.key==="Enter"&&!l.shiftKey){l.preventDefault();const x=l.target,n=x.value.trim();if(!n)return;try{const d={content:n,userName:i?.displayName||s?.name||"Anonymous",userAvatar:ae(i,s?.id)},m=await y(`/developers/help-requests/${r.id}/respond`,{method:"POST",body:JSON.stringify(d)});$(v=>v.map(Y=>Y.id===r.id?{...Y,responses:(Y.responses||0)+1,replies:[...Y.replies||[],{...d,id:m.reply?.id||Date.now(),userId:s?.id,timestamp:new Date().toISOString()}]}:Y)),x.value="",u.success("Comment posted!")}catch(d){console.error("Error posting comment:",d),u.error("Failed to post comment")}}}}),e.jsx("button",{onClick:async l=>{const n=l.target.closest(".flex")?.querySelector("input");if(!n)return;const d=n.value.trim();if(!d){n.focus();return}try{const m={content:d,userName:i?.displayName||s?.name||"Anonymous",userAvatar:ae(i,s?.id)},v=await y(`/developers/help-requests/${r.id}/respond`,{method:"POST",body:JSON.stringify(m)});$(Y=>Y.map(he=>he.id===r.id?{...he,responses:(he.responses||0)+1,replies:[...he.replies||[],{...m,id:v.reply?.id||Date.now(),userId:s?.id,timestamp:new Date().toISOString()}]}:he)),n.value="",u.success("Comment posted!")}catch(m){console.error("Error posting comment:",m),u.error("Failed to post comment")}},className:"text-sm font-bold hover:scale-105 active:scale-95 transition-all",style:{color:"#00ADB5"},children:"Post"})]})]}),r.userId===s?.id&&t.length===0&&e.jsx("div",{className:"px-4 py-4 flex items-center justify-center gap-2 text-sm text-gray-400 dark:text-gray-500"})]})]},r.id)})}),xr&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(f.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Post a Review"}),e.jsx("button",{onClick:()=>le(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(re,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Website Name *"}),e.jsx("input",{type:"text",value:j.website,onChange:r=>O({...j,website:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"e.g., LeetCode, freeCodeCamp",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Website URL"}),e.jsx("input",{type:"text",value:j.url,onChange:r=>O({...j,url:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"e.g., leetcode.com",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Category"}),e.jsxs("select",{value:j.category,onChange:r=>O({...j,category:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",style:{"--tw-ring-color":"#00ADB5"},children:[e.jsx("option",{value:"",children:"Select category"}),fr.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Rating"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(r=>e.jsx(z,{className:`w-8 h-8 cursor-pointer transition-colors ${r<=j.rating?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-200"}`,onClick:()=>O({...j,rating:r})},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Review Title *"}),e.jsx("input",{type:"text",value:j.title,onChange:r=>O({...j,title:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"Summarize your experience",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Detailed Review *"}),e.jsx("textarea",{value:j.content,onChange:r=>O({...j,content:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white h-32 focus:outline-none focus:ring-2",placeholder:"Share your experience, tips, and insights...",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Pros (comma separated)"}),e.jsx("input",{type:"text",value:j.pros,onChange:r=>O({...j,pros:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"Great UI, Free resources, Active community",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Cons (comma separated)"}),e.jsx("input",{type:"text",value:j.cons,onChange:r=>O({...j,cons:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"Expensive, Limited content, Slow support",style:{"--tw-ring-color":"#00ADB5"}})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:Ar,className:"flex-1 py-2 text-white rounded-lg font-semibold hover:opacity-90 transition-opacity",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Post Review"}),e.jsx("button",{onClick:()=>le(!1),className:"flex-1 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})}),hr&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(f.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Ask for Help"}),e.jsx("button",{onClick:()=>oe(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(re,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"What are you looking for? *"}),e.jsx("input",{type:"text",value:M.title,onChange:r=>fe({...M,title:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"e.g., Best resources to learn React",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Description *"}),e.jsx("textarea",{value:M.description,onChange:r=>fe({...M,description:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white h-24 focus:outline-none focus:ring-2",placeholder:"Describe what you're looking for, your current level, specific requirements...",style:{"--tw-ring-color":"#00ADB5"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Tags (comma separated)"}),e.jsx("input",{type:"text",value:M.tags,onChange:r=>fe({...M,tags:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2",placeholder:"React, Frontend, Beginner",style:{"--tw-ring-color":"#00ADB5"}})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:Ir,className:"flex-1 py-2 text-white rounded-lg font-semibold hover:opacity-90 transition-opacity",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Post Request"}),e.jsx("button",{onClick:()=>oe(!1),className:"flex-1 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})}),pr&&b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(f.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:b.userId===s?.id?"View Replies":"Reply to Request"}),e.jsx("button",{onClick:()=>{ne(!1),_(""),Q(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(re,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("button",{onClick:()=>{b.userId!==s?.id&&(D(b.userName||""),N("directory"),ne(!1),Q(null),_(""))},className:`flex items-center gap-2 ${b.userId!==s?.id?"hover:opacity-80 transition-opacity cursor-pointer group":"cursor-default"}`,title:b.userId!==s?.id?`View ${b.userName}'s profile`:"Your profile",disabled:b.userId===s?.id,children:[e.jsx("img",{src:b.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${b.userId}`,alt:b.userName,className:`w-8 h-8 rounded-full ${b.userId!==s?.id?"ring-2 ring-transparent group-hover:ring-[#00ADB5] transition-all":""}`}),e.jsx("span",{className:`font-semibold text-gray-900 dark:text-white ${b.userId!==s?.id?"group-hover:text-[#00ADB5] transition-colors":""}`,children:b.userName})]}),b.userId===s?.id&&e.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-2 py-0.5 rounded-full",children:"Your Request"})]}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-1",children:b.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.description})]}),b.replies&&b.replies.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"}),b.replies.length," ",b.replies.length===1?"Reply":"Replies"]}),e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:b.replies.map((r,a)=>e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>{D(r.userName||""),N("directory"),ne(!1),Q(null),_("")},className:"flex items-center gap-2 hover:opacity-80 transition-opacity cursor-pointer group",title:`View ${r.userName}'s profile`,children:[e.jsx("img",{src:r.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${r.userId}`,alt:r.userName,className:"w-6 h-6 rounded-full ring-2 ring-transparent group-hover:ring-[#00ADB5] transition-all"}),e.jsx("span",{className:"font-medium text-sm text-gray-900 dark:text-white group-hover:text-[#00ADB5] transition-colors",children:r.userName})]}),e.jsx("span",{className:"text-xs text-gray-500",children:ke(r.createdAt)})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:r.content})]},r.id||a))})]}),b.userId===s?.id&&(!b.replies||b.replies.length===0)&&e.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[e.jsx(Ne,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No replies yet. Check back later!"})]}),b.userId!==s?.id&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Your Reply *"}),e.jsx("textarea",{value:we,onChange:r=>_(r.target.value),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white h-24 focus:outline-none focus:ring-2",placeholder:"Share your recommendation, resources, or advice...",style:{"--tw-ring-color":"#00ADB5"}})]})}),e.jsx("div",{className:"flex gap-3 mt-6",children:b.userId!==s?.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Tr,disabled:!we.trim(),className:"flex-1 py-2 text-white rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Send Reply"}),e.jsx("button",{onClick:()=>{ne(!1),_(""),Q(null)},className:"flex-1 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]}):e.jsx("button",{onClick:()=>{ne(!1),_(""),Q(null)},className:"w-full py-2 text-white rounded-lg font-semibold hover:opacity-90 transition-opacity",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Close"})})]})})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(f.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Developer Connect ðŸ¤"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-white",children:"Find teammates, build together, grow your network"})]})})}),e.jsx("div",{className:"flex gap-1 sm:gap-2 mb-6 sm:mb-8 border-b border-gray-200 dark:border-gray-700 overflow-x-auto scrollbar-hide",children:[{id:"directory",label:"Developer Directory",icon:ve},{id:"messages",label:"Messages",icon:qr},{id:"groups",label:"Study Groups",icon:lr},{id:"reviews",label:"Tech Reviews",icon:z}].map(r=>{const a=r.icon;return e.jsxs("button",{onClick:()=>N(r.id),className:`px-2 sm:px-4 py-2 sm:py-3 font-semibold flex items-center gap-1 sm:gap-2 border-b-2 transition-colors whitespace-nowrap text-xs sm:text-base ${w===r.id?"border-transparent":"border-transparent text-gray-600 dark:text-white hover:text-gray-900 dark:hover:text-white"}`,style:w===r.id?{borderBottomColor:"#00ADB5",color:"#00ADB5"}:{},children:[e.jsx(a,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:r.label}),e.jsx("span",{className:"sm:hidden",children:r.id==="directory"?"Directory":r.id==="messages"?"Messages":r.id==="groups"?"Groups":"Reviews"})]},r.id)})}),w==="directory"&&Sr(),w==="messages"&&Dr(),w==="groups"&&Cr(),w==="reviews"&&Er()]}),br&&ie&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(f.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-md max-h-[80vh] overflow-hidden shadow-xl",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Share Review"}),e.jsx("button",{onClick:()=>{$e(!1),Te(null),Le("")},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx(re,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Sharing:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:ie.website}),e.jsx("span",{className:"text-gray-500",children:"-"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300 truncate",children:ie.title})]})]}),e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search developers to share with...",value:de,onChange:r=>Le(r.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 text-sm",style:{"--tw-ring-color":"#00ADB5"}})]})}),e.jsxs("div",{className:"overflow-y-auto max-h-[300px]",children:[E.filter(r=>r.userId!==s?.id&&(r.name?.toLowerCase().includes(de.toLowerCase())||r.skills?.some(a=>a.toLowerCase().includes(de.toLowerCase())))).slice(0,20).map(r=>e.jsxs("button",{onClick:async()=>{try{const a=await y("/chats",{method:"POST",body:JSON.stringify({participantIds:[s?.id,r.userId]})}),o=a?.id||a?.chat?.id;if(!o)throw new Error("Failed to create chat");const t=`${window.location.origin}/dashboard/developer-connect?tab=reviews&reviewId=${ie.id}`,c=`ðŸ“š Check out this review: ${ie.website}
ðŸ”— ${t}`;await y(`/chats/${o}/messages`,{method:"POST",body:JSON.stringify({senderId:s?.id,senderName:i?.displayName||i?.name||s?.name||"User",senderAvatar:i?.avatar||i?.avatrUrl||"",message:c})}),u.success(`Review shared with ${r.name}!`),$e(!1),Te(null),Le("")}catch(a){console.error("Error sharing review:",a),u.error("Failed to share review")}},className:"w-full p-3 flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:[e.jsx("img",{src:r.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${r.userId}`,alt:r.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.bio?.substring(0,30)||"Developer"})]}),e.jsx(Je,{className:"w-4 h-4 text-gray-400"})]},r.userId)),E.filter(r=>r.userId!==s?.id&&(r.name?.toLowerCase().includes(de.toLowerCase())||r.skills?.some(a=>a.toLowerCase().includes(de.toLowerCase())))).length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(ue,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No developers found"})]})]})]})})]})}export{ht as default};
