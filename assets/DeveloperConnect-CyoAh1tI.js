import{c as Fe,q as u,i as Ue,k as Oe,r as c,J as y,j as e,K as k,o as le,g as Pe,B as be,d as H,n as fe,v as q,N as Je,X as je,Z as Ye}from"./index-CB3vPuyl.js";import{C as we}from"./CustomSelect-VE_kX1dG.js";import{g as F,i as Ne}from"./socketService-DGMOLrkX.js";import{C as ne}from"./circle-alert-Dvtepkj-.js";import{S as ve}from"./send-BO3twjc7.js";import{P as W}from"./plus-BdEqDgIr.js";import{T as He}from"./trash-2-BbJiBpHJ.js";import"./chevron-down-YiHXdQG6.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],_e=Fe("user-minus",We),ze=async a=>{try{const d=new URLSearchParams;return a&&Object.entries(a).forEach(([S,A])=>{A!==void 0&&d.append(S,A.toString())}),(await u(`/study-groups?${d.toString()}`)).groups}catch(d){return console.error("Error getting study groups:",d),[]}},U=ze,Ke=async a=>{try{return(await u("/study-groups",{method:"POST",body:JSON.stringify(a)})).group}catch(d){throw console.error("Error creating study group:",d),d}},Qe=async a=>{try{await u(`/study-groups/${a}`,{method:"DELETE"})}catch(d){throw console.error("Error deleting study group:",d),d}},Ve=async(a,d,x)=>{try{return await u(`/study-groups/${a}/join`,{method:"POST",body:JSON.stringify({userName:d,userAvatar:x})})}catch(S){throw console.error("Error requesting to join study group:",S),S}},Xe=async(a,d)=>{try{return(await u(`/study-groups/${a}/approve/${d}`,{method:"POST"})).group}catch(x){throw console.error("Error approving join request:",x),x}},Ze=async(a,d)=>{try{return(await u(`/study-groups/${a}/reject/${d}`,{method:"POST"})).group}catch(x){throw console.error("Error rejecting join request:",x),x}},er=async(a,d)=>{try{return(await u(`/study-groups/${a}/members/${d}`,{method:"DELETE"})).group}catch(x){throw console.error("Error removing member:",x),x}},de=a=>{if(!a)return"Unknown date";try{if(a?.toDate&&typeof a.toDate=="function")return a.toDate().toLocaleDateString();if(a?.seconds)return new Date(a.seconds*1e3).toLocaleDateString();const d=new Date(a);return isNaN(d.getTime())?"Unknown date":d.toLocaleDateString()}catch{return"Unknown date"}};function ir(){const{user:a}=Ue(),{userprofile:d}=Oe(),[x,S]=c.useState("directory"),[A,ke]=c.useState(""),[I,O]=c.useState([]),[_,Se]=c.useState(""),[w,ie]=c.useState(null),[z,ce]=c.useState(null),[K,E]=c.useState([]),[T,Q]=c.useState(""),[Ce,P]=c.useState(!1),[C,ge]=c.useState([]),[De,me]=c.useState(!0),[xe,V]=c.useState(null),[X,Z]=c.useState([]),[ee,Me]=c.useState(12),[Ae,j]=c.useState([]),[N,he]=c.useState(""),[Ie,J]=c.useState(!1),[b,R]=c.useState({name:"",description:"",topic:"",level:"Beginner",maxMembers:10}),[D,re]=c.useState([]),[Ee,se]=c.useState(!1),[G,te]=c.useState(null),[v,Y]=c.useState({skill:"",message:""}),[i,f]=c.useState(null),[$,ae]=c.useState(""),[ue,B]=c.useState([]),pe=c.useRef(null),Te=()=>{pe.current?.scrollIntoView({behavior:"smooth"})};c.useEffect(()=>{Te()},[K]),c.useEffect(()=>{(async()=>{try{me(!0),V(null);const t=await u("/developers/init/page-data");console.log("Developer Connect data loaded:",t),ge(t.developers||[]),j(t.studyGroups||[]),re(t.endorsements||[]),(!t.developers||t.developers.length===0)&&V("No developers found. The community is waiting for you!")}catch(t){console.error("Error loading Developer Connect data:",t);try{const[o,s,l]=await Promise.all([u("/developers").catch(()=>[]),u("/study-groups").catch(()=>({groups:[]})),u("/developers/endorsements/me").catch(()=>({endorsements:[]}))]);ge(o||[]),j(s.groups||[]),re(l.endorsements||[])}catch{V("Failed to load developers: "+(t instanceof Error?t.message:String(t)))}}finally{me(!1)}})()},[]),c.useEffect(()=>{if(!w||!a){E([]),ce(null);return}let r=!0,t=null;return(async()=>{console.log("Setting up chat for:",a.id,w),P(!0);try{const s=C.find(g=>g.userId===w);if(!s){console.error("Selected developer not found"),P(!1);return}const l=await u("/chats",{method:"POST",body:JSON.stringify({participantIds:[a.id,w],participantNames:[d?.displayName||a.name||"User",s.name],participantAvatars:[d?.avatrUrl||"",s.avatar]})});if(!r)return;ce(l.id),t=l.id,console.log("Chat ID obtained:",l.id);const h=await u(`/chats/${l.id}/messages`);r&&E(h),P(!1);try{Ne();const g=F();if(g){g.emit("join-chat",l.id),console.log("ðŸ“¡ Joined chat room:",l.id);const M=n=>{console.log("ðŸ“© Received new message:",n),n.chatId===l.id&&r&&E(m=>m.some(oe=>oe.id===n.id)?m:[...m,n])};g.on("newMessage",M),g._chatMessageHandler=M}}catch(g){console.warn("Socket init failed, falling back to polling:",g)}}catch(s){console.error("Error setting up chat:",s),r&&P(!1)}})(),()=>{r=!1;try{const s=F();if(s&&s.connected&&t){s.emit("leave-chat",t);const l=s._chatMessageHandler;l&&s.off("newMessage",l),delete s._chatMessageHandler}}catch{}}},[w,a?.id,C,d]),c.useEffect(()=>{if(!a||x!=="messages"){Z([]);return}(async()=>{try{const o=(await u("/chats")||[]).map(s=>({participantId:s.participantId,participantName:s.participantName,participantAvatar:s.participantAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${s.participantName?.replace(/\s+/g,"")}`,lastMessage:s.lastMessage,lastMessageAt:s.lastMessageAt}));Z(o)}catch(t){console.warn("Could not load conversations yet:",t),Z([])}})()},[a?.id,x]),c.useEffect(()=>{if(a)try{Ne();const r=F();if(!r)return;r.emit("join-user",a.id);const t=n=>{console.log("New join request:",n),i&&i.id===n.groupId&&f(m=>{if(!m)return m;const p=m.joinRequests||[];return p.some(oe=>oe.userId===n.request.userId)?m:{...m,joinRequests:[...p,n.request]}}),y.success(`${n.request.userName} requested to join your group!`)},o=n=>{console.log("Request approved:",n),y.success(`You've been approved to join ${n.groupName}!`),n.group&&(j(m=>m.map(p=>p.id===n.groupId?n.group:p)),i&&i.id===n.groupId&&f(n.group))},s=n=>{console.log("Request rejected:",n),y.error(`Your request to join ${n.groupName} was rejected.`),i&&i.id===n.groupId&&f(m=>m&&{...m,joinRequests:m.joinRequests?.filter(p=>p.userId!==a.id)||[]})},l=n=>{console.log("Member joined:",n),y.success(`${n.member.name} has joined the group!`),n.group&&(j(m=>m.map(p=>p.id===n.groupId?n.group:p)),i&&i.id===n.groupId&&f(n.group))},h=n=>{console.log("Removed from group:",n),y.error(`You've been removed from ${n.groupName}`),i&&i.id===n.groupId&&f(null),j(m=>m.filter(p=>p.id!==n.groupId))},g=n=>{console.log("Member removed:",n),n.group&&(j(m=>m.map(p=>p.id===n.groupId?n.group:p)),i&&i.id===n.groupId&&f(n.group))},M=n=>{console.log("Group updated:",n),n.group&&(j(m=>m.map(p=>p.id===n.groupId?n.group:p)),i&&i.id===n.groupId&&f(n.group))};return r.on("joinRequest",t),r.on("requestApproved",o),r.on("requestRejected",s),r.on("memberJoined",l),r.on("removedFromGroup",h),r.on("memberRemoved",g),r.on("groupUpdated",M),()=>{r.emit("leave-user",a.id),r.off("joinRequest",t),r.off("requestApproved",o),r.off("requestRejected",s),r.off("memberJoined",l),r.off("removedFromGroup",h),r.off("memberRemoved",g),r.off("groupUpdated",M)}}catch(r){console.warn("Socket initialization failed for study groups:",r)}},[a?.id,i?.id]),c.useEffect(()=>{if(!(!i||!a))try{const r=F();return r&&r.emit("join-group",i.id),()=>{r&&r.emit("leave-group",i.id)}}catch(r){console.warn("Could not join group socket room:",r)}},[i?.id,a]),c.useEffect(()=>{if(!i||!a){B([]);return}(async()=>{try{const t=await u(`/study-groups/${i.id}/messages`);B(t.messages||[])}catch(t){console.warn("Could not load group messages:",t),B([])}})();try{const t=F();if(t){const o=s=>{s.groupId===i.id&&s.message&&B(l=>l.some(h=>h.id===s.message.id)?l:[...l,s.message])};return t.on("newGroupMessage",o),()=>{t.off("newGroupMessage",o)}}}catch(t){console.warn("Socket not available for group messages:",t)}},[i?.id,a]);const L=C.filter(r=>{const t=r.skills||[],o=r.lookingFor||"",s=(r.name||"").toLowerCase().includes(A.toLowerCase())||t.some(g=>g.toLowerCase().includes(A.toLowerCase())),l=I.length===0||I.some(g=>t.includes(g)),h=!_||o.includes(_);return s&&l&&h}),ye=L.slice(0,ee),Re=L.length>ee,Ge=["React","Node.js","Python","Java","MongoDB","TypeScript","AWS","Machine Learning"],Be=()=>De?e.jsx("div",{className:"space-y-6",children:[1,2,3,4,5,6].map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-700 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded mb-2 w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-1/3"})]})]}),e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded flex-1"}),e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-700 rounded flex-1"})]})]},r))}):xe?e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-8 border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(ne,{className:"w-6 h-6 text-red-600 dark:text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-900 dark:text-red-300 mb-2",children:"Unable to Load Developers"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:xe}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})]})}):C.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(le,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Developers Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:"Developers who complete their profiles will appear here. Invite your friends!"}),e.jsx("button",{className:"px-6 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Invite Friends"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(fe,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("input",{type:"text",placeholder:"Search developers by name or skills...",value:A,onChange:r=>ke(r.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#00ADB5] focus:bg-white dark:focus:bg-gray-600 transition-all"})]}),e.jsx(we,{value:I.length>0?I[0]:"",onChange:r=>{O(r===""?[]:t=>t.includes(r)?t.filter(o=>o!==r):[r])},options:[{value:"",label:"All Skills"},...Ge.map(r=>({value:r,label:r}))],className:"w-full sm:min-w-[180px] sm:w-auto"}),e.jsx(we,{value:_,onChange:r=>Se(r),options:[{value:"",label:"Looking For"},{value:"Teammates",label:"Teammates"},{value:"Mentoring",label:"Mentoring"},{value:"Both",label:"Both"}],className:"w-full sm:min-w-[180px] sm:w-auto"})]}),I.length>0&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[I.map(r=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium text-white",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[r,e.jsx("button",{onClick:()=>O(t=>t.filter(o=>o!==r)),className:"ml-1 hover:bg-white/20 rounded-full p-0.5",children:"Ã—"})]},r)),e.jsx("button",{onClick:()=>O([]),className:"px-3 py-1 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white",children:"Clear all"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-white",children:[e.jsxs("p",{children:["Showing ",ye.length," of ",L.length," developers"]}),L.length!==C.length&&e.jsxs("p",{children:[C.length," total in directory"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ye.map((r,t)=>e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("img",{src:r.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${r.name}`,alt:r.name||"Developer",className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.name||"Unknown"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:[r.institute||r.college||"Not specified"," â€¢ ",r.yearOfStudy?r.yearOfStudy===1?"1st Year":r.yearOfStudy===2?"2nd Year":r.yearOfStudy===3?"3rd Year":r.yearOfStudy===4?"4th Year":`${r.yearOfStudy} Year`:r.year||"Student"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",style:{color:"#00ADB5"},children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:D.filter(o=>o.recipientId===r.userId).length})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-4 line-clamp-2",children:r.bio||"No bio available"}),e.jsx("div",{className:"rounded-lg p-3 mb-4",style:{background:"rgba(0, 173, 181, 0.1)"},children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Problems Solved"}),e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:r.challenges_solved||r.codeArenaStats?.problemsSolved||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Rank"}),e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:["#",r.marathon_rank||r.codeArenaStats?.rank||"N/A"]})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(r.skills||[]).length>0?e.jsxs(e.Fragment,{children:[(r.skills||[]).slice(0,3).map(o=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:o},o)),(r.skills||[]).length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white rounded-full",children:["+",(r.skills||[]).length-3]})]}):e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"No skills added"})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-green-700 dark:text-green-400 mb-1",children:r.lookingFor||"Open to opportunities"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 line-clamp-2",children:r.lookingForDetails||"Looking to connect with other developers"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("button",{onClick:()=>{ie(r.userId),S("messages")},className:"flex-1 px-3 py-2 text-white text-sm font-semibold rounded-lg transition-all shadow-md hover:opacity-90 flex items-center justify-center gap-2",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(q,{className:"w-4 h-4"}),"Message"]}),e.jsxs("button",{onClick:()=>{te(r),se(!0)},className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white text-sm font-semibold rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Endorse"]})]})]},r.userId))}),Re&&e.jsx("div",{className:"text-center mt-8",children:e.jsxs("button",{onClick:()=>Me(r=>r+12),className:"px-8 py-3 text-white rounded-lg transition-all shadow-lg hover:opacity-90 font-semibold",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:["Load More (",L.length-ee," remaining)"]})}),L.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(le,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No developers found"}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:"Try adjusting your filters"})]})]}),Le=()=>{const r=w?C.find(o=>o.userId===w):null,t=async()=>{if(!T.trim()||!a||!z)return;const o=T;Q("");const s={id:`temp-${Date.now()}`,senderId:a.id,senderName:d?.displayName||a.name||"User",senderAvatar:d?.avatrUrl||"",message:o,timestamp:new Date,isRead:!1};E(l=>[...l,s]);try{await u(`/chats/${z}/messages`,{method:"POST",body:JSON.stringify({senderId:a.id,senderName:d?.displayName||a.name||"User",senderAvatar:d?.avatrUrl||"",message:o})});const l=await u(`/chats/${z}/messages`);E(l)}catch(l){console.error("Error sending message:",l),Q(o),E(h=>h.filter(g=>g.id!==s.id))}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 h-[600px]",children:[e.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-white to-gray-50 dark:from-gray-800 dark:to-gray-900",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5",style:{color:"#00ADB5"}}),"Messages"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[X.length," conversations"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:X.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(q,{className:"w-10 h-10 mx-auto mb-3 opacity-30"}),e.jsx("p",{className:"text-sm font-medium",children:"No conversations yet"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Go to Developer Directory to start chatting"})]}):X.map(o=>e.jsx(k.button,{whileHover:{backgroundColor:"rgba(0, 173, 181, 0.05)"},onClick:()=>ie(o.participantId),className:"w-full p-3 border-b border-gray-100 dark:border-gray-700 transition-all text-left",style:w===o.participantId?{backgroundColor:"rgba(0, 173, 181, 0.1)",borderLeft:"3px solid #00ADB5"}:{},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o.participantAvatar,alt:o.participantName,className:"w-12 h-12 rounded-full ring-2 ring-white dark:ring-gray-700 shadow-sm"}),e.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-800"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white truncate text-sm",children:o.participantName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:o.lastMessage||"No messages yet"})]})]})},o.participantId))})]}),e.jsx("div",{className:"lg:col-span-2 bg-gradient-to-br from-gray-50 to-white dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700 flex flex-col shadow-lg overflow-hidden",children:!w||!r?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center p-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",style:{background:"linear-gradient(135deg, rgba(0, 173, 181, 0.1) 0%, rgba(0, 212, 255, 0.1) 100%)"},children:e.jsx(q,{className:"w-10 h-10",style:{color:"#00ADB5"}})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Select a Conversation"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Choose a user from the left to start chatting"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.avatar,alt:r.name,className:"w-10 h-10 rounded-full ring-2 ring-cyan-500"}),e.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-800"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.name}),e.jsxs("p",{className:"text-xs text-green-500 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Online"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{backgroundImage:"radial-gradient(circle at 25px 25px, rgba(0, 173, 181, 0.03) 2%, transparent 0%), radial-gradient(circle at 75px 75px, rgba(0, 173, 181, 0.03) 2%, transparent 0%)",backgroundSize:"100px 100px"},children:Ce?e.jsxs(k.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-full",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-transparent mb-3",style:{borderTopColor:"#00ADB5",borderRightColor:"#00d4ff"}}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading messages..."})]}):K.length===0?e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500",children:"No messages yet. Say hello! ðŸ‘‹"})}):e.jsxs(e.Fragment,{children:[K.map(o=>{const s=o.senderId===a?.id||o.senderId===a?.id?.toString()||o.userId===a?.id;return e.jsxs(k.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.2,type:"spring",stiffness:500,damping:30},className:`flex w-full ${s?"justify-end":"justify-start"}`,children:[!s&&e.jsx("img",{src:o.senderAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${o.senderName?.replace(/\s+/g,"")||"User"}`,alt:o.senderName||"User",className:"w-8 h-8 rounded-full flex-shrink-0 mr-2 shadow-sm"}),e.jsx("div",{className:`max-w-[70%] ${s?"mr-2":""}`,children:e.jsxs(k.div,{whileHover:{scale:1.01},className:`px-4 py-2.5 ${s?"rounded-tl-2xl rounded-tr-md rounded-bl-2xl rounded-br-2xl text-white":"rounded-tl-md rounded-tr-2xl rounded-bl-2xl rounded-br-2xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-100 dark:border-gray-600"}`,style:s?{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",boxShadow:"0 4px 15px rgba(0, 173, 181, 0.3)"}:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},children:[e.jsx("p",{className:"text-sm leading-relaxed",children:o.message||o.content||o.text}),e.jsx("p",{className:`text-[10px] mt-1 ${s?"text-cyan-100 text-right":"text-gray-400"}`,children:o.createdAt?new Date(o.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(o.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),s&&e.jsx("img",{src:d?.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a?.name?.replace(/\s+/g,"")||"Me"}`,alt:"Me",className:"w-8 h-8 rounded-full flex-shrink-0 ml-2 shadow-sm"})]},o.id)}),e.jsx("div",{ref:pe})]})}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("input",{type:"text",placeholder:"Type your message...",value:T,onChange:o=>Q(o.target.value),onKeyPress:o=>{o.key==="Enter"&&T.trim()&&t()},className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-gray-900 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 transition-all",style:{"--tw-ring-color":"rgba(0, 173, 181, 0.5)"}}),e.jsx(k.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,disabled:!T.trim(),className:"p-3 text-white rounded-xl disabled:opacity-50 transition-all shadow-lg",style:{background:T.trim()?"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)":"#9ca3af"},children:e.jsx(ve,{className:"w-5 h-5"})})]})})]})})]})},$e=()=>{if(i){const r=i.members?.some(s=>s.userId===a?.id),t=i.members?.some(s=>s.userId===a?.id&&(s.role==="admin"||s.role==="creator")),o=i.joinRequests?.some(s=>s.userId===a?.id&&s.status==="pending");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("button",{onClick:()=>f(null),className:"font-semibold flex items-center gap-2 transition-colors",style:{color:"#00ADB5"},onMouseEnter:s=>s.currentTarget.style.opacity="0.8",onMouseLeave:s=>s.currentTarget.style.opacity="1",children:"â† Back to Groups"}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:i.name}),e.jsx("p",{className:"text-gray-600 dark:text-white",children:i.description})]}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${i.level==="Beginner"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":i.level==="Intermediate"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:i.level})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("span",{className:"text-sm px-3 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:i.topic}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-white",children:[i.members?.length||0," / ",i.maxMembers," members"]})]}),t&&i.joinRequests?.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-300 mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"}),"Pending Join Requests (",i.joinRequests.length,")"]}),e.jsx("div",{className:"space-y-3",children:i.joinRequests.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx("img",{src:s.userAvatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${s.userName}`,alt:s.userName,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:s.userName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Requested ",new Date(s.requestedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{try{const l=await Xe(i.id,s.userId);f(l);const h=await U();j(h),y.success(`${s.userName} has been approved!`)}catch(l){y.error(l?.message||"Failed to approve request")}},className:"p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",title:"Approve",children:e.jsx(Je,{className:"w-4 h-4"})}),e.jsx("button",{onClick:async()=>{try{const l=await Ze(i.id,s.userId);f(l),y.success(`Request from ${s.userName} has been rejected`)}catch(l){y.error(l?.message||"Failed to reject request")}},className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",title:"Reject",children:e.jsx(je,{className:"w-4 h-4"})})]})]},s.userId))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Members"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:i.members?.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("img",{src:s.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${s.name}`,alt:s.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-white",children:s.role==="creator"?"ðŸ‘‘ Creator":s.role==="admin"?"â­ Admin":"Member"})]}),t&&s.role!=="creator"&&s.userId!==a?.id&&e.jsx("button",{onClick:async()=>{if(window.confirm(`Remove ${s.name} from the group?`))try{const l=await er(i.id,s.userId);f(l);const h=await U();j(h),y.success(`${s.name} has been removed from the group`)}catch(l){y.error(l?.message||"Failed to remove member")}},className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Remove member",children:e.jsx(_e,{className:"w-4 h-4"})})]},s.userId))})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5"}),"Group Discussion"]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mb-4 h-64 overflow-y-auto",children:ue.length===0?e.jsx("p",{className:"text-gray-500 text-center text-sm py-8",children:"No messages yet. Start the conversation!"}):e.jsx("div",{className:"space-y-3",children:ue.map((s,l)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{src:s.avatar,alt:s.name,className:"w-8 h-8 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:s.name}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.timestamp).toLocaleTimeString()})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-white",children:s.message})]})]},l))})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:$,onChange:s=>ae(s.target.value),onKeyPress:async s=>{if(s.key==="Enter"&&$.trim())try{const l=d?.displayName||d?.name||a?.name||"User",h=d?.avatar||d?.avatrUrl||"",g=await u(`/study-groups/${i.id}/messages`,{method:"POST",body:JSON.stringify({message:$.trim(),senderName:l,senderAvatar:h})});g.message&&B(M=>[...M,g.message]),ae("")}catch(l){console.error("Error sending group message:",l),y.error("Failed to send message")}},placeholder:"Type a message...",className:"flex-1 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"}),e.jsx("button",{onClick:async()=>{if($.trim())try{const s=d?.displayName||d?.name||a?.name||"User",l=d?.avatar||d?.avatrUrl||"",h=await u(`/study-groups/${i.id}/messages`,{method:"POST",body:JSON.stringify({message:$.trim(),senderName:s,senderAvatar:l})});h.message&&B(g=>[...g,h.message]),ae("")}catch(s){console.error("Error sending group message:",s),y.error("Failed to send message")}},className:"px-4 py-2 text-white rounded-lg transition-all shadow-md hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:e.jsx(ve,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Resources & Schedule"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:s=>{s.currentTarget.style.borderColor="#00ADB5",s.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",s.currentTarget.style.color="#00ADB5"},onMouseLeave:s=>{s.currentTarget.style.borderColor="",s.currentTarget.style.backgroundColor="",s.currentTarget.style.color=""},children:[e.jsx(W,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Share Resource"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:s=>{s.currentTarget.style.borderColor="#00ADB5",s.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",s.currentTarget.style.color="#00ADB5"},onMouseLeave:s=>{s.currentTarget.style.borderColor="",s.currentTarget.style.backgroundColor="",s.currentTarget.style.color=""},children:[e.jsx(W,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Schedule Session"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors text-gray-600 dark:text-white",onMouseEnter:s=>{s.currentTarget.style.borderColor="#00ADB5",s.currentTarget.style.backgroundColor="rgba(0, 173, 181, 0.1)",s.currentTarget.style.color="#00ADB5"},onMouseLeave:s=>{s.currentTarget.style.borderColor="",s.currentTarget.style.backgroundColor="",s.currentTarget.style.color=""},children:[e.jsx(W,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-semibold",children:"Set Goal"})]})]})]})]}):e.jsx("div",{className:"text-center py-8 border-t border-gray-200 dark:border-gray-700",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:e.jsx(ne,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-2 font-semibold",children:"Request Pending"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Waiting for the group owner to approve your request"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 dark:text-white mb-4",children:"Request to join this group and get approval from the owner"}),e.jsx("button",{onClick:async()=>{if(a)try{const s=d?.displayName||a.name||"User",l=d?.avatrUrl||"",h=await Ve(i.id,s,l);if(h.group){f(h.group);const g=await U();j(g)}y.success(h.message||"Join request sent! Waiting for approval.")}catch(s){console.error("Error requesting to join group:",s),y.error(s?.message||"Failed to send join request. Please try again.")}},disabled:i.members?.length>=i.maxMembers,className:"px-6 py-2 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Request to Join"})]})})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Study Groups"}),e.jsxs("div",{className:"relative flex-1 max-w-md mx-0 sm:mx-4",children:[e.jsx(fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:N,onChange:r=>he(r.target.value),placeholder:"Search groups...",className:"w-full pl-10 pr-10 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"}),N&&e.jsx("button",{onClick:()=>he(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(je,{className:"w-4 h-4"})})]}),e.jsxs("button",{onClick:()=>J(!0),className:"px-4 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90 flex items-center gap-2 whitespace-nowrap",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:[e.jsx(W,{className:"w-5 h-5"}),"Create Group"]})]}),Ie&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Create Study Group"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Group Name"}),e.jsx("input",{type:"text",value:b.name,onChange:r=>R({...b,name:r.target.value}),placeholder:"DSA Interview Prep",className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:r=>R({...b,description:r.target.value}),placeholder:"Daily DSA practice and mock interviews",rows:3,className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Topic"}),e.jsxs("select",{value:b.topic,onChange:r=>R({...b,topic:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Topic"}),e.jsx("option",{value:"DSA",children:"Data Structures & Algorithms"}),e.jsx("option",{value:"Web Dev",children:"Web Development"}),e.jsx("option",{value:"Mobile",children:"Mobile Development"}),e.jsx("option",{value:"AI/ML",children:"AI & Machine Learning"}),e.jsx("option",{value:"System Design",children:"System Design"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Level"}),e.jsxs("select",{value:b.level,onChange:r=>R({...b,level:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"Beginner",children:"Beginner"}),e.jsx("option",{value:"Intermediate",children:"Intermediate"}),e.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Max Members"}),e.jsx("input",{type:"number",value:b.maxMembers,onChange:r=>R({...b,maxMembers:parseInt(r.target.value)}),min:"2",max:"50",className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:async()=>{if(b.name&&b.topic&&a)try{await Ke({...b,creatorId:a.id,creatorName:d?.displayName||a.name||"User",creatorAvatar:d?.avatrUrl||"",members:[{userId:a.id,name:d?.displayName||a.name||"User",avatar:d?.avatrUrl||"",joinedAt:new Date,role:"creator"}]});const r=await U();j(r),J(!1),R({name:"",description:"",topic:"",level:"Beginner",maxMembers:10})}catch(r){console.error("Error creating group:",r),alert("Failed to create group. Please try again.")}},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Create Group"}),e.jsx("button",{onClick:()=>J(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})}),(()=>{const r=Ae.filter(t=>t.name?.toLowerCase().includes(N.toLowerCase())||t.topic?.toLowerCase().includes(N.toLowerCase())||t.description?.toLowerCase().includes(N.toLowerCase()));return r.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-12 border border-gray-200 dark:border-gray-700 text-center",children:[e.jsx(be,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:N?"No Groups Found":"No Study Groups Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-white mb-6",children:N?`No groups matching "${N}"`:"Create or join a study group to learn together"}),!N&&e.jsx("button",{onClick:()=>J(!0),className:"px-6 py-2 text-white rounded-lg transition-all shadow-lg hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"Create First Group"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:r.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-1",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-white",children:["by ",t.creatorName]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t.level==="Beginner"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":t.level==="Intermediate"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:t.level}),t.creatorId===a?.id&&e.jsx("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this study group?"))try{await Qe(t.id);const o=await U();j(o)}catch(o){console.error("Error deleting group:",o),alert("Failed to delete group. Please try again.")}},className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete group",children:e.jsx(He,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-white mb-4 line-clamp-2",children:t.description}),e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:t.topic})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-700 dark:text-white mb-2",children:["Members (",t.members?.length||0,")"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[t.members?.slice(0,5).map((o,s)=>e.jsx("img",{src:o.avatar||`https://api.dicebear.com/9.x/adventurer/svg?seed=${o.name}`,alt:o.name,className:"w-8 h-8 rounded-full border-2 border-white dark:border-gray-800",title:o.name,style:{marginLeft:s>0?"-8px":"0"}},o.userId)),(t.members?.length||0)>5&&e.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-600 dark:text-white",style:{marginLeft:"-8px"},children:["+",(t.members?.length||0)-5]}),(!t.members||t.members.length===0)&&e.jsx("p",{className:"text-xs text-gray-500",children:"No members yet"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-white mb-4",children:[e.jsxs("span",{children:[t.members?.length||0," / ",t.maxMembers," members"]}),e.jsxs("span",{className:"text-gray-400",children:["Created ",de(t.createdAt)]})]}),e.jsx("button",{onClick:()=>f(t),className:"w-full px-4 py-2 text-white rounded-lg transition-all text-sm font-semibold shadow-md hover:opacity-90",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)"},children:"View Details"})]},t.id))})})()]})},qe=()=>e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Skill Endorsements"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5",style:{color:"#00ADB5"}}),"Endorsements Received (",D.filter(r=>r.recipientId===a?.id).length,")"]}),D.filter(r=>r.recipientId===a?.id).length===0?e.jsx("p",{className:"text-gray-500 dark:text-white text-center py-8",children:"No endorsements yet. Keep collaborating!"}):e.jsx("div",{className:"space-y-4",children:D.filter(r=>r.recipientId===a?.id).map(r=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("img",{src:r.endorserAvatar,alt:r.endorserName,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:r.endorserName}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:r.skill})]}),r.message&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-white",children:r.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:de(r.timestamp)})]})]},r.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-yellow-500"}),"Endorsements Given (",D.filter(r=>r.endorserId===a?.id).length,")"]}),D.filter(r=>r.endorserId===a?.id).length===0?e.jsx("p",{className:"text-gray-500 dark:text-white text-center py-8",children:"You haven't endorsed anyone yet. Go to the directory to endorse developers!"}):e.jsx("div",{className:"space-y-4",children:D.filter(r=>r.endorserId===a?.id).map(r=>e.jsx("div",{className:"flex items-start gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:["To: ",r.recipientName]}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"rgba(0, 173, 181, 0.15)",color:"#00ADB5"},children:r.skill})]}),r.message&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-white",children:r.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:de(r.timestamp)})]})},r.id))})]})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(k.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2",style:{background:"linear-gradient(135deg, #00ADB5 0%, #00d4ff 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Developer Connect ðŸ¤"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-white",children:"Find teammates, build together, grow your network"})]})})}),e.jsx("div",{className:"flex gap-1 sm:gap-2 mb-6 sm:mb-8 border-b border-gray-200 dark:border-gray-700 overflow-x-auto scrollbar-hide",children:[{id:"directory",label:"Developer Directory",icon:le},{id:"messages",label:"Messages",icon:Pe},{id:"groups",label:"Study Groups",icon:be},{id:"endorsements",label:"Endorsements",icon:H}].map(r=>{const t=r.icon;return e.jsxs("button",{onClick:()=>S(r.id),className:`px-2 sm:px-4 py-2 sm:py-3 font-semibold flex items-center gap-1 sm:gap-2 border-b-2 transition-colors whitespace-nowrap text-xs sm:text-base ${x===r.id?"border-transparent":"border-transparent text-gray-600 dark:text-white hover:text-gray-900 dark:hover:text-white"}`,style:x===r.id?{borderBottomColor:"#00ADB5",color:"#00ADB5"}:{},children:[e.jsx(t,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:r.label}),e.jsx("span",{className:"sm:hidden",children:r.id==="directory"?"Directory":r.id==="messages"?"Messages":r.id==="groups"?"Groups":"Endorsements"})]},r.id)})}),x==="directory"&&Be(),x==="messages"&&Le(),x==="groups"&&$e(),x==="endorsements"&&qe()]}),Ee&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white mb-4",children:["Endorse ",G.name]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Select Skill"}),e.jsxs("select",{value:v.skill,onChange:r=>Y({...v,skill:r.target.value}),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Choose a skill"}),G.skills.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-white mb-1",children:"Message (Optional)"}),e.jsx("textarea",{value:v.message,onChange:r=>Y({...v,message:r.target.value}),placeholder:"Great team player with excellent React skills...",rows:3,className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:async()=>{if(!v.skill){y.error("Please select a skill to endorse");return}if(!a){y.error("You must be logged in to endorse");return}try{const r=await u(`/developers/${G.userId}/endorse`,{method:"POST",body:JSON.stringify({skill:v.skill,message:v.message,endorserName:d?.displayName||a.name||"User",endorserAvatar:d?.avatrUrl||"https://api.dicebear.com/9.x/adventurer/svg?seed=User",recipientName:G.name})});r.endorsement&&re(t=>[...t,r.endorsement]),se(!1),te(null),Y({skill:"",message:""}),y.success(`âœ… Successfully endorsed ${G.name} for ${v.skill}!`,{duration:4e3,position:"top-center"})}catch(r){console.error("Error saving endorsement:",r);const t=r?.message||"Failed to save endorsement. Please try again.";y.error(t)}},disabled:!v.skill,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Send Endorsement"}),e.jsx("button",{onClick:()=>{se(!1),te(null),Y({skill:"",message:""})},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})})]})}export{ir as default};
