import{H as W,l as Y,r as m,j as e,a7 as Z,d as o,J as z,N as l,S as T,B as J,U as K,Z as X,V as ee,x as D,E as se,z as ae,e as te}from"./index-Dt41-Cvb.js";import{a as re,P as ie,e as le,m as ne,b as de}from"./roadmapService-UG9op_Ur.js";import{C as L}from"./clock-B_hAvV_z.js";import{C as R}from"./circle-question-mark-BmUgNuZD.js";import{C as oe}from"./chevron-down-C3ctp4yY.js";import{C as I}from"./chevron-right-BfOnsba4.js";import{P as _}from"./play-vOgjdOYA.js";import{T as ce}from"./trending-up-BzpWWDL-.js";import{B as $,G as me}from"./graduation-cap-B659dhem.js";function Ne(){const{slug:c}=W(),{user:F}=Y(),g=!!F,[h,q]=m.useState(null),[O,v]=m.useState(!0),[M,C]=m.useState(["beginner"]),[P,B]=m.useState(!1),[Q,E]=m.useState(null),y=m.useCallback(async()=>{try{v(!0);const s=await re(c);if(q(s),s.userProgress?.completedTopicIds){const r=new Set(s.userProgress.completedTopicIds),t=[];Object.entries(s.topicsByPhase).forEach(([n,p])=>{p.some(j=>!r.has(j._id))&&t.length<2&&t.push(n)}),t.length>0&&C(t)}}catch(s){console.error("Error loading roadmap:",s)}finally{v(!1)}},[c]);m.useEffect(()=>{c&&y()},[c,y]);const H=async()=>{if(!(!g||!h))try{B(!0),await le(h.roadmap._id),await y()}catch(s){console.error("Error enrolling:",s)}finally{B(!1)}},U=async(s,r)=>{if(g)try{E(s._id),r?await ne(s._id):await de(s._id),await y()}catch(t){console.error("Error toggling topic:",t)}finally{E(null)}},V=s=>{C(r=>r.includes(s)?r.filter(t=>t!==s):[...r,s])};if(O)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-8"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2 space-y-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded-xl"},s))}),e.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded-xl"})]})]})})});if(!h)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Z,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Roadmap not found"}),e.jsx(o,{to:"/dashboard/roadmaps",className:"text-[#00ADB5] hover:underline",children:"Browse all roadmaps"})]})});const{roadmap:a,topicsByPhase:x,careerInfo:f,userProgress:d}=h,S=new Set(d?.completedTopicIds||[]),N=a.totalTopics,A=d?.completedTopicIds?.length||0,w=N>0?Math.round(A/N*100):0,G=[{key:"beginner",topics:x.beginner},{key:"intermediate",topics:x.intermediate},{key:"advanced",topics:x.advanced},{key:"interview",topics:x.interview}].filter(s=>s.topics.length>0);return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs(o,{to:"/dashboard/roadmaps",className:"inline-flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-[#00ADB5] mb-6 transition-colors",children:[e.jsx(z,{className:"w-4 h-4"}),"Back to Roadmaps"]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center text-3xl flex-shrink-0",style:{background:`${a.color}20`},children:a.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:a.title}),a.isFeatured&&e.jsxs("span",{className:"px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 text-xs font-medium rounded-full flex items-center gap-1",children:[e.jsx(T,{className:"w-3 h-3 fill-current"}),"Featured"]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.description})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(J,{className:"w-4 h-4"}),a.totalTopics," topics"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(L,{className:"w-4 h-4"}),a.estimatedWeeks," weeks"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:"w-4 h-4"}),a.enrolledCount," learners"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(R,{className:"w-4 h-4"}),a.totalQuestions," questions"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(T,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),a.rating.toFixed(1)," (",a.reviewCount," reviews)"]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[d?.isEnrolled&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Your Progress"}),e.jsxs("span",{className:"text-sm text-[#00ADB5] font-medium",children:[A," / ",N," topics (",w,"%)"]})]}),e.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${w}%`},transition:{duration:.5,ease:"easeOut"},className:"h-full bg-gradient-to-r from-[#00ADB5] to-purple-500 rounded-full"})}),d.currentStreak&&d.currentStreak>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(X,{className:"w-4 h-4 text-orange-500"}),e.jsxs("span",{children:[d.currentStreak," day streak!"]})]})]}),G.map((s,r)=>{const t=ie[s.key],n=M.includes(s.key),p=s.topics.filter(i=>S.has(i._id)).length,u=s.topics.length,j=u>0?Math.round(p/u*100):0;return e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("button",{onClick:()=>V(s.key),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-xl",style:{background:`${t.color}20`},children:t.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.label}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[p," / ",u," topics"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[d?.isEnrolled&&e.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${j}%`,background:t.color}})}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-10",children:[j,"%"]})]}),e.jsx(oe,{className:`w-5 h-5 text-gray-400 transition-transform ${n?"rotate-180":""}`})]})]}),e.jsx(ee,{children:n&&e.jsx(l.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"border-t border-gray-100 dark:border-gray-700",children:e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:s.topics.map(i=>{const b=S.has(i._id),k=Q===i._id;return e.jsxs("div",{className:"p-4 flex items-start gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[g&&e.jsx("button",{onClick:()=>U(i,b),disabled:k,className:`mt-0.5 w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-all ${b?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-[#00ADB5]"} ${k?"opacity-50":""}`,children:k?e.jsx("div",{className:"w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin"}):b?e.jsx(D,{className:"w-3.5 h-3.5"}):null}),e.jsxs(o,{to:`/dashboard/roadmaps/topic/${i._id}`,className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:i.icon}),e.jsx("h4",{className:`font-medium transition-colors ${b?"text-gray-400 dark:text-gray-500 line-through":"text-gray-900 dark:text-white hover:text-[#00ADB5]"}`,children:i.title})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-1",children:i.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"}),i.estimatedHours,"h"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"w-3 h-3"}),i.resources?.length||0," resources"]})]})]}),e.jsx(I,{className:"w-5 h-5 text-gray-300 dark:text-gray-600 flex-shrink-0"})]},i._id)})})})})]},s.key)}),a.longDescription&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"About This Roadmap"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:a.longDescription})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 sticky top-4",children:[g?d?.isEnrolled?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Continue Learning"}),e.jsxs("span",{className:"text-[#00ADB5] font-medium",children:[w,"%"]})]}),e.jsxs(o,{to:"/dashboard/learning-dashboard",className:"w-full flex items-center justify-center gap-2 bg-[#00ADB5] text-white py-3 rounded-lg font-medium hover:bg-[#00969d] transition-colors",children:[e.jsx(ce,{className:"w-4 h-4"}),"View Dashboard"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Ready to Learn?"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Enroll to start tracking your progress on this roadmap."}),e.jsx("button",{onClick:H,disabled:P,className:"w-full flex items-center justify-center gap-2 bg-[#00ADB5] text-white py-3 rounded-lg font-medium hover:bg-[#00969d] transition-colors disabled:opacity-50",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Enrolling..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4"}),"Start Learning"]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Start Learning"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Sign in to track your progress and mark topics as complete."}),e.jsxs(o,{to:"/login",className:"w-full flex items-center justify-center gap-2 bg-[#00ADB5] text-white py-3 rounded-lg font-medium hover:bg-[#00969d] transition-colors",children:[e.jsx(_,{className:"w-4 h-4"}),"Sign in to Start"]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100 dark:border-gray-700 space-y-3",children:[e.jsxs(o,{to:`/dashboard/roadmaps/${c}/interview`,className:"flex items-center gap-3 text-gray-600 dark:text-gray-400 hover:text-[#00ADB5] transition-colors",children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{children:"Interview Questions"}),e.jsx("span",{className:"ml-auto text-sm bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded",children:a.totalQuestions})]}),e.jsxs(o,{to:`/dashboard/roadmaps/${c}/careers`,className:"flex items-center gap-3 text-gray-600 dark:text-gray-400 hover:text-[#00ADB5] transition-colors",children:[e.jsx($,{className:"w-5 h-5"}),e.jsx("span",{children:"Career Paths"}),e.jsx("span",{className:"ml-auto text-sm bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded",children:f.length})]})]})]}),a.prerequisites.length>0&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5 text-purple-500"}),"Prerequisites"]}),e.jsx("ul",{className:"space-y-2",children:a.prerequisites.map((s,r)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),s]},r))})]}),a.outcomes.length>0&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-green-500"}),"What You'll Learn"]}),e.jsx("ul",{className:"space-y-2",children:a.outcomes.map((s,r)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(D,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),s]},r))})]}),f.length>0&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5 text-blue-500"}),"Career Opportunities"]}),e.jsx("div",{className:"space-y-3",children:f.slice(0,3).map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.jobTitle}),e.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:["₹",(s.salaryRange.min/1e5).toFixed(0),"-",(s.salaryRange.max/1e5).toFixed(0)," LPA"]})]},s._id))}),e.jsxs(o,{to:`/dashboard/roadmaps/${c}/careers`,className:"mt-4 flex items-center justify-center gap-2 text-sm text-[#00ADB5] hover:underline",children:["View all careers",e.jsx(I,{className:"w-4 h-4"})]})]}),(()=>{const s=[];Object.values(x).forEach(t=>{t.forEach(n=>{n.relatedProjects&&s.push(...n.relatedProjects)})});const r=[...new Set(s)].slice(0,6);return r.length===0?null:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-purple-500"}),"Recommended Projects"]}),e.jsx("ul",{className:"space-y-2",children:r.map((t,n)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-500 mt-1",children:"•"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t})]},n))})]})})()]})]})]})})}export{Ne as default};
