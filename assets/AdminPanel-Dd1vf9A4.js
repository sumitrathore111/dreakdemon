import{i as Fe,k as Me,u as _e,r,j as e,f as Be,L as F,F as G,U as f,H as V,h as H,n as Re,g as Te,p as q,v as Ue,C as h,E as ie}from"./index-fc28AEb_.js";import{g as $e,a as Oe,r as ze}from"./marketplaceServiceNew-DLQfvAPQ.js";import{S as Ge}from"./shield-D-9XxL1Y.js";import{U as Q}from"./user-DYglgEwX.js";import{E as de}from"./eye-DDn_K82r.js";import{T as M}from"./trash-2-CfKVPVbE.js";import{I as Ve}from"./image-B7HoPivO.js";import{G as ce}from"./github-B25QaKie.js";import{P as _}from"./play-BHu29otI.js";import{C as B}from"./circle-x-lw643Gl1.js";import{D as He}from"./dollar-sign-BrKjYBhd.js";function as(){const{user:o}=Fe(),{fetchAllIdeas:W,updateIdeaStatus:X,deleteProject:oe,fetchAllUsers:xe,fetchAllProjectMembers:ge,getPlatformStats:me}=Me(),he=_e(),[d,b]=r.useState("overview"),[p,N]=r.useState([]),[Y,J]=r.useState([]),[y,be]=r.useState(""),[v,pe]=r.useState("all"),[l,w]=r.useState(null),[x,k]=r.useState(""),[c,ye]=r.useState({totalUsers:0,totalIdeas:0,pendingIdeas:0,approvedIdeas:0,rejectedIdeas:0,activeProjects:0,totalContributors:0}),[C,je]=r.useState([]),[R,K]=r.useState([]),[u,Z]=r.useState(!0),[g,ee]=r.useState(null),[ue,T]=r.useState(!1),[m,U]=r.useState(null),[A,P]=r.useState([]),[j,fe]=r.useState([]),[n,Ne]=r.useState("pending_verification"),[a,S]=r.useState(null),[$,O]=r.useState(""),[D,I]=r.useState(null);console.log("AdminPanel rendered",{user:o,loading:u}),r.useEffect(()=>{if(!o){he("/login");return}ve()},[o]);const ve=async()=>{Z(!0);try{await Promise.all([we().catch(s=>console.error("Load ideas error:",s)),ke().catch(s=>console.error("Load stats error:",s)),Ce().catch(s=>console.error("Load users error:",s)),Ae().catch(s=>console.error("Load projects error:",s)),se().catch(s=>console.error("Load marketplace error:",s))])}catch(s){console.error("Error loading data:",s),alert("Error loading admin panel data. Check console for details.")}finally{Z(!1)}},se=async()=>{try{console.log("Loading all marketplace projects...");const s=await $e();console.log("All marketplace projects loaded:",s.length),fe(s),te(s,n)}catch(s){console.error("Error loading marketplace projects:",s)}},te=(s,t)=>{P(t==="all"?s:s.filter(i=>i.status===t))},L=s=>{Ne(s),te(j,s)},we=async()=>{try{const s=await W();N(s),J(s)}catch(s){console.error("Error loading ideas:",s)}},ke=async()=>{try{const s=await me();ye(s)}catch(s){console.error("Error loading stats:",s)}},Ce=async()=>{try{const s=await xe();je(s)}catch(s){console.error("Error loading users:",s)}},Ae=async()=>{try{const t=(await W()).filter(E=>E.status==="approved"),i=await ge(),Le=t.map(E=>{const ne=i.filter(Ee=>Ee.projectId===E.id);return{...E,memberCount:ne.length+1,members:ne}});K(Le)}catch(s){console.error("Error loading projects:",s)}};r.useEffect(()=>{let s=p;v!=="all"&&(s=s.filter(t=>t.status===v)),y&&(s=s.filter(t=>t.title.toLowerCase().includes(y.toLowerCase())||t.userName.toLowerCase().includes(y.toLowerCase())||t.description.toLowerCase().includes(y.toLowerCase()))),J(s)},[p,v,y]);const Pe=async s=>{if(!x.trim()){alert("Please provide feedback before approving");return}try{await X(s,"approved",x,o?.id),N(p.map(t=>t.id===s?{...t,status:"approved",reviewedAt:new Date().toISOString(),reviewedBy:o?.email||"Admin",feedback:x}:t)),alert(`Idea approved! Email notification sent to ${l?.userEmail}`),w(null),k("")}catch(t){console.error("Error approving idea:",t),alert("Failed to approve idea. Please try again.")}},Se=async s=>{if(!x.trim()){alert("Please provide feedback before rejecting");return}try{await X(s,"rejected",x,o?.id),N(p.map(t=>t.id===s?{...t,status:"rejected",reviewedAt:new Date().toISOString(),reviewedBy:o?.email||"Admin",feedback:x}:t)),alert(`Idea rejected. Email notification sent to ${l?.userEmail}`),w(null),k("")}catch(t){console.error("Error rejecting idea:",t),alert("Failed to reject idea. Please try again.")}},De=async()=>{if(m)try{ee(m.id),await oe(m.id),K(R.filter(s=>s.id!==m.id)),N(p.filter(s=>s.id!==m.id)),alert(`Project "${m.title}" has been deleted successfully`),T(!1),U(null)}catch(s){console.error("Error deleting project:",s),alert("Failed to delete project. Please try again.")}finally{ee(null)}},ae=s=>{U(s),T(!0)},z=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-700";case"pending_verification":return"bg-yellow-100 text-yellow-700";case"approved":return"bg-green-100 text-green-700";case"published":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},re=s=>{switch(s){case"pending":return e.jsx(H,{className:"w-4 h-4"});case"pending_verification":return e.jsx(H,{className:"w-4 h-4"});case"approved":return e.jsx(h,{className:"w-4 h-4"});case"published":return e.jsx(h,{className:"w-4 h-4"});case"rejected":return e.jsx(B,{className:"w-4 h-4"});default:return null}},le=async s=>{try{I(s),await Oe(s),P(t=>t.filter(i=>i.id!==s)),alert("Marketplace project approved and published successfully!"),S(null)}catch(t){console.error("Error approving marketplace project:",t),alert("Failed to approve project. Please try again.")}finally{I(null)}},Ie=async s=>{if(!$.trim()){alert("Please provide a reason for rejection");return}try{I(s),await ze(s,$),P(t=>t.filter(i=>i.id!==s)),alert("Marketplace project rejected. The seller has been notified."),S(null),O("")}catch(t){console.error("Error rejecting marketplace project:",t),alert("Failed to reject project. Please try again.")}finally{I(null)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 dark:from-gray-900 dark:to-blue-900/30 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Ge,{className:"w-10 h-10 text-[#00ADB5]"}),e.jsx("h1",{className:"text-4xl font-black text-gray-900 dark:text-white",children:"Admin Panel"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage ideas, projects, and users"})]}),e.jsxs("div",{className:"flex gap-2 bg-white dark:bg-gray-800 rounded-xl p-2 shadow-lg mb-8",children:[e.jsx("button",{onClick:()=>b("overview"),className:`flex-1 py-3 px-6 rounded-lg font-semibold transition-all ${d==="overview"?"bg-gradient-to-r from-[#00ADB5] to-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5"}),"Overview"]})}),e.jsx("button",{onClick:()=>b("ideas"),className:`flex-1 py-3 px-6 rounded-lg font-semibold transition-all ${d==="ideas"?"bg-gradient-to-r from-[#00ADB5] to-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Ideas",c.pendingIdeas>0&&e.jsx("span",{className:"bg-white text-[#00ADB5] px-2 py-1 rounded-full text-xs font-bold",children:c.pendingIdeas})]})}),e.jsx("button",{onClick:()=>b("projects"),className:`flex-1 py-3 px-6 rounded-lg font-semibold transition-all ${d==="projects"?"bg-gradient-to-r from-[#00ADB5] to-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),"Projects"]})}),e.jsx("button",{onClick:()=>b("users"),className:`flex-1 py-3 px-6 rounded-lg font-semibold transition-all ${d==="users"?"bg-gradient-to-r from-[#00ADB5] to-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(f,{className:"w-5 h-5"}),"Users"]})}),e.jsx("button",{onClick:()=>b("marketplace"),className:`flex-1 py-3 px-6 rounded-lg font-semibold transition-all ${d==="marketplace"?"bg-gradient-to-r from-[#00ADB5] to-cyan-600 text-white":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),"Marketplace",A.length>0&&e.jsx("span",{className:"bg-white text-[#00ADB5] px-2 py-1 rounded-full text-xs font-bold",children:A.length})]})})]}),d==="overview"&&e.jsx("div",{children:u?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-[#00ADB5] border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading dashboard..."})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(f,{className:"w-12 h-12 text-blue-500"}),e.jsx("span",{className:"text-3xl font-black text-gray-900 dark:text-white",children:c.totalUsers})]}),e.jsx("h3",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Users"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(F,{className:"w-12 h-12 text-yellow-500"}),e.jsx("span",{className:"text-3xl font-black text-gray-900 dark:text-white",children:c.totalIdeas})]}),e.jsx("h3",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Total Ideas"}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-500",children:[c.pendingIdeas," pending â€¢ ",c.approvedIdeas," approved"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(G,{className:"w-12 h-12 text-[#00ADB5]"}),e.jsx("span",{className:"text-3xl font-black text-gray-900 dark:text-white",children:c.activeProjects})]}),e.jsx("h3",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Active Projects"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(f,{className:"w-12 h-12 text-green-500"}),e.jsx("span",{className:"text-3xl font-black text-gray-900 dark:text-white",children:c.totalContributors})]}),e.jsx("h3",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Contributors"})]}),c.pendingIdeas>0&&e.jsx("div",{className:"lg:col-span-4 bg-yellow-50 dark:bg-yellow-900/30 border-2 border-yellow-200 dark:border-yellow-700 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(H,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-bold text-yellow-900 dark:text-yellow-100 mb-1",children:[c.pendingIdeas," Ideas Awaiting Review"]}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Review pending project ideas to help users get started"})]}),e.jsx("button",{onClick:()=>b("ideas"),className:"px-6 py-3 bg-yellow-600 text-white font-bold rounded-xl hover:bg-yellow-700 transition-colors",children:"Review Now"})]})}),e.jsxs("div",{className:"lg:col-span-4 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:p.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["by ",s.userName," â€¢ ",new Date(s.submittedAt).toLocaleDateString()]})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${z(s.status)}`,children:s.status.toUpperCase()})]},s.id))})]})]})}),d==="ideas"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Re,{className:"w-5 h-5 absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search ideas by title, user, or description...",value:y,onChange:s=>be(s.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl focus:border-[#00ADB5] focus:outline-none"})]}),e.jsxs("select",{value:v,onChange:s=>pe(s.target.value),className:"px-6 py-3 border-2 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl focus:border-[#00ADB5] focus:outline-none font-semibold",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})}),e.jsx("div",{className:"space-y-4",children:Y.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center",children:[e.jsx(F,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No ideas found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search or filter"})]}):Y.map(s=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-xl transition-all",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white",children:s.title}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 ${z(s.status)}`,children:[re(s.status),s.status.toUpperCase()]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{children:s.userName})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{children:s.userEmail})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.submittedAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"mt-3 flex gap-3",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 text-xs font-semibold rounded-lg",children:s.category}),e.jsxs("span",{className:"px-3 py-1 bg-purple-50 text-purple-700 text-xs font-semibold rounded-lg",children:["Timeline: ",s.expectedTimeline]})]}),s.feedback&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-xs font-semibold text-gray-600",children:"Admin Feedback:"})]}),e.jsx("p",{className:"text-sm text-gray-700",children:s.feedback})]})]}),e.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[s.status==="pending"&&e.jsxs("button",{onClick:()=>w(s),className:"px-6 py-3 bg-[#00ADB5] text-white font-semibold rounded-xl hover:bg-cyan-600 transition-colors flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Review"]}),e.jsx("button",{onClick:()=>ae(s),disabled:g===s.id,className:"px-6 py-3 bg-red-500 text-white font-semibold rounded-xl hover:bg-red-600 transition-colors flex items-center gap-2 disabled:opacity-50",children:g===s.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4"}),"Delete"]})})]})]})},s.id))})]}),d==="projects"&&e.jsx("div",{children:u?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-[#00ADB5] border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading projects..."})]}):R.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center",children:[e.jsx(G,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"No Active Projects"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Approved project ideas will appear here"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:R.map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-xl transition-all",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{children:s.userName})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.memberCount," members"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.submittedAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-50 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs font-semibold rounded-lg",children:s.category}),e.jsxs("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 text-xs font-semibold rounded-lg flex items-center gap-1",children:[e.jsx(h,{className:"w-3 h-3"}),"Active"]})]})]})}),s.members.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Contributors:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.members.slice(0,5).map(t=>e.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 text-xs rounded",children:t.userName},t.id)),s.members.length>5&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",s.members.length-5," more"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>ae(s),disabled:g===s.id,className:"w-full px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:g===s.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4"}),"Delete Project"]})})})]},s.id))})}),d==="users"&&e.jsx("div",{children:u?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-[#00ADB5] border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading users..."})]}):C.length===0?e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[e.jsx(f,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Users Found"}),e.jsx("p",{className:"text-gray-600",children:"Registered users will appear here"})]}):e.jsxs("div",{children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Total Users: ",C.length]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 text-sm font-semibold rounded-lg",children:["Active: ",C.filter(s=>s.last_active_date).length]})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(s=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-5 hover:shadow-xl transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#00ADB5] to-cyan-600 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-bold text-lg",children:s.name?.charAt(0)?.toUpperCase()||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 truncate",children:s.name||"No Name"}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.email||"No Email"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[s.institute&&e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["ðŸŽ“ ",s.institute]}),s.yearOfStudy&&e.jsxs("p",{className:"text-xs text-gray-500",children:["ðŸ“š Year ",s.yearOfStudy]}),s.marathon_score!==void 0&&s.marathon_score>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:["ðŸ† ",s.marathon_score," points"]}),s.streakCount&&s.streakCount>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:["ðŸ”¥ ",s.streakCount," day streak"]})]}),s.skills&&s.skills.length>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[s.skills.slice(0,3).map((t,i)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-700 text-xs rounded",children:t},i)),s.skills.length>3&&e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:["+",s.skills.length-3]})]}),s.last_active_date&&e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Last active: ",new Date(s.last_active_date.toDate()).toLocaleDateString()]})]})]})},s.id))})]})}),d==="marketplace"&&e.jsxs("div",{children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Filter by Status:"}),e.jsxs("button",{onClick:()=>L("all"),className:`px-4 py-2 rounded-lg font-semibold transition-all ${n==="all"?"bg-[#00ADB5] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["All (",j.length,")"]}),e.jsxs("button",{onClick:()=>L("pending_verification"),className:`px-4 py-2 rounded-lg font-semibold transition-all ${n==="pending_verification"?"bg-yellow-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["Pending (",j.filter(s=>s.status==="pending_verification").length,")"]}),e.jsxs("button",{onClick:()=>L("published"),className:`px-4 py-2 rounded-lg font-semibold transition-all ${n==="published"?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["Approved (",j.filter(s=>s.status==="published").length,")"]}),e.jsxs("button",{onClick:()=>L("rejected"),className:`px-4 py-2 rounded-lg font-semibold transition-all ${n==="rejected"?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["Rejected (",j.filter(s=>s.status==="rejected").length,")"]}),e.jsx("button",{onClick:()=>se(),className:"ml-auto px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-semibold rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Refresh"})]})}),u?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-[#00ADB5] border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading marketplace listings..."})]}):A.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-12 text-center",children:[e.jsx(V,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:["No ",n==="all"?"":n==="pending_verification"?"Pending":n==="published"?"Approved":"Rejected"," Listings"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:n==="pending_verification"?"All marketplace listings have been reviewed. New listings will appear here when users submit them for verification.":`No ${n==="published"?"approved":n==="rejected"?"rejected":""} listings found.`})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border-2 border-yellow-200 dark:border-yellow-700 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(V,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold mb-1 text-yellow-900 dark:text-yellow-100",children:[j.filter(s=>s.status==="pending_verification").length," Pending Verification"]}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Review and verify marketplace projects before they go live"})]})]})}),A.map(s=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-xl transition-all",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-48 h-32 flex-shrink-0 rounded-xl overflow-hidden bg-gray-100 dark:bg-gray-700",children:s.images&&s.images.length>0?e.jsx("img",{src:s.images[0],alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Ve,{className:"w-12 h-12 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white",children:s.title}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 ${z(s.status)}`,children:[re(s.status),s.status==="pending_verification"?"PENDING":s.status==="published"?"APPROVED":s.status.toUpperCase()]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm line-clamp-2",children:s.description})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-2xl font-black text-[#00ADB5]",children:["$",s.price]})})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{children:s.sellerName||"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.links?.github&&e.jsxs("a",{href:s.links.github,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-gray-900 text-white text-xs font-semibold rounded-lg flex items-center gap-1 hover:bg-gray-700 transition-colors",children:[e.jsx(ce,{className:"w-3 h-3"}),"GitHub"]}),s.links?.liveDemo&&e.jsxs("a",{href:s.links.liveDemo,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-green-500 text-white text-xs font-semibold rounded-lg flex items-center gap-1 hover:bg-green-600 transition-colors",children:[e.jsx(_,{className:"w-3 h-3"}),"Live Demo"]}),s.links?.documentation&&e.jsxs("a",{href:s.links.documentation,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-blue-500 text-white text-xs font-semibold rounded-lg flex items-center gap-1 hover:bg-blue-600 transition-colors",children:[e.jsx(ie,{className:"w-3 h-3"}),"Docs"]}),s.links?.video&&e.jsxs("a",{href:s.links.video,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-red-500 text-white text-xs font-semibold rounded-lg flex items-center gap-1 hover:bg-red-600 transition-colors",children:[e.jsx(_,{className:"w-3 h-3"}),"Video"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-50 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs font-semibold rounded-lg",children:s.category}),e.jsx("span",{className:"px-3 py-1 bg-purple-50 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 text-xs font-semibold rounded-lg",children:s.licenseType}),s.tags&&s.tags.slice(0,3).map((t,i)=>e.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs font-semibold rounded-lg",children:t},i))]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>S(s),className:"px-6 py-2 bg-[#00ADB5] text-white font-semibold rounded-xl hover:bg-cyan-600 transition-colors flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"View Details"]}),s.status==="pending_verification"&&e.jsx(e.Fragment,{children:e.jsxs("button",{onClick:()=>le(s.id),disabled:D===s.id,className:"px-6 py-2 bg-green-500 text-white font-semibold rounded-xl hover:bg-green-600 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(h,{className:"w-5 h-5"}),D===s.id?"Processing...":"Approve"]})}),s.status==="published"&&e.jsxs("span",{className:"px-6 py-2 bg-green-100 text-green-700 font-semibold rounded-xl flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5"}),"Live on Marketplace"]}),s.status==="rejected"&&e.jsxs("span",{className:"px-6 py-2 bg-red-100 text-red-700 font-semibold rounded-xl flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Rejected"]})]})]})]})},s.id))]})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-6",children:"Review Marketplace Listing"}),a.images&&a.images.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2 block",children:"Project Images"}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2",children:a.images.map((s,t)=>e.jsx("img",{src:s,alt:`Preview ${t+1}`,className:"w-40 h-28 object-cover rounded-lg flex-shrink-0"},t))})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Title"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:a.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Description"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Category"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Price"}),e.jsxs("p",{className:"text-gray-900 dark:text-white flex items-center gap-1",children:[e.jsx(He,{className:"w-4 h-4"}),"$",a.price]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"License Type"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.licenseType})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Features"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.features?.map((s,t)=>e.jsx("span",{className:"px-2 py-1 bg-green-50 dark:bg-green-900/50 text-green-700 dark:text-green-300 text-xs rounded",children:s},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2 block",children:"Project Links"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.links?.github&&e.jsxs("a",{href:a.links.github,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-gray-900 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-gray-700 transition-colors",children:[e.jsx(ce,{className:"w-4 h-4"}),"GitHub Repository"]}),a.links?.liveDemo&&e.jsxs("a",{href:a.links.liveDemo,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-green-500 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-green-600 transition-colors",children:[e.jsx(_,{className:"w-4 h-4"}),"Live Demo"]}),a.links?.documentation&&e.jsxs("a",{href:a.links.documentation,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-blue-500 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-blue-600 transition-colors",children:[e.jsx(ie,{className:"w-4 h-4"}),"Documentation"]}),a.links?.video&&e.jsxs("a",{href:a.links.video,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-red-500 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-red-600 transition-colors",children:[e.jsx(_,{className:"w-4 h-4"}),"Video Preview"]}),!a.links?.github&&!a.links?.liveDemo&&!a.links?.documentation&&!a.links?.video&&e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No links provided"})]})]}),a.techStack&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Tech Stack"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.techStack.map((s,t)=>e.jsx("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs rounded",children:s},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Seller Information"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.sellerName||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2 block",children:"Rejection Reason (required if rejecting)"}),e.jsx("textarea",{value:$,onChange:s=>O(s.target.value),placeholder:"Explain why this listing is being rejected...",className:"w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl focus:border-[#00ADB5] focus:outline-none resize-none",rows:3})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>le(a.id),disabled:D===a.id,className:"flex-1 px-6 py-3 bg-green-500 text-white font-bold rounded-xl hover:bg-green-600 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(h,{className:"w-5 h-5"}),"Approve & Publish"]}),e.jsxs("button",{onClick:()=>Ie(a.id),disabled:D===a.id,className:"flex-1 px-6 py-3 bg-red-500 text-white font-bold rounded-xl hover:bg-red-600 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(B,{className:"w-5 h-5"}),"Reject"]}),e.jsx("button",{onClick:()=>{S(null),O("")},className:"px-6 py-3 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 font-bold rounded-xl hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-6",children:"Review Idea"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Title"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:l.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:l.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Category"}),e.jsx("p",{className:"text-gray-900",children:l.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Timeline"}),e.jsx("p",{className:"text-gray-900",children:l.expectedTimeline})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Submitted By"}),e.jsxs("p",{className:"text-gray-900",children:[l.userName," (",l.userEmail,")"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:["Feedback ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:x,onChange:s=>k(s.target.value),placeholder:"Provide feedback for the user...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-[#00ADB5] focus:outline-none resize-none",rows:4})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>Pe(l.id),className:"flex-1 px-6 py-3 bg-green-500 text-white font-bold rounded-xl hover:bg-green-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(h,{className:"w-5 h-5"}),"Approve"]}),e.jsxs("button",{onClick:()=>Se(l.id),className:"flex-1 px-6 py-3 bg-red-500 text-white font-bold rounded-xl hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),"Reject"]}),e.jsx("button",{onClick:()=>{w(null),k("")},className:"px-6 py-3 bg-gray-200 text-gray-700 font-bold rounded-xl hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})})}),ue&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(M,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Delete Project?"}),e.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete ",e.jsxs("span",{className:"font-semibold",children:['"',m?.title,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-red-600 mt-2",children:"This action cannot be undone. The project will be marked as deleted."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{T(!1),U(null)},disabled:g!==null,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-700 font-semibold rounded-xl hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:De,disabled:g!==null,className:"flex-1 px-4 py-3 bg-red-500 text-white font-semibold rounded-xl hover:bg-red-600 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})})}export{as as default};
